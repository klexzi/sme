function getRandomInt(e,a){return Math.floor(Math.random()*(a-e+1))+e}function cutHex(e){return"#"==e.charAt(0)?e.substring(1,7):e}function getStyle(e,a){var t="";return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(e,"").getPropertyValue(a):e.currentStyle&&(a=a.replace(/\-(\w)/g,function(e,a){return a.toUpperCase()}),t=e.currentStyle[a]),t}function onCreateElementNsReady(e){void 0!=document.createElementNS?e():setTimeout(function(){onCreateElementNsReady(e)},100)}function generateSlug(e){if(e){var a=/[!#\*\?();"']/gi,t=/([^a-zA-Z0-9_]+)/gi;e=jQuery.trim(e).toLowerCase().replace(a,"");var o=e.replace(t,"-");return o}}var timezone_list=[{timezone:'{"timezoneTitle":"GMT-12:00","timezoneId":"1","timezoneValue":"-12"}',label:"(GMT-12:00) International Date Line West"},{timezone:'{"timezoneTitle":"GMT-11:00","timezoneId":"2","timezoneValue":"-11"}',label:"(GMT-11:00) Midway Island, Samoa"},{timezone:'{"timezoneTitle":"GMT-10:00","timezoneId":"3","timezoneValue":"-10"}',label:"(GMT-10:00) Hawaii"},{timezone:'{"timezoneTitle":"GMT-09:00","timezoneId":"4","timezoneValue":"-9"}',label:"(GMT-09:00) Alaska"},{timezone:'{"timezoneTitle":"GMT-08:00","timezoneId":"5","timezoneValue":"-8"}',label:"(GMT-08:00) Pacific Time (US & Canada)"},{timezone:'{"timezoneTitle":"GMT-08:00","timezoneId":"6","timezoneValue":"-8"}',label:"(GMT-08:00) Tijuana, Baja California"},{timezone:'{"timezoneTitle":"GMT-07:00","timezoneId":"7","timezoneValue":"-7"}',label:"(GMT-07:00) Arizona"},{timezone:'{"timezoneTitle":"GMT-07:00","timezoneId":"8","timezoneValue":"-7"}',label:"(GMT-07:00) Chihuahua, La Paz, Mazatlan"},{timezone:'{"timezoneTitle":"GMT-07:00","timezoneId":"9","timezoneValue":"-7"}',label:"(GMT-07:00) Mountain Time (US & Canada)"},{timezone:'{"timezoneTitle":"GMT-06:00","timezoneId":"10","timezoneValue":"-6"}',label:"(GMT-06:00) Central America"},{timezone:'{"timezoneTitle":"GMT-06:00","timezoneId":"11","timezoneValue":"-6"}',label:"(GMT-06:00) Central Time (US & Canada)"},{timezone:'{"timezoneTitle":"GMT-06:00","timezoneId":"12","timezoneValue":"-6"}',label:"(GMT-06:00) Guadalajara, Mexico City, Monterrey"},{timezone:'{"timezoneTitle":"GMT-06:00","timezoneId":"13","timezoneValue":"-6"}',label:"(GMT-06:00) Saskatchewan"},{timezone:'{"timezoneTitle":"GMT-05:00","timezoneId":"14","timezoneValue":"-5"}',label:"(GMT-05:00) Bogota, Lima, Quito, Rio Branco"},{timezone:'{"timezoneTitle":"GMT-05:00","timezoneId":"15","timezoneValue":"-5"}',label:"(GMT-05:00) Eastern Time (US & Canada)"},{timezone:'{"timezoneTitle":"GMT-05:00","timezoneId":"16","timezoneValue":"-5"}',label:"(GMT-05:00) Indiana (East)"},{timezone:'{"timezoneTitle":"GMT-04:00","timezoneId":"17","timezoneValue":"-4"}',label:"(GMT-04:00) Atlantic Time (Canada)"},{timezone:'{"timezoneTitle":"GMT-04:00","timezoneId":"18","timezoneValue":"-4"}',label:"(GMT-04:00) Caracas, La Paz"},{timezone:'{"timezoneTitle":"GMT-04:00","timezoneId":"19","timezoneValue":"-4"}',label:"(GMT-04:00) Manaus"},{timezone:'{"timezoneTitle":"GMT-04:00","timezoneId":"20","timezoneValue":"-4"}',label:"(GMT-04:00) Santiago"},{timezone:'{"timezoneTitle":"GMT-03:30","timezoneId":"21","timezoneValue":"-3.5"}',label:"(GMT-03:30) Newfoundland"},{timezone:'{"timezoneTitle":"GMT-03:00","timezoneId":"22","timezoneValue":"-3"}',label:"(GMT-03:00) Brasilia"},{timezone:'{"timezoneTitle":"GMT-03:00","timezoneId":"23","timezoneValue":"-3"}',label:"(GMT-03:00) Buenos Aires, Georgetown"},{timezone:'{"timezoneTitle":"GMT-03:00","timezoneId":"24","timezoneValue":"-3"}',label:"(GMT-03:00) Greenland"},{timezone:'{"timezoneTitle":"GMT-03:00","timezoneId":"25","timezoneValue":"-3"}',label:"(GMT-03:00) Montevideo"},{timezone:'{"timezoneTitle":"GMT-02:00","timezoneId":"26","timezoneValue":"-2"}',label:"(GMT-02:00) Mid-Atlantic"},{timezone:'{"timezoneTitle":"GMT-01:00","timezoneId":"27","timezoneValue":"-1"}',label:"(GMT-01:00) Cape Verde Is."},{timezone:'{"timezoneTitle":"GMT-01:00","timezoneId":"28","timezoneValue":"-1"}',label:"(GMT-01:00) Azores"},{timezone:'{"timezoneTitle":"GMT+00:00","timezoneId":"29","timezoneValue":"0"}',label:"(GMT+00:00) Casablanca, Monrovia, Reykjavik"},{timezone:'{"timezoneTitle":"GMT+00:00","timezoneId":"30","timezoneValue":"0"}',label:"(GMT+00:00) Greenwich Mean Time : Dublin, Edinburgh, Lisbon, London"},{timezone:'{"timezoneTitle":"GMT+01:00","timezoneId":"31","timezoneValue":"1"}',label:"(GMT+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna"},{timezone:'{"timezoneTitle":"GMT+01:00","timezoneId":"32","timezoneValue":"1"}',label:"(GMT+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague"},{timezone:'{"timezoneTitle":"GMT+01:00","timezoneId":"33","timezoneValue":"1"}',label:"(GMT+01:00) Brussels, Copenhagen, Madrid, Paris"},{timezone:'{"timezoneTitle":"GMT+01:00","timezoneId":"34","timezoneValue":"1"}',label:"(GMT+01:00) Sarajevo, Skopje, Warsaw, Zagreb"},{timezone:'{"timezoneTitle":"GMT+01:00","timezoneId":"35","timezoneValue":"1"}',label:"(GMT+01:00) West Central Africa"},{timezone:'{"timezoneTitle":"GMT+02:00","timezoneId":"36","timezoneValue":"2"}',label:"(GMT+02:00) Amman"},{timezone:'{"timezoneTitle":"GMT+02:00","timezoneId":"37","timezoneValue":"2"}',label:"(GMT+02:00) Athens, Bucharest, Istanbul"},{timezone:'{"timezoneTitle":"GMT+02:00","timezoneId":"38","timezoneValue":"2"}',label:"(GMT+02:00) Beirut"},{timezone:'{"timezoneTitle":"GMT+02:00","timezoneId":"39","timezoneValue":"2"}',label:"(GMT+02:00) Cairo"},{timezone:'{"timezoneTitle":"GMT+02:00","timezoneId":"40","timezoneValue":"2"}',label:"(GMT+02:00) Harare, Pretoria"},{timezone:'{"timezoneTitle":"GMT+02:00","timezoneId":"41","timezoneValue":"2"}',label:"(GMT+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius"},{timezone:'{"timezoneTitle":"GMT+02:00","timezoneId":"42","timezoneValue":"2"}',label:"(GMT+02:00) Jerusalem"},{timezone:'{"timezoneTitle":"GMT+02:00","timezoneId":"43","timezoneValue":"2"}',label:"(GMT+02:00) Minsk"},{timezone:'{"timezoneTitle":"GMT+02:00","timezoneId":"44","timezoneValue":"2"}',label:"(GMT+02:00) Windhoek"},{timezone:'{"timezoneTitle":"GMT+03:00","timezoneId":"45","timezoneValue":"3"}',label:"(GMT+03:00) Kuwait, Riyadh, Baghdad"},{timezone:'{"timezoneTitle":"GMT+03:00","timezoneId":"46","timezoneValue":"3"}',label:"(GMT+03:00) Moscow, St. Petersburg, Volgograd"},{timezone:'{"timezoneTitle":"GMT+03:00","timezoneId":"47","timezoneValue":"3"}',label:"(GMT+03:00) Nairobi"},{timezone:'{"timezoneTitle":"GMT+03:00","timezoneId":"48","timezoneValue":"3"}',label:"(GMT+03:00) Tbilisi"},{timezone:'{"timezoneTitle":"GMT+03:30","timezoneId":"49","timezoneValue":"3.5"}',label:"(GMT+03:30) Tehran"},{timezone:'{"timezoneTitle":"GMT+04:00","timezoneId":"50","timezoneValue":"4"}',label:"(GMT+04:00) Abu Dhabi, Muscat"},{timezone:'{"timezoneTitle":"GMT+04:00","timezoneId":"51","timezoneValue":"4"}',label:"(GMT+04:00) Baku"},{timezone:'{"timezoneTitle":"GMT+04:00","timezoneId":"52","timezoneValue":"4"}',label:"(GMT+04:00) Yerevan"},{timezone:'{"timezoneTitle":"GMT+04:30","timezoneId":"53","timezoneValue":"4.5"}',label:"(GMT+04:30) Kabul"},{timezone:'{"timezoneTitle":"GMT+05:00","timezoneId":"54","timezoneValue":"5"}',label:"(GMT+05:00) Yekaterinburg"},{timezone:'{"timezoneTitle":"GMT+05:00","timezoneId":"55","timezoneValue":"5"}',label:"(GMT+05:00) Islamabad, Karachi, Tashkent"},{timezone:'{"timezoneTitle":"GMT+05:30","timezoneId":"56","timezoneValue":"5.5"}',label:"(GMT+05:30) Sri Jayawardenapura"},{timezone:'{"timezoneTitle":"GMT+05:30","timezoneId":"57","timezoneValue":"5.5"}',label:"(GMT+05:30) Chennai, Kolkata, Mumbai, New Delhi"},{timezone:'{"timezoneTitle":"GMT+05:45","timezoneId":"58","timezoneValue":"5.75"}',label:"(GMT+05:45) Kathmandu"},{timezone:'{"timezoneTitle":"GMT+06:00","timezoneId":"59","timezoneValue":"6"}',label:"(GMT+06:00) Almaty, Novosibirsk"},{timezone:'{"timezoneTitle":"GMT+06:00","timezoneId":"60","timezoneValue":"6"}',label:"(GMT+06:00) Astana, Dhaka"},{timezone:'{"timezoneTitle":"GMT+06:30","timezoneId":"61","timezoneValue":"6.5"}',label:"(GMT+06:30) Yangon (Rangoon)"},{timezone:'{"timezoneTitle":"GMT+07:00","timezoneId":"62","timezoneValue":"7"}',label:"(GMT+07:00) Bangkok, Hanoi, Jakarta"},{timezone:'{"timezoneTitle":"GMT+07:00","timezoneId":"63","timezoneValue":"7"}',label:"(GMT+07:00) Krasnoyarsk"},{timezone:'{"timezoneTitle":"GMT+08:00","timezoneId":"64","timezoneValue":"8"}',label:"(GMT+08:00) Beijing, Chongqing, Hong Kong, Urumqi"},{timezone:'{"timezoneTitle":"GMT+08:00","timezoneId":"65","timezoneValue":"8"}',label:"(GMT+08:00) Kuala Lumpur, Singapore"},{timezone:'{"timezoneTitle":"GMT+08:00","timezoneId":"66","timezoneValue":"8"}',label:"(GMT+08:00) Irkutsk, Ulaan Bataar"},{timezone:'{"timezoneTitle":"GMT+08:00","timezoneId":"67","timezoneValue":"8"}',label:"(GMT+08:00) Perth"},{timezone:'{"timezoneTitle":"GMT+08:00","timezoneId":"68","timezoneValue":"8"}',label:"(GMT+08:00) Taipei"},{timezone:'{"timezoneTitle":"GMT+09:00","timezoneId":"70","timezoneValue":"9"}',label:"(GMT+09:00) Seoul"},{timezone:'{"timezoneTitle":"GMT+09:00","timezoneId":"69","timezoneValue":"9"}',label:"(GMT+09:00) Osaka, Sapporo, Tokyo"},{timezone:'{"timezoneTitle":"GMT+09:00","timezoneId":"71","timezoneValue":"9"}',label:"(GMT+09:00) Yakutsk"},{timezone:'{"timezoneTitle":"GMT+09:30","timezoneId":"72","timezoneValue":"9.5"}',label:"(GMT+09:30) Adelaide"},{timezone:'{"timezoneTitle":"GMT+09:30","timezoneId":"73","timezoneValue":"9.5"}',label:"(GMT+09:30) Darwin"},{timezone:'{"timezoneTitle":"GMT+10:00","timezoneId":"74","timezoneValue":"10"}',label:"(GMT+10:00) Brisbane"},{timezone:'{"timezoneTitle":"GMT+10:00","timezoneId":"75","timezoneValue":"10"}',label:"(GMT+10:00) Canberra, Melbourne, Sydney"},{timezone:'{"timezoneTitle":"GMT+10:00","timezoneId":"76","timezoneValue":"10"}',label:"(GMT+10:00) Hobart"},{timezone:'{"timezoneTitle":"GMT+10:00","timezoneId":"77","timezoneValue":"10"}',label:"(GMT+10:00) Guam, Port Moresby"},{timezone:'{"timezoneTitle":"GMT+10:00","timezoneId":"78","timezoneValue":"10"}',label:"(GMT+10:00) Vladivostok"},{timezone:'{"timezoneTitle":"GMT+11:00","timezoneId":"79","timezoneValue":"11"}',label:"(GMT+11:00) Magadan, Solomon Is., New Caledonia"},{timezone:'{"timezoneTitle":"GMT+12:00","timezoneId":"80","timezoneValue":"12"}',label:"(GMT+12:00) Auckland, Wellington"},{timezone:'{"timezoneTitle":"GMT+12:00","timezoneId":"81","timezoneValue":"12"}',label:"(GMT+12:00) Fiji, Kamchatka, Marshall Is."},{timezone:'{"timezoneTitle":"GMT+13:00","timezoneId":"82","timezoneValue":"13"}',label:"(GMT+13:00) Nuku'alofa"}],country_list_english=[{display:"China",code:"CN"},{display:"Hong Kong",code:"HK"},{display:"Indonesia",code:"ID"},{display:"Macao",code:"MO"},{display:"Malaysia",code:"MY"},{display:"Philippines",code:"PH"},{display:"Singapore",code:"SG"},{display:"Taiwan, Province Of China",code:"TW"},{display:"Thailand",code:"TH"},{display:"Viet Nam",code:"VN"},{display:"Afghanistan",code:"AF"},{display:"Aland Islands",code:"AX"},{display:"Albania",code:"AL"},{display:"Algeria",code:"DZ"},{display:"American Samoa",code:"AS"},{display:"Andorra",code:"AD"},{display:"Angola",code:"AO"},{display:"Anguilla",code:"AI"},{display:"Antarctica",code:"AQ"},{display:"Antigua And Barbuda",code:"AG"},{display:"Argentina",code:"AR"},{display:"Armenia",code:"AM"},{display:"Aruba",code:"AW"},{display:"Australia",code:"AU"},{display:"Austria",code:"AT"},{display:"Azerbaijan",code:"AZ"},{display:"Bahamas",code:"BS"},{display:"Bahrain",code:"BH"},{display:"Bangladesh",code:"BD"},{display:"Barbados",code:"BB"},{display:"Belarus",code:"BY"},{display:"Belgium",code:"BE"},{display:"Belize",code:"BZ"},{display:"Benin",code:"BJ"},{display:"Bermuda",code:"BM"},{display:"Bhutan",code:"BT"},{display:"Bolivia, Plurinational State Of",code:"BO"},{display:"Bonaire, Sint Eustatius And Saba",code:"BQ"},{display:"Bosnia And Herzegovina",code:"BA"},{display:"Botswana",code:"BW"},{display:"Bouvet Island",code:"BV"},{display:"Brazil",code:"BR"},{display:"British Indian Ocean Territory",code:"IO"},{display:"Brunei Darussalam",code:"BN"},{display:"Bulgaria",code:"BG"},{display:"Burkina Faso",code:"BF"},{display:"Burundi",code:"BI"},{display:"Cambodia",code:"KH"},{display:"Cameroon",code:"CM"},{display:"Canada",code:"CA"},{display:"Cape Verde",code:"CV"},{display:"Cayman Islands",code:"KY"},{display:"Central African Republic",code:"CF"},{display:"Chad",code:"TD"},{display:"Chile",code:"CL"},{display:"Christmas Island",code:"CX"},{display:"Cocos (keeling) Islands",code:"CC"},{display:"Colombia",code:"CO"},{display:"Comoros",code:"KM"},{display:"Congo",code:"CG"},{display:"Congo, The Democratic Republic Of The",code:"CD"},{display:"Cook Islands",code:"CK"},{display:"Costa Rica",code:"CR"},{display:"Côte d’Ivoire",code:"CI"},{display:"Croatia",code:"HR"},{display:"Cuba",code:"CU"},{display:"Curaçao",code:"CW"},{display:"Cyprus",code:"CY"},{display:"Czech Republic",code:"CZ"},{display:"Denmark",code:"DK"},{display:"Djibouti",code:"DJ"},{display:"Dominica",code:"DM"},{display:"Dominican Republic",code:"DO"},{display:"Ecuador",code:"EC"},{display:"Egypt",code:"EG"},{display:"El Salvador",code:"SV"},{display:"Equatorial Guinea",code:"GQ"},{display:"Eritrea",code:"ER"},{display:"Estonia",code:"EE"},{display:"Ethiopia",code:"ET"},{display:"Falkland Islands (malvinas)",code:"FK"},{display:"Faroe Islands",code:"FO"},{display:"Fiji",code:"FJ"},{display:"Finland",code:"FI"},{display:"France",code:"FR"},{display:"French Guiana",code:"GF"},{display:"French Polynesia",code:"PF"},{display:"French Southern Territories",code:"TF"},{display:"Gabon",code:"GA"},{display:"Gambia",code:"GM"},{display:"Georgia",code:"GE"},{display:"Germany",code:"DE"},{display:"Ghana",code:"GH"},{display:"Gibraltar",code:"GI"},{display:"Greece",code:"GR"},{display:"Greenland",code:"GL"},{display:"Grenada",code:"GD"},{display:"Guadeloupe",code:"GP"},{display:"Guam",code:"GU"},{display:"Guatemala",code:"GT"},{display:"Guernsey",code:"GG"},{display:"Guinea",code:"GN"},{display:"Guinea-bissau",code:"GW"},{display:"Guyana",code:"GY"},{display:"Haiti",code:"HT"},{display:"Heard Island And Mcdonald Islands",code:"HM"},{display:"Holy See (vatican City State)",code:"VA"},{display:"Honduras",code:"HN"},{display:"Hungary",code:"HU"},{display:"Iceland",code:"IS"},{display:"India",code:"IN"},{display:"Iran, Islamic Republic Of",code:"IR"},{display:"Iraq",code:"IQ"},{display:"Ireland",code:"IE"},{display:"Isle Of Man",code:"IM"},{display:"Israel",code:"IL"},{display:"Italy",code:"IT"},{display:"Jamaica",code:"JM"},{display:"Japan",code:"JP"},{display:"Jersey",code:"JE"},{display:"Jordan",code:"JO"},{display:"Kazakhstan",code:"KZ"},{display:"Kenya",code:"KE"},{display:"Kiribati",code:"KI"},{display:"Korea, Democratic People's Republic Of",code:"KP"},{display:"Korea, Republic Of",code:"KR"},{display:"Kuwait",code:"KW"},{display:"Kyrgyzstan",code:"KG"},{display:"Lao People's Democratic Republic",code:"LA"},{display:"Latvia",code:"LV"},{display:"Lebanon",code:"LB"},{display:"Lesotho",code:"LS"},{display:"Liberia",code:"LR"},{display:"Libya",code:"LY"},{display:"Liechtenstein",code:"LI"},{display:"Lithuania",code:"LT"},{display:"Luxembourg",code:"LU"},{display:"Macedonia, The Former Yugoslav Republic Of",code:"MK"},{display:"Madagascar",code:"MG"},{display:"Malawi",code:"MW"},{display:"Maldives",code:"MV"},{display:"Mali",code:"ML"},{display:"Malta",code:"MT"},{display:"Marshall Islands",code:"MH"},{display:"Martinique",code:"MQ"},{display:"Mauritania",code:"MR"},{display:"Mauritius",code:"MU"},{display:"Mayotte",code:"YT"},{display:"Mexico",code:"MX"},{display:"Micronesia, Federated States Of",code:"FM"},{display:"Moldova, Republic Of",code:"MD"},{display:"Monaco",code:"MC"},{display:"Mongolia",code:"MN"},{display:"Montenegro",code:"ME"},{display:"Montserrat",code:"MS"},{display:"Morocco",code:"MA"},{display:"Mozambique",code:"MZ"},{display:"Myanmar",code:"MM"},{display:"Namibia",code:"NA"},{display:"Nauru",code:"NR"},{display:"Nepal",code:"NP"},{display:"Netherlands",code:"NL"},{display:"New Caledonia",code:"NC"},{display:"New Zealand",code:"NZ"},{display:"Nicaragua",code:"NI"},{display:"Niger",code:"NE"},{display:"Nigeria",code:"NG"},{display:"Niue",code:"NU"},{display:"Norfolk Island",code:"NF"},{display:"Northern Mariana Islands",code:"MP"},{display:"Norway",code:"NO"},{display:"Oman",code:"OM"},{display:"Pakistan",code:"PK"},{display:"Palau",code:"PW"},{display:"Palestine, State Of",code:"PS"},{display:"Panama",code:"PA"},{display:"Papua New Guinea",code:"PG"},{display:"Paraguay",code:"PY"},{display:"Peru",code:"PE"},{display:"Pitcairn",code:"PN"},{display:"Poland",code:"PL"},{display:"Portugal",code:"PT"},{display:"Puerto Rico",code:"PR"},{display:"Qatar",code:"QA"},{display:"Réunion",code:"RE"},{display:"Romania",code:"RO"},{display:"Russian Federation",code:"RU"},{display:"Rwanda",code:"RW"},{display:"Saint Barthélemy",code:"BL"},{display:"Saint Helena, Ascension And Tristan Da Cunha",code:"SH"},{display:"Saint Kitts And Nevis",code:"KN"},{display:"Saint Lucia",code:"LC"},{display:"Saint Martin (french Part)",code:"MF"},{display:"Saint Pierre And Miquelon",code:"PM"},{display:"Saint Vincent And The Grenadines",code:"VC"},{display:"Samoa",code:"WS"},{display:"San Marino",code:"SM"},{display:"Sao Tome And Principe",code:"ST"},{display:"Saudi Arabia",code:"SA"},{display:"Senegal",code:"SN"},{display:"Serbia",code:"RS"},{display:"Seychelles",code:"SC"},{display:"Sierra Leone",code:"SL"},{display:"Sint Maarten (dutch Part)",code:"SX"},{display:"Slovakia",code:"SK"},{display:"Slovenia",code:"SI"},{display:"Solomon Islands",code:"SB"},{display:"Somalia",code:"SO"},{display:"South Africa",code:"ZA"},{display:"South Georgia And The South Sandwich Islands",code:"GS"},{display:"South Sudan",code:"SS"},{display:"Spain",code:"ES"},{display:"Sri Lanka",code:"LK"},{display:"Sudan",code:"SD"},{display:"Suriname",code:"SR"},{display:"Svalbard And Jan Mayen",code:"SJ"},{display:"Swaziland",code:"SZ"},{display:"Sweden",code:"SE"},{display:"Switzerland",code:"CH"},{display:"Syrian Arab Republic",code:"SY"},{display:"Tajikistan",code:"TJ"},{display:"Tanzania, United Republic Of",code:"TZ"},{display:"Timor-leste",code:"TL"},{display:"Togo",code:"TG"},{display:"Tokelau",code:"TK"},{display:"Tonga",code:"TO"},{display:"Trinidad And Tobago",code:"TT"},{display:"Tunisia",code:"TN"},{display:"Turkey",code:"TR"},{display:"Turkmenistan",code:"TM"},{display:"Turks And Caicos Islands",code:"TC"},{display:"Tuvalu",code:"TV"},{display:"Uganda",code:"UG"},{display:"Ukraine",code:"UA"},{display:"United Arab Emirates",code:"AE"},{display:"United Kingdom",code:"GB"},{display:"United States",code:"US"},{display:"United States Minor Outlying Islands",code:"UM"},{display:"Uruguay",code:"UY"},{display:"Uzbekistan",code:"UZ"},{display:"Vanuatu",code:"VU"},{display:"Venezuela, Bolivarian Republic Of",code:"VE"},{display:"Virgin Islands, British",code:"VG"},{display:"Virgin Islands, U.s.",code:"VI"},{display:"Wallis And Futuna",code:"WF"},{display:"Western Sahara",code:"EH"},{display:"Yemen",code:"YE"},{display:"Zambia",code:"ZM"},{display:"Zimbabwe",code:"ZW"}],country_list_chinese=[{display:"中国",code:"CN"},{display:"香港",code:"HK"},{display:"印尼",code:"ID"},{display:"澳门",code:"MO"},{display:"马来西亚",code:"MY"},{display:"菲律宾",code:"PH"},{display:"新加坡",code:"SG"},{display:"中国台湾省",code:"TW"},{display:"泰国",code:"TH"},{display:"越南",code:"VN"},{display:"阿富汗",code:"AF"},{display:"奥兰群岛",code:"AX"},{display:"阿尔巴尼亚",code:"AL"},{display:"阿尔及利亚",code:"DZ"},{display:"美国萨摩亚",code:"AS"},{display:"安道尔",code:"AD"},{display:"安哥拉",code:"AO"},{display:"安圭拉",code:"AI"},{display:"南极洲",code:"AQ"},{display:"安提瓜和巴布达",code:"AG"},{display:"阿根廷",code:"AR"},{display:"亚美尼亚",code:"AM"},{display:"阿鲁巴",code:"AW"},{display:"澳大利亚",code:"AU"},{display:"奥地利",code:"AT"},{display:"阿塞拜疆",code:"AZ"},{display:"巴哈马",code:"BS"},{display:"巴林",code:"BH"},{display:"孟加拉国",code:"BD"},{display:"巴巴多斯",code:"BB"},{display:"白俄罗斯",code:"BY"},{display:"比利时",code:"BE"},{display:"伯利兹",code:"BZ"},{display:"贝宁",code:"BJ"},{display:"百慕大",code:"BM"},{display:"不丹",code:"BT"},{display:"玻利维亚多民族国",code:"BO"},{display:"博内尔，圣尤斯特歇斯和萨巴",code:"BQ"},{display:"波斯尼亚和黑塞哥维那",code:"BA"},{display:"博茨瓦纳",code:"BW"},{display:"布维岛",code:"BV"},{display:"巴西",code:"BR"},{display:"英属印度洋领地",code:"IO"},{display:"文莱达鲁萨兰国",code:"BN"},{display:"保加利亚",code:"BG"},{display:"布基纳法索",code:"BF"},{display:"布隆迪",code:"BI"},{display:"柬埔寨",code:"KH"},{display:"喀麦隆",code:"CM"},{display:"加拿大",code:"CA"},{display:"佛得角",code:"CV"},{display:"开曼群岛",code:"KY"},{display:"中非共和国",code:"CF"},{display:"乍得",code:"TD"},{display:"智利",code:"CL"},{display:"圣诞岛",code:"CX"},{display:"科科斯群岛",code:"CC"},{display:"哥伦比亚",code:"CO"},{display:"科摩罗",code:"KM"},{display:"刚果",code:"CG"},{display:"刚果",code:"CD"},{display:"库克群岛",code:"CK"},{display:"哥斯达黎加",code:"CR"},{display:"科特迪瓦",code:"CI"},{display:"克罗地亚",code:"HR"},{display:"古巴",code:"CU"},{display:"库拉索敖",code:"CW"},{display:"塞浦路斯",code:"CY"},{display:"捷克共和国",code:"CZ"},{display:"丹麦",code:"DK"},{display:"吉布提",code:"DJ"},{display:"多米尼加",code:"DM"},{display:"多明尼加共和国",code:"DO"},{display:"厄瓜多尔",code:"EC"},{display:"埃及",code:"EG"},{display:"萨尔瓦多",code:"SV"},{display:"赤道几内亚",code:"GQ"},{display:"厄立特里亚",code:"ER"},{display:"爱沙尼亚",code:"EE"},{display:"埃塞俄比亚",code:"ET"},{display:"福克兰群岛（马尔维纳斯群岛）",code:"FK"},{display:"法罗群岛",code:"FO"},{display:"斐",code:"FJ"},{display:"芬兰",code:"FI"},{display:"法国",code:"FR"},{display:"法属圭亚那",code:"GF"},{display:"法属波利尼西亚",code:"PF"},{display:"法国南部领土",code:"TF"},{display:"加蓬",code:"GA"},{display:"冈比亚",code:"GM"},{display:"格鲁吉亚",code:"GE"},{display:"德国",code:"DE"},{display:"加纳",code:"GH"},{display:"直布罗陀",code:"GI"},{display:"希腊",code:"GR"},{display:"格陵兰",code:"GL"},{display:"格林纳达",code:"GD"},{display:"瓜德罗普岛",code:"GP"},{display:"关岛",code:"GU"},{display:"危地马拉",code:"GT"},{display:"根西岛",code:"GG"},{display:"几内亚",code:"GN"},{display:"几内亚比绍",code:"GW"},{display:"圭亚那",code:"GY"},{display:"海地",code:"HT"},{display:"赫德岛和麦克唐纳群岛",code:"HM"},{display:"教廷（梵蒂冈州）",code:"VA"},{display:"洪都拉斯",code:"HN"},{display:"匈牙利",code:"HU"},{display:"冰岛",code:"IS"},{display:"印度",code:"IN"},{display:"伊朗伊斯兰共和国",code:"IR"},{display:"伊拉克",code:"IQ"},{display:"爱尔兰",code:"IE"},{display:"马恩岛",code:"IM"},{display:"以色列",code:"IL"},{display:"意大利",code:"IT"},{display:"牙买加",code:"JM"},{display:"日本",code:"JP"},{display:"新泽西州",code:"JE"},{display:"约旦",code:"JO"},{display:"哈萨克斯坦",code:"KZ"},{display:"肯尼亚",code:"KE"},{display:"基里巴斯",code:"KI"},{display:"朝鲜",code:"KP"},{display:"韩国",code:"KR"},{display:"科威特",code:"KW"},{display:"吉尔吉斯斯坦",code:"KG"},{display:"老挝",code:"LA"},{display:"拉脱维亚",code:"LV"},{display:"黎巴嫩",code:"LB"},{display:"莱索托",code:"LS"},{display:"利比里亚",code:"LR"},{display:"利比亚",code:"LY"},{display:"列支敦士登",code:"LI"},{display:"立陶宛",code:"LT"},{display:"卢森堡",code:"LU"},{display:"马其顿",code:"MK"},{display:"马达加斯加",code:"MG"},{display:"马拉维",code:"MW"},{display:"马尔代夫",code:"MV"},{display:"马里",code:"ML"},{display:"马耳他",code:"MT"},{display:"马绍尔群岛",code:"MH"},{display:"马提尼克",code:"MQ"},{display:"毛里塔尼亚",code:"MR"},{display:"毛里求斯",code:"MU"},{display:"马约特岛",code:"YT"},{display:"墨西哥",code:"MX"},{display:"密克罗尼西亚联邦",code:"FM"},{display:"摩尔多瓦共和国",code:"MD"},{display:"摩纳哥",code:"MC"},{display:"蒙古",code:"MN"},{display:"黑山",code:"ME"},{display:"蒙特塞拉特",code:"MS"},{display:"摩洛哥",code:"MA"},{display:"莫桑比克",code:"MZ"},{display:"缅甸",code:"MM"},{display:"纳米比亚",code:"NA"},{display:"瑙鲁",code:"NR"},{display:"尼泊尔",code:"NP"},{display:"荷兰",code:"NL"},{display:"新喀里多尼亚",code:"NC"},{display:"新西兰",code:"NZ"},{display:"尼加拉瓜",code:"NI"},{display:"尼日尔",code:"NE"},{display:"尼日利亚",code:"NG"},{display:"纽埃",code:"NU"},{display:"诺福克岛",code:"NF"},{display:"北马里亚纳群岛",code:"MP"},{display:"挪威",code:"NO"},{display:"阿曼",code:"OM"},{display:"巴基斯坦",code:"PK"},{display:"帕劳",code:"PW"},{display:"巴勒斯坦国",code:"PS"},{display:"巴拿马",code:"PA"},{display:"巴布亚新几内亚",code:"PG"},{display:"巴拉圭",code:"PY"},{display:"秘鲁",code:"PE"},{display:"皮特凯恩",code:"PN"},{display:"波兰",code:"PL"},{display:"葡萄牙",code:"PT"},{display:"波多黎各",code:"PR"},{display:"卡塔尔",code:"QA"},{display:"留尼旺",code:"RE"},{display:"罗马尼亚",code:"RO"},{display:"俄罗斯联邦",code:"RU"},{display:"卢旺达",code:"RW"},{display:"圣巴泰勒米岛",code:"BL"},{display:"圣赫勒拿岛，阿森松岛和特里斯坦达库尼亚",code:"SH"},{display:"圣基茨和尼维斯",code:"KN"},{display:"圣卢西亚",code:"LC"},{display:"圣马丁（法国部分）",code:"MF"},{display:"圣皮埃尔和密克隆岛",code:"PM"},{display:"圣文森特和格林纳丁斯",code:"VC"},{display:"萨摩亚",code:"WS"},{display:"圣马力诺",code:"SM"},{display:"圣多美与普林西比",code:"ST"},{display:"沙特阿拉伯",code:"SA"},{display:"塞内加尔",code:"SN"},{display:"塞尔维亚",code:"RS"},{display:"塞舌尔",code:"SC"},{display:"塞拉利昂",code:"SL"},{display:"圣马丁",code:"SX"},{display:"斯洛伐克",code:"SK"},{display:"斯洛文尼亚",code:"SI"},{display:"所罗门群岛",code:"SB"},{display:"索马里",code:"SO"},{display:"南非",code:"ZA"},{display:"南乔治亚岛和南桑威奇群岛",code:"GS"},{display:"南苏丹",code:"SS"},{display:"西班牙",code:"ES"},{display:"斯里兰卡",code:"LK"},{display:"苏丹",code:"SD"},{display:"苏里南",code:"SR"},{display:"斯瓦尔巴群岛和扬马延岛",code:"SJ"},{display:"斯威士兰",code:"SZ"},{display:"瑞典",code:"SE"},{display:"瑞士",code:"CH"},{display:"阿拉伯叙利亚共和国",code:"SY"},{display:"塔吉克斯坦",code:"TJ"},{display:"坦桑尼亚",code:"TZ"},{display:"东帝汶",code:"TL"},{display:"多哥",code:"TG"},{display:"托克劳",code:"TK"},{display:"汤加",code:"TO"},{display:"特立尼达和多巴哥",code:"TT"},{display:"突尼斯",code:"TN"},{display:"土耳其",code:"TR"},{display:"土库曼斯坦",code:"TM"},{display:"特克斯和凯科斯群岛",code:"TC"},{display:"图瓦卢",code:"TV"},{display:"乌干达",code:"UG"},{display:"乌克兰",code:"UA"},{display:"阿拉伯",code:"AE"},{display:"英国",code:"GB"},{display:"美国",code:"US"},{display:"美国本土外小岛屿",code:"UM"},{display:"乌拉圭",code:"UY"},{display:"乌兹别克斯坦",code:"UZ"},{display:"瓦努阿图",code:"VU"},{display:"委内瑞拉玻利瓦尔共和国",code:"VE"},{display:"英属维京群岛",code:"VG"},{display:"美属维京群岛，",code:"VI"},{display:"瓦利斯群岛和富图纳群岛",code:"WF"},{display:"西撒哈拉",code:"EH"},{display:"也门",code:"YE"},{display:"赞比亚",code:"ZM"},{display:"津巴布韦",code:"ZW"}],COLLECTION_TYPE_SHORTCUT={5:"",8:"",12:"",1:"wall",9:"guides",10:"downloads",11:"",13:"events",14:"media",16:"documents",19:"",20:"",products:"products"},state_list_english={VU:[{name:"Malampa",code:"MAP"},{name:"Pénama",code:"PAM"},{name:"Sanma",code:"SAM"},{name:"Shéfa",code:"SEE"},{name:"Taféa",code:"TAE"},{name:"Torba",code:"TOB"}],EC:[{name:"Azuay",code:"A"},{name:"Bolívar",code:"B"},{name:"Carchi",code:"C"},{name:"Orellana",code:"D"},{name:"Esmeraldas",code:"E"},{name:"Cañar",code:"F"},{name:"Guayas",code:"G"},{name:"Chimborazo",code:"H"},{name:"Imbabura",code:"I"},{name:"Loja",code:"L"},{name:"Manabí",code:"M"},{name:"Napo",code:"N"},{name:"El Oro",code:"O"},{name:"Pichincha",code:"P"},{name:"Los Ríos",code:"R"},{name:"Morona-Santiago",code:"S"},{name:"Santo Domingo de los Tsáchilas",code:"SD"},{name:"Santa Elena",code:"SE"},{name:"Tungurahua",code:"T"},{name:"Sucumbíos",code:"U"},{name:"Galápagos",code:"W"},{name:"Cotopaxi",code:"X"},{name:"Pastaza",code:"Y"},{name:"Zamora-Chinchipe",code:"Z"}],VN:[{name:"Lai Chau",code:"01"},{name:"Lao Cai",code:"02"},{name:"Ha Giang",code:"03"},{name:"Cao Bang",code:"04"},{name:"Son La",code:"05"},{name:"Yen Bai",code:"06"},{name:"Tuyen Quang",code:"07"},{name:"Lang Son",code:"09"},{name:"Quang Ninh",code:"13"},{name:"Hoa Binh",code:"14"},{name:"Ha Tay",code:"15"},{name:"Ninh Binh",code:"18"},{name:"Thai Binh",code:"20"},{name:"Thanh Hoa",code:"21"},{name:"Nghe An",code:"22"},{name:"Ha Tinh",code:"23"},{name:"Quang Binh",code:"24"},{name:"Quang Tri",code:"25"},{name:"Thua Thien-Hue",code:"26"},{name:"Quang Nam",code:"27"},{name:"Kon Tum",code:"28"},{name:"Quang Ngai",code:"29"},{name:"Gia Lai",code:"30"},{name:"Binh Dinh",code:"31"},{name:"Phu Yen",code:"32"},{name:"Dak Lak",code:"33"},{name:"Khanh Hoa",code:"34"},{name:"Lam Dong",code:"35"},{name:"Ninh Thuan",code:"36"},{name:"Tay Ninh",code:"37"},{name:"Dong Nai",code:"39"},{name:"Binh Thuan",code:"40"},{name:"Long An",code:"41"},{name:"Ba Ria-Vung Tau",code:"43"},{name:"An Giang",code:"44"},{name:"Dong Thap",code:"45"},{name:"Tien Giang",code:"46"},{name:"Kien Giang",code:"47"},{name:"Vinh Long",code:"49"},{name:"Ben Tre",code:"50"},{name:"Tra Vinh",code:"51"},{name:"Soc Trang",code:"52"},{name:"Bac Kan",code:"53"},{name:"Bac Giang",code:"54"},{name:"Bac Lieu",code:"55"},{name:"Bac Ninh",code:"56"},{name:"Binh Duong",code:"57"},{name:"Binh Phuoc",code:"58"},{name:"Ca Mau",code:"59"},{name:"Hai Duong",code:"61"},{name:"Ha Nam",code:"63"},{name:"Hung Yen",code:"66"},{name:"Nam Dinh",code:"67"},{name:"Phu Tho",code:"68"},{name:"Thai Nguyen",code:"69"},{name:"Vinh Phuc",code:"70"},{name:"Dien Bien",code:"71"},{name:"Dak Nong",code:"72"},{name:"Hau Giang",code:"73"},{name:"Can Tho",code:"CT"},{name:"Da Nang, thanh pho",code:"DN"},{name:"Ha Noi",code:"HN"},{name:"Hai Phong",code:"HP"},{name:"Ho Chi Minh",code:"SG"}],DZ:[{name:"Adrar",code:"01"},{name:"Chlef",code:"02"},{name:"Laghouat",code:"03"},{name:"Oum el Bouaghi",code:"04"},{name:"Batna",code:"05"},{name:"Béjaïa",code:"06"},{name:"Biskra",code:"07"},{name:"Béchar",code:"08"},{name:"Blida",code:"09"},{name:"Bouira",code:"10"},{name:"Tamanghasset",code:"11"},{name:"Tébessa",code:"12"},{name:"Tlemcen",code:"13"},{name:"Tiaret",code:"14"},{name:"Tizi Ouzou",code:"15"},{name:"Alger",code:"16"},{name:"Djelfa",code:"17"},{name:"Jijel",code:"18"},{name:"Sétif",code:"19"},{name:"Saïda",code:"20"},{name:"Skikda",code:"21"},{name:"Sidi Bel Abbès",code:"22"},{name:"Annaba",code:"23"},{name:"Guelma",code:"24"},{name:"Constantine",code:"25"},{name:"Médéa",code:"26"},{name:"Mostaganem",code:"27"},{name:"Msila",code:"28"},{name:"Mascara",code:"29"},{name:"Ouargla",code:"30"},{name:"Oran",code:"31"},{name:"El Bayadh",code:"32"},{name:"Illizi",code:"33"},{name:"Bordj Bou Arréridj",code:"34"},{name:"Boumerdès",code:"35"},{name:"El Tarf",code:"36"},{name:"Tindouf",code:"37"},{name:"Tissemsilt",code:"38"},{name:"El Oued",code:"39"},{name:"Khenchela",code:"40"},{name:"Souk Ahras",code:"41"},{name:"Tipaza",code:"42"},{name:"Mila",code:"43"},{name:"Aïn Defla",code:"44"},{name:"Naama",code:"45"},{name:"Aïn Témouchent",code:"46"},{name:"Ghardaïa",code:"47"},{name:"Relizane",code:"48"}],DM:[{name:"Saint Andrew",code:"02"},{name:"Saint David",code:"03"},{name:"Saint George",code:"04"},{name:"Saint John",code:"05"},{name:"Saint Joseph",code:"06"},{name:"Saint Luke",code:"07"},{name:"Saint Mark",code:"08"},{name:"Saint Patrick",code:"09"},{name:"Saint Paul",code:"10"},{name:"Saint Peter",code:"11"}],VE:[{name:"Distrito Capital",code:"A"},{name:"Anzoátegui",code:"B"},{name:"Apure",code:"C"},{name:"Aragua",code:"D"},{name:"Barinas",code:"E"},{name:"Bolívar",code:"F"},{name:"Carabobo",code:"G"},{name:"Cojedes",code:"H"},{name:"Falcón",code:"I"},{name:"Guárico",code:"J"},{name:"Lara",code:"K"},{name:"Mérida",code:"L"},{name:"Miranda",code:"M"},{name:"Monagas",code:"N"},{name:"Nueva Esparta",code:"O"},{name:"Portuguesa",code:"P"},{name:"Sucre",code:"R"},{name:"Táchira",code:"S"},{name:"Trujillo",code:"T"},{name:"Yaracuy",code:"U"},{name:"Zulia",code:"V"},{name:"Dependencias Federales",code:"W"},{name:"vargas",code:"X"},{name:"Delta Amacuro",code:"Y"},{name:"Amazonas",code:"Z"}],DO:[{name:"Distrito Nacional (Santo Domingo)",code:"01"},{name:"Azua",code:"02"},{name:"Bahoruco",code:"03"},{name:"Barahona",code:"04"},{name:"Dajabón",code:"05"},{name:"Duarte",code:"06"},{name:"La Estrelleta [Elías Piña]",code:"07"},{name:"El Seybo [El Seibo]",code:"08"},{name:"Espaillat",code:"09"},{name:"Independencia",code:"10"},{name:"La Altagracia",code:"11"},{name:"La Romana",code:"12"},{name:"La Vega",code:"13"},{name:"María Trinidad Sánchez",code:"14"},{name:"Monte Cristi",code:"15"},{name:"Pedernales",code:"16"},{name:"Peravia",code:"17"},{name:"Puerto Plata",code:"18"},{name:"Salcedo",code:"19"},{name:"Samaná",code:"20"},{name:"San Cristóbal",code:"21"},{name:"San Juan",code:"22"},{name:"San Pedro de Macorís",code:"23"},{name:"Sánchez Ramírez",code:"24"},{name:"Santiago",code:"25"},{name:"Santiago Rodríguez",code:"26"},{name:"Valverde",code:"27"},{name:"Monseñor Nouel",
code:"28"},{name:"Monte Plata",code:"29"},{name:"Hato Mayor",code:"30"},{name:"San José de Ocoa",code:"31"},{name:"Santo Domingo",code:"32"}],VC:[{name:"Charlotte",code:"01"},{name:"Saint Andrew",code:"02"},{name:"Saint David",code:"03"},{name:"Saint George",code:"04"},{name:"Saint Patrick",code:"05"},{name:"Grenadines",code:"06"}],DE:[{name:"Brandenburg",code:"BB"},{name:"Berlin",code:"BE"},{name:"Baden-Württemberg",code:"BW"},{name:"Bayern",code:"BY"},{name:"Bremen",code:"HB"},{name:"Hessen",code:"HE"},{name:"Hamburg",code:"HH"},{name:"Mecklenburg-Vorpommern",code:"MV"},{name:"Niedersachsen",code:"NI"},{name:"Nordrhein-Westfalen",code:"NW"},{name:"Rheinland-Pfalz",code:"RP"},{name:"Schleswig-Holstein",code:"SH"},{name:"Saarland",code:"SL"},{name:"Sachsen",code:"SN"},{name:"Sachsen-Anhalt",code:"ST"},{name:"Thüringen",code:"TH"}],UZ:[{name:"Andijon",code:"AN"},{name:"Bukhoro",code:"BU"},{name:"Farg‘ona",code:"FA"},{name:"Jizzax",code:"JI"},{name:"Khorazm",code:"KH"},{name:"Namangan",code:"NG"},{name:"Nawoiy",code:"NW"},{name:"Qashqadaryo",code:"QA"},{name:"Qoraqalpog‘iston Respublikasi",code:"QR"},{name:"Samarqand",code:"SA"},{name:"Sirdaryo",code:"SI"},{name:"Surkhondaryo",code:"SU"},{name:"Toshkent",code:"TK"},{name:"Toshkent",code:"TO"},{name:"Xorazm",code:"XO"}],UY:[{name:"Artigas",code:"AR"},{name:"Canelones",code:"CA"},{name:"Cerro Largo",code:"CL"},{name:"Colonia",code:"CO"},{name:"Durazno",code:"DU"},{name:"Florida",code:"FD"},{name:"Flores",code:"FS"},{name:"Lavalleja",code:"LA"},{name:"Maldonado",code:"MA"},{name:"Montevideo",code:"MO"},{name:"Paysandú",code:"PA"},{name:"Río Negro",code:"RN"},{name:"Rocha",code:"RO"},{name:"Rivera",code:"RV"},{name:"Salto",code:"SA"},{name:"San José",code:"SJ"},{name:"Soriano",code:"SO"},{name:"Tacuarembó",code:"TA"},{name:"Treinta y Tres",code:"TT"}],DK:[{name:"Nordjylland",code:"81"},{name:"Midtjylland",code:"82"},{name:"Syddanmark",code:"83"},{name:"Hovedstaden",code:"84"},{name:"Sjælland",code:"85"}],DJ:[{name:"Arta",code:"AR"},{name:"Ali Sabieh",code:"AS"},{name:"Dikhil",code:"DI"},{name:"Djibouti",code:"DJ"},{name:"Obock",code:"OB"},{name:"Tadjourah",code:"TA"}],US:[{name:"Alaska",code:"AK"},{name:"Alabama",code:"AL"},{name:"Arkansas",code:"AR"},{name:"American Samoa (see also separate entry under AS)",code:"AS"},{name:"Arizona",code:"AZ"},{name:"California",code:"CA"},{name:"Colorado",code:"CO"},{name:"Connecticut",code:"CT"},{name:"District of Columbia",code:"DC"},{name:"Delaware",code:"DE"},{name:"Florida",code:"FL"},{name:"Georgia",code:"GA"},{name:"Guam (see also separate entry under GU)",code:"GU"},{name:"Hawaii",code:"HI"},{name:"Iowa",code:"IA"},{name:"Idaho",code:"ID"},{name:"Illinois",code:"IL"},{name:"Indiana",code:"IN"},{name:"Kansas",code:"KS"},{name:"Kentucky",code:"KY"},{name:"Louisiana",code:"LA"},{name:"Massachusetts",code:"MA"},{name:"Maryland",code:"MD"},{name:"Maine",code:"ME"},{name:"Michigan",code:"MI"},{name:"Minnesota",code:"MN"},{name:"Missouri",code:"MO"},{name:"Northern Mariana Islands (see also separate entry MP)",code:"MP"},{name:"Mississippi",code:"MS"},{name:"Montana",code:"MT"},{name:"North Carolina",code:"NC"},{name:"North Dakota",code:"ND"},{name:"Nebraska",code:"NE"},{name:"New Hampshire",code:"NH"},{name:"New Jersey",code:"NJ"},{name:"New Mexico",code:"NM"},{name:"Nevada",code:"NV"},{name:"New York",code:"NY"},{name:"Ohio",code:"OH"},{name:"Oklahoma",code:"OK"},{name:"Oregon",code:"OR"},{name:"Pennsylvania",code:"PA"},{name:"Puerto Rico (see also separate entry under PR)",code:"PR"},{name:"Rhode Island",code:"RI"},{name:"South Carolina",code:"SC"},{name:"South Dakota",code:"SD"},{name:"Tennessee",code:"TN"},{name:"Texas",code:"TX"},{name:"U.S. Minor Outlying Islands (cf. separate entry UM)",code:"UM"},{name:"Utah",code:"UT"},{name:"Virginia",code:"VA"},{name:"Virgin Islands of the U.S. (see also separate entry VI)",code:"VI"},{name:"Vermont",code:"VT"},{name:"Washington",code:"WA"},{name:"Wisconsin",code:"WI"},{name:"West Virginia",code:"WV"},{name:"Wyoming",code:"WY"}],UM:[{name:"Johnston Atoll (ISO reserved code = JT)",code:"67"},{name:"Midway Islands (ISO reserved code = I)",code:"71"},{name:"Navassa Island (ISO reserved code = NV)",code:"76"},{name:"Wake Island (ISO reserved code = WK)",code:"79"},{name:"Baker Island",code:"81"},{name:"Howland Island",code:"84"},{name:"Jarvis Island",code:"86"},{name:"Kingman Reef",code:"89"},{name:"Palmyra Atoll",code:"95"}],UG:[{name:"Kalangala",code:"101"},{name:"Kampala",code:"102"},{name:"Kiboga",code:"103"},{name:"Luwero",code:"104"},{name:"Masaka",code:"105"},{name:"Mpigi",code:"106"},{name:"Mubende",code:"107"},{name:"Mukono",code:"108"},{name:"Nakasongola",code:"109"},{name:"Rakai",code:"110"},{name:"Sembabule",code:"111"},{name:"Kayunga",code:"112"},{name:"Wakiso",code:"113"},{name:"Mityana",code:"114"},{name:"Nakaseke",code:"115"},{name:"Lyantonde",code:"116"},{name:"Bugiri",code:"201"},{name:"Busia",code:"202"},{name:"Iganga",code:"203"},{name:"Jinja",code:"204"},{name:"Kamuli",code:"205"},{name:"Kapchorwa",code:"206"},{name:"Katakwi",code:"207"},{name:"Kumi",code:"208"},{name:"Mbale",code:"209"},{name:"Pallisa",code:"210"},{name:"Soroti",code:"211"},{name:"Tororo",code:"212"},{name:"Kaberamaido",code:"213"},{name:"Sironko",code:"215"},{name:"Amuria",code:"216"},{name:"Budaka",code:"217"},{name:"Bukwa",code:"218"},{name:"Butaleja",code:"219"},{name:"Kaliro",code:"220"},{name:"Manafwa",code:"221"},{name:"Namutumba",code:"222"},{name:"Bududa",code:"223"},{name:"Bukedea",code:"224"},{name:"Mayuge",code:"244"},{name:"Adjumani",code:"301"},{name:"Apac",code:"302"},{name:"Arua",code:"303"},{name:"Gulu",code:"304"},{name:"Kitgum",code:"305"},{name:"Kotido",code:"306"},{name:"Lira",code:"307"},{name:"Moroto",code:"308"},{name:"Moyo",code:"309"},{name:"Nebbi",code:"310"},{name:"Nakapiripirit",code:"311"},{name:"Pader",code:"312"},{name:"Yumbe",code:"313"},{name:"Amolatar",code:"314"},{name:"Kaabong",code:"315"},{name:"Koboko",code:"316"},{name:"Abim",code:"317"},{name:"Dokolo",code:"318"},{name:"Amuru",code:"319"},{name:"Maracha",code:"320"},{name:"Oyam",code:"321"},{name:"Bundibugyo",code:"401"},{name:"Bushenyi",code:"402"},{name:"Hoima",code:"403"},{name:"Kabale",code:"404"},{name:"Kabarole",code:"405"},{name:"Kasese",code:"406"},{name:"Kibaale",code:"407"},{name:"Kisoro",code:"408"},{name:"Masindi",code:"409"},{name:"Mbarara",code:"410"},{name:"Ntungamo",code:"411"},{name:"Rukungiri",code:"412"},{name:"Kamwenge",code:"413"},{name:"Kanungu",code:"414"},{name:"Kyenjojo",code:"415"},{name:"Ibanda",code:"416"},{name:"Isingiro",code:"417"},{name:"Kiruhura",code:"418"},{name:"Buliisa",code:"419"}],UA:[{name:"Vinnytska oblast",code:"05"},{name:"Volynska oblast",code:"07"},{name:"Luhanska oblast",code:"09"},{name:"Dnipropetrovska oblast",code:"12"},{name:"Donetska oblast",code:"14"},{name:"Zhytomyrska oblast",code:"18"},{name:"Zakarpatska oblast",code:"21"},{name:"Zaporizka oblast",code:"23"},{name:"Ivano-Frankivska oblast",code:"26"},{name:"Kyiv",code:"30"},{name:"Kyivska oblast",code:"32"},{name:"Kirovohradska oblast",code:"35"},{name:"Sevastopol",code:"40"},{name:"Respublika Krym",code:"43"},{name:"Lvivska oblast",code:"46"},{name:"Mykolaivska oblast",code:"48"},{name:"Odeska oblast",code:"51"},{name:"Poltavska oblast",code:"53"},{name:"Rivnenska oblast",code:"56"},{name:"Sumska oblast",code:"59"},{name:"Ternopilska oblast",code:"61"},{name:"Kharkivska oblast",code:"63"},{name:"Khersonska oblast",code:"65"},{name:"Khmelnytska oblast",code:"68"},{name:"Cherkaska oblast",code:"71"},{name:"Chernihivska oblast",code:"74"},{name:"Chernivetska oblast",code:"77"}],ET:[{name:"Adis Abeba",code:"AA"},{name:"Afar",code:"AF"},{name:"Amara",code:"AM"},{name:"Binshangul Gumuz",code:"BE"},{name:"Dire Dawa",code:"DD"},{name:"Gambela Hizboch",code:"GA"},{name:"Hareri Hizb",code:"HA"},{name:"Oromiya",code:"OR"},{name:"YeDebub Biheroch Bihereseboch na Hizboch",code:"SN"},{name:"Sumale",code:"SO"},{name:"Tigray",code:"TI"}],ES:[{name:"Alicante / Alacant",code:"A"},{name:"Albacete",code:"AB"},{name:"Almería",code:"AL"},{name:"Ávila",code:"AV"},{name:"Barcelona  [Barcelona]",code:"B"},{name:"Badajoz",code:"BA"},{name:"Vizcaya / Biskaia",code:"BI"},{name:"Burgos",code:"BU"},{name:"A Coruña  [La Coruña]",code:"C"},{name:"Cádiz",code:"CA"},{name:"Cáceres",code:"CC"},{name:"Ceuta",code:"CE"},{name:"Córdoba",code:"CO"},{name:"Ciudad Real",code:"CR"},{name:"Castellón / Castelló",code:"CS"},{name:"Cuenca",code:"CU"},{name:"Las Palmas",code:"GC"},{name:"Girona  [Gerona]",code:"GI"},{name:"Granada",code:"GR"},{name:"Guadalajara",code:"GU"},{name:"Huelva",code:"H"},{name:"Huesca",code:"HU"},{name:"Jaén",code:"J"},{name:"Lleida  [Lérida]",code:"L"},{name:"León",code:"LE"},{name:"La Rioja",code:"LO"},{name:"Lugo  [Lugo]",code:"LU"},{name:"Madrid",code:"M"},{name:"Málaga",code:"MA"},{name:"Melilla",code:"ML"},{name:"Murcia",code:"MU"},{name:"Navarra / Nafarroa",code:"NA"},{name:"Asturias",code:"O"},{name:"Ourense  [Orense]",code:"OR"},{name:"Palencia",code:"P"},{name:"Balears  [Baleares]",code:"PM"},{name:"Pontevedra  [Pontevedra]",code:"PO"},{name:"Cantabria",code:"S"},{name:"Salamanca",code:"SA"},{name:"Sevilla",code:"SE"},{name:"Segovia",code:"SG"},{name:"Soria",code:"SO"},{name:"Guipúzcoa / Gipuzkoa",code:"SS"},{name:"Tarragona  [Tarragona]",code:"T"},{name:"Teruel",code:"TE"},{name:"Santa Cruz de Tenerife",code:"TF"},{name:"Toledo",code:"TO"},{name:"Valencia / València",code:"V"},{name:"Valladolid",code:"VA"},{name:"Álava / Araba",code:"VI"},{name:"Zaragoza",code:"Z"},{name:"Zamora",code:"ZA"}],ER:[{name:"‘Anseba",code:"AN"},{name:"Debubawi K’eyyi? Ba?ri",code:"DK"},{name:"Debub",code:"DU"},{name:"Gash-Barka",code:"GB"},{name:"Ma’ikel",code:"MA"},{name:"Semienawi K’eyyi? Ba?ri",code:"SK"}],EG:[{name:"AI Iskandariyah",code:"ALX"},{name:"Aswan",code:"ASN"},{name:"Asyut",code:"AST"},{name:"Al Ba?r al A?mar",code:"BA"},{name:"Al Bu?ayrah",code:"BH"},{name:"Bani Suwayf",code:"BNS"},{name:"AI Qahirah",code:"C"},{name:"Ad Daqahliyah",code:"DK"},{name:"Dumyat",code:"DT"},{name:"AI Fayyum",code:"FYM"},{name:"AI Gharbiyah",code:"GH"},{name:"AI Jizah",code:"GZ"},{name:"?ulwan",code:"HU"},{name:"AI Isma 'iliyah",code:"IS"},{name:"Janub Sina'",code:"JS"},{name:"AI Qalyubiyah",code:"KB"},{name:"Kafr ash Shaykh",code:"KFS"},{name:"Qina",code:"KN"},{name:"Al Uqsur",code:"LX"},{name:"AI Minya",code:"MN"},{name:"AI Minufiyah",code:"MNF"},{name:"Matruh",code:"MT"},{name:"Bur Sa'id",code:"PTS"},{name:"Suhaj",code:"SHG"},{name:"Ash Sharqiyah",code:"SHR"},{name:"Shamal Sina'",code:"SIN"},{name:"As Sadis min Uktubar",code:"SU"},{name:"As Suways",code:"SUZ"},{name:"AI Wadi al Jadid",code:"WAD"}],EE:[{name:"Harjumaa",code:"37"},{name:"Hiiumaa",code:"39"},{name:"Ida-Virumaa",code:"44"},{name:"Jõgevamaa",code:"49"},{name:"Järvamaa",code:"51"},{name:"Läänemaa",code:"57"},{name:"Lääne-Virumaa",code:"59"},{name:"Põlvamaa",code:"65"},{name:"Pärnumaa",code:"67"},{name:"Raplamaa",code:"70"},{name:"Saaremaa",code:"74"},{name:"Tartumaa",code:"78"},{name:"Valgamaa",code:"82"},{name:"Viljandimaa",code:"84"},{name:"Võrumaa",code:"86"}],TZ:[{name:"Arusha",code:"01"},{name:"Dar es Salaam",code:"02"},{name:"Dodoma",code:"03"},{name:"Iringa",code:"04"},{name:"Kagera",code:"05"},{name:"Kaskazini Pemba",code:"06"},{name:"Kaskazini Unguja",code:"07"},{name:"Kigoma",code:"08"},{name:"Kilimanjaro",code:"09"},{name:"Kusini Pemba",code:"10"},{name:"Kusini Unguja",code:"11"},{name:"Lindi",code:"12"},{name:"Mara",code:"13"},{name:"Mbeya",code:"14"},{name:"Mjini Magharibi",code:"15"},{name:"Morogoro",code:"16"},{name:"Mtwara",code:"17"},{name:"Mwanza",code:"18"},{name:"Pwani",code:"19"},{name:"Rukwa",code:"20"},{name:"Ruvuma",code:"21"},{name:"Shinyanga",code:"22"},{name:"Singida",code:"23"},{name:"Tabora",code:"24"},{name:"Tanga",code:"25"},{name:"Manyara",code:"26"}],TT:[{name:"Arima",code:"ARI"},{name:"Chaguanas",code:"CHA"},{name:"Couva-Tabaquite-Talparo",code:"CTT"},{name:"Diego Martin",code:"DMN"},{name:"Eastern Tobago",code:"ETO"},{name:"Penal-Debe",code:"PED"},{name:"Port of Spain",code:"POS"},{name:"Princes Town",code:"PRT"},{name:"Point Fortin",code:"PTF"},{name:"Rio Claro-Mayaro",code:"RCM"},{name:"San Fernando",code:"SFO"},{name:"Sangre Grande",code:"SGE"},{name:"Siparia",code:"SIP"},{name:"San Juan-Laventille",code:"SJL"},{name:"Tunapuna-Piarco",code:"TUP"},{name:"Western Tobago",code:"WTO"}],TW:[{name:"Changhua",code:"CHA"},{name:"Chiayi",code:"CYI"},{name:"Chiayi",code:"CYQ"},{name:"Hsinchu",code:"HSQ"},{name:"Hsinchu",code:"HSZ"},{name:"Hualien",code:"HUA"},{name:"Ilan",code:"ILA"},{name:"Keelung",code:"KEE"},{name:"Kaohsiung",code:"KHH"},{name:"Kaohsiung",code:"KHQ"},{name:"Miaoli",code:"MIA"},{name:"Nantou",code:"NAN"},{name:"Penghu",code:"PEN"},{name:"Pingtung",code:"PIF"},{name:"Taoyuan",code:"TAO"},{name:"Tainan",code:"TNN"},{name:"Tainan",code:"TNQ"},{name:"Taipei",code:"TPE"},{name:"Taipei",code:"TPQ"},{name:"Taitung",code:"TTT"},{name:"Taichung",code:"TXG"},{name:"Taichung",code:"TXQ"},{name:"Yunlin",code:"YUN"}],TV:[{name:"Funafuti",code:"FUN"},{name:"Niutao",code:"NIT"},{name:"Nui",code:"NIU"},{name:"Nukufetau",code:"NKF"},{name:"Nukulaelae",code:"NKL"},{name:"Nanumea",code:"NMA"},{name:"Nanumanga",code:"NMG"},{name:"Vaitupu",code:"VAI"}],GD:[{name:"Saint Andrew",code:"01"},{name:"Saint David",code:"02"},{name:"Saint George",code:"03"},{name:"Saint John",code:"04"},{name:"Saint Mark",code:"05"},{name:"Saint Patrick",code:"06"},{name:"Southern Grenadine Islands",code:"10"}],GE:[{name:"Abkhazia",code:"AB"},{name:"Ajaria",code:"AJ"},{name:"Guria",code:"GU"},{name:"Imeret'i",code:"IM"},{name:"Kakhet'i",code:"KA"},{name:"K'vemo K'art'li",code:"KK"},{name:"Mts'khet'a-Mt'ianet'i",code:"MM"},{name:"Racha-Lech’khumi-K’vemo Svanet’i",code:"RL"},{name:"Samts'khe-Javakhet'i",code:"SJ"},{name:"Shida K'art'li",code:"SK"},{name:"Samegrelo-Zemo Svanet'i",code:"SZ"},{name:"T'bilisi",code:"TB"}],GA:[{name:"Estuaire",code:"1"},{name:"Haut-Ogooué",code:"2"},{name:"Moyen-Ogooué",code:"3"},{name:"Ngounié",code:"4"},{name:"Nyanga",code:"5"},{name:"Ogooué-Ivindo",code:"6"},{name:"Ogooué-Lolo",code:"7"},{name:"Ogooué-Maritime",code:"8"},{name:"Woleu-Ntem",code:"9"}],GB:[{name:"Aberdeenshire",code:"ABD"},{name:"Aberdeen City",code:"ABE"},{name:"Argyll and Bute",code:"AGB"},{name:"Isle of Anglesey [Sir Ynys Môn GB-YNM]",code:"AGY"},{name:"Angus",code:"ANS"},{name:"Antrim",code:"ANT"},{name:"Ards",code:"ARD"},{name:"Armagh",code:"ARM"},{name:"Bath and North East Somerset",code:"BAS"},{name:"Blackburn with Darwen",code:"BBD"},{name:"Bedford",code:"BDF"},{name:"Barking and Dagenham",code:"BDG"},{name:"Brent",code:"BEN"},{name:"Bexley",code:"BEX"},{name:"Belfast",code:"BFS"},{name:"Bridgend [Pen-y-bont ar Ogwr GB-POG]",code:"BGE"},{name:"Blaenau Gwent",code:"BGW"},{name:"Birmingham",code:"BIR"},{name:"Buckinghamshire",code:"BKM"},{name:"Ballymena",code:"BLA"},{name:"Ballymoney",code:"BLY"},{name:"Bournemouth",code:"BMH"},{name:"Banbridge",code:"BNB"},{name:"Barnet",code:"BNE"},{name:"Brighton and Hove",code:"BNH"},{name:"Barnsley",code:"BNS"},{name:"Bolton",code:"BOL"},{name:"Blackpool",code:"BPL"},{name:"Bracknell Forest",code:"BRC"},{name:"Bradford",code:"BRD"},{name:"Bromley",code:"BRY"},{name:"Bristol, City of",code:"BST"},{name:"Bury",code:"BUR"},{name:"Cambridgeshire",code:"CAM"},{name:"Caerphilly [Caerffili GB-CAF]",code:"CAY"},{name:"Central Bedfordshire",code:"CBF"},{name:"Ceredigion [Sir Ceredigion]",code:"CGN"},{name:"Craigavon",code:"CGV"},{name:"Cheshire East",code:"CHE"},{name:"Cheshire West and Chester",code:"CHW"},{name:"Carrickfergus",code:"CKF"},{name:"Cookstown",code:"CKT"},{name:"Calderdale",code:"CLD"},{name:"Clackmannanshire",code:"CLK"},{name:"Coleraine",code:"CLR"},{name:"Cumbria",code:"CMA"},{name:"Camden",code:"CMD"},{name:"Carmarthenshire [Sir Gaerfyrddin GB-GFY]",code:"CMN"},{name:"Cornwall",code:"CON"},{name:"Coventry",code:"COV"},{name:"Cardiff [Caerdydd GB-CRD]",code:"CRF"},{name:"Croydon",code:"CRY"},{name:"Castlereagh",code:"CSR"},{name:"Conwy",code:"CWY"},{name:"Darlington",code:"DAL"},{name:"Derbyshire",code:"DBY"},{name:"Denbighshire [Sir Ddinbych GB-DDB]",code:"DEN"},{name:"Derby",code:"DER"},{name:"Devon",code:"DEV"},{name:"Dungannon and South Tyrone",code:"DGN"},{name:"Dumfries and Galloway",code:"DGY"},{name:"Doncaster",code:"DNC"},{name:"Dundee City",code:"DND"},{name:"Dorset",code:"DOR"},{name:"Down",code:"DOW"},{name:"Derry",code:"DRY"},{name:"Dudley",code:"DUD"},{name:"Durham",code:"DUR"},{name:"Ealing",code:"EAL"},{name:"East Ayrshire",code:"EAY"},{name:"Edinburgh, City of",code:"EDH"},{name:"East Dunbartonshire",code:"EDU"},{name:"East Lothian",code:"ELN"},{name:"Eilean Siar",code:"ELS"},{name:"Enfield",code:"ENF"},{name:"East Renfrewshire",code:"ERW"},{name:"East Riding of Yorkshire",code:"ERY"},{name:"Essex",code:"ESS"},{name:"East Sussex",code:"ESX"},{name:"Falkirk",code:"FAL"},{name:"Fermanagh",code:"FER"},{name:"Fife",code:"FIF"},{name:"Flintshire [Sir y Fflint GB-FFL]",code:"FLN"},{name:"Gateshead",code:"GAT"},{name:"Glasgow City",code:"GLG"},{name:"Gloucestershire",code:"GLS"},{name:"Greenwich",code:"GRE"},{name:"Gwynedd",code:"GWN"},{name:"Halton",code:"HAL"},{name:"Hampshire",code:"HAM"},{name:"Havering",code:"HAV"},{name:"Hackney",code:"HCK"},{name:"Herefordshire",code:"HEF"},{name:"Hillingdon",code:"HIL"},{name:"Highland",code:"HLD"},{name:"Hammersmith and Fulham",code:"HMF"},{name:"Hounslow",code:"HNS"},{name:"Hartlepool",code:"HPL"},{name:"Hertfordshire",code:"HRT"},{name:"Harrow",code:"HRW"},{name:"Haringey",code:"HRY"},{name:"Isle of Wight",code:"IOW"},{name:"Islington",code:"ISL"},{name:"Inverclyde",code:"IVC"},{name:"Kensington and Chelsea",code:"KEC"},{name:"Kent",code:"KEN"},{name:"Kingston upon Hull",code:"KHL"},{name:"Kirklees",code:"KIR"},{name:"Kingston upon Thames",code:"KTT"},{name:"Knowsley",code:"KWL"},{name:"Lancashire",code:"LAN"},{name:"Lambeth",code:"LBH"},{name:"Leicester",code:"LCE"},{name:"Leeds",code:"LDS"},{name:"Leicestershire",code:"LEC"},{name:"Lewisham",code:"LEW"},{name:"Lincolnshire",code:"LIN"},{name:"Liverpool",code:"LIV"},{name:"Limavady",code:"LMV"},{name:"London, City of",code:"LND"},{name:"Larne",code:"LRN"},{name:"Lisburn",code:"LSB"},{name:"Luton",code:"LUT"},{name:"Manchester",code:"MAN"},{name:"Middlesbrough",code:"MDB"},{name:"Medway",code:"MDW"},{name:"Magherafelt",code:"MFT"},{name:"Milton Keynes",code:"MIK"},{name:"Midlothian",code:"MLN"},{name:"Monmouthshire [Sir Fynwy GB-FYN]",code:"MON"},{name:"Merton",code:"MRT"},{name:"Moray",code:"MRY"},{name:"Merthyr Tydfil [Merthyr Tudful GB-MTU]",code:"MTY"},{name:"Moyle",code:"MYL"},{name:"North Ayrshire",code:"NAY"},{name:"Northumberland",code:"NBL"},{name:"North Down",code:"NDN"},{name:"North East Lincolnshire",code:"NEL"},{name:"Newcastle upon Tyne",code:"NET"},{name:"Norfolk",code:"NFK"},{name:"Nottingham",code:"NGM"},{name:"North Lanarkshire",code:"NLK"},{name:"North Lincolnshire",code:"NLN"},{name:"North Somerset",code:"NSM"},{name:"Newtownabbey",code:"NTA"},{name:"Northamptonshire",code:"NTH"},{name:"Neath Port Talbot [Castell-nedd Port Talbot GB-CTL]",code:"NTL"},{name:"Nottinghamshire",code:"NTT"},{name:"North Tyneside",code:"NTY"},{name:"Newham",code:"NWM"},{name:"Newport [Casnewydd GB-CNW]",code:"NWP"},{name:"North Yorkshire",code:"NYK"},{name:"Newry and Mourne",code:"NYM"},{name:"Oldham",code:"OLD"},{name:"Omagh",code:"OMH"},{name:"Orkney Islands",code:"ORK"},{name:"Oxfordshire",code:"OXF"},{name:"Pembrokeshire [Sir Benfro GB-BNF]",code:"PEM"},{name:"Perth and Kinross",code:"PKN"},{name:"Plymouth",code:"PLY"},{name:"Poole",code:"POL"},{name:"Portsmouth",code:"POR"},{name:"Powys",code:"POW"},{name:"Peterborough",code:"PTE"},{name:"Redcar and Cleveland",code:"RCC"},{name:"Rochdale",code:"RCH"},{name:"Rhondda, Cynon, Taff [Rhondda, Cynon,Taf]",code:"RCT"},{name:"Redbridge",code:"RDB"},{name:"Reading",code:"RDG"},{name:"Renfrewshire",code:"RFW"},{name:"Richmond upon Thames",code:"RIC"},{name:"Rotherham",code:"ROT"},{name:"Rutland",code:"RUT"},{name:"Sandwell",code:"SAW"},{name:"South Ayrshire",code:"SAY"},{name:"Scottish Borders, The",code:"SCB"},{name:"Suffolk",code:"SFK"},{name:"Sefton",code:"SFT"},{name:"South Gloucestershire",code:"SGC"},{name:"Sheffield",code:"SHF"},{name:"St. Helens",code:"SHN"},{name:"Shropshire",code:"SHR"},{name:"Stockport",code:"SKP"},{name:"Salford",code:"SLF"},{name:"Slough",code:"SLG"},{name:"South Lanarkshire",code:"SLK"},{name:"Sunderland",code:"SND"},{name:"Solihull",code:"SOL"},{name:"Somerset",code:"SOM"},{name:"Southend-on-Sea",code:"SOS"},{name:"Surrey",code:"SRY"},{name:"Strabane",code:"STB"},{name:"Stoke-on-Trent",code:"STE"},{name:"Stirling",code:"STG"},{name:"Southampton",code:"STH"},{name:"Sutton",code:"STN"},{name:"Staffordshire",code:"STS"},{name:"Stockton-on-Tees",code:"STT"},{name:"South Tyneside",code:"STY"},{name:"Swansea [Abertawe GB-ATA]",code:"SWA"},{name:"Swindon",code:"SWD"},{name:"Southwark",code:"SWK"},{name:"Tameside",code:"TAM"},{name:"Telford and Wrekin",code:"TFW"},{name:"Thurrock",code:"THR"},{name:"Torbay",code:"TOB"},{name:"Torfaen [Tor-faen]",code:"TOF"},{name:"Trafford",code:"TRF"},{name:"Tower Hamlets",code:"TWH"},{name:"Vale of Glamorgan, The [Bro Morgannwg GB-BMG]",code:"VGL"},{name:"Warwickshire",code:"WAR"},{name:"West Berkshire",code:"WBK"},{name:"West Dunbartonshire",code:"WDU"},{name:"Waltham Forest",code:"WFT"},{name:"Wigan",code:"WGN"},{name:"Wiltshire",code:"WIL"},{name:"Wakefield",code:"WKF"},{name:"Walsall",code:"WLL"},{name:"West Lothian",code:"WLN"},{name:"Wolverhampton",code:"WLV"},{name:"Wandsworth",code:"WND"},{name:"Windsor and Maidenhead",code:"WNM"},{name:"Wokingham",code:"WOK"},{name:"Worcestershire",code:"WOR"},{name:"Wirral",code:"WRL"},{name:"Warrington",code:"WRT"},{name:"Wrexham [Wrecsam GB-WRC]",code:"WRX"},{name:"Westminster",code:"WSM"},{name:"West Sussex",code:"WSX"},{name:"York",code:"YOR"},{name:"Shetland Islands",code:"ZET"}],FR:[{name:"Ain",code:"01"},{name:"Aisne",code:"02"},{name:"Allier",code:"03"},{name:"Alpes-de-Haute-Provence",code:"04"},{name:"Hautes-Alpes",code:"05"},{name:"Alpes-Maritimes",code:"06"},{name:"Ardèche",code:"07"},{name:"Ardennes",code:"08"},{name:"Ariège",code:"09"},{name:"Aube",code:"10"},{name:"Aude",code:"11"},{name:"Aveyron",code:"12"},{name:"Bouches-du-Rhône",code:"13"},{name:"Calvados",code:"14"},{name:"Cantal",code:"15"},{name:"Charente",code:"16"},{name:"Charente-Maritime",code:"17"},{name:"Cher",code:"18"},{name:"Corrèze",code:"19"},{name:"Côte-d'Or",code:"21"},{name:"Côtes-d'Armor",code:"22"},{name:"Creuse",code:"23"},{name:"Dordogne",code:"24"},{name:"Doubs",code:"25"},{name:"Drôme",code:"26"},{name:"Eure",code:"27"},{name:"Eure-et-Loir",code:"28"},{name:"Finistère",code:"29"},{name:"Corse-du-Sud",code:"2A"},{name:"Haute-Corse",code:"2B"},{name:"Gard",code:"30"},{name:"Haute-Garonne",code:"31"},{name:"Gers",code:"32"},{name:"Gironde",code:"33"},{name:"Hérault",code:"34"},{name:"Ille-et-Vilaine",code:"35"},{name:"Indre",code:"36"},{name:"Indre-et-Loire",code:"37"},{name:"Isère",code:"38"},{name:"Jura",code:"39"},{name:"Landes",code:"40"},{name:"Loir-et-Cher",code:"41"},{name:"Loire",code:"42"},{name:"Haute-Loire",code:"43"},{name:"Loire-Atlantique",code:"44"},{name:"Loiret",code:"45"},{name:"Lot",code:"46"},{name:"Lot-et-Garonne",code:"47"},{name:"Lozère",code:"48"},{name:"Maine-et-Loire",code:"49"},{name:"Manche",code:"50"},{name:"Marne",code:"51"},{name:"Haute-Marne",code:"52"},{name:"Mayenne",code:"53"},{name:"Meurthe-et-Moselle",code:"54"},{name:"Meuse",code:"55"},{name:"Morbihan",code:"56"},{name:"Moselle",code:"57"},{name:"Nièvre",code:"58"},{name:"Nord",code:"59"},{name:"Oise",code:"60"},{name:"Orne",code:"61"},{name:"Pas-de-Calais",code:"62"},{name:"Puy-de-Dôme",code:"63"},{name:"Pyrénées-Atlantiques",code:"64"},{name:"Hautes-Pyrénées",code:"65"},{name:"Pyrénées-Orientales",code:"66"},{name:"Bas-Rhin",code:"67"},{name:"Haut-Rhin",code:"68"},{name:"Rhône",code:"69"},{name:"Haute-Saône",code:"70"},{name:"Saône-et-Loire",code:"71"},{name:"Sarthe",code:"72"},{name:"Savoie",code:"73"},{name:"Haute-Savoie",code:"74"},{name:"Paris",code:"75"},{name:"Seine-Maritime",code:"76"},{name:"Seine-et-Marne",code:"77"},{name:"Yvelines",code:"78"},{name:"Deux-Sèvres",code:"79"},{name:"Somme",code:"80"},{name:"Tarn",code:"81"},{name:"Tarn-et-Garonne",code:"82"},{name:"Var",code:"83"},{name:"Vaucluse",code:"84"},{name:"Vendée",code:"85"},{name:"Vienne",code:"86"},{name:"Haute-Vienne",code:"87"},{name:"Vosges",code:"88"},{name:"Yonne",code:"89"},{name:"Territoire de Belfort",code:"90"},{name:"Essonne",code:"91"},{name:"Hauts-de-Seine",code:"92"},{name:"Seine-Saint-Denis",code:"93"},{name:"Val-de-Marne",code:"94"},{name:"Val-d'Oise",code:"95"}],FJ:[{name:"Central",code:"C"},{name:"Eastern",code:"E"},{name:"Northern",code:"N"},{name:"Rotuma",code:"R"},{name:"Western",code:"W"}],FM:[{name:"Kosrae",code:"KSA"},{name:"Pohnpei",code:"PNI"},{name:"Chuuk",code:"TRK"},{name:"Yap",code:"YAP"}],FI:[{name:"Ahvenanmaan maakunta",code:"01"},{name:"Etelä-Karjala",code:"02"},{name:"Etelä-Pohjanmaa",code:"03"},{name:"Etelä-Savo",code:"04"},{name:"Kainuu",code:"05"},{name:"Kanta-Häme",code:"06"},{name:"Keski-Pohjanmaa",code:"07"},{name:"Keski-Suomi",code:"08"},{name:"Kymenlaakso",code:"09"},{name:"Lappi",code:"10"},{name:"Pirkanmaa",code:"11"},{name:"Pohjanmaa",code:"12"},{name:"Pohjois-Karjala",code:"13"},{name:"Pohjois-Pohjanmaa",code:"14"},{name:"Pohjois-Savo",code:"15"},{name:"Päijät-Häme",code:"16"},{name:"Satakunta",code:"17"},{name:"Uusimaa",code:"18"},{name:"Varsinais-Suomi",code:"19"}],WS:[{name:"A'ana",code:"AA"},{name:"Aiga-i-le-Tai",code:"AL"},{name:"Atua",code:"AT"},{name:"Fa'asaleleaga",code:"FA"},{name:"Gaga'emauga",code:"GE"},{name:"Gagaifomauga",code:"GI"},{name:"Palauli",code:"PA"},{name:"Satupa 'itea",code:"SA"},{name:"Tuamasaga",code:"TU"},{name:"Va'a-o-Fonoti",code:"VF"},{name:"Vaisigano",code:"VS"}],GY:[{name:"Barima-Waini",code:"BA"},{name:"Cuyuni-Mazaruni",code:"CU"},{name:"Demerara-Mahaica",code:"DE"},{name:"East Berbice-Corentyne",code:"EB"},{name:"Essequibo Islands-West Demerara",code:"ES"},{name:"Mahaica-Berbice",code:"MA"},{name:"Pomeroon-Supenaam",code:"PM"},{name:"Potaro-Siparuni",code:"PT"},{name:"Upper Demerara-Berbice",code:"UD"},{name:"Upper Takutu-Upper Essequibo",code:"UT"}],GW:[{name:"Bafatá",code:"BA"},{name:"Bolama",code:"BL"},{name:"Biombo",code:"BM"},{name:"Bissau",code:"BS"},{name:"Cacheu",code:"CA"},{name:"Gabú",code:"GA"},{name:"Oio",code:"OI"},{name:"Quinara",code:"QU"},{name:"Tombali",code:"TO"}],GT:[{name:"Alta Verapaz",code:"AV"},{name:"Baja Verapaz",code:"BV"},{name:"Chimaltenango",code:"CM"},{name:"Chiquimula",code:"CQ"},{name:"Escuintla",code:"ES"},{name:"Guatemala",code:"GU"},{name:"Huehuetenango",code:"HU"},{name:"Izabal",code:"IZ"},{name:"Jalapa",code:"JA"},{name:"Jutiapa",code:"JU"},{name:"Petén",code:"PE"},{name:"El Progreso",code:"PR"},{name:"Quiché",code:"QC"},{name:"Quetzaltenango",code:"QZ"},{name:"Retalhuleu",code:"RE"},{name:"Sacatepéquez",code:"SA"},{name:"San Marcos",code:"SM"},{name:"Sololá",code:"SO"},{name:"Santa Rosa",code:"SR"},{name:"Suchitepéquez",code:"SU"},{name:"Totonicapán",code:"TO"},{name:"Zacapa",code:"ZA"}],GR:[{name:"Aitolia kai Akarnania",code:"01"},{name:"Voiotia",code:"03"},{name:"Evvoia",code:"04"},{name:"Evrytania",code:"05"},{name:"Fthiotida",code:"06"},{name:"Fokida",code:"07"},{name:"Argolida",code:"11"},{name:"Arkadia",code:"12"},{name:"Achaïa",code:"13"},{name:"Ileia",code:"14"},{name:"Korinthia",code:"15"},{name:"Lakonia",code:"16"},{name:"Messinia",code:"17"},{name:"Zakynthos",code:"21"},{name:"Kerkyra",code:"22"},{name:"Kefallonia",code:"23"},{name:"Lefkada",code:"24"},{name:"Arta",code:"31"},{name:"Thesprotia",code:"32"},{name:"Ioannina",code:"33"},{name:"Preveza",code:"34"},{name:"Karditsa",code:"41"},{name:"Larisa",code:"42"},{name:"Magnisia",code:"43"},{name:"Trikala",code:"44"},{name:"Grevena",code:"51"},{name:"Drama",code:"52"},{name:"Imathia",code:"53"},{name:"Thessaloniki",code:"54"},{name:"Kavala",code:"55"},{name:"Kastoria",code:"56"},{name:"Kilkis",code:"57"},{name:"Kozani",code:"58"},{name:"Pella",code:"59"},{name:"Pieria",code:"61"},{name:"Serres",code:"62"},{name:"Florina",code:"63"},{name:"Chalkidiki",code:"64"},{name:"Agio Oros",code:"69"},{name:"Evros",code:"71"},{name:"Xanthi",code:"72"},{name:"Rodopi",code:"73"},{name:"Dodekanisos",code:"81"},{name:"Kyklades",code:"82"},{name:"Lesvos",code:"83"},{name:"Samos",code:"84"},{name:"Chios",code:"85"},{name:"Irakleio",code:"91"},{name:"Lasithi",code:"92"},{name:"Rethymno",code:"93"},{name:"Chania",code:"94"},{name:"Attiki",code:"A1"}],GQ:[{name:"Annobón",code:"AN"},{name:"Bioko Norte",code:"BN"},{name:"Bioko Sur",code:"BS"},{name:"Centro Sur",code:"CS"},{name:"Kié-Ntem",code:"KN"},{name:"Litoral",code:"LI"},{name:"Wele-Nzas",code:"WN"}],GN:[{name:"Beyla",code:"BE"},{name:"Boffa",code:"BF"},{name:"Boké",code:"BK"},{name:"Coyah",code:"CO"},{name:"Dabola",code:"DB"},{name:"Dinguiraye",code:"DI"},{name:"Dalaba",code:"DL"},{name:"Dubréka",code:"DU"},{name:"Faranah",code:"FA"},{name:"Forécariah",code:"FO"},{name:"Fria",code:"FR"},{name:"Gaoual",code:"GA"},{name:"Guékédou",code:"GU"},{name:"Kankan",code:"KA"},{name:"Koubia",code:"KB"},{name:"Kindia",code:"KD"},{name:"Kérouané",code:"KE"},{name:"Koundara",code:"KN"},{name:"Kouroussa",code:"KO"},{name:"Kissidougou",code:"KS"},{name:"Labé",code:"LA"},{name:"Lélouma",code:"LE"},{name:"Lola",code:"LO"},{name:"Macenta",code:"MC"},{name:"Mandiana",code:"MD"},{name:"Mali",code:"ML"},{name:"Mamou",code:"MM"},{name:"Nzérékoré",code:"NZ"},{name:"Pita",code:"PI"},{name:"Siguiri",code:"SI"},{name:"Télimélé",code:"TE"},{name:"Tougué",code:"TO"},{name:"Yomou",code:"YO"}],GM:[{name:"Banjul",code:"B"},{name:"Lower River",code:"L"},{name:"Central River",code:"M"},{name:"North Bank",code:"N"},{name:"Upper River",code:"U"},{name:"Western",code:"W"}],GL:[{name:"Kommune Kujalleq",code:"KU"},{name:"Qaasuitsup Kommunia",code:"QA"},{name:"Qeqqata Kommunia",code:"QE"},{name:"Kommuneqarfik Sermersooq",code:"SM"}],GH:[{name:"Greater Accra",code:"AA"},{name:"Ashanti",code:"AH"},{name:"Brong-Ahafo",code:"BA"},{name:"Central",code:"CP"},{name:"Eastern",code:"EP"},{name:"Northern",code:"NP"},{name:"Volta",code:"TV"},{name:"Upper East",code:"UE"},{name:"Upper West",code:"UW"},{name:"Western",code:"WP"}],RO:[{name:"Alba",code:"AB"},{name:"Arges",code:"AG"},{name:"Arad",code:"AR"},{name:"Bucuresti",code:"B"},{name:"Bacau",code:"BC"},{name:"Bihor",code:"BH"},{name:"Bistrita-Nasaud",code:"BN"},{name:"Braila",code:"BR"},{name:"Botosani",code:"BT"},{name:"Brasov",code:"BV"},{name:"Buzau",code:"BZ"},{name:"Cluj",code:"CJ"},{name:"Calarasi",code:"CL"},{name:"Caras-Severin",code:"CS"},{name:"Constarta",code:"CT"},{name:"Covasna",code:"CV"},{name:"Dâmbovita",code:"DB"},{name:"Dolj",code:"DJ"},{name:"Gorj",code:"GJ"},{name:"Galati",code:"GL"},{name:"Giurgiu",code:"GR"},{name:"Hunedoara",code:"HD"},{name:"Harghita",code:"HR"},{name:"Ilfov",code:"IF"},{name:"Ialomita",code:"IL"},{name:"Iasi",code:"IS"},{name:"Mehedinti",code:"MH"},{name:"Maramures",code:"MM"},{name:"Mures",code:"MS"},{name:"Neamt",code:"NT"},{name:"Olt",code:"OT"},{name:"Prahova",code:"PH"},{name:"Sibiu",code:"SB"},{name:"Salaj",code:"SJ"},{name:"Satu Mare",code:"SM"},{name:"Suceava",code:"SV"},{name:"Tulcea",code:"TL"},{name:"Timis",code:"TM"},{name:"Teleorman",code:"TR"},{name:"Vâlcea",code:"VL"},{name:"Vrancea",code:"VN"},{name:"Vaslui",code:"VS"}],AT:[{name:"Burgenland",code:"1"},{name:"Kärnten",code:"2"},{name:"Niederösterreich",code:"3"},{name:"Oberösterreich",code:"4"},{name:"Salzburg",code:"5"},{name:"Steiermark",code:"6"},{name:"Tirol",code:"7"},{name:"Vorarlberg",code:"8"},{name:"Wien",code:"9"}],AR:[{name:"Salta",code:"A"},{name:"Buenos Aires",code:"B"},{name:"Ciudad Autónoma de Buenos Aires",code:"C"},{name:"San Luis",code:"D"},{name:"Entre Ríos",code:"E"},{name:"La Rioja",code:"F"},{name:"Santiago del Estero",code:"G"},{name:"Chaco",code:"H"},{name:"San Juan",
code:"J"},{name:"Catamarca",code:"K"},{name:"La Pampa",code:"L"},{name:"Mendoza",code:"M"},{name:"Misiones",code:"N"},{name:"Formosa",code:"P"},{name:"Neuquén",code:"Q"},{name:"Río Negro",code:"R"},{name:"Santa Fe",code:"S"},{name:"Tucumán",code:"T"},{name:"Chubut",code:"U"},{name:"Tierra del Fuego",code:"V"},{name:"Corrientes",code:"W"},{name:"Córdoba",code:"X"},{name:"Jujuy",code:"Y"},{name:"Santa Cruz",code:"Z"}],QA:[{name:"Ad Dawhah",code:"DA"},{name:"Al Khawr wa adh Dhakhirah",code:"KH"},{name:"Ash Shamal",code:"MS"},{name:"Ar Rayyan",code:"RA"},{name:"Umm Salal",code:"US"},{name:"Al Wakrah",code:"WA"},{name:"Az¸ Z¸a‘ayin",code:"ZA"}],AU:[{name:"Australian Capital Territory",code:"ACT"},{name:"New South Wales",code:"NSW"},{name:"Northern Territory",code:"NT"},{name:"Queensland",code:"QLD"},{name:"South Australia",code:"SA"},{name:"Tasmania",code:"TAS"},{name:"Victoria",code:"VIC"},{name:"Western Australia",code:"WA"}],AZ:[{name:"Abseron",code:"ABS"},{name:"Agstafa",code:"AGA"},{name:"Agcab?di",code:"AGC"},{name:"Agdam",code:"AGM"},{name:"Agdas",code:"AGS"},{name:"Agsu",code:"AGU"},{name:"Astara",code:"AST"},{name:"Baki",code:"BA"},{name:"Bab?k",code:"BAB"},{name:"Balak?n",code:"BAL"},{name:"B?rd?",code:"BAR"},{name:"Beyl?qan",code:"BEY"},{name:"Bil?suvar",code:"BIL"},{name:"C?brayil",code:"CAB"},{name:"C?lilabad",code:"CAL"},{name:"Culfa",code:"CUL"},{name:"Dask?s?n",code:"DAS"},{name:"Füzuli",code:"FUZ"},{name:"G?nc?",code:"GA"},{name:"G?d?b?y",code:"GAD"},{name:"Goranboy",code:"GOR"},{name:"Göyçay",code:"GOY"},{name:"Göygöl",code:"GYG"},{name:"Haciqabul",code:"HAC"},{name:"Imisli",code:"IMI"},{name:"Ismayilli",code:"ISM"},{name:"K?lb?c?r",code:"KAL"},{name:"K?ng?rli",code:"KAN"},{name:"Kürd?mir",code:"KUR"},{name:"L?nk?ran",code:"LA"},{name:"Laçin",code:"LAC"},{name:"L?nk?ran",code:"LAN"},{name:"Lerik",code:"LER"},{name:"Masalli",code:"MAS"},{name:"Ming?çevir",code:"MI"},{name:"Naftalan",code:"NA"},{name:"Neftçala",code:"NEF"},{name:"Naxçivan",code:"NV"},{name:"Naxçivan",code:"NX"},{name:"Oguz",code:"OGU"},{name:"Ordubad",code:"ORD"},{name:"Q?b?l?",code:"QAB"},{name:"Qax",code:"QAX"},{name:"Qazax",code:"QAZ"},{name:"Quba",code:"QBA"},{name:"Qubadli",code:"QBI"},{name:"Qobustan",code:"QOB"},{name:"Qusar",code:"QUS"},{name:"S?ki",code:"SA"},{name:"Sabirabad",code:"SAB"},{name:"S?d?r?k",code:"SAD"},{name:"Sahbuz",code:"SAH"},{name:"S?ki",code:"SAK"},{name:"Salyan",code:"SAL"},{name:"S?rur",code:"SAR"},{name:"Saatli",code:"SAT"},{name:"Sabran",code:"SBN"},{name:"Siy?z?n",code:"SIY"},{name:"S?mkir",code:"SKR"},{name:"Sumqayit",code:"SM"},{name:"Samaxi",code:"SMI"},{name:"Samux",code:"SMX"},{name:"Sirvan",code:"SR"},{name:"Susa",code:"SUS"},{name:"T?rt?r",code:"TAR"},{name:"Tovuz",code:"TOV"},{name:"Ucar",code:"UCA"},{name:"Xank?ndi",code:"XA"},{name:"Xaçmaz",code:"XAC"},{name:"Xocali",code:"XCI"},{name:"Xizi",code:"XIZ"},{name:"Xocav?nd",code:"XVD"},{name:"Yardimli",code:"YAR"},{name:"Yevlax",code:"YE"},{name:"Yevlax",code:"YEV"},{name:"Z?ngilan",code:"ZAN"},{name:"Zaqatala",code:"ZAQ"},{name:"Z?rdab",code:"ZAR"}],BA:[{name:"Unsko-Sanski Kanton",code:"01"},{name:"Posavski Kanton",code:"02"},{name:"Tuzlanski Kanton",code:"03"},{name:"Zenicko-Dobojski Kanton",code:"04"},{name:"Bosansko-Podrinjski Kanton",code:"05"},{name:"Srednjobosanski Kanton",code:"06"},{name:"Hercegovacko-Neretvanski Kanton",code:"07"},{name:"Zapadnohercegovacki kanton",code:"08"},{name:"Kanton Sarajevo",code:"09"},{name:"Županija br. 10\r\n(Hercegbosanska županija)",code:"10"},{name:"Federacija Bosne i Hercegovine",code:"BIH"},{name:"Brcko distrikt",code:"BRC"},{name:"Republika Srpska",code:"SRP"}],PT:[{name:"Aveiro",code:"01"},{name:"Beja",code:"02"},{name:"Braga",code:"03"},{name:"Bragança",code:"04"},{name:"Castelo Branco",code:"05"},{name:"Coimbra",code:"06"},{name:"Évora",code:"07"},{name:"Faro",code:"08"},{name:"Guarda",code:"09"},{name:"Leiria",code:"10"},{name:"Lisboa",code:"11"},{name:"Portalegre",code:"12"},{name:"Porto",code:"13"},{name:"Santarém",code:"14"},{name:"Setúbal",code:"15"},{name:"Viana do Castelo",code:"16"},{name:"Vila Real",code:"17"},{name:"Viseu",code:"18"},{name:"Região Autónoma dos Açores",code:"20"},{name:"Região Autónoma da Madeira",code:"30"}],AD:[{name:"Canillo",code:"02"},{name:"Encamp",code:"03"},{name:"La Massana",code:"04"},{name:"Ordino",code:"05"},{name:"Sant Julià de Lòria",code:"06"},{name:"Andorra la Vella",code:"07"},{name:"Escaldes-Engordany",code:"08"}],PW:[{name:"Aimeliik",code:"002"},{name:"Airai",code:"004"},{name:"Angaur",code:"010"},{name:"Hatobohei",code:"050"},{name:"Kayangel",code:"100"},{name:"Koror",code:"150"},{name:"Melekeok",code:"212"},{name:"Ngaraard",code:"214"},{name:"Ngarchelong",code:"218"},{name:"Ngardmau",code:"222"},{name:"Ngatpang",code:"224"},{name:"Ngchesar",code:"226"},{name:"Ngeremlengui",code:"227"},{name:"Ngiwal",code:"228"},{name:"Peleliu",code:"350"},{name:"Sonsorol",code:"370"}],AG:[{name:"Saint George",code:"03"},{name:"Saint John’s",code:"04"},{name:"Saint Mary",code:"05"},{name:"Saint Paul",code:"06"},{name:"Saint Peter",code:"07"},{name:"Saint Philip",code:"08"},{name:"Barbuda",code:"10"},{name:"Redonda",code:"11"}],AE:[{name:"'Ajman",code:"AJ"},{name:"Abu Z¸aby [Abu Dhabi]",code:"AZ"},{name:"Dubayy [Dubai]",code:"DU"},{name:"Al Fujayrah",code:"FU"},{name:"Ra’s al Khaymah",code:"RK"},{name:"Ash Shariqah [Sharjah]",code:"SH"},{name:"Umm al Qaywayn",code:"UQ"}],AF:[{name:"Balkh",code:"BAL"},{name:"Bamyan",code:"BAM"},{name:"Badghis",code:"BDG"},{name:"Badakhshan",code:"BDS"},{name:"Baghlan",code:"BGL"},{name:"Daykundi",code:"DAY"},{name:"Farah",code:"FRA"},{name:"Faryab",code:"FYB"},{name:"Ghazni",code:"GHA"},{name:"Ghor",code:"GHO"},{name:"Helmand",code:"HEL"},{name:"Herat",code:"HER"},{name:"Jowzjan",code:"JOW"},{name:"Kabul",code:"KAB"},{name:"Kandahar",code:"KAN"},{name:"Kapisa",code:"KAP"},{name:"Kunduz",code:"KDZ"},{name:"Khost",code:"KHO"},{name:"Kunar",code:"KNR"},{name:"Laghman",code:"LAG"},{name:"Logar",code:"LOG"},{name:"Nangarhar",code:"NAN"},{name:"Nimroz",code:"NIM"},{name:"Nuristan",code:"NUR"},{name:"Panjshayr",code:"PAN"},{name:"Parwan",code:"PAR"},{name:"Paktiya",code:"PIA"},{name:"Paktika",code:"PKA"},{name:"Samangan",code:"SAM"},{name:"Sar-e Pul",code:"SAR"},{name:"Takhar",code:"TAK"},{name:"Uruzgan",code:"URU"},{name:"Wardak",code:"WAR"},{name:"Zabul",code:"ZAB"}],PS:[{name:"Bethlehem",code:"BTH"},{name:"Deir El Balah",code:"DEB"},{name:"Gaza",code:"GZA"},{name:"Hebron",code:"HBN"},{name:"Jerusalem",code:"JEM"},{name:"Jericho – Al Aghwar",code:"JRH"},{name:"Khan Yunis",code:"KYS"},{name:"Nablus",code:"NBS"},{name:"North Gaza",code:"NGZ"},{name:"Qalqilya",code:"QQA"},{name:"Ramallah",code:"RBH"},{name:"Rafah",code:"RFH"},{name:"Salfit",code:"SLT"},{name:"Tubas",code:"TBS"},{name:"Tulkarm",code:"TKM"}],AL:[{name:"Berat",code:"BR"},{name:"Bulqizë",code:"BU"},{name:"Dibër",code:"DI"},{name:"Delvinë",code:"DL"},{name:"Durrës",code:"DR"},{name:"Devoll",code:"DV"},{name:"Elbasan",code:"EL"},{name:"Kolonjë",code:"ER"},{name:"Fier",code:"FR"},{name:"Gjirokastër",code:"GJ"},{name:"Gramsh",code:"GR"},{name:"Has",code:"HA"},{name:"Kavajë",code:"KA"},{name:"Kurbin",code:"KB"},{name:"Kuçovë",code:"KC"},{name:"Korçë",code:"KO"},{name:"Krujë",code:"KR"},{name:"Kukës",code:"KU"},{name:"Librazhd",code:"LB"},{name:"Lezhë",code:"LE"},{name:"Lushnjë",code:"LU"},{name:"Mallakastër",code:"MK"},{name:"Malësi e Madhe",code:"MM"},{name:"Mirditë",code:"MR"},{name:"Mat",code:"MT"},{name:"Pogradec",code:"PG"},{name:"Peqin",code:"PQ"},{name:"Përmet",code:"PR"},{name:"Pukë",code:"PU"},{name:"Shkodër",code:"SH"},{name:"Skrapar",code:"SK"},{name:"Sarandë",code:"SR"},{name:"Tepelenë",code:"TE"},{name:"Tropojë",code:"TP"},{name:"Tiranë",code:"TR"},{name:"Vlorë",code:"VL"}],AO:[{name:"Bengo",code:"BGO"},{name:"Benguela",code:"BGU"},{name:"Bié",code:"BIE"},{name:"Cabinda",code:"CAB"},{name:"Cuando-Cubango",code:"CCU"},{name:"Cunene",code:"CNN"},{name:"Cuanza Norte",code:"CNO"},{name:"Cuanza Sul",code:"CUS"},{name:"Huambo",code:"HUA"},{name:"Huíla",code:"HUI"},{name:"Lunda Norte",code:"LNO"},{name:"Lunda Sul",code:"LSU"},{name:"Luanda",code:"LUA"},{name:"Malange",code:"MAL"},{name:"Moxico",code:"MOX"},{name:"Namibe",code:"NAM"},{name:"Uíge",code:"UIG"},{name:"Zaire",code:"ZAI"}],PY:[{name:"Concepción",code:"1"},{name:"Alto Paraná",code:"10"},{name:"Central",code:"11"},{name:"Ñeembucú",code:"12"},{name:"Amambay",code:"13"},{name:"Canindeyú",code:"14"},{name:"Presidente Hayes",code:"15"},{name:"Alto Paraguay",code:"16"},{name:"Boquerón",code:"19"},{name:"San Pedro",code:"2"},{name:"Cordillera",code:"3"},{name:"Guairá",code:"4"},{name:"Caaguazú",code:"5"},{name:"Caazapá",code:"6"},{name:"Itapúa",code:"7"},{name:"Misiones",code:"8"},{name:"Paraguarí",code:"9"},{name:"Asunción",code:"ASU"}],AM:[{name:"Aragac?otn",code:"AG"},{name:"Ararat",code:"AR"},{name:"Armavir",code:"AV"},{name:"Erevan",code:"ER"},{name:"Gegark'unik'",code:"GR"},{name:"Kotayk'",code:"KT"},{name:"Lo?i",code:"LO"},{name:"Širak",code:"SH"},{name:"Syunik'",code:"SU"},{name:"Tavuš",code:"TV"},{name:"Vayoc Jor",code:"VD"}],BW:[{name:"Central",code:"CE"},{name:"Ghanzi",code:"GH"},{name:"Kgalagadi",code:"KG"},{name:"Kgatleng",code:"KL"},{name:"Kweneng",code:"KW"},{name:"North-East",code:"NE"},{name:"North-West",code:"NW"},{name:"South-East",code:"SE"},{name:"Southern",code:"SO"}],TG:[{name:"Centre",code:"C"},{name:"Kara",code:"K"},{name:"Maritime (Région)",code:"M"},{name:"Plateaux",code:"P"},{name:"Savannes",code:"S"}],BY:[{name:"Bresckaja voblasc (be) - Brestskaja oblast' (ru)",code:"BR"},{name:"Horad Minsk",code:"HM"},{name:"Homyel'skaya voblasts' (be) - Gomel'skaya oblast' (ru)",code:"HO"},{name:"Hrodzenskaya voblasts' (be) - Grodnenskaya oblast' (ru)",code:"HR"},{name:"Mahilyowskaya voblasts' (be) - Mogilevskaya oblast' (ru)",code:"MA"},{name:"Minskaya voblasts' (be) - Minskaya oblast' (ru)",code:"MI"},{name:"Vitsyebskaya voblasts' (be) - Vitebskaya oblast' (ru)",code:"VI"}],TD:[{name:"Batha",code:"BA"},{name:"Ba?r al Ghazal",code:"BG"},{name:"Burku",code:"BO"},{name:"Chari-Baguirmi",code:"CB"},{name:"Innidi",code:"EN"},{name:"Guéra",code:"GR"},{name:"Hadjer Lamis",code:"HL"},{name:"Kanem",code:"KA"},{name:"Lac",code:"LC"},{name:"Logone-Occidental",code:"LO"},{name:"Logone-Oriental",code:"LR"},{name:"Mandoul",code:"MA"},{name:"Moyen-Chari",code:"MC"},{name:"Mayo-Kebbi-Est",code:"ME"},{name:"Mayo-Kebbi-Ouest",code:"MO"},{name:"Ville de Ndjamena",code:"ND"},{name:"Ouaddaï",code:"OD"},{name:"Salamat",code:"SA"},{name:"Sila",code:"SI"},{name:"Tandjilé",code:"TA"},{name:"Tibasti",code:"TI"},{name:"Wadi Fira",code:"WF"}],BS:[{name:"Acklins",code:"AK"},{name:"Bimini",code:"BI"},{name:"Black Point",code:"BP"},{name:"Berry Islands",code:"BY"},{name:"Central Eleuthera",code:"CE"},{name:"Cat Island",code:"CI"},{name:"Crooked Island and Long Cay",code:"CK"},{name:"Central Abaco",code:"CO"},{name:"Central Andros",code:"CS"},{name:"East Grand Bahama",code:"EG"},{name:"Exuma",code:"EX"},{name:"City of Freeport",code:"FP"},{name:"Grand Cay",code:"GC"},{name:"Harbour Island",code:"HI"},{name:"Hope Town",code:"HT"},{name:"Inagua",code:"IN"},{name:"Long Island",code:"LI"},{name:"Mangrove Cay",code:"MC"},{name:"Mayaguana",code:"MG"},{name:"Moore's Island",code:"MI"},{name:"North Eleuthera",code:"NE"},{name:"North Abaco",code:"NO"},{name:"North Andros",code:"NS"},{name:"Rum Cay",code:"RC"},{name:"Ragged Island",code:"RI"},{name:"South Andros",code:"SA"},{name:"South Eleuthera",code:"SE"},{name:"South Abaco",code:"SO"},{name:"San Salvador",code:"SS"},{name:"Spanish Wells",code:"SW"},{name:"West Grand Bahama",code:"WG"}],BR:[{name:"Acre",code:"AC"},{name:"Alagoas",code:"AL"},{name:"Amazonas",code:"AM"},{name:"Amapá",code:"AP"},{name:"Bahia",code:"BA"},{name:"Ceará",code:"CE"},{name:"Distrito Federal",code:"DF"},{name:"Espírito Santo",code:"ES"},{name:"Goiás",code:"GO"},{name:"Maranhão",code:"MA"},{name:"Minas Gerais",code:"MG"},{name:"Mato Grosso do Sul",code:"MS"},{name:"Mato Grosso",code:"MT"},{name:"Pará",code:"PA"},{name:"Paraíba",code:"PB"},{name:"Pernambuco",code:"PE"},{name:"Piauí",code:"PI"},{name:"Paraná",code:"PR"},{name:"Rio de Janeiro",code:"RJ"},{name:"Rio Grande do Norte",code:"RN"},{name:"Rondônia",code:"RO"},{name:"Roraima",code:"RR"},{name:"Rio Grande do Sul",code:"RS"},{name:"Santa Catarina",code:"SC"},{name:"Sergipe",code:"SE"},{name:"São Paulo",code:"SP"},{name:"Tocantins",code:"TO"}],TJ:[{name:"Kuhistoni Badakhshon",code:"GB"},{name:"Khatlon",code:"KT"},{name:"Sughd",code:"SU"}],BT:[{name:"Paro",code:"11"},{name:"Chhukha",code:"12"},{name:"Ha",code:"13"},{name:"Samtse",code:"14"},{name:"Thimphu",code:"15"},{name:"Tsirang",code:"21"},{name:"Dagana",code:"22"},{name:"Punakha",code:"23"},{name:"Wangdue Phodrang",code:"24"},{name:"Sarpang",code:"31"},{name:"Trongsa",code:"32"},{name:"Bumthang",code:"33"},{name:"Zhemgang",code:"34"},{name:"Trashigang",code:"41"},{name:"Monggar",code:"42"},{name:"Pemagatshel",code:"43"},{name:"Lhuentse",code:"44"},{name:"Samdrup Jongkha",code:"45"},{name:"Gasa",code:"GA"},{name:"Trashi Yangtse",code:"TY"}],TH:[{name:"Krung Thep Maha Nakhon [Bangkok]",code:"10"},{name:"Samut Prakan",code:"11"},{name:"Nonthaburi",code:"12"},{name:"Pathum Thani",code:"13"},{name:"Phra Nakhon Si Ayutthaya",code:"14"},{name:"Ang Thong",code:"15"},{name:"Lop Buri",code:"16"},{name:"Sing Buri",code:"17"},{name:"Chai Nat",code:"18"},{name:"Saraburi",code:"19"},{name:"Chon Buri",code:"20"},{name:"Rayong",code:"21"},{name:"Chanthaburi",code:"22"},{name:"Trat",code:"23"},{name:"Chachoengsao",code:"24"},{name:"Prachin Buri",code:"25"},{name:"Nakhon Nayok",code:"26"},{name:"Sa Kaeo",code:"27"},{name:"Nakhon Ratchasima",code:"30"},{name:"Buri Ram",code:"31"},{name:"Surin",code:"32"},{name:"Si Sa Ket",code:"33"},{name:"Ubon Ratchathani",code:"34"},{name:"Yasothon",code:"35"},{name:"Chaiyaphum",code:"36"},{name:"Amnat Charoen",code:"37"},{name:"Bueng Kan",code:"38"},{name:"Nong Bua Lam Phu",code:"39"},{name:"Khon Kaen",code:"40"},{name:"Udon Thani",code:"41"},{name:"Loei",code:"42"},{name:"Nong Khai",code:"43"},{name:"Maha Sarakham",code:"44"},{name:"Roi Et",code:"45"},{name:"Kalasin",code:"46"},{name:"Sakon Nakhon",code:"47"},{name:"Nakhon Phanom",code:"48"},{name:"Mukdahan",code:"49"},{name:"Chiang Mai",code:"50"},{name:"Lamphun",code:"51"},{name:"Lampang",code:"52"},{name:"Uttaradit",code:"53"},{name:"Phrae",code:"54"},{name:"Nan",code:"55"},{name:"Phayao",code:"56"},{name:"Chiang Rai",code:"57"},{name:"Mae Hong Son",code:"58"},{name:"Nakhon Sawan",code:"60"},{name:"Uthai Thani",code:"61"},{name:"Kamphaeng Phet",code:"62"},{name:"Tak",code:"63"},{name:"Sukhothai",code:"64"},{name:"Phitsanulok",code:"65"},{name:"Phichit",code:"66"},{name:"Phetchabun",code:"67"},{name:"Ratchaburi",code:"70"},{name:"Kanchanaburi",code:"71"},{name:"Suphan Buri",code:"72"},{name:"Nakhon Pathom",code:"73"},{name:"Samut Sakhon",code:"74"},{name:"Samut Songkhram",code:"75"},{name:"Phetchaburi",code:"76"},{name:"Prachuap Khiri Khan",code:"77"},{name:"Nakhon Si Thammarat",code:"80"},{name:"Krabi",code:"81"},{name:"Phangnga",code:"82"},{name:"Phuket",code:"83"},{name:"Surat Thani",code:"84"},{name:"Ranong",code:"85"},{name:"Chumphon",code:"86"},{name:"Songkhla",code:"90"},{name:"Satun",code:"91"},{name:"Trang",code:"92"},{name:"Phatthalung",code:"93"},{name:"Pattani",code:"94"},{name:"Yala",code:"95"},{name:"Narathiwat",code:"96"},{name:"Phatthaya",code:"S"}],TO:[{name:"'Eua",code:"01"},{name:"Ha'apai",code:"02"},{name:"Niuas",code:"03"},{name:"Tongatapu",code:"04"},{name:"Vava'u",code:"05"}],TN:[{name:"Tunis",code:"11"},{name:"Ariana",code:"12"},{name:"Ben Arous",code:"13"},{name:"La Manouba",code:"14"},{name:"Nabeul",code:"21"},{name:"Zaghouan",code:"22"},{name:"Bizerte",code:"23"},{name:"Béja",code:"31"},{name:"Jendouba",code:"32"},{name:"Le Kef",code:"33"},{name:"Siliana",code:"34"},{name:"Kairouan",code:"41"},{name:"Kasserine",code:"42"},{name:"Sidi Bouzid",code:"43"},{name:"Sousse",code:"51"},{name:"Monastir",code:"52"},{name:"Mahdia",code:"53"},{name:"Sfax",code:"61"},{name:"Gafsa",code:"71"},{name:"Tozeur",code:"72"},{name:"Kebili",code:"73"},{name:"Gabès",code:"81"},{name:"Medenine",code:"82"},{name:"Tataouine",code:"83"}],TM:[{name:"Ahal",code:"A"},{name:"Balkan",code:"B"},{name:"Dasoguz",code:"D"},{name:"Lebap",code:"L"},{name:"Mary",code:"M"},{name:"Asgabat",code:"S"}],CA:[{name:"Alberta",code:"AB"},{name:"British Columbia",code:"BC"},{name:"Manitoba",code:"MB"},{name:"New Brunswick",code:"NB"},{name:"Newfoundland and Labrador",code:"NL"},{name:"Nova Scotia",code:"NS"},{name:"Northwest Territories",code:"NT"},{name:"Nunavut",code:"NU"},{name:"Ontario",code:"ON"},{name:"Prince Edward Island",code:"PE"},{name:"Quebec",code:"QC"},{name:"Saskatchewan",code:"SK"},{name:"Yukon Territory",code:"YT"}],TL:[{name:"Aileu",code:"AL"},{name:"Ainaro",code:"AN"},{name:"Baucau",code:"BA"},{name:"Bobonaro",code:"BO"},{name:"Cova Lima",code:"CO"},{name:"Díli",code:"DI"},{name:"Ermera",code:"ER"},{name:"Lautem",code:"LA"},{name:"Liquiça",code:"LI"},{name:"Manufahi",code:"MF"},{name:"Manatuto",code:"MT"},{name:"Oecussi",code:"OE"},{name:"Viqueque",code:"VI"}],BZ:[{name:"Belize",code:"BZ"},{name:"Cayo",code:"CY"},{name:"Corozal",code:"CZL"},{name:"Orange Walk",code:"OW"},{name:"Stann Creek",code:"SC"},{name:"Toledo",code:"TOL"}],TR:[{name:"Adana",code:"01"},{name:"Adiyaman",code:"02"},{name:"Afyonkarahisar",code:"03"},{name:"Agri",code:"04"},{name:"Amasya",code:"05"},{name:"Ankara",code:"06"},{name:"Antalya",code:"07"},{name:"Artvin",code:"08"},{name:"Aydin",code:"09"},{name:"Balikesir",code:"10"},{name:"Bilecik",code:"11"},{name:"Bingöl",code:"12"},{name:"Bitlis",code:"13"},{name:"Bolu",code:"14"},{name:"Burdur",code:"15"},{name:"Bursa",code:"16"},{name:"Canakkale",code:"17"},{name:"Çankiri",code:"18"},{name:"Corum",code:"19"},{name:"Denizli",code:"20"},{name:"Diyarbakir",code:"21"},{name:"Edirne",code:"22"},{name:"Elazig",code:"23"},{name:"Erzincan",code:"24"},{name:"Erzurum",code:"25"},{name:"Eskisehir",code:"26"},{name:"Gaziantep",code:"27"},{name:"Giresun",code:"28"},{name:"Gümüshane",code:"29"},{name:"Hakkari",code:"30"},{name:"Hatay",code:"31"},{name:"Isparta",code:"32"},{name:"Mersin",code:"33"},{name:"Istanbul",code:"34"},{name:"Izmir",code:"35"},{name:"Kars",code:"36"},{name:"Kastamonu",code:"37"},{name:"Kayseri",code:"38"},{name:"Kirklareli",code:"39"},{name:"Kirsehir",code:"40"},{name:"Kocaeli",code:"41"},{name:"Konya",code:"42"},{name:"Kütahya",code:"43"},{name:"Malatya",code:"44"},{name:"Manisa",code:"45"},{name:"Kahramanmaras",code:"46"},{name:"Mardin",code:"47"},{name:"Mugla",code:"48"},{name:"Mus",code:"49"},{name:"Nevsehir",code:"50"},{name:"Nigde",code:"51"},{name:"Ordu",code:"52"},{name:"Rize",code:"53"},{name:"Sakarya",code:"54"},{name:"Samsun",code:"55"},{name:"Siirt",code:"56"},{name:"Sinop",code:"57"},{name:"Sivas",code:"58"},{name:"Tekirdag",code:"59"},{name:"Tokat",code:"60"},{name:"Trabzon",code:"61"},{name:"Tunceli",code:"62"},{name:"Sanliurfa",code:"63"},{name:"Usak",code:"64"},{name:"Van",code:"65"},{name:"Yozgat",code:"66"},{name:"Zonguldak",code:"67"},{name:"Aksaray",code:"68"},{name:"Bayburt",code:"69"},{name:"Karaman",code:"70"},{name:"Kirikkale",code:"71"},{name:"Batman",code:"72"},{name:"Sirnak",code:"73"},{name:"Bartin",code:"74"},{name:"Ardahan",code:"75"},{name:"Igdir",code:"76"},{name:"Yalova",code:"77"},{name:"Karabuk",code:"78"},{name:"Kilis",code:"79"},{name:"Osmaniye",code:"80"},{name:"Düzce",code:"81"}],BF:[{name:"Balé",code:"BAL"},{name:"Bam",code:"BAM"},{name:"Banwa",code:"BAN"},{name:"Bazèga\r\nga",code:"BAZ"},{name:"Bougouriba",code:"BGR"},{name:"Boulgou",code:"BLG"},{name:"Boulkiemdé",code:"BLK"},{name:"Comoé",code:"COM"},{name:"Ganzourgou",code:"GAN"},{name:"Gnagna",code:"GNA"},{name:"Gourma",code:"GOU"},{name:"Houet",code:"HOU"},{name:"Ioba",code:"IOB"},{name:"Kadiogo",code:"KAD"},{name:"Kénédougou",code:"KEN"},{name:"Komondjari",code:"KMD"},{name:"Kompienga",code:"KMP"},{name:"Koulpélogo",code:"KOP"},{name:"Kossi",code:"KOS"},{name:"Kouritenga",code:"KOT"},{name:"Kourwéogo",code:"KOW"},{name:"Léraba",code:"LER"},{name:"Loroum",code:"LOR"},{name:"Mouhoun",code:"MOU"},{name:"Namentenga",code:"NAM"},{name:"Nahouri",code:"NAO"},{name:"Nayala",code:"NAY"},{name:"Noumbiel",code:"NOU"},{name:"Oubritenga",code:"OUB"},{name:"Oudalan",code:"OUD"},{name:"Passoré",code:"PAS"},{name:"Poni",code:"PON"},{name:"Séno",code:"SEN"},{name:"Sissili",code:"SIS"},{name:"Sanmatenga",code:"SMT"},{name:"Sanguié",code:"SNG"},{name:"Soum",code:"SOM"},{name:"Sourou",code:"SOR"},{name:"Tapoa",code:"TAP"},{name:"Tui",code:"TUI"},{name:"Yagha",code:"YAG"},{name:"Yatenga",code:"YAT"},{name:"Ziro",code:"ZIR"},{name:"Zondoma",code:"ZON"},{name:"Zoundwéogo",code:"ZOU"}],BG:[{name:"Blagoevgrad",code:"01"},{name:"Burgas",code:"02"},{name:"Varna",code:"03"},{name:"Veliko Tarnovo",code:"04"},{name:"Vidin",code:"05"},{name:"Vratsa",code:"06"},{name:"Gabrovo",code:"07"},{name:"Dobrich",code:"08"},{name:"Kardzhali",code:"09"},{name:"Kjustendil",code:"10"},{name:"Lovech",code:"11"},{name:"Montana",code:"12"},{name:"Pazardzik",code:"13"},{name:"Pernik",code:"14"},{name:"Pleven",code:"15"},{name:"Plovdiv",code:"16"},{name:"Razgrad",code:"17"},{name:"Ruse",code:"18"},{name:"Silistra",code:"19"},{name:"Sliven",code:"20"},{name:"Smolyan",code:"21"},{name:"Sofia (stolitsa)",code:"22"},{name:"Sofia",code:"23"},{name:"Stara Zagora",code:"24"},{name:"Targovishte",code:"25"},{name:"Haskovo",code:"26"},{name:"Shumen",code:"27"},{name:"Yambol",code:"28"}],SV:[{name:"Ahuachapán",code:"AH"},{name:"Cabañas",code:"CA"},{name:"Chalatenango",code:"CH"},{name:"Cuscatlán",code:"CU"},{name:"La Libertad",code:"LI"},{name:"Morazán",code:"MO"},{name:"La Paz",code:"PA"},{name:"Santa Ana",code:"SA"},{name:"San Miguel",code:"SM"},{name:"Sonsonate",code:"SO"},{name:"San Salvador",code:"SS"},{name:"San Vicente",code:"SV"},{name:"La Unión",code:"UN"},{name:"Usulután",code:"US"}],BH:[{name:"Al Manamah (Al ‘Asimah)",code:"13"},{name:"Al Janubiyah",code:"14"},{name:"Al Mu?arraq",code:"15"},{name:"Al Wustá",code:"16"},{name:"Ash Shamaliyah",code:"17"}],SS:[{name:"Northern Bahr el Ghazal",code:"BN"},{name:"Western Bahr el Ghazal",code:"BW"},{name:"Central Equatoria",code:"EC"},{name:"Eastern Equatoria",code:"EE"},{name:"Western Equatoria",code:"EW"},{name:"Jonglei",code:"JG"},{name:"Lakes",code:"LK"},{name:"Upper Nile",code:"NU"},{name:"Unity",code:"UY"},{name:"Warrap",code:"WR"}],BI:[{name:"Bubanza",code:"BB"},{name:"Bujumbura Rural",code:"BL"},{name:"Bujumbura Mairie",code:"BM"},{name:"Bururi",code:"BR"},{name:"Cankuzo",code:"CA"},{name:"Cibitoke",code:"CI"},{name:"Gitega",code:"GI"},{name:"Kirundo",code:"KI"},{name:"Karuzi",code:"KR"},{name:"Kayanza",code:"KY"},{name:"Makamba",code:"MA"},{name:"Muramvya",code:"MU"},{name:"Mwaro",code:"MW"},{name:"Muyinga",code:"MY"},{name:"Ngozi",code:"NG"},{name:"Rutana",code:"RT"},{name:"Ruyigi",code:"RY"}],ST:[{name:"Príncipe",code:"P"},{name:"São Tomé",code:"S"}],BB:[{name:"Christ Church",code:"01"},{name:"Saint Andrew",code:"02"},{name:"Saint George",code:"03"},{name:"Saint James",code:"04"},{name:"Saint John",code:"05"},{name:"Saint Joseph",code:"06"},{name:"Saint Lucy",code:"07"},{name:"Saint Michael",code:"08"},{name:"Saint Peter",code:"09"},{name:"Saint Philip",code:"10"},{name:"Saint Thomas",code:"11"}],SY:[{name:"Dimashq",code:"DI"},{name:"Dar'a",code:"DR"},{name:"Dayr az Zawr",code:"DY"},{name:"AI Hasakah",code:"HA"},{name:"Hims",code:"HI"},{name:"Halab",code:"HL"},{name:"Hamah",code:"HM"},{name:"Idlib",code:"ID"},{name:"AI Ladhiqiyah",code:"LA"},{name:"AI Qunaytirah",code:"Qu"},{name:"Ar Raqqah",code:"RA"},{name:"Rif Dimashq",code:"RD"},{name:"As Suwayda'",code:"SU"},{name:"Tartus",code:"TA"}],SZ:[{name:"Hhohho",code:"HH"},{name:"Lubombo",code:"LU"},{name:"Manzini",code:"MA"},{name:"Shiselweni",code:"SH"}],BD:[{name:"Bandarban",code:"01"},{name:"Barguna",code:"02"},{name:"Bogra",code:"03"},{name:"Brahmanbaria",code:"04"},{name:"Bagerhat",code:"05"},{name:"Barisal",code:"06"},{name:"Bhola",code:"07"},{name:"Comilla",code:"08"},{name:"Chandpur",code:"09"},{name:"Chittagong",code:"10"},{name:"Cox's Bazar",code:"11"},{name:"Chuadanga",code:"12"},{name:"Dhaka",code:"13"},{name:"Dinajpur",code:"14"},{name:"Faridpur",code:"15"},{name:"Feni",code:"16"},{name:"Gopalganj",code:"17"},{name:"Gazipur",code:"18"},{name:"Gaibandha",code:"19"},{name:"Habiganj",code:"20"},{name:"Jamalpur",code:"21"},{name:"Jessore",code:"22"},{name:"Jhenaidah",code:"23"},{name:"Jaipurhat",code:"24"},{name:"Jhalakati",code:"25"},{name:"Kishoreganj",code:"26"},{name:"Khulna",code:"27"},{name:"Kurigram",code:"28"},{name:"Khagrachari",code:"29"},{name:"Kushtia",code:"30"},{name:"Lakshmipur",code:"31"},{name:"Lalmonirhat",code:"32"},{name:"Manikganj",code:"33"},{name:"Mymensingh",code:"34"},{name:"Munshiganj",code:"35"},{name:"Madaripur",code:"36"},{name:"Magura",code:"37"},{name:"Moulvibazar",code:"38"},{name:"Meherpur",code:"39"},{name:"Narayanganj",code:"40"},{name:"Netrakona",code:"41"},{name:"Narsingdi",code:"42"},{name:"Narail",code:"43"},{name:"Natore",code:"44"},{name:"Nawabganj",code:"45"},{name:"Nilphamari",code:"46"},{name:"Noakhali",code:"47"},{name:"Naogaon",code:"48"},{name:"Pabna",code:"49"},{name:"Pirojpur",code:"50"},{name:"Patuakhali",code:"51"},{name:"Panchagarh",code:"52"},{name:"Rajbari",code:"53"},{name:"Rajshahi",code:"54"},{name:"Rangpur",code:"55"},{name:"Rangamati",code:"56"},{name:"Sherpur",code:"57"},{name:"Satkhira",code:"58"},{name:"Sirajganj",code:"59"},{name:"Sylhet",code:"60"},{name:"Sunamganj",code:"61"},{name:"Shariatpur",code:"62"},{name:"Tangail",code:"63"},{name:"Thakurgaon",code:"64"}],BE:[{name:"Bruxelles-Capitale, Région de",code:"BRU"},{name:"Antwerpen",code:"VAN"},{name:"Vlaams Brabant",code:"VBR"},{name:"Vlaamse Gewest",code:"VLG"},{name:"Limburg",code:"VLI"},{name:"Oost-Vlaanderen",code:"VOV"},{name:"West-Vlaanderen",code:"VWV"},{name:"Wallonne, Région",code:"WAL"},{name:"Brabant wallon",code:"WBR"},{name:"Hainaut",code:"WHT"},{name:"Liège",code:"WLG"},{name:"Luxembourg",code:"WLX"},{name:"Namur",code:"WNA"}],BN:[{name:"Belait",code:"BE"},{name:"Brunei-Muara",code:"BM"},{name:"Temburong",code:"TE"},{name:"Tutong",code:"TU"}],BO:[{name:"El Beni",code:"B"},{name:"Cochabamba",code:"C"},{name:"Chuquisaca",code:"H"},{name:"La Paz",code:"L"},{name:"Pando",code:"N"},{name:"Oruro",code:"O"},{name:"Potosí",code:"P"},{name:"Santa Cruz",code:"S"},{name:"Tarija",code:"T"}],BJ:[{name:"Atakora",code:"AK"},{name:"Alibori",code:"AL"},{name:"Atlantique",code:"AQ"},{name:"Borgou",code:"BO"},{name:"Collines",code:"CO"},{name:"Donga",code:"DO"},{name:"Kouffo",code:"KO"},{name:"Littoral",code:"LI"},{name:"Mono",code:"MO"},{name:"Ouémé",code:"OU"},{name:"Plateau",code:"PL"},{name:"Zou",code:"ZO"}],CZ:[{name:"Jihoceský kraj",code:"JC"},{name:"Jihomoravský kraj",code:"JM"},{name:"Karlovarský kraj",code:"KA"},{name:"Královéhradecký kraj",code:"KR"},{name:"Liberecký kraj",code:"LI"},{name:"Moravskoslezský kraj",code:"MO"},{name:"Olomoucký kraj",code:"OL"},{name:"Pardubický kraj",code:"PA"},{name:"Plzenský kraj",code:"PL"},{name:"Praha, hlavní mesto",code:"PR"},{name:"Stredoceský kraj",code:"ST"},{name:"Ústecký kraj",code:"US"},{name:"Vysocina",code:"VY"},{name:"Zlínský kraj",code:"ZL"}],SD:[{name:"Zalingei",code:"DC"},{name:"Sharq Darfur",code:"DE"},{name:"Shamal Darfur",code:"DN"},{name:"Janub Darfur",code:"DS"},{name:"Gharb Darfur",code:"DW"},{name:"Al Qadarif",code:"GD"},{name:"Al Jazirah",code:"GZ"},{name:"Kassala",code:"KA"},{name:"Al Khartum",code:"KH"},{name:"Shamal Kurdufan",code:"KN"},{name:"Janub Kurdufan",code:"KS"},{name:"An Nil al Azraq",code:"NB"},{name:"Ash Shamaliyah",code:"NO"},{name:"An Nil",code:"NR"},{name:"An Nil al Abya?",code:"NW"},{name:"Al Ba?r al A?mar",code:"RS"},{name:"Sinnar",code:"SI"}],CY:[{name:"Lefkosia",code:"01"},{name:"Lemesos",code:"02"},{name:"Larnaka",code:"03"},{name:"Ammochostos",code:"04"},{name:"Pafos",code:"05"},{name:"Keryneia",code:"06"}],SC:[{name:"Anse aux Pins",code:"01"},{name:"Anse Boileau",code:"02"},{name:"Anse Étoile",code:"03"},{name:"Au Cap",code:"04"},{name:"Anse Royale",code:"05"},{name:"Baie Lazare",code:"06"},{name:"Baie Sainte Anne",code:"07"},{name:"Beau Vallon",code:"08"},{name:"Bel Air",code:"09"},{name:"Bel Ombre",code:"10"},{name:"Cascade",code:"11"},{name:"Glacis",code:"12"},{name:"Grand'Anse Mahé",code:"13"},{name:"Grand'Anse Praslin",code:"14"},{name:"La Digue",code:"15"},{name:"La Rivière Anglaise",code:"16"},{name:"Mont Buxton",code:"17"},{name:"Mont Fleuri",code:"18"},{name:"Plaisance",code:"19"},{name:"Pointe La Rue",code:"20"},{name:"Port Glaud",code:"21"},{name:"Saint Louis",code:"22"},{name:"Takamaka",code:"23"},{name:"Lemamel",code:"24"},{name:"Ros Kaiman",code:"25"}],SE:[{name:"Stockholms län",code:"AB"},{name:"Västerbottens län",code:"AC"},{name:"Norrbottens län",code:"BD"},{name:"Uppsala län",code:"C"},{name:"Södermanlands län",code:"D"},{name:"Östergötlands län",code:"E"},{name:"Jönköpings län",code:"F"},{name:"Kronoborgs län",code:"G"},{name:"Kalmar län",code:"H"},{name:"Gotlands län",code:"I"},{name:"Blekinge län",code:"K"},{name:"Skåne län",code:"M"},{name:"Hallands län",code:"N"},{name:"Västra Götalands län",code:"O"},{name:"Värmlands län",code:"S"},{name:"Örebro län",code:"T"},{name:"Västmanlands län",code:"U"},{name:"Dalarnes län",code:"W"},{name:"Gävleborgs län",code:"X"},{name:"Västernorrlands län",code:"Y"},{name:"Jämtlands län",code:"Z"}],CV:[{name:"Brava",code:"BR"},{name:"Boa Vista",code:"BV"},{name:"Santa Catarina",code:"CA"},{name:"Santa Catarina do Fogo",code:"CF"},{name:"Santa Cruz",code:"CR"},{name:"Maio",code:"MA"},{name:"Mosteiros",code:"MO"},{name:"Paul",code:"PA"},{name:"Porto Novo",code:"PN"},{name:"Praia",code:"PR"},{name:"Ribeira Brava",code:"RB"},{name:"Ribeira Grande",code:"RG"},{name:"Ribeira Grande de Santiago",code:"RS"},{name:"São Domingos",code:"SD"},{name:"São Filipe",code:"SF"},{name:"Sal",code:"SL"},{name:"São Miguel",code:"SM"},{name:"São Lourenço dos Órgãos",code:"SO"},{name:"São Salvador do Mundo",code:"SS"},{name:"São Vicente",code:"SV"},{name:"Tarrafal",code:"TA"},{name:"Tarrafal de São Nicolau",code:"TS"}],SH:[{name:"Ascension",code:"AC"},{name:"Saint Helena",code:"HL"},{name:"Tristan da Cunha",code:"TA"}],CU:[{name:"Pinar del Río",code:"01"},{name:"La Habana",code:"02"},{name:"Ciudad de La Habana",code:"03"},{name:"Matanzas",code:"04"},{name:"Villa Clara",code:"05"},{name:"Cienfuegos",code:"06"},{name:"Sancti Spíritus",code:"07"},{name:"Ciego de Ávila",code:"08"},{name:"Camagüey",code:"09"},{name:"Las Tunas",code:"10"},{name:"Holguín",code:"11"},{name:"Granma",code:"12"},{name:"Santiago de Cuba",code:"13"},{name:"Guantánamo",code:"14"},{name:"Isla de la Juventud",code:"99"}],SG:[{name:"Central Singapore",code:"01"},{name:"North East",code:"02"},{name:"North West",code:"03"},{name:"South East",code:"04"},{name:"South West",code:"05"}],SI:[{name:"Ajdovšcina",code:"001"},{name:"Beltinci",code:"002"},{name:"Bled",code:"003"},{name:"Bohinj",code:"004"},{name:"Borovnica",code:"005"},{name:"Bovec",code:"006"},{name:"Brda",code:"007"},{name:"Brezovica",code:"008"},{name:"Brežice",code:"009"},{name:"Tišina",code:"010"},{name:"Celje",code:"011"},{name:"Cerklje na Gorenjskem",code:"012"},{name:"Cerknica",code:"013"},{name:"Cerkno",code:"014"},{name:"Crenšovci",code:"015"},{name:"Crna na Koroškem",code:"016"},{name:"Crnomelj",code:"017"},{name:"Destrnik",code:"018"},{name:"Divaca",code:"019"},{name:"Dobrepolje",code:"020"},{name:"Dobrova-Polhov Gradec",code:"021"},{name:"Dol pri Ljubljani",code:"022"},{name:"Domžale",code:"023"},{name:"Dornava",code:"024"},{name:"Dravograd",code:"025"},{name:"Duplek",code:"026"},{name:"Gorenja vas-Poljane",code:"027"},{name:"Gorišnica",code:"028"},{name:"Gornja Radgona",code:"029"},{name:"Gornji Grad",code:"030"},{name:"Gornji Petrovci",code:"031"},{name:"Grosuplje",code:"032"},{name:"Šalovci",code:"033"},{name:"Hrastnik",code:"034"},{name:"Hrpelje-Kozina",code:"035"},{name:"Idrija",
code:"036"},{name:"Ig",code:"037"},{name:"Ilirska Bistrica",code:"038"},{name:"Ivancna Gorica",code:"039"},{name:"Izola",code:"040"},{name:"Jesenice",code:"041"},{name:"Juršinci",code:"042"},{name:"Kamnik",code:"043"},{name:"Kanal",code:"044"},{name:"Kidricevo",code:"045"},{name:"Kobarid",code:"046"},{name:"Kobilje",code:"047"},{name:"Kocevje",code:"048"},{name:"Komen",code:"049"},{name:"Koper",code:"050"},{name:"Kozje",code:"051"},{name:"Kranj",code:"052"},{name:"Kranjska Gora",code:"053"},{name:"Krško",code:"054"},{name:"Kungota",code:"055"},{name:"Kuzma",code:"056"},{name:"Laško",code:"057"},{name:"Lenart",code:"058"},{name:"Lendava",code:"059"},{name:"Litija",code:"060"},{name:"Ljubljana",code:"061"},{name:"Ljubno",code:"062"},{name:"Ljutomer",code:"063"},{name:"Logatec",code:"064"},{name:"Loška dolina",code:"065"},{name:"Loški Potok",code:"066"},{name:"Luce",code:"067"},{name:"Lukovica",code:"068"},{name:"Majšperk",code:"069"},{name:"Maribor",code:"070"},{name:"Medvode",code:"071"},{name:"Mengeš",code:"072"},{name:"Metlika",code:"073"},{name:"Mežica",code:"074"},{name:"Miren-Kostanjevica",code:"075"},{name:"Mislinja",code:"076"},{name:"Moravce",code:"077"},{name:"Moravske Toplice",code:"078"},{name:"Mozirje",code:"079"},{name:"Murska Sobota",code:"080"},{name:"Muta",code:"081"},{name:"Naklo",code:"082"},{name:"Nazarje",code:"083"},{name:"Nova Gorica",code:"084"},{name:"Novo mesto",code:"085"},{name:"Odranci",code:"086"},{name:"Ormož",code:"087"},{name:"Osilnica",code:"088"},{name:"Pesnica",code:"089"},{name:"Piran",code:"090"},{name:"Pivka",code:"091"},{name:"Podcetrtek",code:"092"},{name:"Podvelka",code:"093"},{name:"Postojna",code:"094"},{name:"Preddvor",code:"095"},{name:"Ptuj",code:"096"},{name:"Puconci",code:"097"},{name:"Race-Fram",code:"098"},{name:"Radece",code:"099"},{name:"Radenci",code:"100"},{name:"Radlje ob Dravi",code:"101"},{name:"Radovljica",code:"102"},{name:"Ravne na Koroškem",code:"103"},{name:"Ribnica",code:"104"},{name:"Rogašovci",code:"105"},{name:"Rogaška Slatina",code:"106"},{name:"Rogatec",code:"107"},{name:"Ruše",code:"108"},{name:"Semic",code:"109"},{name:"Sevnica",code:"110"},{name:"Sežana",code:"111"},{name:"Slovenj Gradec",code:"112"},{name:"Slovenska Bistrica",code:"113"},{name:"Slovenske Konjice",code:"114"},{name:"Starše",code:"115"},{name:"Sveti Jurij",code:"116"},{name:"Šencur",code:"117"},{name:"Šentilj",code:"118"},{name:"Šentjernej",code:"119"},{name:"Šentjur",code:"120"},{name:"Škocjan",code:"121"},{name:"Škofja Loka",code:"122"},{name:"Škofljica",code:"123"},{name:"Šmarje pri Jelšah",code:"124"},{name:"Šmartno ob Paki",code:"125"},{name:"Šoštanj",code:"126"},{name:"Štore",code:"127"},{name:"Tolmin",code:"128"},{name:"Trbovlje",code:"129"},{name:"Trebnje",code:"130"},{name:"Tržic",code:"131"},{name:"Turnišce",code:"132"},{name:"Velenje",code:"133"},{name:"Velike Lašce",code:"134"},{name:"Videm",code:"135"},{name:"Vipava",code:"136"},{name:"Vitanje",code:"137"},{name:"Vodice",code:"138"},{name:"Vojnik",code:"139"},{name:"Vrhnika",code:"140"},{name:"Vuzenica",code:"141"},{name:"Zagorje ob Savi",code:"142"},{name:"Zavrc",code:"143"},{name:"Zrece",code:"144"},{name:"Železniki",code:"146"},{name:"Žiri",code:"147"},{name:"Benedikt",code:"148"},{name:"Bistrica ob Sotli",code:"149"},{name:"Bloke",code:"150"},{name:"Braslovce",code:"151"},{name:"Cankova",code:"152"},{name:"Cerkvenjak",code:"153"},{name:"Dobje",code:"154"},{name:"Dobrna",code:"155"},{name:"Dobrovnik",code:"156"},{name:"Dolenjske Toplice",code:"157"},{name:"Grad",code:"158"},{name:"Hajdina",code:"159"},{name:"Hoce-Slivnica",code:"160"},{name:"Hodoš",code:"161"},{name:"Horjul",code:"162"},{name:"Jezersko",code:"163"},{name:"Komenda",code:"164"},{name:"Kostel",code:"165"},{name:"Križevci",code:"166"},{name:"Lovrenc na Pohorju",code:"167"},{name:"Markovci",code:"168"},{name:"Miklavž na Dravskem polju",code:"169"},{name:"Mirna Pec",code:"170"},{name:"Oplotnica",code:"171"},{name:"Podlehnik",code:"172"},{name:"Polzela",code:"173"},{name:"Prebold",code:"174"},{name:"Prevalje",code:"175"},{name:"Razkrižje",code:"176"},{name:"Ribnica na Pohorju",code:"177"},{name:"Selnica ob Dravi",code:"178"},{name:"Sodražica",code:"179"},{name:"Solcava",code:"180"},{name:"Sveta Ana",code:"181"},{name:"Sveti Andraž v Slovenskih goricah",code:"182"},{name:"Šempeter-Vrtojba",code:"183"},{name:"Tabor",code:"184"},{name:"Trnovska vas",code:"185"},{name:"Trzin",code:"186"},{name:"Velika Polana",code:"187"},{name:"Veržej",code:"188"},{name:"Vransko",code:"189"},{name:"Žalec",code:"190"},{name:"Žetale",code:"191"},{name:"Žirovnica",code:"192"},{name:"Žužemberk",code:"193"},{name:"Šmartno pri Litiji",code:"194"},{name:"Apace",code:"195"},{name:"Cirkulane",code:"196"},{name:"Kosanjevica na Krki",code:"197"},{name:"Makole",code:"198"},{name:"Mokronog-Trebelno",code:"199"},{name:"Poljcane",code:"200"},{name:"Renèe-Vogrsko",code:"201"},{name:"Središce ob Dravi",code:"202"},{name:"Straža",code:"203"},{name:"Sveta Trojica v Slovenskih\r\nGoricah",code:"204"},{name:"Sveti Tomaž",code:"205"},{name:"Šmarješke Toplice",code:"206"},{name:"Gorje",code:"207"},{name:"Log-Dragomer",code:"208"},{name:"Recica ob Savinji",code:"209"},{name:"Sveti Jurij v Slovenskih Goricah",code:"210"},{name:"Šentrupert",code:"211"}],SL:[{name:"Eastern",code:"E"},{name:"Northern",code:"N"},{name:"Southern",code:"S"},{name:"Western Area (Freetown)",code:"W"}],SK:[{name:"Banskobystrický kraj",code:"BC"},{name:"Bratislavský kraj",code:"BL"},{name:"Košický kraj",code:"KI"},{name:"Nitriansky kraj",code:"NI"},{name:"Prešovský kraj",code:"PV"},{name:"Trnavský kraj",code:"TA"},{name:"Trenciansky kraj",code:"TC"},{name:"Žilinský kraj",code:"ZI"}],SN:[{name:"Diourbel",code:"DB"},{name:"Dakar",code:"DK"},{name:"Fatick",code:"FK"},{name:"Kaffrine",code:"KA"},{name:"Kolda",code:"KD"},{name:"Kédougou",code:"KE"},{name:"Kaolack",code:"KL"},{name:"Louga",code:"LG"},{name:"Matam",code:"MT"},{name:"Sédhiou",code:"SE"},{name:"Saint-Louis",code:"SL"},{name:"Tambacounda",code:"TC"},{name:"Thiès",code:"TH"},{name:"Ziguinchor",code:"ZG"}],SM:[{name:"Acquaviva",code:"01"},{name:"Chiesanuova",code:"02"},{name:"Domagnano",code:"03"},{name:"Faetano",code:"04"},{name:"Fiorentino",code:"05"},{name:"Borgo Maggiore",code:"06"},{name:"San Marino",code:"07"},{name:"Montegiardino",code:"08"},{name:"Serravalle",code:"09"}],SO:[{name:"Awdal",code:"AW"},{name:"Bakool",code:"BK"},{name:"Banaadir",code:"BN"},{name:"Bari",code:"BR"},{name:"Bay",code:"BY"},{name:"Galguduud",code:"GA"},{name:"Gedo",code:"GE"},{name:"Hiiraan",code:"HI"},{name:"Jubbada Dhexe",code:"JD"},{name:"Jubbada Hoose",code:"JH"},{name:"Mudug",code:"MU"},{name:"Nugaal",code:"NU"},{name:"Sanaag",code:"SA"},{name:"Shabeellaha Dhexe",code:"SD"},{name:"Shabeellaha Hoose",code:"SH"},{name:"Sool",code:"SO"},{name:"Togdheer",code:"TO"},{name:"Woqooyi Galbeed",code:"WO"}],SR:[{name:"Brokopondo",code:"BR"},{name:"Commewijne",code:"CM"},{name:"Coronie",code:"CR"},{name:"Marowijne",code:"MA"},{name:"Nickerie",code:"NI"},{name:"Paramaribo",code:"PM"},{name:"Para",code:"PR"},{name:"Saramacca",code:"SA"},{name:"Sipaliwini",code:"SI"},{name:"Wanica",code:"WA"}],CI:[{name:"Lagunes (Région des)",code:"01"},{name:"Haut-Sassandra (Région du)",code:"02"},{name:"Savanes (Région des)",code:"03"},{name:"Vallée du Bandama (Région de la)",code:"04"},{name:"Moyen-Comoé (Région du)",code:"05"},{name:"18 Montagnes (Région des)",code:"06"},{name:"Lacs (Région des)",code:"07"},{name:"Zanzan (Région du)",code:"08"},{name:"Bas-Sassandra (Région du)",code:"09"},{name:"Denguélé (Région du)",code:"10"},{name:"Nzi-Comoé (Région)",code:"11"},{name:"Marahoué (Région de la)",code:"12"},{name:"Sud-Comoé (Région du)",code:"13"},{name:"Worodougou (Région du)",code:"14"},{name:"Sud-Bandama (Région du)",code:"15"},{name:"Agnébi (Région de l')",code:"16"},{name:"Bafing (Région du)",code:"17"},{name:"Fromager (Région du)",code:"18"},{name:"Moyen-Cavally (Région du)",code:"19"}],RS:[{name:"Beograd",code:"00"},{name:"Severnobacki okrug",code:"01"},{name:"Srednjebanatski okrug",code:"02"},{name:"Severnobanatski okrug",code:"03"},{name:"Južnobanatski okrug",code:"04"},{name:"Zapadnobacki okrug",code:"05"},{name:"Južnobacki okrug",code:"06"},{name:"Sremski okrug",code:"07"},{name:"Macvanski okrug",code:"08"},{name:"Kolubarski okrug",code:"09"},{name:"Podunavski okrug",code:"10"},{name:"Branicevski okrug",code:"11"},{name:"Šumadijski okrug",code:"12"},{name:"Pomoravski okrug",code:"13"},{name:"Borski okrug",code:"14"},{name:"Zajecarski okrug",code:"15"},{name:"Zlatiborski okrug",code:"16"},{name:"Moravicki okrug",code:"17"},{name:"Raški okrug",code:"18"},{name:"Rasinski okrug",code:"19"},{name:"Nišavski okrug",code:"20"},{name:"Toplicki okrug",code:"21"},{name:"Pirotski okrug",code:"22"},{name:"Jablanicki okrug",code:"23"},{name:"Pcinjski okrug",code:"24"},{name:"Kosovski okrug",code:"25"},{name:"Pecki okrug",code:"26"},{name:"Prizrenski okrug",code:"27"},{name:"Kosovsko-Mitrovacki okrug",code:"28"},{name:"Kosovsko-Pomoravski okrug",code:"29"},{name:"Kosovo-Metohija",code:"KM"},{name:"Vojvodina",code:"VO"}],CG:[{name:"Bouenza",code:"11"},{name:"Pool",code:"12"},{name:"Sangha",code:"13"},{name:"Plateaux",code:"14"},{name:"Cuvette-Ouest",code:"15"},{name:"Lékoumou",code:"2"},{name:"Kouilou",code:"5"},{name:"Likouala",code:"7"},{name:"Cuvette",code:"8"},{name:"Niari",code:"9"},{name:"Brazzaville",code:"BZV"}],CH:[{name:"Aargau (de)",code:"AG"},{name:"Appenzell Innerrhoden (de)",code:"AI"},{name:"Appenzell Ausserrhoden (de)",code:"AR"},{name:"Bern (de)",code:"BE"},{name:"Basel-Landschaft (de)",code:"BL"},{name:"Basel-Stadt (de)",code:"BS"},{name:"Fribourg (fr)",code:"FR"},{name:"Genève (fr)",code:"GE"},{name:"Glarus (de)",code:"GL"},{name:"Graubünden (de)",code:"GR"},{name:"Jura (fr)",code:"JU"},{name:"Luzern (de)",code:"LU"},{name:"Neuchâtel (fr)",code:"NE"},{name:"Nidwalden (de)",code:"NW"},{name:"Obwalden (de)",code:"OW"},{name:"Sankt Gallen (de)",code:"SG"},{name:"Schaffhausen (de)",code:"SH"},{name:"Solothurn (de)",code:"SO"},{name:"Schwyz (de)",code:"SZ"},{name:"Thurgau (de)",code:"TG"},{name:"Ticino (it)",code:"TI"},{name:"Uri (de)",code:"UR"},{name:"Vaud (fr)",code:"VD"},{name:"Valais (fr)",code:"VS"},{name:"Zug (de)",code:"ZG"},{name:"Zürich (de)",code:"ZH"}],RU:[{name:"Adygeya, Respublika",code:"AD"},{name:"Altay, Respublika",code:"AL"},{name:"Altayskiy kray",code:"ALT"},{name:"Amurskaya oblast'",code:"AMU"},{name:"Arkhangel'skaya oblast,",code:"ARK"},{name:"Astrakhanskaya oblast'",code:"AST"},{name:"Bashkortostan, Respublika",code:"BA"},{name:"Belgorodskaya oblast'",code:"BEL"},{name:"Bryanskaya oblast'",code:"BRY"},{name:"Buryatiya, Respublika",code:"BU"},{name:"Chechenskaya Respublika",code:"CE"},{name:"Chelyabinskaya oblast'",code:"CHE"},{name:"Chukotskiy avtonomnyy okrug",code:"CHU"},{name:"Chuvashskaya Respublika",code:"CU"},{name:"Dagestan, Respublika",code:"DA"},{name:"Ingushskaya Respublika [Respublika Ingushetiya]",code:"IN"},{name:"Irkutskaya oblast'",code:"IRK"},{name:"Ivanovskaya oblast'",code:"IVA"},{name:"Kamchatskaya oblast'",code:"KAM"},{name:"Kabardino-Balkarskaya Respublika",code:"KB"},{name:"Karachayevo-Cherkesskaya Respublika",code:"KC"},{name:"Krasnodarskiy kray",code:"KDA"},{name:"Kemerovskaya oblast'",code:"KEM"},{name:"Kaliningradskaya oblast,",code:"KGD"},{name:"Kurganskaya oblast'",code:"KGN"},{name:"Khabarovskiy kray",code:"KHA"},{name:"Khanty-Mansiyskiy avtonomnyy okrug",code:"KHM"},{name:"Kirovskaya oblast'",code:"KIR"},{name:"Khakasiya, Respublika",code:"KK"},{name:"Kalmykiya, Respublika",code:"KL"},{name:"Kaluzhskaya oblast'",code:"KLU"},{name:"Komi, Respublika",code:"KO"},{name:"Kostromskaya oblast'",code:"KOS"},{name:"Kareliya, Respublika",code:"KR"},{name:"Kurskaya oblast'",code:"KRS"},{name:"Krasnoyarskiy kray",code:"KYA"},{name:"Leningradskaya oblast'",code:"LEN"},{name:"Lipetskaya oblast'",code:"LIP"},{name:"Magadanskaya oblast'",code:"MAG"},{name:"Mariy El, Respublika",code:"ME"},{name:"Mordoviya, Respublika",code:"MO"},{name:"Moskovskaya oblast'",code:"MOS"},{name:"Moskva",code:"MOW"},{name:"Murmanskaya oblast'",code:"MUR"},{name:"Nenetskiy avtonomnyy okrug",code:"NEN"},{name:"Novgorodskaya oblast'",code:"NGR"},{name:"Nizhegorodskaya oblast'",code:"NIZ"},{name:"Novosibirskaya oblast'",code:"NVS"},{name:"Omskaya oblast'",code:"OMS"},{name:"Orenburgskaya oblast'",code:"ORE"},{name:"Orlovskaya oblast'",code:"ORL"},{name:"Perm",code:"PER"},{name:"Penzenskaya oblast'",code:"PNZ"},{name:"Primorskiy kray",code:"PRI"},{name:"Pskovskaya oblast'",code:"PSK"},{name:"Rostovskaya oblast'",code:"ROS"},{name:"Ryazanskaya oblast'",code:"RYA"},{name:"Sakha, Respublika [Yakutiya]",code:"SA"},{name:"Sakhalinskaya oblast'",code:"SAK"},{name:"Samarskaya oblast'",code:"SAM"},{name:"Saratovskaya oblast'",code:"SAR"},{name:"Severnaya Osetiya, Respublika Alaniya] [Respublika Severnaya Osetiya-Alaniya]",code:"SE"},{name:"Smolenskaya oblast'",code:"SMO"},{name:"Sankt-Peterburg",code:"SPE"},{name:"Stavropol'skiy kray",code:"STA"},{name:"Sverdlovskaya oblast'",code:"SVE"},{name:"Tatarstan, Respublika",code:"TA"},{name:"Tambovskaya oblast'",code:"TAM"},{name:"Tomskaya oblast'",code:"TOM"},{name:"Tul'skaya oblast'",code:"TUL"},{name:"Tverskaya oblast'",code:"TVE"},{name:"Tyva, Respublika [Tuva]",code:"TY"},{name:"Tyumenskaya oblast'",code:"TYU"},{name:"Udmurtskaya Respublika",code:"UD"},{name:"Ul'yanovskaya oblast'",code:"ULY"},{name:"Volgogradskaya oblast'",code:"VGG"},{name:"Vladimirskaya oblast'",code:"VLA"},{name:"Vologodskaya oblast'",code:"VLG"},{name:"Voronezhskaya oblast'",code:"VOR"},{name:"Yamalo-Nenetskiy avtonomnyy okrug",code:"YAN"},{name:"Yaroslavskaya oblast'",code:"YAR"},{name:"Yevreyskaya avtonomnaya oblast'",code:"YEV"},{name:"Zabaykal'skiy kray",code:"ZAB"}],CF:[{name:"Ouham",code:"AC"},{name:"Bamingui-Bangoran",code:"BB"},{name:"Bangui",code:"BGF"},{name:"Basse-Kotto",code:"BK"},{name:"Haute-Kotto",code:"HK"},{name:"Haut-Mbomou",code:"HM"},{name:"Mambéré-Kadéï",code:"HS"},{name:"Gribingui",code:"KB"},{name:"Kémo-Gribingui",code:"KG"},{name:"Lobaye",code:"LB"},{name:"Mbomou",code:"MB"},{name:"Ombella-Mpoko",code:"MP"},{name:"Nana-Mambéré",code:"NM"},{name:"Ouham-Pendé",code:"OP"},{name:"Sangha",code:"SE"},{name:"Ouaka",code:"UK"},{name:"Vakaga",code:"VK"}],RW:[{name:"Ville de Kigali",code:"01"},{name:"Est",code:"02"},{name:"Nord",code:"03"},{name:"Ouest",code:"04"},{name:"Sud",code:"05"}],CD:[{name:"Bas-Congo",code:"BC"},{name:"Bandundu",code:"BN"},{name:"Équateur",code:"EQ"},{name:"Katanga",code:"KA"},{name:"Kasai-Oriental",code:"KE"},{name:"Kinshasa",code:"KN"},{name:"Kasai-Occidental",code:"KW"},{name:"Maniema",code:"MA"},{name:"Nord-Kivu",code:"NK"},{name:"Orientale",code:"OR"},{name:"Sud-Kivu",code:"SK"}],CR:[{name:"Alajuela",code:"A"},{name:"Cartago",code:"C"},{name:"Guanacaste",code:"G"},{name:"Heredia",code:"H"},{name:"Limón",code:"L"},{name:"Puntarenas",code:"P"},{name:"San José",code:"SJ"}],CO:[{name:"Amazonas",code:"AMA"},{name:"Antioquia",code:"ANT"},{name:"Arauca",code:"ARA"},{name:"Atlántico",code:"ATL"},{name:"Bolívar",code:"BOL"},{name:"Boyacá",code:"BOY"},{name:"Caldas",code:"CAL"},{name:"Caquetá",code:"CAQ"},{name:"Casanare",code:"CAS"},{name:"Cauca",code:"CAU"},{name:"Cesar",code:"CES"},{name:"Chocó",code:"CHO"},{name:"Córdoba",code:"COR"},{name:"Cundinamarca",code:"CUN"},{name:"Distrito Capital de Bogotá",code:"DC"},{name:"Guainía",code:"GUA"},{name:"Guaviare",code:"GUV"},{name:"Huila",code:"HUI"},{name:"La Guajira",code:"LAG"},{name:"Magdalena",code:"MAG"},{name:"Meta",code:"MET"},{name:"Nariño",code:"NAR"},{name:"Norte de Santander",code:"NSA"},{name:"Putumayo",code:"PUT"},{name:"Quindío",code:"QUI"},{name:"Risaralda",code:"RIS"},{name:"Santander",code:"SAN"},{name:"San Andrés, Providencia y Santa Catalina",code:"SAP"},{name:"Sucre",code:"SUC"},{name:"Tolima",code:"TOL"},{name:"Valle del Cauca",code:"VAC"},{name:"Vaupés",code:"VAU"},{name:"Vichada",code:"VID"}],CM:[{name:"Adamaoua",code:"AD"},{name:"Centre",code:"CE"},{name:"Far North",code:"EN"},{name:"East",code:"ES"},{name:"Littoral",code:"LT"},{name:"North",code:"NO"},{name:"North-West",code:"NW"},{name:"West",code:"OU"},{name:"South",code:"SU"},{name:"South-West",code:"SW"}],CN:[{name:"Beijing",code:"11"},{name:"Tianjin",code:"12"},{name:"Hebei",code:"13"},{name:"Shanxi",code:"14"},{name:"Nei Mongol (mn)",code:"15"},{name:"Liaoning",code:"21"},{name:"Jilin",code:"22"},{name:"Heilongjiang",code:"23"},{name:"Shanghai",code:"31"},{name:"Jiangsu",code:"32"},{name:"Zhejiang",code:"33"},{name:"Anhui",code:"34"},{name:"Fujian",code:"35"},{name:"Jiangxi",code:"36"},{name:"Shandong",code:"37"},{name:"Henan",code:"41"},{name:"Hubei",code:"42"},{name:"Hunan",code:"43"},{name:"Guangdong",code:"44"},{name:"Guangxi",code:"45"},{name:"Hainan",code:"46"},{name:"Chongqing",code:"50"},{name:"Sichuan",code:"51"},{name:"Guizhou",code:"52"},{name:"Yunnan",code:"53"},{name:"Xizang",code:"54"},{name:"Shaanxi",code:"61"},{name:"Gansu",code:"62"},{name:"Qinghai",code:"63"},{name:"Ningxia",code:"64"},{name:"Xinjiang",code:"65"},{name:"Taiwan",code:"71"},{name:"Xianggang",code:"91"},{name:"Aomen",code:"92"}],SA:[{name:"Ar Riyad",code:"01"},{name:"Makkah",code:"02"},{name:"AI Madinah",code:"03"},{name:"Ash Sharqiyah",code:"04"},{name:"AI Qasim",code:"05"},{name:"Ha'il",code:"06"},{name:"Tabuk",code:"07"},{name:"AI Hudud ash Shamaliyah",code:"08"},{name:"Jizan",code:"09"},{name:"Najran",code:"10"},{name:"AI Bahah",code:"11"},{name:"AI Jawf",code:"12"},{name:"'Asir",code:"14"}],CL:[{name:"Aisén del General Carlos Ibáñez del Campo",code:"AI"},{name:"Antofagasta",code:"AN"},{name:"Arica y Parinacota",code:"AP"},{name:"Araucanía",code:"AR"},{name:"Atacama",code:"AT"},{name:"Bío-Bío",code:"BI"},{name:"Coquimbo",code:"CO"},{name:"Libertador General Bernardo O'Higgins",code:"LI"},{name:"Los Lagos",code:"LL"},{name:"Los Ríos",code:"LR"},{name:"Magallanes",code:"MA"},{name:"Maule",code:"ML"},{name:"Región Metropolitana de Santiago",code:"RM"},{name:"Tarapacá",code:"TA"},{name:"Valparaíso",code:"VS"}],SB:[{name:"Central",code:"CE"},{name:"Choiseul",code:"CH"},{name:"Capital Territory (Honiara)",code:"CT"},{name:"Guadalcanal",code:"GU"},{name:"Isabel",code:"IS"},{name:"Makira-Ulawa",code:"MK"},{name:"Malaita",code:"ML"},{name:"Rennell and Bellona",code:"RB"},{name:"Temotu",code:"TE"},{name:"Western",code:"WE"}],LV:[{name:"Aglonas novads (Aglona)",code:"001"},{name:"Aizkraukles novads (Aizkraukle)",code:"002"},{name:"Aizputes novads (Aizpute)",code:"003"},{name:"Aknistes novads (Akniste)",code:"004"},{name:"Alojas novads (Aloja)",code:"005"},{name:"Alsungas novads (Alsunga)",code:"006"},{name:"Aluksnes novads (Aluksne)",code:"007"},{name:"Amatas novads (Amata)",code:"008"},{name:"Apes novads (Ape)",code:"009"},{name:"Auces novads (Auce)",code:"010"},{name:"Adažu novads (Adaži)",code:"011"},{name:"Babites novads (Babite)",code:"012"},{name:"Baldones novads (Baldone)",code:"013"},{name:"Baltinavas novads (Baltinava)",code:"014"},{name:"Balvu novads (Balvi)",code:"015"},{name:"Bauskas novads (Bauska)",code:"016"},{name:"Beverinas novads (Beverina)",code:"017"},{name:"Brocenu novads (Broceni)",code:"018"},{name:"Burtnieku novads (Burtnieki)",code:"019"},{name:"Carnikavas novads (Carnikava)",code:"020"},{name:"Cesvaines novads (Cesvaine)",code:"021"},{name:"Cesu novads (Cesis)",code:"022"},{name:"Ciblas novads (Cibla)",code:"023"},{name:"Dagdas novads (Dagda)",code:"024"},{name:"Daugavpils novads (Daugavpils)",code:"025"},{name:"Dobeles novads (Dobele)",code:"026"},{name:"Dundagas novads (Dundaga)",code:"027"},{name:"Durbes novads (Durbe)",code:"028"},{name:"Engures novads (Engure)",code:"029"},{name:"Erglu novads (Ergli)",code:"030"},{name:"Garkalnes novads (Garkalne)",code:"031"},{name:"Grobinas novads (Grobina)",code:"032"},{name:"Gulbenes novads (Gulbene)",code:"033"},{name:"Iecavas novads (Iecava)",code:"034"},{name:"Ikškiles novads (Ikškile)",code:"035"},{name:"Ilukstes novads (Ilukste)",code:"036"},{name:"Incukalna novads (Incukalns)",code:"037"},{name:"Jaunjelgavas novads\r\n(Jaunjelgava)",code:"038"},{name:"Jaunpiebalgas novads\r\n(Jaunpiebalga)",code:"039"},{name:"Jaunpils novads (Jaunpils)",code:"040"},{name:"Jelgavas novads (Jelgava)",code:"041"},{name:"Jekabpils novads (Jekabpils)",code:"042"},{name:"Kandavas novads (Kandava)",code:"043"},{name:"Karsavas novads (Karsava)",code:"044"},{name:"Kocenu novads (Koceni)",code:"045"},{name:"Kokneses novads (Koknese)",code:"046"},{name:"Kraslavas novads (Kraslava)",code:"047"},{name:"Krimuldas novads (Krimulda)",code:"048"},{name:"Krustpils novads (Krustpils)",code:"049"},{name:"Kuldigas novads (Kuldiga)",code:"050"},{name:"Keguma novads (Kegums)",code:"051"},{name:"Kekavas novads (Kekava)",code:"052"},{name:"Lielvardes novads (Lielvarde)",code:"053"},{name:"Limbažu novads (Limbaži)",code:"054"},{name:"Ligatnes novads (Ligatne)",code:"055"},{name:"Livanu novads (Livani)",code:"056"},{name:"Lubanas novads (Lubana)",code:"057"},{name:"Ludzas novads (Ludza)",code:"058"},{name:"Madonas novads (Madona)",code:"059"},{name:"Mazsalacas novads (Mazsalaca)",code:"060"},{name:"Malpils novads (Malpils)",code:"061"},{name:"Marupes novads (Marupe)",code:"062"},{name:"Mersraga novads (Mersrags)",code:"063"},{name:"Naukšenu novads (Naukšeni)",code:"064"},{name:"Neretas novads (Nereta)",code:"065"},{name:"Nicas novads (Nica)",code:"066"},{name:"Ogres novads (Ogre)",code:"067"},{name:"Olaines novads (Olaine)",code:"068"},{name:"Ozolnieku novads (Ozolnieki)",code:"069"},{name:"Pargaujas novads (Pargauja)",code:"070"},{name:"Pavilostas novads (Pavilosta)",code:"071"},{name:"Plavinu novads (Plavinas)",code:"072"},{name:"Preilu novads (Preili)",code:"073"},{name:"Priekules novads (Priekule)",code:"074"},{name:"Priekulu novads (Priekuli)",code:"075"},{name:"Raunas novads (Rauna)",code:"076"},{name:"Rezeknes novads (Rezekne)",code:"077"},{name:"Riebinu novads (Riebini)",code:"078"},{name:"Rojas novads (Roja)",code:"079"},{name:"Ropažu novads (Ropaži)",code:"080"},{name:"Rucavas novads (Rucava)",code:"081"},{name:"Rugaju novads (Rugaji)",code:"082"},{name:"Rundales novads (Rundale)",code:"083"},{name:"Rujienas novads (Rujiena)",code:"084"},{name:"Salas novads (Sala)",code:"085"},{name:"Salacgrivas novads (Salacgriva)",code:"086"},{name:"Salaspils novads (Salaspils)",code:"087"},{name:"Saldus novads (Saldus)",code:"088"},{name:"Saulkrastu novads (Saulkrasti)",code:"089"},{name:"Sejas novads (Seja)",code:"090"},{name:"Siguldas novads (Sigulda)",code:"091"},{name:"Skriveru novads (Skriveri)",code:"092"},{name:"Skrundas novads (Skrunda)",code:"093"},{name:"Smiltenes novads (Smiltene)",code:"094"},{name:"Stopinu novads (Stopini)",code:"095"},{name:"Strencu novads (Strenci)",code:"096"},{name:"Talsu novads (Talsi)",code:"097"},{name:"Tervetes novads (Tervete)",code:"098"},{name:"Tukuma novads (Tukums)",code:"099"},{name:"Vainodes novads (Vainode)",code:"100"},{name:"Valkas novads (Valka)",code:"101"},{name:"Varaklanu novads (Varaklani)",code:"102"},{name:"Varkavas novads (Varkava)",code:"103"},{name:"Vecpiebalgas novads\r\n(Vecpiebalga)",code:"104"},{name:"Vecumnieku novads (Vecumnieki)",code:"105"},{name:"Ventspils novads (Ventspils)",code:"106"},{name:"Viesites novads (Viesite)",code:"107"},{name:"Vilakas novads (Vilaka)",code:"108"},{name:"Vilanu novads (Vilani)",code:"109"},{name:"Zilupes novads (Zilupe)",code:"110"},{name:"Daugavpils",code:"DGV"},{name:"Jelgava",code:"JEL"},{name:"Jekabpils",code:"JKB"},{name:"Jurmala",code:"JUR"},{name:"Liepaja",code:"LPX"},{name:"Rezekne",code:"REZ"},{name:"Riga",code:"RIX"},{name:"Ventspils",code:"VEN"},{name:"Valmiera",code:"VMR"}],LU:[{name:"Diekirch",code:"D"},{name:"Grevenmacher",code:"G"},{name:"Luxembourg (fr)",code:"L"}],LT:[{name:"Alytaus Apskritis",code:"AL"},{name:"Klaipedos apskritis",code:"KL"},{name:"Kauno Apskritis",code:"KU"},{name:"Marijampoles apskritis",code:"MR"},{name:"Panevežio apskritis",code:"PN"},{name:"Šiauliu Apskritis",code:"SA"},{name:"Taurages apskritis",code:"TA"},{name:"Telšiu Apskritis",code:"TE"},{name:"Utenos Apskritis",code:"UT"},{name:"Vilniaus Apskritis",code:"VL"}],LY:[{name:"Banghazi",code:"BA"},{name:"Al Butnan",code:"BU"},{name:"Darnah",code:"DR"},{name:"Ghat",code:"GT"},{name:"Al Jabal al Akh?ar",code:"JA"},{name:"Al Jabal al Gharbi",code:"JG"},{name:"Al Jifarah",code:"JI"},{name:"Al Jufrah",code:"JU"},{name:"Al Kufrah",code:"KF"},{name:"Al Marqab",code:"MB"},{name:"Misratah",code:"MI"},{name:"Al Marj",code:"MJ"},{name:"Murzuq",code:"MQ"},{name:"Nalut",code:"NL"},{name:"An Nuqat al Khams",code:"NQ"},{name:"Sabha",code:"SB"},{name:"Surt",code:"SR"},{name:"Tarabulus",code:"TB"},{name:"Al Wa?at",code:"WA"},{name:"Wadi al Hayat",code:"WD"},{name:"Wadi ash Shati?",code:"WS"},{name:"Az Zawiyah",code:"ZA"}],LS:[{name:"Maseru",code:"A"},{name:"Butha-Buthe",code:"B"},{name:"Leribe",code:"C"},{name:"Berea",code:"D"},{name:"Mafeteng",code:"E"},{name:"Mohale's Hoek",code:"F"},{name:"Quthing",code:"G"},{name:"Qacha's Nek",code:"H"},{name:"Mokhotlong",code:"J"},{name:"Thaba-Tseka",code:"K"}],LR:[{name:"Bong",code:"BG"},{name:"Bomi",code:"BM"},{name:"Grand Cape Mount",code:"CM"},{name:"Grand Bassa",code:"GB"},{name:"Grand Gedeh",code:"GG"},{name:"Grand Kru",code:"GK"},{name:"Gbarpolu",code:"GP"},{name:"Lofa",code:"LO"},{name:"Margibi",code:"MG"},{name:"Montserrado",code:"MO"},{name:"Maryland",code:"MY"},{name:"Nimba",code:"NI"},{name:"River Gee",code:"RG"},{name:"Rivercess",code:"RI"},{name:"Sinoe",code:"SI"}],MG:[{name:"Toamasina",code:"A"},{name:"Antsiranana",code:"D"},{name:"Fianarantsoa",code:"F"},{name:"Mahajanga",code:"M"},{name:"Antananarivo",code:"T"},{name:"Toliara",code:"U"}],MH:[{name:"Ailuk",code:"ALK"},{name:"Ailinglapalap",code:"ALL"},{name:"Arno",code:"ARN"},{name:"Aur",code:"AUR"},{name:"Ebon",code:"EBO"},{name:"Enewetak",code:"ENI"},{name:"Jabat",code:"JAB"},{name:"Jaluit",code:"JAL"},{name:"Kili",code:"KIL"},{name:"Kwajalein",code:"KWA"},{name:"Ralik chain",code:"L"},{name:"Lae",code:"LAE"},{name:"Lib",code:"LIB"},{name:"Likiep",code:"LIK"},{name:"Majuro",code:"MAJ"},{name:"Maloelap",code:"MAL"},{name:"Mejit",code:"MEJ"},{name:"Mili",code:"MIL"},{name:"Namorik",code:"NMK"},{name:"Namu",code:"NMU"},{name:"Rongelap",code:"RON"},{name:"Ratak chain",code:"T"},{name:"Ujae",code:"UJA"},{name:"Utirik",code:"UTI"},{name:"Wotho",code:"WTH"},{name:"Wotje",code:"WTJ"}],ME:[{name:"Andrijevica",code:"01"},{name:"Bar",code:"02"},{name:"Berane",code:"03"},{name:"Bijelo Polje",code:"04"},{name:"Budva",code:"05"},{name:"Cetinje",code:"06"},{name:"Danilovgrad",code:"07"},{name:"Herceg-Novi",code:"08"},{name:"Kolašin",code:"09"},{name:"Kotor",code:"10"},{name:"Mojkovac",code:"11"},{name:"Nikšic´",code:"12"},{name:"Plav",code:"13"},{name:"Pljevlja",code:"14"},{name:"Plužine",code:"15"},{name:"Podgorica",code:"16"},{name:"Rožaje",code:"17"},{name:"Šavnik",code:"18"},{name:"Tivat",code:"19"},{name:"Ulcinj",code:"20"},{name:"Žabljak",code:"21"}],MK:[{name:"Aerodrom *",code:"01"},{name:"Aracinovo",code:"02"},{name:"Berovo",code:"03"},{name:"Bitola",code:"04"},{name:"Bogdanci",code:"05"},{name:"Bogovinje",code:"06"},{name:"Bosilovo",code:"07"},{name:"Brvenica",code:"08"},{name:"Butel *",code:"09"},{name:"Valandovo",code:"10"},{name:"Vasilevo",code:"11"},{name:"Vevcani",code:"12"},{name:"Veles",code:"13"},{name:"Vinica",code:"14"},{name:"Vraneštica",code:"15"},{name:"Vrapcište",code:"16"},{name:"Gazi Baba *",code:"17"},{name:"Gevgelija",code:"18"},{name:"Gostivar",code:"19"},{name:"Gradsko",code:"20"},{name:"Debar",code:"21"},{name:"Debarca",code:"22"},{name:"Delcevo",code:"23"},{name:"Demir Kapija",code:"24"},{name:"Demir Hisar",code:"25"},{name:"Dojran",code:"26"},{name:"Dolneni",code:"27"},{name:"Drugovo",code:"28"},{name:"Gjorce Petrov *",code:"29"},{name:"Želino",code:"30"},{name:"Zajas",code:"31"},{name:"Zelenikovo",code:"32"},{name:"Zrnovci",code:"33"},{name:"Ilinden",code:"34"},{name:"Jegunovce",code:"35"},{name:"Kavadarci",code:"36"},{name:"Karbinci",code:"37"},{name:"Karpoš *",code:"38"},{name:"Kisela Voda *",code:"39"},{name:"Kicevo",code:"40"},{name:"Konce",code:"41"},{name:"Kocani",code:"42"},{name:"Kratovo",code:"43"},{name:"Kriva Palanka",code:"44"},{name:"Krivogaštani",code:"45"},{name:"Kruševo",code:"46"},{name:"Kumanovo",code:"47"},{name:"Lipkovo",code:"48"},{name:"Lozovo",code:"49"},{name:"Mavrovo-i-Rostuša",code:"50"},{name:"Makedonska Kamenica",code:"51"},{name:"Makedonski Brod",code:"52"},{name:"Mogila",code:"53"},{name:"Negotino",code:"54"},{name:"Novaci",code:"55"},{name:"Novo Selo",code:"56"},{name:"Oslomej",code:"57"},{name:"Ohrid",code:"58"},{name:"Petrovec",code:"59"},{name:"Pehcevo",code:"60"},{name:"Plasnica",code:"61"},{name:"Prilep",code:"62"},{name:"Probištip",code:"63"},{name:"Radoviš",code:"64"},{name:"Rankovce",code:"65"},{name:"Resen",code:"66"},{name:"Rosoman",code:"67"},{name:"Saraj *",code:"68"},{name:"Sveti Nikole",code:"69"},{name:"Sopište",code:"70"},{name:"Staro Nagoricane",code:"71"},{name:"Struga",code:"72"},{name:"Strumica",code:"73"},{name:"Studenicani",code:"74"},{name:"Tearce",code:"75"},{name:"Tetovo",code:"76"},{name:"Centar *",code:"77"},{name:"Centar Župa",code:"78"},{name:"Cair *",code:"79"},{name:"Caška",code:"80"},{name:"Cešinovo-Obleševo",code:"81"},{name:"Cucer Sandevo",code:"82"},{name:"Štip",code:"83"},{name:"Šuto Orizari *",code:"84"}],ML:[{name:"Kayes",code:"1"},{name:"Koulikoro",code:"2"},{name:"Sikasso",code:"3"},{name:"Ségou",code:"4"},{name:"Mopti",code:"5"},{name:"Tombouctou",code:"6"},{name:"Gao",code:"7"},{name:"Kidal",code:"8"},{name:"Bamako",code:"BKO"}],MC:[{name:"La Colle",code:"CL"},{name:"La Condamine",code:"CO"},{name:"Fontvieille",code:"FO"},{name:"La Gare",code:"GA"},{name:"Jardin Exotique",code:"JE"},{name:"Larvotto",code:"LA"},{name:"Malbousquet",code:"MA"},{name:"Monte-Carlo",code:"MC"},{name:"Moneghetti",code:"MG"},{name:"Monaco-Ville",code:"MO"},{name:"Moulins",code:"MU"},{name:"Port-Hercule",code:"PH"},{name:"Sainte-Dévote",code:"SD"},{name:"La Source",code:"SO"},{name:"Spélugues",code:"SP"},{name:"Saint-Roman",code:"SR"},{name:"Vallon de la Rousse",code:"VR"}],MD:[{name:"Anenii Noi",code:"AN"},{name:"Balti",code:"BA"},{name:"Tighina",code:"BD"},{name:"Briceni",code:"BR"},{name:"Basarabeasca",code:"BS"},{name:"Cahul",code:"CA"},{name:"Calarasi",code:"CL"},{name:"Cimislia",code:"CM"},{name:"Criuleni",code:"CR"},{name:"Causeni",code:"CS"},{name:"Cantemir",code:"CT"},{name:"Chisinau",code:"CU"},{name:"Donduseni",code:"DO"},{name:"Drochia",code:"DR"},{name:"Dubasari",code:"DU"},{name:"Edinet",code:"ED"},{name:"Falesti",code:"FA"},{name:"Floresti",code:"FL"},{name:"Gagauzia, Unitatea teritoriala\r\nautonoma (UTAG)",code:"GA"},{name:"Glodeni",code:"GL"},{name:"Hîncesti",code:"HI"},{name:"Ialoveni",code:"IA"},{name:"Leova",code:"LE"},{name:"Nisporeni",code:"NI"},{name:"Ocniþa",code:"OC"},{name:"Orhei",code:"OR"},{name:"Rezina",code:"RE"},{name:"Rîscani",code:"RI"},{name:"Soldanesti",code:"SD"},{name:"Sîngerei",code:"SI"},{name:"Stînga Nistrului, unitatea teritoriala din",code:"SN"},{name:"Soroca",code:"SO"},{name:"Straseni",code:"ST"},{name:"Stefan Voda",code:"SV"},{name:"Taraclia",code:"TA"},{name:"Telenesti",code:"TE"},{name:"Ungheni",code:"UN"}],MA:[{name:"Tanger-Tétouan",code:"01"},{name:"Gharb-Chrarda-Beni Hssen",code:"02"},{name:"Taza-Al Hoceima-Taounate",code:"03"},{name:"L'Oriental",code:"04"},{name:"Fès-Boulemane",code:"05"},{name:"Meknès-Tafilalet",code:"06"},{name:"Rabat-Salé-Zemmour-Zaer",code:"07"},{name:"Grand Casablanca",code:"08"},{name:"Chaouia-Ouardigha",code:"09"},{name:"Doukhala-Abda",code:"10"},{name:"Marrakech-Tensift-Al Haouz",code:"11"},{name:"Tadla-Azilal",code:"12"},{name:"Sous-Massa-Draa",code:"13"},{name:"Guelmim-Es Smara",code:"14"},{name:"Laâyoune-Boujdour-Sakia el Hamra",code:"15"},{name:"Oued ed Dahab-Lagouira",code:"16"},{name:"Agadir-Ida-Outanane",code:"AGD"},{name:"Aousserd",code:"AOU"},{name:"Assa-Zag",code:"ASZ"},{name:"Azilal",code:"AZI"},{name:"Beni Mellal",code:"BEM"},{name:"Berkane",code:"BER"},{name:"Ben Slimane",
code:"BES"},{name:"Boujdour (EH)",code:"BOD"},{name:"Boulemane",code:"BOM"},{name:"Casablanca [Dar el Beïda]*",code:"CAS"},{name:"Chefchaouene",code:"CHE"},{name:"Chichaoua",code:"CHI"},{name:"Chtouka-Ait Baha",code:"CHT"},{name:"Errachidia",code:"ERR"},{name:"Essaouira",code:"ESI"},{name:"Es Smara (EH)",code:"ESM"},{name:"Fahs-Beni Makada",code:"FAH"},{name:"Fès-Dar-Dbibegh",code:"FES"},{name:"Figuig",code:"FIG"},{name:"Guelmim",code:"GUE"},{name:"El Hajeb",code:"HAJ"},{name:"Al Haouz",code:"HAO"},{name:"Al Hoceïma",code:"HOC"},{name:"Ifrane",code:"IFR"},{name:"Inezgane-Ait Melloul",code:"INE"},{name:"El Jadida",code:"JDI"},{name:"Jrada",code:"JRA"},{name:"Kénitra",code:"KEN"},{name:"Kelaat Sraghna",code:"KES"},{name:"Khemisset",code:"KHE"},{name:"Khenifra",code:"KHN"},{name:"Khouribga",code:"KHO"},{name:"Laâyoune",code:"LAA"},{name:"Larache",code:"LAR"},{name:"Médiouna",code:"MED"},{name:"Meknès*",code:"MEK"},{name:"Marrakech-Medina",code:"MMD"},{name:"Marrakech-Menara",code:"MMN"},{name:"Mohammadia",code:"MOH"},{name:"Moulay Yacoub",code:"MOU"},{name:"Nador",code:"NAD"},{name:"Nouaceur",code:"NOU"},{name:"Ouarzazate",code:"OUA"},{name:"Oued ed Dahab (EH)",code:"OUD"},{name:"Oujda-Angad",code:"OUJ"},{name:"Rabat",code:"RAB"},{name:"Safi",code:"SAF"},{name:"Salé",code:"SAL"},{name:"Sefrou",code:"SEF"},{name:"Settat",code:"SET"},{name:"Sidi Kacem",code:"SIK"},{name:"Skhirate-Témara",code:"SKH"},{name:"Sidi Youssef Ben Ali",code:"SYB"},{name:"Taourirt",code:"TAI"},{name:"Taounate",code:"TAO"},{name:"Taroudannt",code:"TAR"},{name:"Tata",code:"TAT"},{name:"Taza",code:"TAZ"},{name:"Tétouan*",code:"TET"},{name:"Tiznit",code:"TIZ"},{name:"Tanger-Assilah",code:"TNG"},{name:"Tan-Tan",code:"TNT"},{name:"Zagora",code:"ZAG"}],MV:[{name:"Alifu Dhaalu",code:"00"},{name:"Seenu",code:"01"},{name:"Alifu Alifu",code:"02"},{name:"Lhaviyani",code:"03"},{name:"Vaavu",code:"04"},{name:"Laamu",code:"05"},{name:"Haa Alif",code:"07"},{name:"Thaa",code:"08"},{name:"Meemu",code:"12"},{name:"Raa",code:"13"},{name:"Faafu",code:"14"},{name:"Dhaalu",code:"17"},{name:"Baa",code:"20"},{name:"Haa Dhaalu",code:"23"},{name:"Shaviyani",code:"24"},{name:"Noonu",code:"25"},{name:"Kaafu",code:"26"},{name:"Gaafu Alifu",code:"27"},{name:"Gaafu Dhaalu",code:"28"},{name:"Gnaviyani",code:"29"},{name:"Medhu",code:"CE"},{name:"Male",code:"MLE"},{name:"Medhu-Uthuru",code:"NC"},{name:"Uthuru",code:"NO"},{name:"Medhu-Dhekunu",code:"SC"},{name:"Dhekunu",code:"SU"},{name:"Mathi-Uthuru",code:"UN"},{name:"Mathi-Dhekunu",code:"US"}],MU:[{name:"Agalega Islands",code:"AG"},{name:"Black River",code:"BL"},{name:"Beau Bassin-Rose Hill",code:"BR"},{name:"Cargados Carajos Shoals [Saint Brandon Islands]",code:"CC"},{name:"Curepipe",code:"CU"},{name:"Flacq",code:"FL"},{name:"Grand Port",code:"GP"},{name:"Moka",code:"MO"},{name:"Pamplemousses",code:"PA"},{name:"Port Louis",code:"PL"},{name:"Port Louis",code:"PU"},{name:"Plaines wilhems",code:"PW"},{name:"Quatre Bornes",code:"QB"},{name:"Rodrigues Island",code:"RO"},{name:"Rivière du Rempart",code:"RR"},{name:"Savanne",code:"SA"},{name:"Vacoas-Phoenix",code:"VP"}],MX:[{name:"Aguascalientes",code:"AGU"},{name:"Baja California",code:"BCN"},{name:"Baja California Sur",code:"BCS"},{name:"Campeche",code:"CAM"},{name:"Chihuahua",code:"CHH"},{name:"Chiapas",code:"CHP"},{name:"Coahuila",code:"COA"},{name:"Colima",code:"COL"},{name:"Distrito Federal",code:"DIF"},{name:"Durango",code:"DUR"},{name:"Guerrero",code:"GRO"},{name:"Guanajuato",code:"GUA"},{name:"Hidalgo",code:"HID"},{name:"Jalisco",code:"JAL"},{name:"México",code:"MEX"},{name:"Michoacán",code:"MIC"},{name:"Morelos",code:"MOR"},{name:"Nayarit",code:"NAY"},{name:"Nuevo León",code:"NLE"},{name:"Oaxaca",code:"OAX"},{name:"Puebla",code:"PUE"},{name:"Querétaro",code:"QUE"},{name:"Quintana Roo",code:"ROO"},{name:"Sinaloa",code:"SIN"},{name:"San Luis Potosí",code:"SLP"},{name:"Sonora",code:"SON"},{name:"Tabasco",code:"TAB"},{name:"Tamaulipas",code:"TAM"},{name:"Tlaxcala",code:"TLA"},{name:"Veracruz",code:"VER"},{name:"Yucatán",code:"YUC"},{name:"Zacatecas",code:"ZAC"}],MW:[{name:"Balaka",code:"BA"},{name:"Blantyre",code:"BL"},{name:"Central",code:"C"},{name:"Chikwawa",code:"CK"},{name:"Chiradzulu",code:"CR"},{name:"Chitipa",code:"CT"},{name:"Dedza",code:"DE"},{name:"Dowa",code:"DO"},{name:"Karonga",code:"KR"},{name:"Kasungu",code:"KS"},{name:"Lilongwe",code:"LI"},{name:"Likoma",code:"LK"},{name:"Mchinji",code:"MC"},{name:"Mangochi",code:"MG"},{name:"Machinga",code:"MH"},{name:"Mulanje",code:"MU"},{name:"Mwanza",code:"MW"},{name:"Mzimba",code:"MZ"},{name:"Northern",code:"N"},{name:"Nkhata Bay",code:"NB"},{name:"Neno",code:"NE"},{name:"Ntchisi",code:"NI"},{name:"Nkhotakota",code:"NK"},{name:"Nsanje",code:"NS"},{name:"Ntcheu",code:"NU"},{name:"Phalombe",code:"PH"},{name:"Rumphi",code:"RU"},{name:"Southern",code:"S"},{name:"Salima",code:"SA"},{name:"Thyolo",code:"TH"},{name:"Zomba",code:"ZO"}],MZ:[{name:"Niaosa",code:"A"},{name:"Manica",code:"B"},{name:"Gaza",code:"G"},{name:"Inhambane",code:"I"},{name:"Maputo",code:"L"},{name:"Maputo",code:"MPM"},{name:"Nampula",code:"N"},{name:"Cabo Delgado",code:"P"},{name:"Zambézia",code:"Q"},{name:"Sofala",code:"S"},{name:"Tete",code:"T"}],MY:[{name:"Johor",code:"01"},{name:"Kedah",code:"02"},{name:"Kelantan",code:"03"},{name:"Melaka",code:"04"},{name:"Negeri Sembilan",code:"05"},{name:"Pahang",code:"06"},{name:"Pulau Pinang",code:"07"},{name:"Perak",code:"08"},{name:"Perlis",code:"09"},{name:"Selangor",code:"10"},{name:"Terengganu",code:"11"},{name:"Sabah",code:"12"},{name:"Sarawak",code:"13"},{name:"Wilayah Persekutuan Kuala Lumpur",code:"14"},{name:"Wilayah Persekutuan Labuan",code:"15"},{name:"Wilayah Persekutuan Putrajaya",code:"16"}],MN:[{name:"Orhon",code:"035"},{name:"Darhan uul",code:"037"},{name:"Hentiy",code:"039"},{name:"Hövagöl",code:"041"},{name:"Hovd",code:"043"},{name:"Uvs",code:"046"},{name:"Töv",code:"047"},{name:"Selenge",code:"049"},{name:"Sühbaatar",code:"051"},{name:"Ömnögovi",code:"053"},{name:"Övörhangay",code:"055"},{name:"Dzavhan",code:"057"},{name:"Dundgovi",code:"059"},{name:"Dornod",code:"061"},{name:"Dornogovi",code:"063"},{name:"Govi-Sümber",code:"064"},{name:"Govi-Altay",code:"065"},{name:"Bulgan",code:"067"},{name:"Bayanhongor",code:"069"},{name:"Bayan-Ölgiy",code:"071"},{name:"Arhangay",code:"073"},{name:"Ulaanbaatar",code:"1"}],MM:[{name:"Sagaing",code:"01"},{name:"Bago",code:"02"},{name:"Magway",code:"03"},{name:"Mandalay",code:"04"},{name:"Tanintharyi",code:"05"},{name:"Yangon",code:"06"},{name:"Ayeyarwady",code:"07"},{name:"Kachin",code:"11"},{name:"Kayah",code:"12"},{name:"Kayin",code:"13"},{name:"Chin",code:"14"},{name:"Mon",code:"15"},{name:"Rakhine",code:"16"},{name:"Shan",code:"17"}],MR:[{name:"Hodh ech Chargui",code:"01"},{name:"Hodh el Gharbi",code:"02"},{name:"Assaba",code:"03"},{name:"Gorgol",code:"04"},{name:"Brakna",code:"05"},{name:"Trarza",code:"06"},{name:"Adrar",code:"07"},{name:"Dakhlet Nouâdhibou",code:"08"},{name:"Tagant",code:"09"},{name:"Guidimaka",code:"10"},{name:"Tiris Zemmour",code:"11"},{name:"Inchiri",code:"12"},{name:"Nouakchott",code:"NKC"}],MT:[{name:"Attard",code:"01"},{name:"Balzan",code:"02"},{name:"Birgu",code:"03"},{name:"Birkirkara",code:"04"},{name:"Birzebbuga",code:"05"},{name:"Bormla",code:"06"},{name:"Dingli",code:"07"},{name:"Fgura",code:"08"},{name:"Floriana",code:"09"},{name:"Fontana",code:"10"},{name:"Gudja",code:"11"},{name:"Gzira",code:"12"},{name:"Ghajnsielem",code:"13"},{name:"Gharb",code:"14"},{name:"Gharghur",code:"15"},{name:"Ghasri",code:"16"},{name:"Ghaxaq",code:"17"},{name:"Hamrun",code:"18"},{name:"Iklin",code:"19"},{name:"Isla",code:"20"},{name:"Kalkara",code:"21"},{name:"Kercem",code:"22"},{name:"Kirkop",code:"23"},{name:"Lija",code:"24"},{name:"Luqa",code:"25"},{name:"Marsa",code:"26"},{name:"Marsaskala",code:"27"},{name:"Marsaxlokk",code:"28"},{name:"Mdina",code:"29"},{name:"Mellieha",code:"30"},{name:"Mgarr",code:"31"},{name:"Mosta",code:"32"},{name:"Mqabba",code:"33"},{name:"Msida",code:"34"},{name:"Mtarfa",code:"35"},{name:"Munxar",code:"36"},{name:"Nadur",code:"37"},{name:"Naxxar",code:"38"},{name:"Paola",code:"39"},{name:"Pembroke",code:"40"},{name:"Pietà",code:"41"},{name:"Qala",code:"42"},{name:"Qormi",code:"43"},{name:"Qrendi",code:"44"},{name:"Rabat Gozo",code:"45"},{name:"Rabat Malta",code:"46"},{name:"Safi",code:"47"},{name:"Saint Julian's",code:"48"},{name:"Saint John",code:"49"},{name:"Saint Lawrence",code:"50"},{name:"Saint Paul's Bay",code:"51"},{name:"Sannat",code:"52"},{name:"Saint Lucia's",code:"53"},{name:"Santa Venera",code:"54"},{name:"Siggiewi",code:"55"},{name:"Sliema",code:"56"},{name:"Swieqi",code:"57"},{name:"Ta' Xbiex",code:"58"},{name:"Tarxien",code:"59"},{name:"Valletta",code:"60"},{name:"Xaghra",code:"61"},{name:"Xewkija",code:"62"},{name:"Xghajra",code:"63"},{name:"Zabbar",code:"64"},{name:"Zebbug Gozo",code:"65"},{name:"Zebbug Malta",code:"66"},{name:"Zejtun",code:"67"},{name:"Zurrieq",code:"68"}],NG:[{name:"Abia",code:"AB"},{name:"Adamawa",code:"AD"},{name:"Akwa Ibom",code:"AK"},{name:"Anambra",code:"AN"},{name:"Bauchi",code:"BA"},{name:"Benue",code:"BE"},{name:"Borno",code:"BO"},{name:"Bayelsa",code:"BY"},{name:"Cross River",code:"CR"},{name:"Delta",code:"DE"},{name:"Ebonyi",code:"EB"},{name:"Edo",code:"ED"},{name:"Ekiti",code:"EK"},{name:"Enugu",code:"EN"},{name:"Abuja Capital Territory",code:"FC"},{name:"Gombe",code:"GO"},{name:"Imo",code:"IM"},{name:"Jigawa",code:"JI"},{name:"Kaduna",code:"KD"},{name:"Kebbi",code:"KE"},{name:"Kano",code:"KN"},{name:"Kogi",code:"KO"},{name:"Katsina",code:"KT"},{name:"Kwara",code:"KW"},{name:"Lagos",code:"LA"},{name:"Nassarawa",code:"NA"},{name:"Niger",code:"NI"},{name:"Ogun",code:"OG"},{name:"Ondo",code:"ON"},{name:"Osun",code:"OS"},{name:"Oyo",code:"OY"},{name:"Plateau",code:"PL"},{name:"Rivers",code:"RI"},{name:"Sokoto",code:"SO"},{name:"Taraba",code:"TA"},{name:"Yobe",code:"YO"},{name:"Zamfara",code:"ZA"}],NI:[{name:"Atlántico Norte",code:"AN"},{name:"Atlántico Sur",code:"AS"},{name:"Boaco",code:"BO"},{name:"Carazo",code:"CA"},{name:"Chinandega",code:"CI"},{name:"Chontales",code:"CO"},{name:"Estelí",code:"ES"},{name:"Granada",code:"GR"},{name:"Jinotega",code:"JI"},{name:"León",code:"LE"},{name:"Madriz",code:"MD"},{name:"Managua",code:"MN"},{name:"Masaya",code:"MS"},{name:"Matagalpa",code:"MT"},{name:"Nueva Segovia",code:"NS"},{name:"Rivas",code:"RI"},{name:"Río San Juan",code:"SJ"}],NL:[{name:"Drenthe",code:"DR"},{name:"Flevoland",code:"FL"},{name:"Fryslân",code:"FR"},{name:"Gelderland",code:"GE"},{name:"Groningen",code:"GR"},{name:"Limburg",code:"LI"},{name:"Noord-Brabant",code:"NB"},{name:"Noord-Holland",code:"NH"},{name:"Overijssel",code:"OV"},{name:"Utrecht",code:"UT"},{name:"Zeeland",code:"ZE"},{name:"Zuid-Holland",code:"ZH"}],NA:[{name:"Caprivi",code:"CA"},{name:"Erongo",code:"ER"},{name:"Hardap",code:"HA"},{name:"Karas",code:"KA"},{name:"Khomas",code:"KH"},{name:"Kunene",code:"KU"},{name:"Otjozondjupa",code:"OD"},{name:"Omaheke",code:"OH"},{name:"Okavango",code:"OK"},{name:"Oshana",code:"ON"},{name:"Omusati",code:"OS"},{name:"Oshikoto",code:"OT"},{name:"Ohangwena",code:"OW"}],NE:[{name:"Agadez",code:"1"},{name:"Diffa",code:"2"},{name:"Dosso",code:"3"},{name:"Maradi",code:"4"},{name:"Tahoua",code:"5"},{name:"Tillabéri",code:"6"},{name:"Zinder",code:"7"},{name:"Niamey",code:"8"}],NZ:[{name:"Auckland",code:"AUK"},{name:"Bay of Plenty",code:"BOP"},{name:"Canterbury",code:"CAN"},{name:"Chatham Islands Territory",code:"CIT"},{name:"Gisborne District",code:"GIS"},{name:"Hawkes's Bay",code:"HKB"},{name:"Marlborough District",code:"MBH"},{name:"Manawatu-Wanganui",code:"MWT"},{name:"Nelson City",code:"NSN"},{name:"Northland",code:"NTL"},{name:"Otago",code:"OTA"},{name:"Southland",code:"STL"},{name:"Tasman District",code:"TAS"},{name:"Taranaki",code:"TKI"},{name:"Wellington",code:"WGN"},{name:"Waikato",code:"WKO"},{name:"West Coast",code:"WTC"}],NR:[{name:"Aiwo",code:"01"},{name:"Anabar",code:"02"},{name:"Anetan",code:"03"},{name:"Anibare",code:"04"},{name:"Baiti",code:"05"},{name:"Boe",code:"06"},{name:"Buada",code:"07"},{name:"Denigomodu",code:"08"},{name:"Ewa",code:"09"},{name:"Ijuw",code:"10"},{name:"Meneng",code:"11"},{name:"Nibok",code:"12"},{name:"Uaboe",code:"13"},{name:"Yaren",code:"14"}],NP:[{name:"Bagmati",code:"BA"},{name:"Bheri",code:"BH"},{name:"Dhawalagiri",code:"DH"},{name:"Gandaki",code:"GA"},{name:"Janakpur",code:"JA"},{name:"Karnali",code:"KA"},{name:"Kosi [Koshi]",code:"KO"},{name:"Lumbini",code:"LU"},{name:"Mahakali",code:"MA"},{name:"Mechi",code:"ME"},{name:"Narayani",code:"NA"},{name:"Rapti",code:"RA"},{name:"Sagarmatha",code:"SA"},{name:"Seti",code:"SE"}],NO:[{name:"Østfold",code:"01"},{name:"Akershus",code:"02"},{name:"Oslo",code:"03"},{name:"Hedmark",code:"04"},{name:"Oppland",code:"05"},{name:"Buskerud",code:"06"},{name:"Vestfold",code:"07"},{name:"Telemark",code:"08"},{name:"Aust-Agder",code:"09"},{name:"Vest-Agder",code:"10"},{name:"Rogaland",code:"11"},{name:"Hordaland",code:"12"},{name:"Sogn og Fjordane",code:"14"},{name:"Møre og Romsdal",code:"15"},{name:"Sør-Trøndelag",code:"16"},{name:"Nord-Trøndelag",code:"17"},{name:"Nordland",code:"18"},{name:"Troms",code:"19"},{name:"Finnmark",code:"20"},{name:"Svalbard (Arctic Region) (See\r\nalso country code SJ)",code:"21"},{name:"Jan Mayen (Arctic Region) (See\r\nalso country code SJ)",code:"22"}],OM:[{name:"Al Batinah",code:"BA"},{name:"Al Buraymi",code:"BU"},{name:"Ad Dakhiliyah",code:"DA"},{name:"Masqat",code:"MA"},{name:"Musandam",code:"MU"},{name:"Ash Sharqiyah",code:"SH"},{name:"AI Wusta",code:"WU"},{name:"Az Zahirah",code:"ZA"},{name:"Z¸ufar",code:"ZU"}],PL:[{name:"Dolnoslaskie",code:"DS"},{name:"Kujawsko-pomorskie",code:"KP"},{name:"Lubuskie",code:"LB"},{name:"Lódzkie",code:"LD"},{name:"Lubelskie",code:"LU"},{name:"Malopolskie",code:"MA"},{name:"Mazowieckie",code:"MZ"},{name:"Opolskie",code:"OP"},{name:"Podlaskie",code:"PD"},{name:"Podkarpackie",code:"PK"},{name:"Pomorskie",code:"PM"},{name:"Swietokrzyskie",code:"SK"},{name:"Slaskie",code:"SL"},{name:"Warminsko-mazurskie",code:"WN"},{name:"Wielkopolskie",code:"WP"},{name:"Zachodniopomorskie",code:"ZP"}],PH:[{name:"Abra",code:"ABR"},{name:"Agusan del Norte",code:"AGN"},{name:"Agusan del Sur",code:"AGS"},{name:"Aklan",code:"AKL"},{name:"Albay",code:"ALB"},{name:"Antique",code:"ANT"},{name:"Aurora",code:"AUR"},{name:"Basilan",code:"BAS"},{name:"Bataan",code:"BAN"},{name:"Batanes",code:"BTN"},{name:"Batangas",code:"BTG"},{name:"Benguet",code:"BEN"},{name:"Biliran Sub-Province",code:"BIL"},{name:"Bohol",code:"BOH"},{name:"Bukidnon",code:"BUK"},{name:"Bulacan",code:"BUL"},{name:"Cagayan",code:"CAG"},{name:"Caloocan",code:"CAL"},{name:"Camarines Norte",code:"CAN"},{name:"Camarines Sur",code:"CAS"},{name:"Camiguin",code:"CAM"},{name:"Capiz",code:"CAP"},{name:"Catanduanes",code:"CAT"},{name:"Cavite",code:"CAV"},{name:"Cebu Province",code:"CEB"},{name:"Compostela Valley",code:"COM"},{name:"Cotabato North",code:"NCO"},{name:"Cotabato South",code:"SCO"},{name:"Davao del Norte",code:"DAV"},{name:"Davao del Sur",code:"DAS"},{name:"Davao Oriental",code:"DAO"},{name:"Guimaras Sub-Province",code:"GUI"},{name:"Ifugao",code:"IFU"},{name:"Ilocos Norte",code:"ILN"},{name:"Ilocos Sur",code:"ILS"},{name:"Iloilo Province",code:"ILI"},{name:"Isabela",code:"ISA"},{name:"Kalinga-Apayao",code:"APA"},{name:"La Union",code:"LUN"},{name:"Laguna",code:"LAG"},{name:"Lanao del Norte",code:"LAN"},{name:"Lanao del Sur",code:"LAS"},{name:"Las Pinas City",code:"LPC"},{name:"Leyte",code:"LEY"},{name:"Maguindanao",code:"MAG"},{name:"Makati City",code:"MKT"},{name:"Malabon",code:"MAL"},{name:"Mandaluyong City",code:"MAN"},{name:"Manila",code:"MNL"},{name:"Marikina City",code:"MKN"},{name:"Marinduque",code:"MAD"},{name:"Masbate",code:"MAS"},{name:"Mindoro Occidental",code:"MDC"},{name:"Misamis Oriental",code:"MSR"},{name:"Mountain Province",code:"MOU"},{name:"Muntinlupa City",code:"MUN"},{name:"Navotas",code:"NVT"},{name:"Negros Occidental",code:"NEC"},{name:"Negros Oriental",code:"NER"},{name:"Nueva Ecija",code:"NUE"},{name:"Nueva Vizcaya",code:"NUV"},{name:"Palawan",code:"PLW"},{name:"Pampanga",code:"PAM"},{name:"Pangasinan",code:"PAN"},{name:"Paranaque City",code:"PAC"},{name:"Pasay",code:"PSY"},{name:"Pasig City",code:"PSG"},{name:"Pateros",code:"PAT"},{name:"Quezon City",code:"QCY"},{name:"Quezon Province",code:"QUE"},{name:"Quirino Province",code:"QUI"},{name:"Rizal Province",code:"RIZ"},{name:"Romblon",code:"ROM"},{name:"Samar - Eastern",code:"EAS"},{name:"Samar - Northern",code:"NSA"},{name:"Samar - Western",code:"WSA"},{name:"San Juan",code:"SJN"},{name:"Sarangani",code:"SAR"},{name:"Siquijor",code:"SIG"},{name:"Sorsogon",code:"SOR"},{name:"Sultan Kudarat",code:"SUK"},{name:"Sulu Province",code:"SLU"},{name:"Surigao del Norte",code:"SUN"},{name:"Surigao del Sur",code:"SUR"},{name:"Taguig",code:"TAG"},{name:"Tarlac",code:"TAR"},{name:"Tawi-Tawi",code:"TAW"},{name:"Valenzuela",code:"VAL"},{name:"Zambales",code:"ZMB"},{name:"Zamboanga del Norte",code:"ZAN"},{name:"Zamboanga del Sur",code:"ZAS"},{name:"Zamboanga Zibugay",code:"ZAZ"}],PK:[{name:"Balochistan",code:"BA"},{name:"Gilgit-Baltistan",code:"GB"},{name:"Islamabad",code:"IS"},{name:"Azad Kashmir",code:"JK"},{name:"Khyber Pakhtunkhwa",code:"KP"},{name:"Punjab",code:"PB"},{name:"Sindh",code:"SD"},{name:"Federally Administered Tribal Areas",code:"TA"}],PE:[{name:"Amazonas",code:"AMA"},{name:"Ancash",code:"ANC"},{name:"Apurímac",code:"APU"},{name:"Arequipa",code:"ARE"},{name:"Ayacucho",code:"AYA"},{name:"Cajamarca",code:"CAJ"},{name:"El Callao",code:"CAL"},{name:"Cuzco [Cusco]",code:"CUS"},{name:"Huánuco",code:"HUC"},{name:"Huancavelica",code:"HUV"},{name:"Ica",code:"ICA"},{name:"Junín",code:"JUN"},{name:"La Libertad",code:"LAL"},{name:"Lambayeque",code:"LAM"},{name:"Lima",code:"LIM"},{name:"Lima hatun llaqta",code:"LMA"},{name:"Loreto",code:"LOR"},{name:"Madre de Dios",code:"MDD"},{name:"Moquegua",code:"MOQ"},{name:"Pasco",code:"PAS"},{name:"Piura",code:"PIU"},{name:"Puno",code:"PUN"},{name:"San Martín",code:"SAM"},{name:"Tacna",code:"TAC"},{name:"Tumbes",code:"TUM"},{name:"Ucayali",code:"UCA"}],PG:[{name:"Chimbu",code:"CPK"},{name:"Central",code:"CPM"},{name:"East New Britain",code:"EBR"},{name:"Eastern Highlands",code:"EHG"},{name:"Enga",code:"EPW"},{name:"East Sepik",code:"ESW"},{name:"Gulf",code:"GPK"},{name:"Milne Bay",code:"MBA"},{name:"Morobe",code:"MPL"},{name:"Madang",code:"MPM"},{name:"Manus",code:"MRL"},{name:"National Capital District (Port Moresby)",code:"NCD"},{name:"New Ireland",code:"NIK"},{name:"Northern",code:"NPP"},{name:"Bougainville",code:"NSB"},{name:"Sandaun (West Sepik)",code:"SAN"},{name:"Southern Highlands",code:"SHM"},{name:"West New Britain",code:"WBK"},{name:"Western Highlands",code:"WHM"},{name:"Western",code:"WPD"}],PA:[{name:"Bocas del Toro",code:"1"},{name:"Coclé",code:"2"},{name:"Colón",code:"3"},{name:"Chiriquí",code:"4"},{name:"Darién",code:"5"},{name:"Herrera",code:"6"},{name:"Los Santos",code:"7"},{name:"Panamá",code:"8"},{name:"Veraguas",code:"9"},{name:"Emberá",code:"EM"},{name:"Kuna Yala",code:"KY"},{name:"Ngöbe-Buglé",code:"NB"}],ZA:[{name:"Eastern Cape",code:"EC"},{name:"Free State",code:"FS"},{name:"Gauteng",code:"GT"},{name:"Limpopo",code:"LP"},{name:"Mpumalanga",code:"MP"},{name:"Northern Cape",code:"NC"},{name:"Kwazulu-Natal",code:"NL"},{name:"North-West",code:"NW"},{name:"Western Cape",code:"WC"}],HN:[{name:"Atlántida",code:"AT"},{name:"Choluteca",code:"CH"},{name:"Colón",code:"CL"},{name:"Comayagua",code:"CM"},{name:"Copán",code:"CP"},{name:"Cortés",code:"CR"},{name:"El Paraíso",code:"EP"},{name:"Francisco Morazán",code:"FM"},{name:"Gracias a Dios",code:"GD"},{name:"Islas de la Bahía",code:"IB"},{name:"Intibucá",code:"IN"},{name:"Lempira",code:"LE"},{name:"La Paz",code:"LP"},{name:"Ocotepeque",code:"OC"},{name:"Olancho",code:"OL"},{name:"Santa Bárbara",code:"SB"},{name:"Valle",code:"VA"},{name:"Yoro",code:"YO"}],HR:[{name:"Zagrebacka županija",code:"01"},{name:"Krapinsko-zagorska županija",code:"02"},{name:"Sisacko-moslavacka županija",code:"03"},{name:"Karlovacka županija",code:"04"},{name:"Varaždinska županija",code:"05"},{name:"Koprivnicko-križevacka županija",code:"06"},{name:"Bjelovarsko-bilogorska županija",code:"07"},{name:"Primorsko-goranska županija",code:"08"},{name:"Licko-senjska županija",code:"09"},{name:"Viroviticko-podravska županija",code:"10"},{name:"Požeško-slavonska županija",code:"11"},{name:"Brodsko-posavska županija",code:"12"},{name:"Zadarska županija",code:"13"},{name:"Osjecko-baranjska županija",code:"14"},{name:"Šibensko-kninska županija",code:"15"},{name:"Vukovarsko-srijemska županija",code:"16"},{name:"Splitsko-dalmatinska županija",code:"17"},{name:"Istarska županija",code:"18"},{name:"Dubrovacko-neretvanska županija",code:"19"},{name:"Medimurska županija",code:"20"},{name:"Grad Zagreb",code:"21"}],HT:[{name:"Artibonite",code:"AR"},{name:"Centre",code:"CE"},{name:"Grande-Anse",code:"GA"},{name:"Nord",code:"ND"},{name:"Nord-Est",code:"NE"},{name:"Nippes",code:"NI"},{name:"Nord-Ouest",code:"NO"},{name:"Ouest",code:"OU"},{name:"Sud",code:"SD"},{name:"Sud-Est",code:"SE"}],HU:[{name:"Baranya",code:"BA"},{name:"Békéscsaba",code:"BC"},{name:"Békés",code:"BE"},{name:"Bács-Kiskun",code:"BK"},{name:"Budapest",code:"BU"},{name:"Borsod-Abaúj-Zemplén",code:"BZ"},{name:"Csongrád",code:"CS"},{name:"Debrecen",code:"DE"},{name:"Dunaújváros",code:"DU"},{name:"Eger",code:"EG"},{name:"Érd",code:"ER"},{name:"Fejér",code:"FE"},{name:"Gyor-Moson-Sopron",code:"GS"},{name:"Gyor",code:"GY"},{name:"Hajdú-Bihar",code:"HB"},{name:"Heves",code:"HE"},{name:"Hódmezovásárhely",code:"HV"},{name:"Jász-Nagykun-Szolnok",code:"JN"},{name:"Komárom-Esztergom",code:"KE"},{name:"Kecskemét",code:"KM"},{name:"Kaposvár",code:"KV"},{name:"Miskolc",code:"MI"},{name:"Nagykanizsa",code:"NK"},{name:"Nógrád",code:"NO"},{name:"Nyíregyháza",code:"NY"},{name:"Pest",code:"PE"},{name:"Pécs",code:"PS"},{name:"Szeged",code:"SD"},{name:"Székesfehérvár",code:"SF"},{name:"Szombathely",code:"SH"},{name:"Szolnok",code:"SK"},{name:"Sopron",code:"SN"},{name:"Somogy",code:"SO"},{name:"Szekszárd",code:"SS"},{name:"Salgótarján",code:"ST"},{name:"Szabolcs-Szatmár-Bereg",code:"SZ"},{name:"Tatabánya",code:"TB"},{name:"Tolna",code:"TO"},{name:"Vas",code:"VA"},{name:"Veszprém",code:"VE"},{name:"Veszprém",code:"VM"},{name:"Zala",code:"ZA"},{name:"Zalaegerszeg",code:"ZE"}],ZM:[{name:"Western",code:"01"},{name:"Central",code:"02"},{name:"Eastern",code:"03"},{name:"Luapula",code:"04"},{name:"Northern",code:"05"},{name:"North-Western",code:"06"},{name:"Southern",code:"07"},{name:"Copperbelt",code:"08"},{name:"Lusaka",code:"09"}],ZW:[{name:"Bulawayo",code:"BU"},{name:"Harare",code:"HA"},{name:"Manicaland",code:"MA"},{name:"Mashonaland Central",code:"MC"},{name:"Mashonaland East",code:"ME"},{name:"Midlands",code:"MI"},{name:"Matabeleland North",code:"MN"},{name:"Matabeleland South",code:"MS"},{name:"Masvingo",code:"MV"},{name:"Mashonaland West",code:"MW"}],ID:[{name:"Aceh",code:"AC"},{name:"Bali",code:"BA"},{name:"Bangka Belitung",code:"BB"},{name:"Bengkulu",code:"BE"},{name:"Banten",code:"BT"},{name:"Gorontalo",code:"GO"},{name:"Jambi",code:"JA"},{name:"Jawa Barat",code:"JB"},{name:"Jawa Timur",code:"JI"},{name:"Jakarta Raya",code:"JK"},{name:"Jawa Tengah",code:"JT"},{name:"Kalimantan Barat",code:"KB"},{name:"Kalimantan Timur",code:"KI"},{name:"Kepulauan Riau",code:"KR"},{name:"Kalimantan Selatan",code:"KS"},{name:"Kalimantan Tengah",code:"KT"},{name:"Lampung",code:"LA"},{name:"Maluku",code:"MA"},{name:"Maluku Utara",code:"MU"},{name:"Nusa Tenggara Barat",code:"NB"},{name:"Nusa Tenggara Timur",code:"NT"},{name:"Papua",code:"PA"},{name:"Papua Barat",code:"PB"},{name:"Riau",code:"RI"},{name:"Sulawesi Utara",code:"SA"},{name:"Sumatera Barat",code:"SB"},{name:"Sulawesi Tenggara",code:"SG"},{name:"Sulawesi Selatan",code:"SN"},{name:"Sulawesi Barat",code:"SR"},{name:"Sumatera Selatan",code:"SS"},{name:"Sulawesi Tengah",code:"ST"},{name:"Sumatera Utara",code:"SU"},{name:"Yogyakarta",code:"YO"}],IE:[{name:"Clare",code:"CE"},{name:"Cavan",code:"CN"},{name:"Cork",code:"CO"},{name:"Carlow",code:"CW"},{name:"Dublin",code:"D"},{name:"Donegal",code:"DL"},{name:"Galway",code:"G"},{name:"Kildare",code:"KE"},{name:"Kilkenny",code:"KK"},{name:"Kerry",code:"KY"},{name:"Longford",code:"LD"},{name:"Louth",code:"LH"},{name:"Limerick",code:"LK"},{name:"Leitrim",code:"LM"},{name:"Laois",code:"LS"},{name:"Meath",code:"MH"},{name:"Monaghan",code:"MN"},{name:"Mayo",code:"MO"},{name:"Offaly",code:"OY"},{name:"Roscommon",code:"RN"},{name:"Sligo",code:"SO"},{name:"Tipperary",code:"TA"},{name:"Waterford",code:"WD"},{name:"Westmeath",code:"WH"},{name:"Wicklow",code:"WW"},{name:"Wexford",code:"WX"}],IL:[{name:"HaDarom",code:"D"},{name:"Hefa",code:"HA"},{name:"Yerushalayim",code:"JM"},{name:"HaMerkaz",code:"M"},{name:"Tel-Aviv",code:"TA"},{name:"HaZafon",code:"Z"}],IN:[{name:"Andaman and Nicobar Islands",code:"AN"},{name:"Andhra Pradesh",code:"AP"},{name:"Arunachal Pradesh",code:"AR"},{name:"Assam",code:"AS"},{name:"Bihar",code:"BR"},{name:"Chandigarh",code:"CH"},{name:"Chhattisgarh",code:"CT"},{name:"Daman and Diu",code:"DD"},{name:"Delhi",code:"DL"},{name:"Dadra and Nagar Haveli",code:"DN"},{name:"Goa",code:"GA"},{name:"Gujarat",code:"GJ"},{name:"Himachal Pradesh",code:"HP"},{name:"Haryana",code:"HR"},{name:"Jharkhand",code:"JH"},{name:"Jammu and Kashmir",code:"JK"},{name:"Karnataka",code:"KA"},{name:"Kerala",code:"KL"},{name:"Lakshadweep",code:"LD"},{name:"Maharashtra",code:"MH"},{name:"Meghalaya",code:"ML"},{name:"Manipur",code:"MN"},{name:"Madhya Pradesh",code:"MP"},{name:"Mizoram",code:"MZ"},{name:"Nagaland",code:"NL"},{name:"Orissa",code:"OR"},{name:"Punjab",code:"PB"},{name:"Puducherry",code:"PY"},{name:"Rajasthan",code:"RJ"},{name:"Sikkim",code:"SK"},{name:"Tamil Nadu",code:"TN"},{name:"Tripura",code:"TR"},{name:"Uttar Pradesh",code:"UP"},{name:"Uttarakhand",code:"UT"},{name:"West Bengal",code:"WB"}],IQ:[{name:"AI Anbar",code:"AN"},{name:"Arbil",code:"AR"},{name:"Al Basrah",code:"BA"},{name:"Babil",code:"BB"},{name:"Baghdad",code:"BG"},{name:"Dahuk",code:"DA"},{name:"Diyalá",code:"DI"},{name:"Dhi Qar",code:"DQ"},{name:"Karbala'",code:"KA"},{name:"Maysan",code:"MA"},{name:"AI Muthanná",code:"MU"},{name:"An Najaf",code:"NA"},{name:"Ninawá",code:"NI"},{name:"Al Qadisiyah",code:"QA"},{name:"Salah ad Din",code:"SD"},{name:"As Sulaymaniyah",code:"SU"},{name:"At Ta'mim",code:"TS"},{name:"Wasit",code:"WA"}],IR:[{name:"AZarbayjan-e Sharqi",code:"01"},{name:"AZarbayjan-e Gharbi",code:"02"},{name:"Ardabil",code:"03"},{name:"Esfahan",code:"04"},{name:"Ilam",code:"05"},{name:"Bushehr",code:"06"},{name:"Tehran",code:"07"},{name:"Chahar Mahall va Bakhtiari",code:"08"},{name:"Khuzestan",code:"10"},{name:"Zanjan",code:"11"},{name:"Semnan",code:"12"},{name:"Sistan va Baluchestan",code:"13"},{name:"Fars",code:"14"},{name:"Kerman",code:"15"},{name:"Kordestan",code:"16"},{name:"Kermanshah",code:"17"},{name:"Kohkiluyeh va Buyer Ahmad",code:"18"},{name:"Gilan",code:"19"},{name:"Lorestan",code:"20"},{name:"Mazandaran",code:"21"},{name:"Markazi",code:"22"},{name:"Hormozgan",code:"23"},{name:"Hamadan",code:"24"},{name:"Yazd",code:"25"},{name:"Qom",code:"26"},{name:"Golestan",code:"27"},{name:"Qazvin",code:"28"},{name:"Khorasan-e Janubi",code:"29"},{name:"Khorasan-e Razavi",code:"30"},{name:"Khorasan-e Shemali",code:"31"}],YE:[{name:"Abyan",code:"AB"},{name:"'Adan",code:"AD"},{name:"'Amran",code:"AM"},{name:"Al Bayda'",code:"BA"},{name:"A? ?ali'",code:"DA"},{name:"Dhamar",code:"DH"},{name:"?a?ramawt",code:"HD"},{name:"?ajjah",code:"HJ"},{name:"Al ?udaydah",code:"HU"},{name:"Ibb",code:"IB"},{name:"Al Jawf",code:"JA"},{name:"Lahij",code:"LA"},{name:"Ma'rib",code:"MA"},{name:"Al Mahrah",code:"MR"},{name:"Al Ma?wit",code:"MW"},{name:"Raymah",code:"RA"},{name:"San?a' [city]",code:"SA"},{name:"Sa'dah",code:"SD"},{name:"Shabwah",code:"SH"},{name:"San?a'",code:"SN"},{name:"Ta'izz",code:"TA"}],IS:[{name:"Reykjavík",code:"0"},{name:"Höfuðborgarsvæði utan Reykjavíkur",code:"1"},{name:"Suðurnes",code:"2"},{name:"Vesturland",code:"3"},{name:"Vestfirðir",code:"4"},{name:"Norðurland vestra",code:"5"},{name:"Norðurland eystra",code:"6"},{name:"Austurland",code:"7"},{name:"Suðurland",code:"8"}],IT:[{name:"Agrigento",code:"AG"},{name:"Alessandria",code:"AL"},{name:"Ancona",code:"AN"},{name:"Aosta / Aoste (fr)",code:"AO"},{name:"Ascoli Piceno",code:"AP"},{name:"L'Aquila",code:"AQ"},{name:"Arezzo",code:"AR"},{name:"Asti",code:"AT"},{name:"Avellino",code:"AV"},{name:"Bari",code:"BA"},{name:"Bergamo",code:"BG"},{name:"Biella",code:"BI"},{name:"Belluno",code:"BL"},{name:"Benevento",code:"BN"},{name:"Bologna",code:"BO"},{name:"Brindisi",code:"BR"},{name:"Brescia",code:"BS"},{name:"Barletta-Andria-Trani",code:"BT"},{name:"Bolzano / Bozen (de)",code:"BZ"},{name:"Cagliari",code:"CA"},{name:"Campobasso",code:"CB"},{name:"Caserta",code:"CE"},{name:"Chieti",code:"CH"},{name:"Carbonia-Iglesias",code:"CI"},{name:"Caltanissetta",code:"CL"},{name:"Cuneo",code:"CN"},{name:"Como",code:"CO"},{name:"Cremona",code:"CR"},{name:"Cosenza",code:"CS"},{name:"Catania",code:"CT"},{name:"Catanzaro",code:"CZ"},{name:"Enna",code:"EN"},{name:"Forlì-Cesena",code:"FC"},{name:"Ferrara",code:"FE"},{name:"Foggia",code:"FG"},{name:"Firenze",code:"FI"},{name:"Fermo",code:"FM"},{name:"Frosinone",code:"FR"},{name:"Genova",code:"GE"},{name:"Gorizia",code:"GO"},{name:"Grosseto",code:"GR"},{name:"Imperia",code:"IM"},{name:"Isernia",code:"IS"},{name:"Crotone",code:"KR"},{name:"Lecco",code:"LC"},{name:"Lecce",code:"LE"},{name:"Livorno",code:"LI"},{name:"Lodi",code:"LO"},{name:"Latina",code:"LT"},{name:"Lucca",code:"LU"},{name:"Monza e Brianza",code:"MB"},{name:"Macerata",code:"MC"},{name:"Messina",code:"ME"},{name:"Milano",code:"MI"},{name:"Mantova",code:"MN"},{name:"Modena",code:"MO"},{name:"Massa-Carrara",code:"MS"},{name:"Matera",code:"MT"},{name:"Napoli",code:"NA"},{name:"Novara",code:"NO"},{name:"Nuoro",code:"NU"},{name:"Ogliastra",code:"OG"},{name:"Oristano",code:"OR"},{name:"Olbia-Tempio",code:"OT"},{name:"Palermo",code:"PA"},{name:"Piacenza",code:"PC"},{name:"Padova",code:"PD"},{name:"Pescara",code:"PE"},{name:"Perugia",code:"PG"},{name:"Pisa",code:"PI"},{name:"Pordenone",code:"PN"},{name:"Prato",code:"PO"},{name:"Parma",code:"PR"},{name:"Pistoia",code:"PT"},{name:"Pesaro e Urbino",code:"PU"},{name:"Pavia",code:"PV"},{name:"Potenza",code:"PZ"},{name:"Ravenna",code:"RA"},{name:"Reggio Calabria",code:"RC"},{name:"Reggio Emilia",code:"RE"},{name:"Ragusa",code:"RG"},{name:"Rieti",code:"RI"},{name:"Roma",code:"RM"},{name:"Rimini",code:"RN"},{name:"Rovigo",code:"RO"},{name:"Salerno",code:"SA"},{name:"Siena",code:"SI"},{name:"Sondrio",code:"SO"},{name:"La Spezia",code:"SP"},{name:"Siracusa",code:"SR"},{name:"Sassari",code:"SS"},{name:"Savona",code:"SV"},{name:"Taranto",code:"TA"},{name:"Teramo",code:"TE"},{name:"Trento",code:"TN"},{name:"Torino",code:"TO"},{name:"Trapani",code:"TP"},{name:"Terni",code:"TR"},{name:"Trieste",code:"TS"},{name:"Treviso",code:"TV"},{name:"Udine",code:"UD"},{name:"Varese",code:"VA"},{name:"Verbano-Cusio-Ossola",code:"VB"},{name:"Vercelli",code:"VC"},{name:"Venezia",code:"VE"},{name:"Vicenza",code:"VI"},{name:"Verona",code:"VR"},{name:"Medio Campidano",code:"VS"},{name:"Viterbo",code:"VT"},{name:"Vibo Valentia",code:"VV"}],JP:[{name:"Hokkaidô [Hokkaido]",code:"01"},{name:"Aomori",code:"02"},{name:"Iwate",code:"03"},{name:"Miyagi",code:"04"},{name:"Akita",code:"05"},{name:"Yamagata",code:"06"},{name:"Hukusima [Fukushima]",code:"07"},{name:"Ibaraki",code:"08"},{name:"Totigi [Tochigi]",code:"09"},{name:"Gunma",code:"10"},{name:"Saitama",code:"11"},{name:"Tiba [Chiba]",code:"12"},{name:"Tôkyô [Tokyo]",code:"13"},{name:"Kanagawa",code:"14"},{name:"Niigata",code:"15"},{name:"Toyama",code:"16"},{name:"Isikawa [Ishikawa]",code:"17"},{name:"Hukui [Fukui]",code:"18"},{name:"Yamanasi [Yamanashi]",code:"19"},{name:"Nagano",code:"20"},{name:"Gihu [Gifu]",code:"21"},{name:"Sizuoka [Shizuoka]",code:"22"},{
name:"Aiti [Aichi]",code:"23"},{name:"Mie",code:"24"},{name:"Siga [Shiga]",code:"25"},{name:"Hyôgo [Kyoto]",code:"26"},{name:"Ôsaka [Osaka]",code:"27"},{name:"Hyôgo[Hyogo]",code:"28"},{name:"Nara",code:"29"},{name:"Wakayama",code:"30"},{name:"Tottori",code:"31"},{name:"Simane [Shimane]",code:"32"},{name:"Okayama",code:"33"},{name:"Hirosima [Hiroshima]",code:"34"},{name:"Yamaguti [Yamaguchi]",code:"35"},{name:"Tokusima [Tokushima]",code:"36"},{name:"Kagawa",code:"37"},{name:"Ehime",code:"38"},{name:"Kôti [Kochi]",code:"39"},{name:"Hukuoka [Fukuoka]",code:"40"},{name:"Saga",code:"41"},{name:"Nagasaki",code:"42"},{name:"Kumamoto",code:"43"},{name:"Ôita [Oita]",code:"44"},{name:"Miyazaki",code:"45"},{name:"Kagosima [Kagoshima]",code:"46"},{name:"Okinawa",code:"47"}],JO:[{name:"?Ajlun",code:"AJ"},{name:"'Amman",code:"AM"},{name:"Al'Aqaba",code:"AQ"},{name:"At Tafilah",code:"AT"},{name:"Az Zarqa'",code:"AZ"},{name:"AI Balqa'",code:"BA"},{name:"Irbid",code:"IR"},{name:"Jarash",code:"JA"},{name:"AI Karak",code:"KA"},{name:"AI Mafraq",code:"MA"},{name:"Madaba",code:"MD"},{name:"Ma'an",code:"MN"}],JM:[{name:"Kingston",code:"01"},{name:"Saint Andrew",code:"02"},{name:"Saint Thomas",code:"03"},{name:"Portland",code:"04"},{name:"Saint Mary",code:"05"},{name:"Saint Ann",code:"06"},{name:"Trelawny",code:"07"},{name:"Saint James",code:"08"},{name:"Hanover",code:"09"},{name:"Westmoreland",code:"10"},{name:"Saint Elizabeth",code:"11"},{name:"Manchester",code:"12"},{name:"Clarendon",code:"13"},{name:"Saint Catherine",code:"14"}],KI:[{name:"Gilbert Islands",code:"G"},{name:"Line Islands",code:"L"},{name:"Phoenix Islands",code:"P"}],KH:[{name:"Banteay Mean Chey [Bântéay Méanchey]",code:"1"},{name:"Kracheh [Krâchéh]",code:"10"},{name:"Mondol Kiri [Môndól Kiri]",code:"11"},{name:"Phnom Penh [Phnum Pénh]",code:"12"},{name:"Preah Vihear [Preah Vihéar]",code:"13"},{name:"Prey Veaeng [Prey Vêng]",code:"14"},{name:"Pousaat [Pouthisat]",code:"15"},{name:"Rotanak Kiri [Rôtânôkiri]",code:"16"},{name:"Siem Reab [Siemréab]",code:"17"},{name:"Krong Preah Sihanouk [Krong Preah Sihanouk]",code:"18"},{name:"Stueng Traeng [Stoeng Trêng]",code:"19"},{name:"Baat Dambang [Batdâmbâng]",code:"2"},{name:"Svaay Rieng [Svay Rieng]",code:"20"},{name:"Taakaev [Takêv]",code:"21"},{name:"Otdar Mean Chey [Otdâr Méanchey]",code:"22"},{name:"Krong Kaeb [Krong Kêb]",code:"23"},{name:"Krong Pailin [Krong Pailin]",code:"24"},{name:"Kampong Chaam [Kâmpóng Cham]",code:"3"},{name:"Kampong Chhnang [Kâmpóng Chhnang]",code:"4"},{name:"Kampong Spueu [Kâmpóng Spœ]",code:"5"},{name:"Kampong Thum [Kâmpóng Thum]",code:"6"},{name:"Kampot [Kâmpôt]",code:"7"},{name:"Kandaal [Kândal]",code:"8"},{name:"Kaoh Kong [Kaôh Kong]",code:"9"}],KG:[{name:"Batken",code:"B"},{name:"Chü",code:"C"},{name:"Bishkek",code:"GB"},{name:"Jalal-Abad",code:"J"},{name:"Naryn",code:"N"},{name:"Osh",code:"O"},{name:"Talas",code:"T"},{name:"Ysyk-Köl",code:"Y"}],KE:[{name:"Nairobi",code:"110"},{name:"Central",code:"200"},{name:"Coast",code:"300"},{name:"Eastern",code:"400"},{name:"North-Eastern",code:"500"},{name:"Nyanza",code:"600"},{name:"Bonde la Ufa",code:"700"},{name:"Western",code:"800"}],KP:[{name:"Phyeongyang",code:"01"},{name:"Phyeongannamto",code:"02"},{name:"Phyeonganpukto",code:"03"},{name:"Jakangto",code:"04"},{name:"Hwanghainamto",code:"05"},{name:"Hwanghaipukto",code:"06"},{name:"Kangweonto",code:"07"},{name:"Hamkyeongnamto",code:"08"},{name:"Hamkyeongpukto",code:"09"},{name:"Yanggang-do",code:"10"},{name:"Nason",code:"13"}],KR:[{name:"Seoul Teugbyeolsi [Seoul-T'ukpyolshi]",code:"11"},{name:"Busan Gwang'yeogsi [Pusan-Kwangyokshi]",code:"26"},{name:"Daegu Gwang'yeogsi [Taegu-Kwangyokshi]",code:"27"},{name:"Incheon Gwang'yeogsi [Incheon]",code:"28"},{name:"Gwangju Gwang'yeogsi [Kwangju-Kwangyokshi]",code:"29"},{name:"Daejeon Gwang'yeogsi [Taejon-Kwangyokshi]",code:"30"},{name:"Ulsan Gwang'yeogsi [Ulsan-Kwangyokshi]",code:"31"},{name:"Gyeonggido [Kyonggi-do]",code:"41"},{name:"Gang'weondo [Kang-won-do]",code:"42"},{name:"Chungcheongbugdo [Ch'ungch'ongbuk-do]",code:"43"},{name:"Chungcheongnamdo [Ch'ungch'ongnam-do]",code:"44"},{name:"Jeonrabugdo [Chollabuk-do]",code:"45"},{name:"Jeonranamdo [Chollanam-do]",code:"46"},{name:"Gyeongsangbugdo [Kyongsangbuk-do]",code:"47"},{name:"Gyeongsangnamdo [Kyongsangnam-do]",code:"48"},{name:"Jejudo [Cheju-do]",code:"49"}],KM:[{name:"Anjouan",code:"A"},{name:"Grande Comore",code:"G"},{name:"Mohéli",code:"M"}],KN:[{name:"Christ Church Nichola Town",code:"01"},{name:"Saint Anne Sandy Point",code:"02"},{name:"Saint George Basseterre",code:"03"},{name:"Saint George Gingerland",code:"04"},{name:"Saint James Windward",code:"05"},{name:"Saint John Capisterre",code:"06"},{name:"Saint John Figtree",code:"07"},{name:"Saint Mary Cayon",code:"08"},{name:"Saint Paul Capisterre",code:"09"},{name:"Saint Paul Charlestown",code:"10"},{name:"Saint Peter Basseterre",code:"11"},{name:"Saint Thomas Lowland",code:"12"},{name:"Saint Thomas Middle Island",code:"13"},{name:"Trinity Palmetto Point",code:"15"}],KW:[{name:"Al A?madi",code:"AH"},{name:"Al Farwaniyah",code:"FA"},{name:"?awalli",code:"HA"},{name:"Al Jahra’",code:"JA"},{name:"Al Kuwayt",code:"KU"},{name:"Mubarak al Kabir",code:"MU"}],KZ:[{name:"Aqmola oblysy",code:"AKM"},{name:"Aqtöbe oblysy",code:"AKT"},{name:"Almaty",code:"ALA"},{name:"Almaty oblysy",code:"ALM"},{name:"Astana",code:"AST"},{name:"Atyrau oblysy",code:"ATY"},{name:"Qaraghandy oblysy",code:"KAR"},{name:"Qostanay oblysy",code:"KUS"},{name:"Qyzylorda oblysy",code:"KZY"},{name:"Mangghystau oblysy",code:"MAN"},{name:"Pavlodar oblysy",code:"PAV"},{name:"Soltüstik Qazaqstan oblysy",code:"SEV"},{name:"Shyghys Qazaqstan oblysy",code:"VOS"},{name:"Ongtüstik Qazaqstan oblysy",code:"YUZ"},{name:"Batys Qazaqstan oblysy",code:"ZAP"},{name:"Zhambyl oblysy",code:"ZHA"}],LA:[{name:"Attapu [Attopeu]",code:"AT"},{name:"Bokèo",code:"BK"},{name:"Bolikhamxai [Borikhane]",code:"BL"},{name:"Champasak [Champassak]",code:"CH"},{name:"Houaphan",code:"HO"},{name:"Khammouan",code:"KH"},{name:"Louang Namtha",code:"LM"},{name:"Louangphabang [Louang Prabang)",code:"LP"},{name:"Oudômxai [Oudomsai]",code:"OU"},{name:"Phôngsali [Phong Saly]",code:"PH"},{name:"Salavan [Saravane]",code:"SL"},{name:"Savannakhét",code:"SV"},{name:"Vientiane",code:"VI"},{name:"Vientiane",code:"VT"},{name:"Xaignabouli [Sayaboury]",code:"XA"},{name:"Xékong [Sékong]",code:"XE"},{name:"Xiangkhoang [Xieng Khouang]",code:"XI"},{name:"Xaisômboun",code:"XN"}],LC:[{name:"Anse la Raye",code:"01"},{name:"Castries",code:"02"},{name:"Choiseul",code:"03"},{name:"Dauphin",code:"04"},{name:"Dennery",code:"05"},{name:"Gros Islet",code:"06"},{name:"Laborie",code:"07"},{name:"Micoud",code:"08"},{name:"Praslin",code:"09"},{name:"Soufrière",code:"10"},{name:"Vieux Fort",code:"11"}],LB:[{name:"Aakkâr",code:"AK"},{name:"Liban-Nord",code:"AS"},{name:"Beyrouth",code:"BA"},{name:"Baalbek-Hermel",code:"BH"},{name:"El Béqaa",code:"BI"},{name:"Liban-Sud",code:"JA"},{name:"Mont-Liban",code:"JL"},{name:"Nabatîyé",code:"NA"}],LI:[{name:"Balzers",code:"01"},{name:"Eschen",code:"02"},{name:"Gamprin",code:"03"},{name:"Mauren",code:"04"},{name:"Planken",code:"05"},{name:"Ruggell",code:"06"},{name:"Schaan",code:"07"},{name:"Schellenberg",code:"08"},{name:"Triesen",code:"09"},{name:"Triesenberg",code:"10"},{name:"Vaduz",code:"11"}],LK:[{name:"Basnahira pa?ata",code:"1"},{name:"Colombo",code:"11"},{name:"Gampaha",code:"12"},{name:"Kalutara",code:"13"},{name:"Madhyama pa?ata",code:"2"},{name:"Kandy",code:"21"},{name:"Matale",code:"22"},{name:"Nuwara Eliya",code:"23"},{name:"Daku?u pa?ata",code:"3"},{name:"Galle",code:"31"},{name:"Matara",code:"32"},{name:"Hambantota",code:"33"},{name:"Uturu pa?ata",code:"4"},{name:"Jaffna",code:"41"},{name:"Kilinochchi",code:"42"},{name:"Mannar",code:"43"},{name:"Vavuniya",code:"44"},{name:"Mullaittivu",code:"45"},{name:"Næ?genahira pa?ata",code:"5"},{name:"Batticaloa",code:"51"},{name:"Ampara",code:"52"},{name:"Trincomalee",code:"53"},{name:"Vayamba pa?ata",code:"6"},{name:"Kurunegala",code:"61"},{name:"Puttalam",code:"62"},{name:"Uturumæ?da pa?ata",code:"7"},{name:"Anuradhapura",code:"71"},{name:"Polonnaruwa",code:"72"},{name:"Uva pa?ata",code:"8"},{name:"Badulla",code:"81"},{name:"Monaragala",code:"82"},{name:"Sabaragamuva pa?ata",code:"9"},{name:"Ratnapura",code:"91"},{name:"Kegalla",code:"92"}]};define("config.main",function(){});var dataUrl={auth:{login:"/api/user/auth/login",logout:"/api/user/auth/logout",register:"/api/user/auth/register",registerWithOTP:"/api/user/auth/registerWithOtp",forgotpassword:"/api/user/auth/forgotpassword",resetpassword:"/api/user/auth/resetpassword"},network:{getProfile:"/api/network/profile",getArticles:"",getPage:"/api/network/page",getArticlePost:"",addArticle:"",removeArticle:""},user:{getPlatform:"/api/platform",getProfile:"/api/user/profile",getPinboard:"/api/user/pinboard",getNewsfeeds:"/api/user/newsfeeds",getNetworks:"/api/user/getFollowingNetworks",getFollowers:"/api/user/getFollowers",getFollowersNotInNetwork:"/api/user/getFollowersNotInNetwork",getFollowing:"/api/user/getFollowingUsers",followUser:"/api/user/followUser",unFollowUser:"/api/user/unfollowUser",updateProfile:"/api/user/updateUser",setTourValue:"/api/user/updateTourStatus"},search:{getSearch:"/api/search"}};define("config.data",function(){});var cityConfig={NG:{AB:[{code:"001",name:"ABA NORTH"},{code:"002",name:"ABA SOUTH"},{code:"003",name:"AROCHUKWU"},{code:"004",name:"BENDE"},{code:"005",name:"IKWUANO"},{code:"006",name:"ISIALA NGWA NORTH"},{code:"007",name:"ISIALA NGWA SOUTH"},{code:"008",name:"ISUIKWUATO"},{code:"009",name:"OBI NGWA"},{code:"010",name:"OHAFIA"},{code:"011",name:"OSISIOMA NGWA"},{code:"012",name:"UGWUNAGBO"},{code:"013",name:"UKWA EAST"},{code:"014",name:"UKWA WEST"},{code:"015",name:"UMUAHIA NORTH"},{code:"016",name:"UMUAHIA SOUTH"},{code:"017",name:"UMU NNEOCHI"}],AD:[{code:"018",name:"DEMSA"},{code:"019",name:"FUFORE"},{code:"020",name:"GANYE"},{code:"021",name:"GIREI"},{code:"022",name:"GOMBI"},{code:"023",name:"GUYUK"},{code:"024",name:"HONG"},{code:"025",name:"JADA"},{code:"026",name:"LAMURDE"},{code:"027",name:"MADAGALI"},{code:"028",name:"MAIHA"},{code:"029",name:"MAYO-BELWA"},{code:"030",name:"MICHIKA"},{code:"031",name:"MUBI NORTH"},{code:"032",name:"MUBI SOUTH"},{code:"033",name:"NUMAN"},{code:"034",name:"SHELLENG"},{code:"035",name:"SONG"},{code:"036",name:"TOUNGO"},{code:"037",name:"YOLA NORTH (STATE CAPITAL)"},{code:"038",name:"YOLA SOUTH"}],AK:[{code:"039",name:"ABAK"},{code:"040",name:"EASTERN OBOLO"},{code:"041",name:"EKET"},{code:"042",name:"ESIT-EKET"},{code:"043",name:"ESSIEN-UDIM"},{code:"044",name:"ETIM- EKPO"},{code:"045",name:"ETINAN"},{code:"046",name:"IBENO"},{code:"047",name:"IBESIKPO-ASUTAN"},{code:"048",name:"IBIONO-IBOM"},{code:"049",name:"IKA"},{code:"050",name:"IKONO"},{code:"051",name:"IKOT ABASI"},{code:"052",name:"IKOT EKPENE"},{code:"053",name:"INI"},{code:"054",name:"ITU"},{code:"055",name:"MBO"},{code:"056",name:"MKPAT-ENIN"},{code:"057",name:"NSIT-ATAI"},{code:"058",name:"NSIT-IBOM"},{code:"059",name:"OKOBO"},{code:"060",name:"ONNA"},{code:"061",name:"ORON"},{code:"062",name:"ORUK-ANAM"},{code:"063",name:"UDONG-UKO"},{code:"064",name:"UKANAFUN"},{code:"065",name:"URUAN"},{code:"066",name:"URUE-OFONG/ ORUKO"},{code:"067",name:"UYO"}],AN:[{code:"068",name:"AGUATA"},{code:"069",name:"AWKA NORTH"},{code:"070",name:"AWKA SOUTH"},{code:"071",name:"ANAMBRA EAST"},{code:"072",name:"ANAMBRA WEST"},{code:"073",name:"ANAOCHA"},{code:"074",name:"AYAMELUM"},{code:"075",name:"DUNUKOFIA"},{code:"076",name:"EKWUSIGO"},{code:"077",name:"IDEMILI NORTH"},{code:"078",name:"IDEMILI SOUTH"},{code:"079",name:"IHIALA"},{code:"080",name:"NJIKOKA"},{code:"081",name:"NNEWI NORTH"},{code:"082",name:"NNEWI SOUTH"},{code:"083",name:"OGBARU"},{code:"084",name:"ONITSHA NORTH"},{code:"085",name:"ONITSHA SOUTH"},{code:"086",name:"ORUMBA NORTH"},{code:"087",name:"ORUMBA SOUTH"},{code:"088",name:"OYI"}],BA:[{code:"089",name:"ALKALERI"},{code:"090",name:"BAUCHI"},{code:"091",name:"BOGORO"},{code:"092",name:"DAMBAN"},{code:"093",name:"DARAZO"},{code:"094",name:"DASS"},{code:"095",name:"GAMAWA"},{code:"096",name:"GANJUWA"},{code:"097",name:"GIADE"},{code:"098",name:"ITAS/GADAU"},{code:"099",name:"JAMA'ARE"},{code:"100",name:"KATAGUM"},{code:"101",name:"KIRFI"},{code:"102",name:"MISAU"},{code:"103",name:"NINGI"},{code:"104",name:"SHIRA"},{code:"105",name:"TAFAWA BALEWA"},{code:"106",name:"TORO"},{code:"107",name:"WARJI"},{code:"108",name:"ZAKI"}],BY:[{code:"109",name:"BRASS"},{code:"110",name:"EKEREMOR"},{code:"111",name:"KOLOKUMA/OPOKUMA"},{code:"112",name:"NEMBE"},{code:"113",name:"OGBIA"},{code:"114",name:"SAGBAMA"},{code:"115",name:"SOUTHERN IJAW"},{code:"116",name:"YENAGOA"}],BE:[{code:"117",name:"ADO"},{code:"118",name:"AGATU"},{code:"119",name:"APA"},{code:"120",name:"BURUKU"},{code:"121",name:"GBOKO"},{code:"122",name:"GUMA"},{code:"123",name:"GWER EAST"},{code:"124",name:"GWER WEST"},{code:"125",name:"KATSINA-ALA"},{code:"126",name:"KONSHISHA"},{code:"127",name:"KWANDE"},{code:"128",name:"LOGO"},{code:"129",name:"MAKURDI"},{code:"130",name:"OBI"},{code:"131",name:"OGBADIBO"},{code:"132",name:"OHIMINI"},{code:"133",name:"OJU"},{code:"134",name:"OKPOKWU"},{code:"135",name:"OTUKPO"},{code:"136",name:"TARKA"},{code:"137",name:"UKUM"},{code:"138",name:"USHONGO"},{code:"139",name:"VANDEIKYA"}],BO:[{code:"140",name:"ABADAM"},{code:"141",name:"ASKIRA/UBA"},{code:"142",name:"BAMA"},{code:"143",name:"BAYO"},{code:"144",name:"BIU"},{code:"145",name:"CHIBOK"},{code:"146",name:"DAMBOA"},{code:"147",name:"DIKWA"},{code:"148",name:"GUBIO"},{code:"149",name:"GUZAMALA"},{code:"150",name:"GWOZA"},{code:"151",name:"HAWUL"},{code:"152",name:"JERE"},{code:"153",name:"KAGA"},{code:"154",name:"KALA/BALGE"},{code:"155",name:"KONDUGA"},{code:"156",name:"KUKAWA"},{code:"157",name:"KWAYA KUSAR"},{code:"158",name:"MAFA"},{code:"159",name:"MAGUMERI"},{code:"160",name:"MAIDUGURI"},{code:"161",name:"MARTE"},{code:"162",name:"MOBBAR"},{code:"163",name:"MONGUNO"},{code:"164",name:"NGALA"},{code:"165",name:"NGANZAI"},{code:"166",name:"SHANI"}],CR:[{code:"167",name:"ABI"},{code:"168",name:"AKAMKPA"},{code:"169",name:"AKPABUYO"},{code:"170",name:"BAKASSI"},{code:"171",name:"BEKWARRA"},{code:"172",name:"BIASE"},{code:"173",name:"BOKI"},{code:"174",name:"CALABAR MUNICIPAL"},{code:"175",name:"CALABAR SOUTH"},{code:"176",name:"ETUNG"},{code:"177",name:"IKOM"},{code:"178",name:"OBANLIKU"},{code:"179",name:"OBUBRA"},{code:"180",name:"OBUDU"},{code:"181",name:"ODUKPANI"},{code:"182",name:"OGOJA"},{code:"183",name:"YAKUUR"},{code:"184",name:"YALA"}],DE:[{code:"185",name:"ANIOCHA NORTH"},{code:"186",name:"ANIOCHA SOUTH"},{code:"187",name:"BOMADI"},{code:"188",name:"BURUTU"},{code:"189",name:"ETHIOPE EAST"},{code:"190",name:"ETHIOPE WEST"},{code:"191",name:"IKA NORTH -EAST"},{code:"192",name:"IKA SOUTH"},{code:"193",name:"ISOKO NORTH"},{code:"194",name:"ISOKO SOUTH"},{code:"195",name:"NDOKWA EAST"},{code:"196",name:"NDOKWA WEST"},{code:"197",name:"OKPE"},{code:"198",name:"OSHIMILI NORTH"},{code:"199",name:"OSHIMILI SOUTH"},{code:"200",name:"PATANI"},{code:"201",name:"SAPELE"},{code:"202",name:"UDU"},{code:"203",name:"UGHELLI NORTH"},{code:"204",name:"UGHELLI SOUTH"},{code:"205",name:"UKUWANI"},{code:"206",name:"UVWIE"},{code:"207",name:"WARRI NORTH"},{code:"208",name:"WARRI SOUTH"},{code:"209",name:"WARRI SOUTH WEST"}],EB:[{code:"210",name:"ABAKALIKI"},{code:"211",name:"AFIKPO NORTH"},{code:"212",name:"AFIKPO SOUTH"},{code:"213",name:"EBONYI"},{code:"214",name:"EZZA NORTH"},{code:"215",name:"EZZA SOUTH"},{code:"216",name:"IKWO"},{code:"217",name:"ISHIELU"},{code:"218",name:"IVO"},{code:"219",name:"IZZI"},{code:"220",name:"OHAOZARA"},{code:"221",name:"OHAUKWU"},{code:"222",name:"ONICHA"}],ED:[{code:"223",name:"AKOKO-EDO"},{code:"224",name:"EGOR"},{code:"225",name:"ESAN CENTRAL"},{code:"226",name:"ESAN NORTH-EAST"},{code:"227",name:"ESAN SOUTH-EAST"},{code:"228",name:"ESAN WEST"},{code:"229",name:"ETSAKO CENTRAL"},{code:"230",name:"ETSAKO EAST"},{code:"231",name:"ETSAKO WEST"},{code:"232",name:"IGUEBEN"},{code:"233",name:"IKPOBA-OKHA"},{code:"234",name:"OREDO"},{code:"235",name:"ORHIONMWON"},{code:"236",name:"OVIA NORTH-WEST"},{code:"237",name:"OVIA SOUTH-WEST"},{code:"238",name:"OWAN EAST"},{code:"239",name:"OWAN WEST"},{code:"240",name:"UHUNMWONDE"}],EK:[{code:"241",name:"ADO-EKITI"},{code:"242",name:"OYE"},{code:"243",name:"AIYEKIRE (GBONYIN)"},{code:"244",name:"EFON"},{code:"245",name:"EKITI EAST"},{code:"246",name:"EKITI SOUTH-WEST"},{code:"247",name:"EKITI WEST"},{code:"248",name:"EMURE"},{code:"249",name:"IDO-OSI"},{code:"250",name:"IJERO"},{code:"251",name:"IKERE"},{code:"252",name:"IKOLE"},{code:"253",name:"ILEJEMEJE"},{code:"254",name:"IREPODUN/IFELODUN"},{code:"255",name:"ISE/ORUN"},{code:"256",name:"MOBA"}],EN:[{code:"257",name:"ANINRI"},{code:"258",name:"AWGU"},{code:"259",name:"ENUGU EAST"},{code:"260",name:"ENUGU NORTH"},{code:"261",name:"ENUGU SOUTH"},{code:"262",name:"EZEAGU"},{code:"263",name:"IGBO ETITI"},{code:"264",name:"IGBO EZE NORTH"},{code:"265",name:"IGBO EZE SOUTH"},{code:"266",name:"ISI UZO"},{code:"267",name:"NKANU EAST"},{code:"268",name:"NKANU WEST"},{code:"269",name:"NSUKKA"},{code:"270",name:"OJI RIVER"},{code:"271",name:"UDENU"},{code:"272",name:"UDI"},{code:"273",name:"UZO UWANI"}],GO:[{code:"274",name:"GOMBE"},{code:"275",name:"KALTUNGO"},{code:"276",name:"KWAMI"},{code:"277",name:"NAFADA"},{code:"278",name:"SHONGOM"},{code:"279",name:"YAMALTU/DEBA"}],IM:[{code:"280",name:"Aboh Mbaise"},{code:"281",name:"Ahiazu Mbaise"},{code:"282",name:"Ehime Mbano"},{code:"283",name:"Ezinihitte"},{code:"284",name:"Ideato North"},{code:"285",name:"Ideato South"},{code:"286",name:"Ihitte/Uboma"},{code:"287",name:"Ikeduru"},{code:"288",name:"Isiala Mbano"},{code:"289",name:"Isu"},{code:"290",name:"Mbaitoli"},{code:"291",name:"Ngor Okpala"},{code:"292",name:"Njaba"},{code:"293",name:"Nkwerre"},{code:"294",name:"Nwangele"},{code:"295",name:"Obowo"},{code:"296",name:"Oguta"},{code:"297",name:"Ohaji/Egbema"},{code:"298",name:"Okigwe"},{code:"299",name:"Onuimo"},{code:"300",name:"Orlu"},{code:"301",name:"Orsu"},{code:"302",name:"Oru East"},{code:"303",name:"Oru West"},{code:"304",name:"Owerri Municipal"},{code:"305",name:"Owerri North"},{code:"306",name:"Owerri West"}],JI:[{code:"307",name:"AUYO"},{code:"308",name:"BABURA"},{code:"309",name:"BIRINIWA"},{code:"310",name:"BIRNIN KUDU"},{code:"311",name:"BUJI"},{code:"312",name:"DUTSE"},{code:"313",name:"GAGARAWA"},{code:"314",name:"GARKI"},{code:"315",name:"GUMEL"},{code:"316",name:"GURI"},{code:"317",name:"GWARAM"},{code:"318",name:"GWIWA"},{code:"319",name:"HADEJIA"},{code:"320",name:"JAHUN"},{code:"321",name:"KAFIN HAUSA"},{code:"322",name:"KAUGAMA"},{code:"323",name:"KAZAURE"},{code:"324",name:"KIRI KASAMA"},{code:"325",name:"KIYAWA"},{code:"326",name:"MAIGATARI"},{code:"327",name:"MALAM MADORI"},{code:"328",name:"MIGA"},{code:"329",name:"RINGIM"},{code:"330",name:"RONI"},{code:"331",name:"SULE TANKARKAR"},{code:"332",name:"TAURA"},{code:"333",name:"YANKWASHI"}],KD:[{code:"334",name:"BIRNIN GWARI"},{code:"335",name:"CHIKUN"},{code:"336",name:"GIWA"},{code:"337",name:"IGABI"},{code:"338",name:"IKARA"},{code:"339",name:"JABA"},{code:"340",name:"JEMA'A"},{code:"341",name:"KACHIA"},{code:"342",name:"KADUNA NORTH"},{code:"343",name:"KADUNA SOUTH"},{code:"344",name:"KAGARKO"},{code:"345",name:"KAJURU"},{code:"346",name:"KAURA"},{code:"347",name:"KAURU"},{code:"348",name:"KUBAU"},{code:"349",name:"KUDAN"},{code:"350",name:"LERE"},{code:"351",name:"MAKARFI"},{code:"352",name:"SABON GARI"},{code:"353",name:"SANGA"},{code:"354",name:"SOBA"},{code:"355",name:"ZANGON KATAF"},{code:"356",name:"ZARIA"}],KN:[{code:"357",name:"AJINGI"},{code:"358",name:"ALBASU"},{code:"359",name:"BAGWAI"},{code:"360",name:"BEBEJI"},{code:"361",name:"BICHI"},{code:"362",name:"BUNKURE"},{code:"363",name:"DALA"},{code:"364",name:"DAMBATTA"},{code:"365",name:"DAWAKIN KUDU"},{code:"366",name:"DAWAKIN TOFA"},{code:"367",name:"DOGUWA"},{code:"368",name:"FAGGE"},{code:"369",name:"GABASAWA"},{code:"370",name:"GARKO"},{code:"371",name:"GARUN MALLAM"},{code:"372",name:"GAYA"},{code:"373",name:"GEZAWA"},{code:"374",name:"GWALE"},{code:"375",name:"GWARZO"},{code:"376",name:"KABO"},{code:"377",name:"KANO METROPOLITAN AREA"},{code:"378",name:"KANO MUNICIPAL"},{code:"379",name:"KARAYE"},{code:"380",name:"KIBIYA"},{code:"381",name:"KIRU"},{code:"382",name:"KUMBOTSO"},{code:"383",name:"KUNCHI"},{code:"384",name:"KURA"},{code:"385",name:"MADOBI"},{code:"386",name:"MAKODA"},{code:"387",name:"MINJIBIR"},{code:"388",name:"NASSARAWA"},{code:"389",name:"NORTHERN KANO STATE"},{code:"390",name:"RANO"},{code:"391",name:"RIMIN GADO"},{code:"392",name:"ROGO"},{code:"393",name:"SHANONO"},{code:"394",name:"SOUT"},{code:"395",name:"SOUTHERN KANO STATE"},{code:"396",name:"SUMAILA"},{code:"397",name:"TAKAI"},{code:"398",name:"TARAUNI"},{code:"399",name:"TOFA"},{code:"400",name:"TSANYAWA"},{code:"401",name:"TUDUN WADA"},{code:"402",name:"UNGOGO"},{code:"403",name:"WARAWA"},{code:"404",name:"WUDIL"}],KT:[{code:"405",name:"BAKORI"},{code:"406",name:"BATAGARAWA"},{code:"407",name:"BATSARI"},{code:"408",name:"BAURE"},{code:"409",name:"BINDAWA"},{code:"410",name:"CHARANCHI"},{code:"411",name:"DAN MUSA"},{code:"412",name:"DANDUME"},{code:"413",name:"DANJA"},{code:"414",name:"DAURA"},{code:"415",name:"DUTSI"},{code:"416",name:"DUTSIN-MA"},{code:"417",name:"FASKARI"},{code:"418",name:"FUNTUA"},{code:"419",name:"INGAWA"},{code:"420",name:"JIBIA"},{code:"421",name:"KAFUR"},{code:"422",name:"KAITA"},{code:"423",name:"KANKARA"},{code:"424",name:"KANKIA"},{code:"425",name:"KATSINA"},{code:"426",name:"KURFI"},{code:"427",name:"KUSADA"},{code:"428",name:"MAI'ADUA"},{code:"429",name:"MALUMFASHI"},{code:"430",name:"MANI"},{code:"431",name:"MASHI"},{code:"432",name:"MATAZU"},{code:"433",name:"MUSAWA"},{code:"434",name:"RIMI"},{code:"435",name:"SABUWA"},{code:"436",name:"SAFANA"},{code:"437",name:"SANDAMU"},{code:"438",name:"ZANGO"}],KE:[{code:"439",name:"ALEIRO"},{code:"440",name:"AREWA DANDI"},{code:"441",name:"ARGUNGU"},{code:"442",name:"AUGIE"},{code:"443",name:"BAGUDO"},{code:"444",name:"BIRNIN KEBBI"},{code:"445",name:"BUNZA"},{code:"446",name:"DANDI"},{code:"447",name:"FAKAI"},{code:"448",name:"GWANDU"},{code:"449",name:"JEGA"},{code:"450",name:"KALGO"},{code:"451",name:"KOKO/BESSE"},{code:"452",name:"MAIYAMA"},{code:"453",name:"NGASKI"},{code:"454",name:"SAKABA"},{code:"455",name:"SHANGA"},{code:"456",name:"SURU"},{code:"457",name:"WASAGU/DANKO"},{code:"458",name:"YAURI"},{code:"459",name:"ZURU"}],KO:[{code:"460",name:"ADAVI"},{code:"461",name:"AJAOKUTA"},{code:"462",name:"ANKPA"},{code:"463",name:"BASSA"},{code:"464",name:"DEKINA"},{code:"465",name:"IBAJI"},{code:"466",name:"IDAH"},{code:"467",name:"IGALAMELA-ODOLU"},{code:"468",name:"IJUMU"},{code:"469",name:"KABBA/BUNU"},{code:"470",name:"KOTON KARFE"},{code:"471",name:"LOKOJA"},{code:"472",name:"MOPA-MURO"},{code:"473",name:"OFU"},{code:"474",name:"OGORI/MAGONGO"},{code:"475",name:"OKEHI"},{code:"476",name:"OKENE"},{code:"477",name:"OLAMABORO"},{code:"478",name:"OMALA"},{code:"479",name:"YAGBA EAST"},{code:"480",name:"YAGBA WEST"}],KW:[{code:"481",name:"ASA"},{code:"482",name:"BARUTEN"},{code:"483",name:"EDU"},{code:"484",name:"EKITI"},{code:"485",name:"IFELODUN"},{code:"486",name:"ILORIN EAST"},{code:"487",name:"ILORIN SOUTH"},{code:"488",name:"ILORIN WEST"},{code:"489",name:"IREPODUN"},{code:"490",name:"ISIN"},{code:"491",name:"KAIAMA"},{code:"492",name:"MORO"},{code:"493",name:"OFFA"},{code:"494",name:"OKE ERO"},{code:"495",name:"OYUN"},{code:"496",name:"PATEGI"}],LA:[{code:"497",name:"APAPA "},{code:"498",name:"EPE "},{code:"499",name:"IBEJU-LEKKI "},{code:"500",name:"IKORODU "},{code:"501",name:"AGEGE"},{code:"502",name:"AJEROMI-IFELODUN "},{code:"503",name:"ALIMOSHO"},{code:"504",name:"AMUWO-ODOFIN "},{code:"505",name:"BADAGRY "},{code:"506",name:"ETI-OSA "},{code:"507",name:"IFAKO-IJAYE"},{code:"508",name:"IKEJA"},{code:"509",name:"KOSOFE "},{code:"510",name:"LAGOS ISLAND "},{code:"511",name:"LAGOS MAINLAND "},{code:"512",name:"MUSHIN "},{code:"513",name:"OJO "},{code:"514",name:"OSHODI-ISOLO "},{code:"515",name:"SHOMOLU "},{code:"516",name:"SURULERE "}],NW:[{code:"517",name:"AKWANGA"},{code:"518",name:"AWE"},{code:"519",name:"DOMA"},{code:"520",name:"KARU"},{code:"521",name:"KEANA"},{code:"522",name:"KEFFI"},{code:"523",name:"KOKONA"},{code:"524",name:"LAFIA"},{code:"525",name:"NASARAWA"},{code:"526",name:"NASARAWA EGON"},{code:"527",name:"OBI"},{code:"528",name:"TOTO"},{code:"529",name:"WAMBA"}],NI:[{code:"530",name:"AGAIE"},{code:"531",name:"AGWARA"},{code:"532",name:"BIDA"},{code:"533",name:"BORGU"},{code:"534",name:"BOSSO"},{code:"535",name:"CHANCHAGA"},{code:"536",name:"EDATI"},{code:"537",name:"GBAKO"},{code:"538",name:"GURARA"},{code:"539",name:"KATCHA"},{code:"540",name:"KONTAGORA"},{code:"541",name:"LAPAI"},{code:"542",name:"LAVUN"},{code:"543",name:"MAGAMA"},{code:"544",name:"MARIGA"},{code:"545",name:"MASHEGU"},{code:"546",name:"MOKWA"},{code:"547",name:"MUNYA"},{code:"548",name:"PAIKORO"},{code:"549",name:"RAFI"},{code:"550",name:"RIJAU"},{code:"551",name:"SHIRORO"},{code:"552",name:"SULEJA"},{code:"553",name:"TAFA"},{code:"554",name:"WUSHISHI"}],OG:[{code:"555",name:"ABEOKUTA NORTH"},{code:"556",name:"ABEOKUTA SOUTH"},{code:"557",name:"ADO-ODO/OTA"},{code:"558",name:"EWEKORO"},{code:"559",name:"IFO"},{code:"560",name:"IJEBU EAST"},{code:"561",name:"IJEBU NORTH"},{code:"562",name:"IJEBU NORTH EAST"},{code:"563",name:"IJEBU ODE"},{code:"564",name:"IKENNE"},{code:"565",name:"IMEKO AFON"},{code:"566",name:"IPOKIA"},{code:"567",name:"OBAFEMI OWODE"},{code:"568",name:"ODEDA"},{code:"569",name:"ODOGBOLU"},{code:"570",name:"OGUN WATERSIDE"},{code:"571",name:"REMO NORTH"},{code:"572",name:"SAGAMU"},{code:"573",name:"YEWA NORTH"},{code:"574",name:"YEWA SOUTH"}],ON:[{code:"575",name:"AKOKO NORTH-EAST"},{code:"576",name:"AKOKO NORTH-WEST"},{code:"577",name:"AKOKO SOUTH-EAST"},{code:"578",name:"AKOKO SOUTH-WEST"},{code:"579",name:"AKURE NORTH"},{code:"580",name:"AKURE SOUTH"},{code:"581",name:"ESE ODO"},{code:"582",name:"IDANRE"},{code:"583",name:"IFEDORE"},{code:"584",name:"ILAJE"},{code:"585",name:"ILE OLUJI/OKEIGBO"},{code:"586",name:"IRELE"},{code:"587",name:"ODIGBO"},{code:"588",name:"OKITIPUPA"},{code:"589",name:"ONDO EAST"},{code:"590",name:"ONDO WEST"},{code:"591",name:"OSE"},{code:"592",name:"OWO"}],OS:[{code:"593",name:"AIYEDAADE"},{code:"594",name:"AIYEDIRE"},{code:"595",name:"ATAKUNMOSA EAST"},{code:"596",name:"ATAKUNMOSA WEST"},{code:"597",name:"BOLUWADURO"},{code:"598",name:"BORIPE"},{code:"599",name:"EDE NORTH"},{code:"600",name:"EDE SOUTH"},{code:"601",name:"EGBEDORE"},{code:"602",name:"EJIGBO"},{code:"603",name:"IFE CENTRAL"},{code:"604",name:"IFE EAST"},{code:"605",name:"IFE NORTH"},{code:"606",name:"IFE SOUTH"},{code:"607",name:"IFEDAYO"},{code:"608",name:"IFELODUN"},{code:"609",name:"ILA"},{code:"610",name:"ILESA EAST"},{code:"611",name:"ILESA WEST"},{code:"612",name:"IREPODUN"},{code:"613",name:"IREWOLE"},{code:"614",name:"ISOKAN"},{code:"615",name:"IWO"},{code:"616",name:"OBOKUN"},{code:"617",name:"ODO OTIN"},{code:"618",name:"OLA OLUWA"},{code:"619",name:"OLORUNDA"},{code:"620",name:"ORIADE"},{code:"621",name:"OROLU"},{code:"622",name:"OSOGBO"}],OY:[{code:"623",name:"AFIJIO"},{code:"624",name:"AKINYELE"},{code:"625",name:"ATIBA"},{code:"626",name:"ATISBO"},{code:"627",name:"EGBEDA"},{code:"628",name:"IBADAN NORTH"},{code:"629",name:"IBADAN NORTH-EAST"},{code:"630",name:"IBADAN NORTH-WEST"},{code:"631",name:"IBADAN SOUTH-EAST"},{code:"632",name:"IBADAN SOUTH-WEST"},{code:"633",name:"IBARAPA CENTRAL"},{code:"634",name:"IBARAPA EAST"},{code:"635",name:"IBARAPA NORTH"},{code:"636",name:"IDO"},{code:"637",name:"IREPO"},{code:"638",name:"ISEYIN ISEYIN"},{code:"639",name:"ITESIWAJU"},{code:"640",name:"IWAJOWA"},{code:"641",name:"KAJOLA"},{code:"642",name:"LAGELU"},{code:"643",name:"OGBOMOSHO NORTH"},{code:"644",name:"OGBOMOSHO SOUTH"},{code:"645",name:"OGO OLUWA"},{code:"646",name:"OLORUNSOGO"},{code:"647",name:"OLUYOLE"},{code:"648",name:"ONA ARA"},{code:"649",name:"ORELOPE"},{code:"650",name:"ORI IRE"},{code:"651",name:"OYO EAST"},{code:"652",name:"OYO WEST"},{code:"653",name:"SAKI EAST"},{code:"654",name:"SAKI WEST"},{code:"655",name:"SURULERE"}],PL:[{code:"656",name:"BARKIN LADI"},{code:"657",name:"BASSA"},{code:"658",name:"BOKKOS"},{code:"659",name:"JOS EAST"},{code:"660",name:"JOS NORTH"},{code:"661",name:"JOS SOUTH"},{code:"662",name:"KANAM"},{code:"663",name:"KANKE"},{code:"664",name:"LANGTANG NORTH"},{code:"665",name:"LANGTANG SOUTH"},{code:"666",name:"MANGU"},{code:"667",name:"MIKANG"},{code:"668",name:"PANKSHIN"},{code:"669",name:"QUA'AN PAN"},{code:"670",name:"RIYOM"},{code:"671",name:"SHENDAM"},{code:"672",name:"WASE"}],RI:[{code:"673",name:"ABUA/ODUAL"},{code:"674",name:"AHOADA EAST"},{code:"675",name:"AHOADA WEST"},{code:"676",name:"AKUKU-TORU"},{code:"677",name:"ANDONI"},{code:"678",name:"ASARI-TORU"},{code:"679",name:"BONNY"},{code:"680",name:"DEGEMA"},{code:"681",name:"ELEME"},{code:"682",name:"EMOHUA"},{code:"683",name:"ETCHE"},{code:"684",name:"GOKANA"},{code:"685",name:"IKWERRE"},{code:"686",name:"KHANA"},{code:"687",name:"OBIO-AKPOR"},{code:"688",name:"OGBA/EGBEMA/NDONI"},{code:"689",name:"OGU/BOLO"},{code:"690",name:"OKRIKA"},{code:"691",name:"OMUMA"},{code:"692",name:"OPOBO/NKORO"},{code:"693",name:"OYIGBO"},{code:"694",name:"PORT HARCOURT"},{code:"695",name:"TAI"}],SO:[{code:"696",name:"BINJI"},{code:"697",name:"BODINGA"},{code:"698",name:"DANGE SHUNI"},{code:"699",name:"GADA"},{code:"700",name:"GORONYO"},{code:"701",name:"GUDU"},{code:"702",name:"GWADABAWA"},{code:"703",name:"ILLELA"},{code:"704",name:"ISA"},{code:"705",name:"KEBBE"},{code:"706",name:"KWARE"},{code:"707",name:"RABAH"},{code:"708",name:"SABON BIRNI"},{code:"709",name:"SHAGARI"},{code:"710",name:"SILAME"},{code:"711",name:"SOKOTO NORTH"},{code:"712",name:"SOKOTO SOUTH"},{code:"713",name:"TAMBUWAL"},{code:"714",name:"TANGAZA"},{code:"715",name:"TURETA"},{code:"716",name:"WAMAKO"},{code:"717",name:"WURNO"},{code:"718",name:"YABO"}],TA:[{code:"719",name:"ARDO KOLA"},{code:"720",name:"BALI"},{code:"721",name:"DONGA"},{code:"722",name:"GASHAKA"},{code:"723",name:"GASSOL"},{code:"724",name:"IBI"},{code:"725",name:"JALINGO"},{code:"726",name:"KARIM LAMIDO"},{code:"727",name:"KURMI"},{code:"728",name:"LAU"},{code:"729",name:"SARDAUNA"},{code:"730",name:"TAKUM"},{code:"731",name:"USSA"},{code:"732",name:"WUKARI"},{code:"733",name:"YORRO"},{code:"734",name:"ZING"}],YO:[{code:"735",name:"BADE"},{code:"736",name:"BURSARI"},{code:"737",name:"DAMATURU"},{code:"738",name:"FIKA"},{code:"739",name:"FUNE"},{code:"740",name:"GEIDAM"},{code:"741",name:"GUJBA"},{code:"742",name:"GULANI"},{code:"743",name:"JAKUSKO"},{code:"744",name:"KARASUWA"},{code:"745",name:"MACHINA"},{code:"746",name:"NANGERE"},{code:"747",name:"NGURU"},{code:"748",name:"POTISKUM"},{code:"749",name:"TARMUWA"},{code:"750",name:"YUNUSARI"},{code:"751",name:"YUSUFARI"}],ZA:[{code:"752",name:"ANKA"},{code:"753",name:"BAKURA"},{code:"754",name:"BIRNIN MAGAJI/KIYAW"},{code:"755",name:"BUKKUYUM"},{code:"756",name:"BUNGUDU"},{code:"757",name:"GUMMI"},{code:"758",name:"GUSAU"},{code:"759",name:"KAURA NAMODA"},{code:"760",name:"MARADUN"},{code:"761",name:"MARU"},{code:"762",name:"SHINKAFI"},{code:"763",name:"TALATA MAFARA"},{code:"764",name:"TSAFE"},{code:"765",name:"ZURMI"}],FC:[{code:"766",name:"ABAJI"},{code:"771",name:"ABUJA MUNICIPAL"},{code:"767",name:"GWAGWALADA"},{code:"768",name:"KUJE"},{code:"769",name:"BWARI"},{code:"770",name:"KWALI"}]}},areaConfig={NG:{name:"China",regions:{N:{name:"North",provinces:{11:{name:"Beijing",cities:{1:{name:"Beijing",districts:{1:"Dongcheng",2:"Xicheng",3:"Chaoyang",4:"Haidian",5:"Fengtai",6:"Shijingshan",7:"Tongzhou",8:"Shunyi",9:"Changping",10:"Daxing",11:"Mentougou",12:"Fangshan",13:"Pinggu",14:"Huairou",15:"Miyun",16:"Yanqing"}}}},12:{name:"Tianjin",cities:{1:{
name:"Tianjin",districts:{1:"Heping",2:"Hedong",3:"Hexi",4:"Nankai",5:"Hebei",6:"Hongqiao",7:"Binhai",8:"Jinnan",9:"Dongli",10:"Xiqing",11:"Beichen",12:"Baodi",13:"Jinghai",14:"Ninghe",15:"Wuqing",16:"Ji"}}}},13:{name:"Hebei",cities:{1:{name:"Hebei",districts:{1:"",2:"",3:""}}}},14:{name:"Shanxi",cities:{1:{name:"Shanxi",districts:{1:"",2:"",3:""}}}},15:{name:"Nei Mongol (mn)",cities:{1:{name:"Nei Mongol",districts:{1:"",2:"",3:""}}}}}},NE:{name:"North East",provinces:{21:{name:"Liaoning",cities:{1:{name:"Liaoning",districts:{1:"",2:"",3:""}}}},22:{name:"Jilin",cities:{1:{name:"Jilin",districts:{1:"",2:"",3:""}}}},23:{name:"Heilongjiang",cities:{1:{name:"Heilongjiang",districts:{1:"",2:"",3:""}}}}}},E:{name:"East",provinces:{31:{name:"Shanghai",cities:{1:{name:"Shanghai",districts:{1:"",2:"",3:""}}}},32:{name:"Jiangsu",cities:{1:{name:"Jiangsu",districts:{1:"",2:"",3:""}}}},33:{name:"Zhejiang",cities:{1:{name:"Zhejiang",districts:{1:"",2:"",3:""}}}},34:{name:"Anhui",cities:{1:{name:"Anhui",districts:{1:"",2:"",3:""}}}},35:{name:"Fujian",cities:{1:{name:"Fujian",districts:{1:"",2:"",3:""}}}},36:{name:"Jiangxi",cities:{1:{name:"Jiangxi",districts:{1:"",2:"",3:""}}}},37:{name:"Shandong",cities:{1:{name:"Shandong",districts:{1:"",2:"",3:""}}}}}},C:{name:"Central",provinces:{41:{name:"Henan",cities:{1:{name:"Henan",districts:{1:"",2:"",3:""}}}},42:{name:"Hubei",cities:{1:{name:"Hubei",districts:{1:"",2:"",3:""}}}},43:{name:"Hunan",cities:{1:{name:"Hunan",districts:{1:"",2:"",3:""}}}},44:{name:"Guangdong",cities:{1:{name:"Guangdong",districts:{1:"",2:"",3:""}}}},45:{name:"Guangxi",cities:{1:{name:"Guangxi",districts:{1:"",2:"",3:""}}}},46:{name:"Hainan",cities:{1:{name:"Hainan",districts:{1:"",2:"",3:""}}}}}},S:{name:"South",provinces:{50:{name:"Chongqing",cities:{1:{name:"Chongqing",districts:{1:"",2:"",3:""}}}},51:{name:"Sichuan",cities:{1:{name:"Sichuan",districts:{1:"",2:"",3:""}}}},52:{name:"Guizhou",cities:{1:{name:"Guizhou",districts:{1:"",2:"",3:""}}}},53:{name:"Yunnan",cities:{1:{name:"Yunnan",districts:{1:"",2:"",3:""}}}}}},NW:{name:"North West",provinces:{61:{name:"Shaanxi",cities:{1:{name:"Shaanxi",districts:{1:"",2:"",3:""}}}},62:{name:"Gansu",cities:{1:{name:"Gansu",districts:{1:"",2:"",3:""}}}},63:{name:"Qinghai",cities:{1:{name:"Qinghai",districts:{1:"",2:"",3:""}}}},64:{name:"Ningxia",cities:{1:{name:"Ningxia",districts:{1:"",2:"",3:""}}}},65:{name:"Xinjiang",cities:{1:{name:"Xinjiang",districts:{1:"",2:"",3:""}}}}}}}}};define("config.cities",function(){}),function(e){var a,t,o="0.5.0",n="hasOwnProperty",i=/[\.\/]/,r=/\s*,\s*/,s="*",c=function(e,a){return e-a},l={n:{}},d=function(){for(var e=0,a=this.length;a>e;e++)if("undefined"!=typeof this[e])return this[e]},u=function(){for(var e=this.length;--e;)if("undefined"!=typeof this[e])return this[e]},m=Object.prototype.toString,p=String,g=Array.isArray||function(e){return e instanceof Array||"[object Array]"==m.call(e)};eve=function(e,o){var n,i=t,r=Array.prototype.slice.call(arguments,2),s=eve.listeners(e),l=0,m=[],p={},g=[],f=a;g.firstDefined=d,g.lastDefined=u,a=e,t=0;for(var h=0,_=s.length;_>h;h++)"zIndex"in s[h]&&(m.push(s[h].zIndex),s[h].zIndex<0&&(p[s[h].zIndex]=s[h]));for(m.sort(c);m[l]<0;)if(n=p[m[l++]],g.push(n.apply(o,r)),t)return t=i,g;for(h=0;_>h;h++)if(n=s[h],"zIndex"in n)if(n.zIndex==m[l]){if(g.push(n.apply(o,r)),t)break;do if(l++,n=p[m[l]],n&&g.push(n.apply(o,r)),t)break;while(n)}else p[n.zIndex]=n;else if(g.push(n.apply(o,r)),t)break;return t=i,a=f,g},eve._events=l,eve.listeners=function(e){var a,t,o,n,r,c,d,u,m=g(e)?e:e.split(i),p=l,f=[p],h=[];for(n=0,r=m.length;r>n;n++){for(u=[],c=0,d=f.length;d>c;c++)for(p=f[c].n,t=[p[m[n]],p[s]],o=2;o--;)a=t[o],a&&(u.push(a),h=h.concat(a.f||[]));f=u}return h},eve.separator=function(e){e?(e=p(e).replace(/(?=[\.\^\]\[\-])/g,"\\"),e="["+e+"]",i=new RegExp(e)):i=/[\.\/]/},eve.on=function(e,a){if("function"!=typeof a)return function(){};for(var t=g(e)?g(e[0])?e:[e]:p(e).split(r),o=0,n=t.length;n>o;o++)!function(e){for(var t,o=g(e)?e:p(e).split(i),n=l,r=0,s=o.length;s>r;r++)n=n.n,n=n.hasOwnProperty(o[r])&&n[o[r]]||(n[o[r]]={n:{}});for(n.f=n.f||[],r=0,s=n.f.length;s>r;r++)if(n.f[r]==a){t=!0;break}!t&&n.f.push(a)}(t[o]);return function(e){+e==+e&&(a.zIndex=+e)}},eve.f=function(e){var a=[].slice.call(arguments,1);return function(){eve.apply(null,[e,null].concat(a).concat([].slice.call(arguments,0)))}},eve.stop=function(){t=1},eve.nt=function(e){var t=g(a)?a.join("."):a;return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(t):t},eve.nts=function(){return g(a)?a:a.split(i)},eve.off=eve.unbind=function(e,a){if(!e)return void(eve._events=l={n:{}});var t=g(e)?g(e[0])?e:[e]:p(e).split(r);if(t.length>1)for(var o=0,c=t.length;c>o;o++)eve.off(t[o],a);else{t=g(e)?e:p(e).split(i);var d,u,m,o,c,f,h,_=[l];for(o=0,c=t.length;c>o;o++)for(f=0;f<_.length;f+=m.length-2){if(m=[f,1],d=_[f].n,t[o]!=s)d[t[o]]&&m.push(d[t[o]]);else for(u in d)d[n](u)&&m.push(d[u]);_.splice.apply(_,m)}for(o=0,c=_.length;c>o;o++)for(d=_[o];d.n;){if(a){if(d.f){for(f=0,h=d.f.length;h>f;f++)if(d.f[f]==a){d.f.splice(f,1);break}!d.f.length&&delete d.f}for(u in d.n)if(d.n[n](u)&&d.n[u].f){var v=d.n[u].f;for(f=0,h=v.length;h>f;f++)if(v[f]==a){v.splice(f,1);break}!v.length&&delete d.n[u].f}}else{delete d.f;for(u in d.n)d.n[n](u)&&d.n[u].f&&delete d.n[u].f}d=d.n}}},eve.once=function(e,a){var t=function(){return eve.off(e,t),a.apply(this,arguments)};return eve.on(e,t)},eve.version=o,eve.toString=function(){return"You are running Eve "+o},"undefined"!=typeof module&&module.exports?module.exports=eve:"function"==typeof define&&define.amd?define("eve",[],function(){return eve}):e.eve=eve}(this),function(e){e.Jcrop=function(a,t){function o(e){return Math.round(e)+"px"}function n(e){return $.baseClass+"-"+e}function i(){return e.fx.step.hasOwnProperty("backgroundColor")}function r(a){var t=e(a).offset();return[t.left,t.top]}function s(e){return[e.pageX-E[0],e.pageY-E[1]]}function c(a){"object"!=typeof a&&(a={}),$=e.extend($,a),e.each(["onChange","onSelect","onRelease","onDblClick"],function(e,a){"function"!=typeof $[a]&&($[a]=function(){})})}function l(e,a,t){if(E=r(F),ge.setCursor("move"===e?e:e+"-resize"),"move"===e)return ge.activateHandlers(u(a),h,t);var o=ue.getFixed(),n=m(e),i=ue.getCorner(m(n));ue.setPressed(ue.getCorner(n)),ue.setCurrent(i),ge.activateHandlers(d(e,o),h,t)}function d(e,a){return function(t){if($.aspectRatio)switch(e){case"e":t[1]=a.y+1;break;case"w":t[1]=a.y+1;break;case"n":t[0]=a.x+1;break;case"s":t[0]=a.x+1}else switch(e){case"e":t[1]=a.y2;break;case"w":t[1]=a.y2;break;case"n":t[0]=a.x2;break;case"s":t[0]=a.x2}ue.setCurrent(t),pe.update()}}function u(e){var a=e;return fe.watchKeys(),function(e){ue.moveOffset([e[0]-a[0],e[1]-a[1]]),a=e,pe.update()}}function m(e){switch(e){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function p(e){return function(a){return $.disabled?!1:"move"!==e||$.allowMove?(E=r(F),oe=!0,l(e,s(a)),a.stopPropagation(),a.preventDefault(),!1):!1}}function g(e,a,t){var o=e.width(),n=e.height();o>a&&a>0&&(o=a,n=a/e.width()*e.height()),n>t&&t>0&&(n=t,o=t/e.height()*e.width()),ae=e.width()/o,te=e.height()/n,e.width(o).height(n)}function f(e){return{x:e.x*ae,y:e.y*te,x2:e.x2*ae,y2:e.y2*te,w:e.w*ae,h:e.h*te}}function h(e){var a=ue.getFixed();a.w>$.minSelect[0]&&a.h>$.minSelect[1]?(pe.enableHandles(),pe.done()):pe.release(),ge.setCursor($.allowSelect?"crosshair":"default")}function _(e){if($.disabled)return!1;if(!$.allowSelect)return!1;oe=!0,E=r(F),pe.disableHandles(),ge.setCursor("crosshair");var a=s(e);return ue.setPressed(a),pe.update(),ge.activateHandlers(v,h,"touch"===e.type.substring(0,5)),fe.watchKeys(),e.stopPropagation(),e.preventDefault(),!1}function v(e){ue.setCurrent(e),pe.update()}function y(){var a=e("<div></div>").addClass(n("tracker"));return U&&a.css({opacity:0,backgroundColor:"white"}),a}function w(e){W.removeClass().addClass(n("holder")).addClass(e)}function k(e,a){function t(){window.setTimeout(v,u)}var o=e[0]/ae,n=e[1]/te,i=e[2]/ae,r=e[3]/te;if(!ne){var s=ue.flipCoords(o,n,i,r),c=ue.getFixed(),l=[c.x,c.y,c.x2,c.y2],d=l,u=$.animationDelay,m=s[0]-l[0],p=s[1]-l[1],g=s[2]-l[2],f=s[3]-l[3],h=0,_=$.swingSpeed;o=d[0],n=d[1],i=d[2],r=d[3],pe.animMode(!0);var v=function(){return function(){h+=(100-h)/_,d[0]=Math.round(o+h/100*m),d[1]=Math.round(n+h/100*p),d[2]=Math.round(i+h/100*g),d[3]=Math.round(r+h/100*f),h>=99.8&&(h=100),100>h?(S(d),t()):(pe.done(),pe.animMode(!1),"function"==typeof a&&a.call(he))}}();t()}}function b(e){S([e[0]/ae,e[1]/te,e[2]/ae,e[3]/te]),$.onSelect.call(he,f(ue.getFixed())),pe.enableHandles()}function S(e){ue.setPressed([e[0],e[1]]),ue.setCurrent([e[2],e[3]]),pe.update()}function A(){return f(ue.getFixed())}function C(){return ue.getFixed()}function T(e){c(e),P()}function x(){$.disabled=!0,pe.disableHandles(),pe.setCursor("default"),ge.setCursor("default")}function M(){$.disabled=!1,P()}function N(){pe.done(),ge.activateHandlers(null,null)}function O(){W.remove(),G.show(),G.css("visibility","visible"),e(a).removeData("Jcrop")}function D(e,a){pe.release(),x();var t=new Image;t.onload=function(){var o=t.width,n=t.height,i=$.boxWidth,r=$.boxHeight;F.width(o).height(n),F.attr("src",e),j.attr("src",e),g(F,i,r),H=F.width(),V=F.height(),j.width(H).height(V),se.width(H+2*re).height(V+2*re),W.width(H).height(V),me.resize(H,V),M(),"function"==typeof a&&a.call(he)},t.src=e}function I(e,a,t){var o=a||$.bgColor;$.bgFade&&i()&&$.fadeTime&&!t?e.animate({backgroundColor:o},{queue:!1,duration:$.fadeTime}):e.css("backgroundColor",o)}function P(e){$.allowResize?e?pe.enableOnly():pe.enableHandles():pe.disableHandles(),ge.setCursor($.allowSelect?"crosshair":"default"),pe.setCursor($.allowMove?"move":"default"),$.hasOwnProperty("trueSize")&&(ae=$.trueSize[0]/H,te=$.trueSize[1]/V),$.hasOwnProperty("setSelect")&&(b($.setSelect),pe.done(),delete $.setSelect),me.refresh(),$.bgColor!=ce&&(I($.shade?me.getShades():W,$.shade?$.shadeColor||$.bgColor:$.bgColor),ce=$.bgColor),le!=$.bgOpacity&&(le=$.bgOpacity,$.shade?me.refresh():pe.setBgOpacity(le)),Z=$.maxSize[0]||0,Q=$.maxSize[1]||0,X=$.minSize[0]||0,ee=$.minSize[1]||0,$.hasOwnProperty("outerImage")&&(F.attr("src",$.outerImage),delete $.outerImage),pe.refresh()}var E,$=e.extend({},e.Jcrop.defaults),L=navigator.userAgent.toLowerCase(),U=/msie/.test(L),R=/msie [1-6]\./.test(L);"object"!=typeof a&&(a=e(a)[0]),"object"!=typeof t&&(t={}),c(t);var B={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},G=e(a),z=!0;if("IMG"==a.tagName){if(0!=G[0].width&&0!=G[0].height)G.width(G[0].width),G.height(G[0].height);else{var K=new Image;K.src=G[0].src,G.width(K.width),G.height(K.height)}var F=G.clone().removeAttr("id").css(B).show();F.width(G.width()),F.height(G.height()),G.after(F).hide()}else F=G.css(B).show(),z=!1,null===$.shade&&($.shade=!0);g(F,$.boxWidth,$.boxHeight);var H=F.width(),V=F.height(),W=e("<div />").width(H).height(V).addClass(n("holder")).css({position:"relative",backgroundColor:$.bgColor}).insertAfter(G).append(F);$.addClass&&W.addClass($.addClass);var j=e("<div />"),q=e("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),Y=e("<div />").width("100%").height("100%").css("zIndex",320),J=e("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var e=ue.getFixed();$.onDblClick.call(he,e)}).insertBefore(F).append(q,Y);z&&(j=e("<img />").attr("src",F.attr("src")).css(B).width(H).height(V),q.append(j)),R&&J.css({overflowY:"hidden"});var Z,Q,X,ee,ae,te,oe,ne,ie,re=$.boundary,se=y().width(H+2*re).height(V+2*re).css({position:"absolute",top:o(-re),left:o(-re),zIndex:290}).mousedown(_),ce=$.bgColor,le=$.bgOpacity;E=r(F);var de=function(){function e(){var e,a={},t=["touchstart","touchmove","touchend"],o=document.createElement("div");try{for(e=0;e<t.length;e++){var n=t[e];n="on"+n;var i=n in o;i||(o.setAttribute(n,"return;"),i="function"==typeof o[n]),a[t[e]]=i}return a.touchstart&&a.touchend&&a.touchmove}catch(r){return!1}}function a(){return $.touchSupport===!0||$.touchSupport===!1?$.touchSupport:e()}return{createDragger:function(e){return function(a){return $.disabled?!1:"move"!==e||$.allowMove?(E=r(F),oe=!0,l(e,s(de.cfilter(a)),!0),a.stopPropagation(),a.preventDefault(),!1):!1}},newSelection:function(e){return _(de.cfilter(e))},cfilter:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e},isSupported:e,support:a()}}(),ue=function(){function e(e){e=r(e),g=m=e[0],f=p=e[1]}function a(e){e=r(e),d=e[0]-g,u=e[1]-f,g=e[0],f=e[1]}function t(){return[d,u]}function o(e){var a=e[0],t=e[1];0>m+a&&(a-=a+m),0>p+t&&(t-=t+p),f+t>V&&(t+=V-(f+t)),g+a>H&&(a+=H-(g+a)),m+=a,g+=a,p+=t,f+=t}function n(e){var a=i();switch(e){case"ne":return[a.x2,a.y];case"nw":return[a.x,a.y];case"se":return[a.x2,a.y2];case"sw":return[a.x,a.y2]}}function i(){if(!$.aspectRatio)return c();var e,a,t,o,n=$.aspectRatio,i=$.minSize[0]/ae,r=$.maxSize[0]/ae,d=$.maxSize[1]/te,u=g-m,h=f-p,_=Math.abs(u),v=Math.abs(h),y=_/v;return 0===r&&(r=10*H),0===d&&(d=10*V),n>y?(a=f,t=v*n,e=0>u?m-t:t+m,0>e?(e=0,o=Math.abs((e-m)/n),a=0>h?p-o:o+p):e>H&&(e=H,o=Math.abs((e-m)/n),a=0>h?p-o:o+p)):(e=g,o=_/n,a=0>h?p-o:p+o,0>a?(a=0,t=Math.abs((a-p)*n),e=0>u?m-t:t+m):a>V&&(a=V,t=Math.abs(a-p)*n,e=0>u?m-t:t+m)),e>m?(i>e-m?e=m+i:e-m>r&&(e=m+r),a=a>p?p+(e-m)/n:p-(e-m)/n):m>e&&(i>m-e?e=m-i:m-e>r&&(e=m-r),a=a>p?p+(m-e)/n:p-(m-e)/n),0>e?(m-=e,e=0):e>H&&(m-=e-H,e=H),0>a?(p-=a,a=0):a>V&&(p-=a-V,a=V),l(s(m,p,e,a))}function r(e){return e[0]<0&&(e[0]=0),e[1]<0&&(e[1]=0),e[0]>H&&(e[0]=H),e[1]>V&&(e[1]=V),[Math.round(e[0]),Math.round(e[1])]}function s(e,a,t,o){var n=e,i=t,r=a,s=o;return e>t&&(n=t,i=e),a>o&&(r=o,s=a),[n,r,i,s]}function c(){var e,a=g-m,t=f-p;return Z&&Math.abs(a)>Z&&(g=a>0?m+Z:m-Z),Q&&Math.abs(t)>Q&&(f=t>0?p+Q:p-Q),ee/te&&Math.abs(t)<ee/te&&(f=t>0?p+ee/te:p-ee/te),X/ae&&Math.abs(a)<X/ae&&(g=a>0?m+X/ae:m-X/ae),0>m&&(g-=m,m-=m),0>p&&(f-=p,p-=p),0>g&&(m-=g,g-=g),0>f&&(p-=f,f-=f),g>H&&(e=g-H,m-=e,g-=e),f>V&&(e=f-V,p-=e,f-=e),m>H&&(e=m-V,f-=e,p-=e),p>V&&(e=p-V,f-=e,p-=e),l(s(m,p,g,f))}function l(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}var d,u,m=0,p=0,g=0,f=0;return{flipCoords:s,setPressed:e,setCurrent:a,getOffset:t,moveOffset:o,getCorner:n,getFixed:i}}(),me=function(){function a(e,a){g.left.css({height:o(a)}),g.right.css({height:o(a)})}function t(){return n(ue.getFixed())}function n(e){g.top.css({left:o(e.x),width:o(e.w),height:o(e.y)}),g.bottom.css({top:o(e.y2),left:o(e.x),width:o(e.w),height:o(V-e.y2)}),g.right.css({left:o(e.x2),width:o(H-e.x2)}),g.left.css({width:o(e.x)})}function i(){return e("<div />").css({position:"absolute",backgroundColor:$.shadeColor||$.bgColor}).appendTo(p)}function r(){m||(m=!0,p.insertBefore(F),t(),pe.setBgOpacity(1,0,1),j.hide(),s($.shadeColor||$.bgColor,1),pe.isAwake()?l($.bgOpacity,1):l(1,1))}function s(e,a){I(u(),e,a)}function c(){m&&(p.remove(),j.show(),m=!1,pe.isAwake()?pe.setBgOpacity($.bgOpacity,1,1):(pe.setBgOpacity(1,1,1),pe.disableHandles()),I(W,0,1))}function l(e,a){m&&($.bgFade&&!a?p.animate({opacity:1-e},{queue:!1,duration:$.fadeTime}):p.css({opacity:1-e}))}function d(){$.shade?r():c(),pe.isAwake()&&l($.bgOpacity)}function u(){return p.children()}var m=!1,p=e("<div />").css({position:"absolute",zIndex:240,opacity:0}),g={top:i(),left:i().height(V),right:i().height(V),bottom:i()};return{update:t,updateRaw:n,getShades:u,setBgColor:s,enable:r,disable:c,resize:a,refresh:d,opacity:l}}(),pe=function(){function a(a){var t=e("<div />").css({position:"absolute",opacity:$.borderOpacity}).addClass(n(a));return q.append(t),t}function t(a,t){var o=e("<div />").mousedown(p(a)).css({cursor:a+"-resize",position:"absolute",zIndex:t}).addClass("ord-"+a);return de.support&&o.bind("touchstart.jcrop",de.createDragger(a)),Y.append(o),o}function i(e){var a=$.handleSize,o=t(e,x++).css({opacity:$.handleOpacity}).addClass(n("handle"));return a&&o.width(a).height(a),o}function r(e){return t(e,x++).addClass("jcrop-dragbar")}function s(e){var a;for(a=0;a<e.length;a++)O[e[a]]=r(e[a])}function c(e){var t,o;for(o=0;o<e.length;o++){switch(e[o]){case"n":t="hline";break;case"s":t="hline bottom";break;case"e":t="vline right";break;case"w":t="vline"}M[e[o]]=a(t)}}function l(e){var a;for(a=0;a<e.length;a++)N[e[a]]=i(e[a])}function d(e,a){$.shade||j.css({top:o(-a),left:o(-e)}),J.css({top:o(a),left:o(e)})}function u(e,a){J.width(Math.round(e)).height(Math.round(a))}function m(){var e=ue.getFixed();ue.setPressed([e.x,e.y]),ue.setCurrent([e.x2,e.y2]),g()}function g(e){return T?h(e):void 0}function h(e){var a=ue.getFixed();u(a.w,a.h),d(a.x,a.y),$.shade&&me.updateRaw(a),T||v(),e?$.onSelect.call(he,f(a)):$.onChange.call(he,f(a))}function _(e,a,t){(T||a)&&($.bgFade&&!t?F.animate({opacity:e},{queue:!1,duration:$.fadeTime}):F.css("opacity",e))}function v(){J.show(),$.shade?me.opacity(le):_(le,!0),T=!0}function w(){S(),J.hide(),$.shade?me.opacity(1):_(1),T=!1,$.onRelease.call(he)}function k(){D&&Y.show()}function b(){return D=!0,$.allowResize?(Y.show(),!0):void 0}function S(){D=!1,Y.hide()}function A(e){e?(ne=!0,S()):(ne=!1,b())}function C(){A(!1),m()}var T,x=370,M={},N={},O={},D=!1;$.dragEdges&&e.isArray($.createDragbars)&&s($.createDragbars),e.isArray($.createHandles)&&l($.createHandles),$.drawBorders&&e.isArray($.createBorders)&&c($.createBorders),e(document).bind("touchstart.jcrop-ios",function(a){e(a.currentTarget).hasClass("jcrop-tracker")&&a.stopPropagation()});var I=y().mousedown(p("move")).css({cursor:"move",position:"absolute",zIndex:360});return de.support&&I.bind("touchstart.jcrop",de.createDragger("move")),q.append(I),S(),{updateVisible:g,update:h,release:w,refresh:m,isAwake:function(){return T},setCursor:function(e){I.css("cursor",e)},enableHandles:b,enableOnly:function(){D=!0},showHandles:k,disableHandles:S,animMode:A,setBgOpacity:_,done:C}}(),ge=function(){function a(a){se.css({zIndex:450}),a?e(document).bind("touchmove.jcrop",r).bind("touchend.jcrop",c):m&&e(document).bind("mousemove.jcrop",o).bind("mouseup.jcrop",n)}function t(){se.css({zIndex:290}),e(document).unbind(".jcrop")}function o(e){return d(s(e)),!1}function n(e){return e.preventDefault(),e.stopPropagation(),oe&&(oe=!1,u(s(e)),pe.isAwake()&&$.onSelect.call(he,f(ue.getFixed())),t(),d=function(){},u=function(){}),!1}function i(e,t,o){return oe=!0,d=e,u=t,a(o),!1}function r(e){return d(s(de.cfilter(e))),!1}function c(e){return n(de.cfilter(e))}function l(e){se.css("cursor",e)}var d=function(){},u=function(){},m=$.trackDocument;return m||se.mousemove(o).mouseup(n).mouseout(n),F.before(se),{activateHandlers:i,setCursor:l}}(),fe=function(){function a(){$.keySupport&&(i.show(),i.focus())}function t(e){i.hide()}function o(e,a,t){$.allowMove&&(ue.moveOffset([a,t]),pe.updateVisible(!0)),e.preventDefault(),e.stopPropagation()}function n(e){if(e.ctrlKey||e.metaKey)return!0;ie=!!e.shiftKey;var a=ie?10:1;switch(e.keyCode){case 37:o(e,-a,0);break;case 39:o(e,a,0);break;case 38:o(e,0,-a);break;case 40:o(e,0,a);break;case 27:$.allowSelect&&pe.release();break;case 9:return!0}return!1}var i=e('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),r=e("<div />").css({position:"absolute",overflow:"hidden"}).append(i);return $.keySupport&&(i.keydown(n).blur(t),R||!$.fixedSupport?(i.css({position:"absolute",left:"-20px"}),r.append(i).insertBefore(F)):i.insertBefore(F)),{watchKeys:a}}();de.support&&se.bind("touchstart.jcrop",de.newSelection),Y.hide(),P(!0);var he={setImage:D,animateTo:k,setSelect:b,setOptions:T,tellSelect:A,tellScaled:C,setClass:w,disable:x,enable:M,cancel:N,release:pe.release,destroy:O,focus:fe.watchKeys,getBounds:function(){return[H*ae,V*te]},getWidgetSize:function(){return[H,V]},getScaleFactor:function(){return[ae,te]},getOptions:function(){return $},ui:{holder:W,selection:J}};return U&&W.bind("selectstart",function(){return!1}),G.data("Jcrop",he),he},e.fn.Jcrop=function(a,t){var o;return this.each(function(){if(e(this).data("Jcrop")){if("api"===a)return e(this).data("Jcrop");e(this).data("Jcrop").setOptions(a)}else"IMG"==this.tagName?e.Jcrop.Loader(this,function(){e(this).css({display:"block",visibility:"hidden"}),o=e.Jcrop(this,a),e.isFunction(t)&&t.call(o)}):(e(this).css({display:"block",visibility:"hidden"}),o=e.Jcrop(this,a),e.isFunction(t)&&t.call(o))}),this},e.Jcrop.Loader=function(a,t,o){function n(){r.complete?(i.unbind(".jcloader"),e.isFunction(t)&&t.call(r)):window.setTimeout(n,50)}var i=e(a),r=i[0];i.bind("load.jcloader",n).bind("error.jcloader",function(a){i.unbind(".jcloader"),e.isFunction(o)&&o.call(r)}),r.complete&&e.isFunction(t)&&(i.unbind(".jcloader"),t.call(r))},e.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery),define("jquery.Jcrop",function(){}),!function(e){var a,t,o="0.4.2",n="hasOwnProperty",i=/[\.\/]/,r="*",s=function(){},c=function(e,a){return e-a},l={n:{}},d=function(e,o){e=String(e);var n,i=t,r=Array.prototype.slice.call(arguments,2),s=d.listeners(e),l=0,u=[],m={},p=[],g=a;a=e,t=0;for(var f=0,h=s.length;h>f;f++)"zIndex"in s[f]&&(u.push(s[f].zIndex),s[f].zIndex<0&&(m[s[f].zIndex]=s[f]));for(u.sort(c);u[l]<0;)if(n=m[u[l++]],p.push(n.apply(o,r)),t)return t=i,p;for(f=0;h>f;f++)if(n=s[f],"zIndex"in n)if(n.zIndex==u[l]){if(p.push(n.apply(o,r)),t)break;do if(l++,n=m[u[l]],n&&p.push(n.apply(o,r)),t)break;while(n)}else m[n.zIndex]=n;else if(p.push(n.apply(o,r)),t)break;return t=i,a=g,p.length?p:null};d._events=l,d.listeners=function(e){var a,t,o,n,s,c,d,u,m=e.split(i),p=l,g=[p],f=[];for(n=0,s=m.length;s>n;n++){for(u=[],c=0,d=g.length;d>c;c++)for(p=g[c].n,t=[p[m[n]],p[r]],o=2;o--;)a=t[o],a&&(u.push(a),f=f.concat(a.f||[]));g=u}return f},d.on=function(e,a){if(e=String(e),"function"!=typeof a)return function(){};for(var t=e.split(i),o=l,n=0,r=t.length;r>n;n++)o=o.n,o=o.hasOwnProperty(t[n])&&o[t[n]]||(o[t[n]]={n:{}});for(o.f=o.f||[],n=0,r=o.f.length;r>n;n++)if(o.f[n]==a)return s;return o.f.push(a),function(e){+e==+e&&(a.zIndex=+e)}},d.f=function(e){var a=[].slice.call(arguments,1);return function(){d.apply(null,[e,null].concat(a).concat([].slice.call(arguments,0)))}},d.stop=function(){t=1},d.nt=function(e){return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(a):a},d.nts=function(){return a.split(i)},d.off=d.unbind=function(e,a){if(!e)return void(d._events=l={n:{}});var t,o,s,c,u,m,p,g=e.split(i),f=[l];for(c=0,u=g.length;u>c;c++)for(m=0;m<f.length;m+=s.length-2){if(s=[m,1],t=f[m].n,g[c]!=r)t[g[c]]&&s.push(t[g[c]]);else for(o in t)t[n](o)&&s.push(t[o]);f.splice.apply(f,s)}for(c=0,u=f.length;u>c;c++)for(t=f[c];t.n;){if(a){if(t.f){for(m=0,p=t.f.length;p>m;m++)if(t.f[m]==a){t.f.splice(m,1);break}!t.f.length&&delete t.f}for(o in t.n)if(t.n[n](o)&&t.n[o].f){var h=t.n[o].f;for(m=0,p=h.length;p>m;m++)if(h[m]==a){h.splice(m,1);break}!h.length&&delete t.n[o].f}}else{delete t.f;for(o in t.n)t.n[n](o)&&t.n[o].f&&delete t.n[o].f}t=t.n}},d.once=function(e,a){var t=function(){return d.unbind(e,t),a.apply(this,arguments)};return d.on(e,t)},d.version=o,d.toString=function(){return"You are running Eve "+o},"undefined"!=typeof module&&module.exports?module.exports=d:"undefined"!=typeof define?define("eve",[],function(){return d}):e.eve=d}(this),function(e,a){"function"==typeof define&&define.amd?define("raphael",["eve"],function(t){return a(e,t)}):a(e,e.eve||"function"==typeof require&&require("eve"))}(this,function(e,a){function t(e){if(t.is(e,"function"))return w?e():a.on("raphael.DOMload",e);if(t.is(e,j))return t._engine.create[N](t,e.splice(0,3+t.is(e[0],V))).add(e);var o=Array.prototype.slice.call(arguments,0);if(t.is(o[o.length-1],"function")){var n=o.pop();return w?n.call(t._engine.create[N](t,o)):a.on("raphael.DOMload",function(){n.call(t._engine.create[N](t,o))})}return t._engine.create[N](t,arguments)}function o(e){if("function"==typeof e||Object(e)!==e)return e;var a=new e.constructor;for(var t in e)e[C](t)&&(a[t]=o(e[t]));return a}function n(e,a){for(var t=0,o=e.length;o>t;t++)if(e[t]===a)return e.push(e.splice(t,1)[0])}function i(e,a,t){function o(){var i=Array.prototype.slice.call(arguments,0),r=i.join("␀"),s=o.cache=o.cache||{},c=o.count=o.count||[];return s[C](r)?(n(c,r),t?t(s[r]):s[r]):(c.length>=1e3&&delete s[c.shift()],c.push(r),s[r]=e[N](a,i),t?t(s[r]):s[r])}return o}function r(){return this.hex}function s(e,a){for(var t=[],o=0,n=e.length;n-2*!a>o;o+=2){var i=[{x:+e[o-2],y:+e[o-1]},{x:+e[o],y:+e[o+1]},{x:+e[o+2],y:+e[o+3]},{x:+e[o+4],y:+e[o+5]}];a?o?n-4==o?i[3]={x:+e[0],y:+e[1]}:n-2==o&&(i[2]={x:+e[0],y:+e[1]},i[3]={x:+e[2],y:+e[3]}):i[0]={x:+e[n-2],y:+e[n-1]}:n-4==o?i[3]=i[2]:o||(i[0]={x:+e[o],y:+e[o+1]}),t.push(["C",(-i[0].x+6*i[1].x+i[2].x)/6,(-i[0].y+6*i[1].y+i[2].y)/6,(i[1].x+6*i[2].x-i[3].x)/6,(i[1].y+6*i[2].y-i[3].y)/6,i[2].x,i[2].y])}return t}function c(e,a,t,o,n){var i=-3*a+9*t-9*o+3*n,r=e*i+6*a-12*t+6*o;return e*r-3*a+3*t}function l(e,a,t,o,n,i,r,s,l){null==l&&(l=1),l=l>1?1:0>l?0:l;for(var d=l/2,u=12,m=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],g=0,f=0;u>f;f++){var h=d*m[f]+d,_=c(h,e,t,n,r),v=c(h,a,o,i,s),y=_*_+v*v;g+=p[f]*B.sqrt(y)}return d*g}function d(e,a,t,o,n,i,r,s,c){if(!(0>c||l(e,a,t,o,n,i,r,s)<c)){var d,u=1,m=u/2,p=u-m,g=.01;for(d=l(e,a,t,o,n,i,r,s,p);K(d-c)>g;)m/=2,p+=(c>d?1:-1)*m,d=l(e,a,t,o,n,i,r,s,p);return p}}function u(e,a,t,o,n,i,r,s){if(!(G(e,t)<z(n,r)||z(e,t)>G(n,r)||G(a,o)<z(i,s)||z(a,o)>G(i,s))){var c=(e*o-a*t)*(n-r)-(e-t)*(n*s-i*r),l=(e*o-a*t)*(i-s)-(a-o)*(n*s-i*r),d=(e-t)*(i-s)-(a-o)*(n-r);if(d){var u=c/d,m=l/d,p=+u.toFixed(2),g=+m.toFixed(2);if(!(p<+z(e,t).toFixed(2)||p>+G(e,t).toFixed(2)||p<+z(n,r).toFixed(2)||p>+G(n,r).toFixed(2)||g<+z(a,o).toFixed(2)||g>+G(a,o).toFixed(2)||g<+z(i,s).toFixed(2)||g>+G(i,s).toFixed(2)))return{x:u,y:m}}}}function m(e,a,o){var n=t.bezierBBox(e),i=t.bezierBBox(a);if(!t.isBBoxIntersect(n,i))return o?0:[];for(var r=l.apply(0,e),s=l.apply(0,a),c=G(~~(r/5),1),d=G(~~(s/5),1),m=[],p=[],g={},f=o?0:[],h=0;c+1>h;h++){var _=t.findDotsAtSegment.apply(t,e.concat(h/c));m.push({x:_.x,y:_.y,t:h/c})}for(h=0;d+1>h;h++)_=t.findDotsAtSegment.apply(t,a.concat(h/d)),p.push({x:_.x,y:_.y,t:h/d});for(h=0;c>h;h++)for(var v=0;d>v;v++){var y=m[h],w=m[h+1],k=p[v],b=p[v+1],S=K(w.x-y.x)<.001?"y":"x",A=K(b.x-k.x)<.001?"y":"x",C=u(y.x,y.y,w.x,w.y,k.x,k.y,b.x,b.y);if(C){if(g[C.x.toFixed(4)]==C.y.toFixed(4))continue;g[C.x.toFixed(4)]=C.y.toFixed(4);var T=y.t+K((C[S]-y[S])/(w[S]-y[S]))*(w.t-y.t),x=k.t+K((C[A]-k[A])/(b[A]-k[A]))*(b.t-k.t);T>=0&&1.001>=T&&x>=0&&1.001>=x&&(o?f++:f.push({x:C.x,y:C.y,t1:z(T,1),t2:z(x,1)}))}}return f}function p(e,a,o){e=t._path2curve(e),a=t._path2curve(a);for(var n,i,r,s,c,l,d,u,p,g,f=o?0:[],h=0,_=e.length;_>h;h++){var v=e[h];if("M"==v[0])n=c=v[1],i=l=v[2];else{"C"==v[0]?(p=[n,i].concat(v.slice(1)),n=p[6],i=p[7]):(p=[n,i,n,i,c,l,c,l],n=c,i=l);for(var y=0,w=a.length;w>y;y++){var k=a[y];if("M"==k[0])r=d=k[1],s=u=k[2];else{"C"==k[0]?(g=[r,s].concat(k.slice(1)),r=g[6],s=g[7]):(g=[r,s,r,s,d,u,d,u],r=d,s=u);var b=m(p,g,o);if(o)f+=b;else{for(var S=0,A=b.length;A>S;S++)b[S].segment1=h,b[S].segment2=y,b[S].bez1=p,b[S].bez2=g;f=f.concat(b)}}}}}return f}function g(e,a,t,o,n,i){null!=e?(this.a=+e,this.b=+a,this.c=+t,this.d=+o,this.e=+n,this.f=+i):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function f(){return this.x+P+this.y+P+this.width+" × "+this.height}function h(e,a,t,o,n,i){function r(e){return((u*e+d)*e+l)*e}function s(e,a){var t=c(e,a);return((g*t+p)*t+m)*t}function c(e,a){var t,o,n,i,s,c;for(n=e,c=0;8>c;c++){if(i=r(n)-e,K(i)<a)return n;if(s=(3*u*n+2*d)*n+l,K(s)<1e-6)break;n-=i/s}if(t=0,o=1,n=e,t>n)return t;if(n>o)return o;for(;o>t;){if(i=r(n),K(i-e)<a)return n;e>i?t=n:o=n,n=(o-t)/2+t}return n}var l=3*a,d=3*(o-a)-l,u=1-l-d,m=3*t,p=3*(n-t)-m,g=1-m-p;return s(e,1/(200*i))}function _(e,a){var t=[],o={};if(this.ms=a,this.times=1,e){for(var n in e)e[C](n)&&(o[X(n)]=e[n],t.push(X(n)));t.sort(ue)}this.anim=o,this.top=t[t.length-1],this.percents=t}function v(e,o,n,i,r,s){n=X(n);var c,l,d,u,m,p,f=e.ms,_={},v={},y={};if(i)for(k=0,S=ra.length;S>k;k++){var w=ra[k];if(w.el.id==o.id&&w.anim==e){w.percent!=n?(ra.splice(k,1),d=1):l=w,o.attr(w.totalOrigin);break}}else i=+v;for(var k=0,S=e.percents.length;S>k;k++){if(e.percents[k]==n||e.percents[k]>i*e.top){n=e.percents[k],m=e.percents[k-1]||0,f=f/e.top*(n-m),u=e.percents[k+1],c=e.anim[n];break}i&&o.attr(e.anim[e.percents[k]])}if(c){if(l)l.initstatus=i,l.start=new Date-l.ms*i;else{for(var A in c)if(c[C](A)&&(oe[C](A)||o.paper.customAttributes[C](A)))switch(_[A]=o.attr(A),null==_[A]&&(_[A]=te[A]),v[A]=c[A],oe[A]){case V:y[A]=(v[A]-_[A])/f;break;case"colour":_[A]=t.getRGB(_[A]);var T=t.getRGB(v[A]);y[A]={r:(T.r-_[A].r)/f,g:(T.g-_[A].g)/f,b:(T.b-_[A].b)/f};break;case"path":var x=$e(_[A],v[A]),M=x[1];for(_[A]=x[0],y[A]=[],k=0,S=_[A].length;S>k;k++){y[A][k]=[0];for(var N=1,D=_[A][k].length;D>N;N++)y[A][k][N]=(M[k][N]-_[A][k][N])/f}break;case"transform":var I=o._,P=Ge(I[A],v[A]);if(P)for(_[A]=P.from,v[A]=P.to,y[A]=[],y[A].real=!0,k=0,S=_[A].length;S>k;k++)for(y[A][k]=[_[A][k][0]],N=1,D=_[A][k].length;D>N;N++)y[A][k][N]=(v[A][k][N]-_[A][k][N])/f;else{var L=o.matrix||new g,U={_:{transform:I.transform},getBBox:function(){return o.getBBox(1)}};_[A]=[L.a,L.b,L.c,L.d,L.e,L.f],Re(U,v[A]),v[A]=U._.transform,y[A]=[(U.matrix.a-L.a)/f,(U.matrix.b-L.b)/f,(U.matrix.c-L.c)/f,(U.matrix.d-L.d)/f,(U.matrix.e-L.e)/f,(U.matrix.f-L.f)/f]}break;case"csv":var R=E(c[A])[$](b),B=E(_[A])[$](b);if("clip-rect"==A)for(_[A]=B,y[A]=[],k=B.length;k--;)y[A][k]=(R[k]-_[A][k])/f;v[A]=R;break;default:for(R=[][O](c[A]),B=[][O](_[A]),y[A]=[],k=o.paper.customAttributes[A].length;k--;)y[A][k]=((R[k]||0)-(B[k]||0))/f}var G=c.easing,z=t.easing_formulas[G];if(!z)if(z=E(G).match(Z),z&&5==z.length){var K=z;z=function(e){return h(e,+K[1],+K[2],+K[3],+K[4],f)}}else z=me;if(p=c.start||e.start||+new Date,w={anim:e,percent:n,timestamp:p,start:p+(e.del||0),status:0,initstatus:i||0,stop:!1,ms:f,easing:z,from:_,diff:y,to:v,el:o,callback:c.callback,prev:m,next:u,repeat:s||e.times,origin:o.attr(),totalOrigin:r},ra.push(w),i&&!l&&!d&&(w.stop=!0,w.start=new Date-f*i,1==ra.length))return ca();d&&(w.start=new Date-w.ms*i),1==ra.length&&sa(ca)}a("raphael.anim.start."+o.id,o,e)}}function y(e){for(var a=0;a<ra.length;a++)ra[a].el.paper==e&&ra.splice(a--,1)}t.version="2.1.2",t.eve=a;var w,k,b=/[, ]+/,S={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},A=/\{(\d+)\}/g,C="hasOwnProperty",T={doc:document,win:e},x={was:Object.prototype[C].call(T.win,"Raphael"),is:T.win.Raphael},M=function(){this.ca=this.customAttributes={}},N="apply",O="concat",D="ontouchstart"in T.win||T.win.DocumentTouch&&T.doc instanceof DocumentTouch,I="",P=" ",E=String,$="split",L="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[$](P),U={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},R=E.prototype.toLowerCase,B=Math,G=B.max,z=B.min,K=B.abs,F=B.pow,H=B.PI,V="number",W="string",j="array",q=Object.prototype.toString,Y=(t._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),J={
NaN:1,Infinity:1,"-Infinity":1},Z=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Q=B.round,X=parseFloat,ee=parseInt,ae=E.prototype.toUpperCase,te=t._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},oe=t._availableAnimAttrs={blur:V,"clip-rect":"csv",cx:V,cy:V,fill:"colour","fill-opacity":V,"font-size":V,height:V,opacity:V,path:"path",r:V,rx:V,ry:V,stroke:"colour","stroke-opacity":V,"stroke-width":V,transform:"transform",width:V,x:V,y:V},ne=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,ie={hs:1,rg:1},re=/,?([achlmqrstvxz]),?/gi,se=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ce=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,le=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,de=(t._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),ue=function(e,a){return X(e)-X(a)},me=function(e){return e},pe=t._rectPath=function(e,a,t,o,n){return n?[["M",e+n,a],["l",t-2*n,0],["a",n,n,0,0,1,n,n],["l",0,o-2*n],["a",n,n,0,0,1,-n,n],["l",2*n-t,0],["a",n,n,0,0,1,-n,-n],["l",0,2*n-o],["a",n,n,0,0,1,n,-n],["z"]]:[["M",e,a],["l",t,0],["l",0,o],["l",-t,0],["z"]]},ge=function(e,a,t,o){return null==o&&(o=t),[["M",e,a],["m",0,-o],["a",t,o,0,1,1,0,2*o],["a",t,o,0,1,1,0,-2*o],["z"]]},fe=t._getPath={path:function(e){return e.attr("path")},circle:function(e){var a=e.attrs;return ge(a.cx,a.cy,a.r)},ellipse:function(e){var a=e.attrs;return ge(a.cx,a.cy,a.rx,a.ry)},rect:function(e){var a=e.attrs;return pe(a.x,a.y,a.width,a.height,a.r)},image:function(e){var a=e.attrs;return pe(a.x,a.y,a.width,a.height)},text:function(e){var a=e._getBBox();return pe(a.x,a.y,a.width,a.height)},set:function(e){var a=e._getBBox();return pe(a.x,a.y,a.width,a.height)}},he=t.mapPath=function(e,a){if(!a)return e;var t,o,n,i,r,s,c;for(e=$e(e),n=0,r=e.length;r>n;n++)for(c=e[n],i=1,s=c.length;s>i;i+=2)t=a.x(c[i],c[i+1]),o=a.y(c[i],c[i+1]),c[i]=t,c[i+1]=o;return e};if(t._g=T,t.type=T.win.SVGAngle||T.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==t.type){var _e,ve=T.doc.createElement("div");if(ve.innerHTML='<v:shape adj="1"/>',_e=ve.firstChild,_e.style.behavior="url(#default#VML)",!_e||"object"!=typeof _e.adj)return t.type=I;ve=null}t.svg=!(t.vml="VML"==t.type),t._Paper=M,t.fn=k=M.prototype=t.prototype,t._id=0,t._oid=0,t.is=function(e,a){return a=R.call(a),"finite"==a?!J[C](+e):"array"==a?e instanceof Array:"null"==a&&null===e||a==typeof e&&null!==e||"object"==a&&e===Object(e)||"array"==a&&Array.isArray&&Array.isArray(e)||q.call(e).slice(8,-1).toLowerCase()==a},t.angle=function(e,a,o,n,i,r){if(null==i){var s=e-o,c=a-n;return s||c?(180+180*B.atan2(-c,-s)/H+360)%360:0}return t.angle(e,a,i,r)-t.angle(o,n,i,r)},t.rad=function(e){return e%360*H/180},t.deg=function(e){return Math.round(180*e/H%360*1e3)/1e3},t.snapTo=function(e,a,o){if(o=t.is(o,"finite")?o:10,t.is(e,j)){for(var n=e.length;n--;)if(K(e[n]-a)<=o)return e[n]}else{e=+e;var i=a%e;if(o>i)return a-i;if(i>e-o)return a-i+e}return a},t.createUUID=function(e,a){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(e,a).toUpperCase()}}(/[xy]/g,function(e){var a=16*B.random()|0,t="x"==e?a:3&a|8;return t.toString(16)}),t.setWindow=function(e){a("raphael.setWindow",t,T.win,e),T.win=e,T.doc=T.win.document,t._engine.initWin&&t._engine.initWin(T.win)};var ye=function(e){if(t.vml){var a,o=/^\s+|\s+$/g;try{var n=new ActiveXObject("htmlfile");n.write("<body>"),n.close(),a=n.body}catch(r){a=createPopup().document.body}var s=a.createTextRange();ye=i(function(e){try{a.style.color=E(e).replace(o,I);var t=s.queryCommandValue("ForeColor");return t=(255&t)<<16|65280&t|(16711680&t)>>>16,"#"+("000000"+t.toString(16)).slice(-6)}catch(n){return"none"}})}else{var c=T.doc.createElement("i");c.title="Raphaël Colour Picker",c.style.display="none",T.doc.body.appendChild(c),ye=i(function(e){return c.style.color=e,T.doc.defaultView.getComputedStyle(c,I).getPropertyValue("color")})}return ye(e)},we=function(){return"hsb("+[this.h,this.s,this.b]+")"},ke=function(){return"hsl("+[this.h,this.s,this.l]+")"},be=function(){return this.hex},Se=function(e,a,o){if(null==a&&t.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(o=e.b,a=e.g,e=e.r),null==a&&t.is(e,W)){var n=t.getRGB(e);e=n.r,a=n.g,o=n.b}return(e>1||a>1||o>1)&&(e/=255,a/=255,o/=255),[e,a,o]},Ae=function(e,a,o,n){e*=255,a*=255,o*=255;var i={r:e,g:a,b:o,hex:t.rgb(e,a,o),toString:be};return t.is(n,"finite")&&(i.opacity=n),i};t.color=function(e){var a;return t.is(e,"object")&&"h"in e&&"s"in e&&"b"in e?(a=t.hsb2rgb(e),e.r=a.r,e.g=a.g,e.b=a.b,e.hex=a.hex):t.is(e,"object")&&"h"in e&&"s"in e&&"l"in e?(a=t.hsl2rgb(e),e.r=a.r,e.g=a.g,e.b=a.b,e.hex=a.hex):(t.is(e,"string")&&(e=t.getRGB(e)),t.is(e,"object")&&"r"in e&&"g"in e&&"b"in e?(a=t.rgb2hsl(e),e.h=a.h,e.s=a.s,e.l=a.l,a=t.rgb2hsb(e),e.v=a.b):(e={hex:"none"},e.r=e.g=e.b=e.h=e.s=e.v=e.l=-1)),e.toString=be,e},t.hsb2rgb=function(e,a,t,o){this.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(t=e.b,a=e.s,o=e.o,e=e.h),e*=360;var n,i,r,s,c;return e=e%360/60,c=t*a,s=c*(1-K(e%2-1)),n=i=r=t-c,e=~~e,n+=[c,s,0,0,s,c][e],i+=[s,c,c,s,0,0][e],r+=[0,0,s,c,c,s][e],Ae(n,i,r,o)},t.hsl2rgb=function(e,a,t,o){this.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(t=e.l,a=e.s,e=e.h),(e>1||a>1||t>1)&&(e/=360,a/=100,t/=100),e*=360;var n,i,r,s,c;return e=e%360/60,c=2*a*(.5>t?t:1-t),s=c*(1-K(e%2-1)),n=i=r=t-c/2,e=~~e,n+=[c,s,0,0,s,c][e],i+=[s,c,c,s,0,0][e],r+=[0,0,s,c,c,s][e],Ae(n,i,r,o)},t.rgb2hsb=function(e,a,t){t=Se(e,a,t),e=t[0],a=t[1],t=t[2];var o,n,i,r;return i=G(e,a,t),r=i-z(e,a,t),o=0==r?null:i==e?(a-t)/r:i==a?(t-e)/r+2:(e-a)/r+4,o=(o+360)%6*60/360,n=0==r?0:r/i,{h:o,s:n,b:i,toString:we}},t.rgb2hsl=function(e,a,t){t=Se(e,a,t),e=t[0],a=t[1],t=t[2];var o,n,i,r,s,c;return r=G(e,a,t),s=z(e,a,t),c=r-s,o=0==c?null:r==e?(a-t)/c:r==a?(t-e)/c+2:(e-a)/c+4,o=(o+360)%6*60/360,i=(r+s)/2,n=0==c?0:.5>i?c/(2*i):c/(2-2*i),{h:o,s:n,l:i,toString:ke}},t._path2string=function(){return this.join(",").replace(re,"$1")},t._preload=function(e,a){var t=T.doc.createElement("img");t.style.cssText="position:absolute;left:-9999em;top:-9999em",t.onload=function(){a.call(this),this.onload=null,T.doc.body.removeChild(this)},t.onerror=function(){T.doc.body.removeChild(this)},T.doc.body.appendChild(t),t.src=e},t.getRGB=i(function(e){if(!e||(e=E(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:r};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none",toString:r};!(ie[C](e.toLowerCase().substring(0,2))||"#"==e.charAt())&&(e=ye(e));var a,o,n,i,s,c,l=e.match(Y);return l?(l[2]&&(n=ee(l[2].substring(5),16),o=ee(l[2].substring(3,5),16),a=ee(l[2].substring(1,3),16)),l[3]&&(n=ee((s=l[3].charAt(3))+s,16),o=ee((s=l[3].charAt(2))+s,16),a=ee((s=l[3].charAt(1))+s,16)),l[4]&&(c=l[4][$](ne),a=X(c[0]),"%"==c[0].slice(-1)&&(a*=2.55),o=X(c[1]),"%"==c[1].slice(-1)&&(o*=2.55),n=X(c[2]),"%"==c[2].slice(-1)&&(n*=2.55),"rgba"==l[1].toLowerCase().slice(0,4)&&(i=X(c[3])),c[3]&&"%"==c[3].slice(-1)&&(i/=100)),l[5]?(c=l[5][$](ne),a=X(c[0]),"%"==c[0].slice(-1)&&(a*=2.55),o=X(c[1]),"%"==c[1].slice(-1)&&(o*=2.55),n=X(c[2]),"%"==c[2].slice(-1)&&(n*=2.55),("deg"==c[0].slice(-3)||"°"==c[0].slice(-1))&&(a/=360),"hsba"==l[1].toLowerCase().slice(0,4)&&(i=X(c[3])),c[3]&&"%"==c[3].slice(-1)&&(i/=100),t.hsb2rgb(a,o,n,i)):l[6]?(c=l[6][$](ne),a=X(c[0]),"%"==c[0].slice(-1)&&(a*=2.55),o=X(c[1]),"%"==c[1].slice(-1)&&(o*=2.55),n=X(c[2]),"%"==c[2].slice(-1)&&(n*=2.55),("deg"==c[0].slice(-3)||"°"==c[0].slice(-1))&&(a/=360),"hsla"==l[1].toLowerCase().slice(0,4)&&(i=X(c[3])),c[3]&&"%"==c[3].slice(-1)&&(i/=100),t.hsl2rgb(a,o,n,i)):(l={r:a,g:o,b:n,toString:r},l.hex="#"+(16777216|n|o<<8|a<<16).toString(16).slice(1),t.is(i,"finite")&&(l.opacity=i),l)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:r}},t),t.hsb=i(function(e,a,o){return t.hsb2rgb(e,a,o).hex}),t.hsl=i(function(e,a,o){return t.hsl2rgb(e,a,o).hex}),t.rgb=i(function(e,a,t){return"#"+(16777216|t|a<<8|e<<16).toString(16).slice(1)}),t.getColor=function(e){var a=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},t=this.hsb2rgb(a.h,a.s,a.b);return a.h+=.075,a.h>1&&(a.h=0,a.s-=.2,a.s<=0&&(this.getColor.start={h:0,s:1,b:a.b})),t.hex},t.getColor.reset=function(){delete this.start},t.parsePathString=function(e){if(!e)return null;var a=Ce(e);if(a.arr)return xe(a.arr);var o={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},n=[];return t.is(e,j)&&t.is(e[0],j)&&(n=xe(e)),n.length||E(e).replace(se,function(e,a,t){var i=[],r=a.toLowerCase();if(t.replace(le,function(e,a){a&&i.push(+a)}),"m"==r&&i.length>2&&(n.push([a][O](i.splice(0,2))),r="l",a="m"==a?"l":"L"),"r"==r)n.push([a][O](i));else for(;i.length>=o[r]&&(n.push([a][O](i.splice(0,o[r]))),o[r]););}),n.toString=t._path2string,a.arr=xe(n),n},t.parseTransformString=i(function(e){if(!e)return null;var a=[];return t.is(e,j)&&t.is(e[0],j)&&(a=xe(e)),a.length||E(e).replace(ce,function(e,t,o){var n=[];R.call(t),o.replace(le,function(e,a){a&&n.push(+a)}),a.push([t][O](n))}),a.toString=t._path2string,a});var Ce=function(e){var a=Ce.ps=Ce.ps||{};return a[e]?a[e].sleep=100:a[e]={sleep:100},setTimeout(function(){for(var t in a)a[C](t)&&t!=e&&(a[t].sleep--,!a[t].sleep&&delete a[t])}),a[e]};t.findDotsAtSegment=function(e,a,t,o,n,i,r,s,c){var l=1-c,d=F(l,3),u=F(l,2),m=c*c,p=m*c,g=d*e+3*u*c*t+3*l*c*c*n+p*r,f=d*a+3*u*c*o+3*l*c*c*i+p*s,h=e+2*c*(t-e)+m*(n-2*t+e),_=a+2*c*(o-a)+m*(i-2*o+a),v=t+2*c*(n-t)+m*(r-2*n+t),y=o+2*c*(i-o)+m*(s-2*i+o),w=l*e+c*t,k=l*a+c*o,b=l*n+c*r,S=l*i+c*s,A=90-180*B.atan2(h-v,_-y)/H;return(h>v||y>_)&&(A+=180),{x:g,y:f,m:{x:h,y:_},n:{x:v,y:y},start:{x:w,y:k},end:{x:b,y:S},alpha:A}},t.bezierBBox=function(e,a,o,n,i,r,s,c){t.is(e,"array")||(e=[e,a,o,n,i,r,s,c]);var l=Ee.apply(null,e);return{x:l.min.x,y:l.min.y,x2:l.max.x,y2:l.max.y,width:l.max.x-l.min.x,height:l.max.y-l.min.y}},t.isPointInsideBBox=function(e,a,t){return a>=e.x&&a<=e.x2&&t>=e.y&&t<=e.y2},t.isBBoxIntersect=function(e,a){var o=t.isPointInsideBBox;return o(a,e.x,e.y)||o(a,e.x2,e.y)||o(a,e.x,e.y2)||o(a,e.x2,e.y2)||o(e,a.x,a.y)||o(e,a.x2,a.y)||o(e,a.x,a.y2)||o(e,a.x2,a.y2)||(e.x<a.x2&&e.x>a.x||a.x<e.x2&&a.x>e.x)&&(e.y<a.y2&&e.y>a.y||a.y<e.y2&&a.y>e.y)},t.pathIntersection=function(e,a){return p(e,a)},t.pathIntersectionNumber=function(e,a){return p(e,a,1)},t.isPointInsidePath=function(e,a,o){var n=t.pathBBox(e);return t.isPointInsideBBox(n,a,o)&&p(e,[["M",a,o],["H",n.x2+10]],1)%2==1},t._removedFactory=function(e){return function(){a("raphael.log",null,"Raphaël: you are calling to method “"+e+"” of removed object",e)}};var Te=t.pathBBox=function(e){var a=Ce(e);if(a.bbox)return o(a.bbox);if(!e)return{x:0,y:0,width:0,height:0,x2:0,y2:0};e=$e(e);for(var t,n=0,i=0,r=[],s=[],c=0,l=e.length;l>c;c++)if(t=e[c],"M"==t[0])n=t[1],i=t[2],r.push(n),s.push(i);else{var d=Ee(n,i,t[1],t[2],t[3],t[4],t[5],t[6]);r=r[O](d.min.x,d.max.x),s=s[O](d.min.y,d.max.y),n=t[5],i=t[6]}var u=z[N](0,r),m=z[N](0,s),p=G[N](0,r),g=G[N](0,s),f=p-u,h=g-m,_={x:u,y:m,x2:p,y2:g,width:f,height:h,cx:u+f/2,cy:m+h/2};return a.bbox=o(_),_},xe=function(e){var a=o(e);return a.toString=t._path2string,a},Me=t._pathToRelative=function(e){var a=Ce(e);if(a.rel)return xe(a.rel);t.is(e,j)&&t.is(e&&e[0],j)||(e=t.parsePathString(e));var o=[],n=0,i=0,r=0,s=0,c=0;"M"==e[0][0]&&(n=e[0][1],i=e[0][2],r=n,s=i,c++,o.push(["M",n,i]));for(var l=c,d=e.length;d>l;l++){var u=o[l]=[],m=e[l];if(m[0]!=R.call(m[0]))switch(u[0]=R.call(m[0]),u[0]){case"a":u[1]=m[1],u[2]=m[2],u[3]=m[3],u[4]=m[4],u[5]=m[5],u[6]=+(m[6]-n).toFixed(3),u[7]=+(m[7]-i).toFixed(3);break;case"v":u[1]=+(m[1]-i).toFixed(3);break;case"m":r=m[1],s=m[2];default:for(var p=1,g=m.length;g>p;p++)u[p]=+(m[p]-(p%2?n:i)).toFixed(3)}else{u=o[l]=[],"m"==m[0]&&(r=m[1]+n,s=m[2]+i);for(var f=0,h=m.length;h>f;f++)o[l][f]=m[f]}var _=o[l].length;switch(o[l][0]){case"z":n=r,i=s;break;case"h":n+=+o[l][_-1];break;case"v":i+=+o[l][_-1];break;default:n+=+o[l][_-2],i+=+o[l][_-1]}}return o.toString=t._path2string,a.rel=xe(o),o},Ne=t._pathToAbsolute=function(e){var a=Ce(e);if(a.abs)return xe(a.abs);if(t.is(e,j)&&t.is(e&&e[0],j)||(e=t.parsePathString(e)),!e||!e.length)return[["M",0,0]];var o=[],n=0,i=0,r=0,c=0,l=0;"M"==e[0][0]&&(n=+e[0][1],i=+e[0][2],r=n,c=i,l++,o[0]=["M",n,i]);for(var d,u,m=3==e.length&&"M"==e[0][0]&&"R"==e[1][0].toUpperCase()&&"Z"==e[2][0].toUpperCase(),p=l,g=e.length;g>p;p++){if(o.push(d=[]),u=e[p],u[0]!=ae.call(u[0]))switch(d[0]=ae.call(u[0]),d[0]){case"A":d[1]=u[1],d[2]=u[2],d[3]=u[3],d[4]=u[4],d[5]=u[5],d[6]=+(u[6]+n),d[7]=+(u[7]+i);break;case"V":d[1]=+u[1]+i;break;case"H":d[1]=+u[1]+n;break;case"R":for(var f=[n,i][O](u.slice(1)),h=2,_=f.length;_>h;h++)f[h]=+f[h]+n,f[++h]=+f[h]+i;o.pop(),o=o[O](s(f,m));break;case"M":r=+u[1]+n,c=+u[2]+i;default:for(h=1,_=u.length;_>h;h++)d[h]=+u[h]+(h%2?n:i)}else if("R"==u[0])f=[n,i][O](u.slice(1)),o.pop(),o=o[O](s(f,m)),d=["R"][O](u.slice(-2));else for(var v=0,y=u.length;y>v;v++)d[v]=u[v];switch(d[0]){case"Z":n=r,i=c;break;case"H":n=d[1];break;case"V":i=d[1];break;case"M":r=d[d.length-2],c=d[d.length-1];default:n=d[d.length-2],i=d[d.length-1]}}return o.toString=t._path2string,a.abs=xe(o),o},Oe=function(e,a,t,o){return[e,a,t,o,t,o]},De=function(e,a,t,o,n,i){var r=1/3,s=2/3;return[r*e+s*t,r*a+s*o,r*n+s*t,r*i+s*o,n,i]},Ie=function(e,a,t,o,n,r,s,c,l,d){var u,m=120*H/180,p=H/180*(+n||0),g=[],f=i(function(e,a,t){var o=e*B.cos(t)-a*B.sin(t),n=e*B.sin(t)+a*B.cos(t);return{x:o,y:n}});if(d)A=d[0],C=d[1],b=d[2],S=d[3];else{u=f(e,a,-p),e=u.x,a=u.y,u=f(c,l,-p),c=u.x,l=u.y;var h=(B.cos(H/180*n),B.sin(H/180*n),(e-c)/2),_=(a-l)/2,v=h*h/(t*t)+_*_/(o*o);v>1&&(v=B.sqrt(v),t=v*t,o=v*o);var y=t*t,w=o*o,k=(r==s?-1:1)*B.sqrt(K((y*w-y*_*_-w*h*h)/(y*_*_+w*h*h))),b=k*t*_/o+(e+c)/2,S=k*-o*h/t+(a+l)/2,A=B.asin(((a-S)/o).toFixed(9)),C=B.asin(((l-S)/o).toFixed(9));A=b>e?H-A:A,C=b>c?H-C:C,0>A&&(A=2*H+A),0>C&&(C=2*H+C),s&&A>C&&(A-=2*H),!s&&C>A&&(C-=2*H)}var T=C-A;if(K(T)>m){var x=C,M=c,N=l;C=A+m*(s&&C>A?1:-1),c=b+t*B.cos(C),l=S+o*B.sin(C),g=Ie(c,l,t,o,n,0,s,M,N,[C,x,b,S])}T=C-A;var D=B.cos(A),I=B.sin(A),P=B.cos(C),E=B.sin(C),L=B.tan(T/4),U=4/3*t*L,R=4/3*o*L,G=[e,a],z=[e+U*I,a-R*D],F=[c+U*E,l-R*P],V=[c,l];if(z[0]=2*G[0]-z[0],z[1]=2*G[1]-z[1],d)return[z,F,V][O](g);g=[z,F,V][O](g).join()[$](",");for(var W=[],j=0,q=g.length;q>j;j++)W[j]=j%2?f(g[j-1],g[j],p).y:f(g[j],g[j+1],p).x;return W},Pe=function(e,a,t,o,n,i,r,s,c){var l=1-c;return{x:F(l,3)*e+3*F(l,2)*c*t+3*l*c*c*n+F(c,3)*r,y:F(l,3)*a+3*F(l,2)*c*o+3*l*c*c*i+F(c,3)*s}},Ee=i(function(e,a,t,o,n,i,r,s){var c,l=n-2*t+e-(r-2*n+t),d=2*(t-e)-2*(n-t),u=e-t,m=(-d+B.sqrt(d*d-4*l*u))/2/l,p=(-d-B.sqrt(d*d-4*l*u))/2/l,g=[a,s],f=[e,r];return K(m)>"1e12"&&(m=.5),K(p)>"1e12"&&(p=.5),m>0&&1>m&&(c=Pe(e,a,t,o,n,i,r,s,m),f.push(c.x),g.push(c.y)),p>0&&1>p&&(c=Pe(e,a,t,o,n,i,r,s,p),f.push(c.x),g.push(c.y)),l=i-2*o+a-(s-2*i+o),d=2*(o-a)-2*(i-o),u=a-o,m=(-d+B.sqrt(d*d-4*l*u))/2/l,p=(-d-B.sqrt(d*d-4*l*u))/2/l,K(m)>"1e12"&&(m=.5),K(p)>"1e12"&&(p=.5),m>0&&1>m&&(c=Pe(e,a,t,o,n,i,r,s,m),f.push(c.x),g.push(c.y)),p>0&&1>p&&(c=Pe(e,a,t,o,n,i,r,s,p),f.push(c.x),g.push(c.y)),{min:{x:z[N](0,f),y:z[N](0,g)},max:{x:G[N](0,f),y:G[N](0,g)}}}),$e=t._path2curve=i(function(e,a){var t=!a&&Ce(e);if(!a&&t.curve)return xe(t.curve);for(var o=Ne(e),n=a&&Ne(a),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=(function(e,a,t){var o,n,i={T:1,Q:1};if(!e)return["C",a.x,a.y,a.x,a.y,a.x,a.y];switch(!(e[0]in i)&&(a.qx=a.qy=null),e[0]){case"M":a.X=e[1],a.Y=e[2];break;case"A":e=["C"][O](Ie[N](0,[a.x,a.y][O](e.slice(1))));break;case"S":"C"==t||"S"==t?(o=2*a.x-a.bx,n=2*a.y-a.by):(o=a.x,n=a.y),e=["C",o,n][O](e.slice(1));break;case"T":"Q"==t||"T"==t?(a.qx=2*a.x-a.qx,a.qy=2*a.y-a.qy):(a.qx=a.x,a.qy=a.y),e=["C"][O](De(a.x,a.y,a.qx,a.qy,e[1],e[2]));break;case"Q":a.qx=e[1],a.qy=e[2],e=["C"][O](De(a.x,a.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"][O](Oe(a.x,a.y,e[1],e[2]));break;case"H":e=["C"][O](Oe(a.x,a.y,e[1],a.y));break;case"V":e=["C"][O](Oe(a.x,a.y,a.x,e[1]));break;case"Z":e=["C"][O](Oe(a.x,a.y,a.X,a.Y))}return e}),c=function(e,a){if(e[a].length>7){e[a].shift();for(var t=e[a];t.length;)d[a]="A",n&&(u[a]="A"),e.splice(a++,0,["C"][O](t.splice(0,6)));e.splice(a,1),f=G(o.length,n&&n.length||0)}},l=function(e,a,t,i,r){e&&a&&"M"==e[r][0]&&"M"!=a[r][0]&&(a.splice(r,0,["M",i.x,i.y]),t.bx=0,t.by=0,t.x=e[r][1],t.y=e[r][2],f=G(o.length,n&&n.length||0))},d=[],u=[],m="",p="",g=0,f=G(o.length,n&&n.length||0);f>g;g++){o[g]&&(m=o[g][0]),"C"!=m&&(d[g]=m,g&&(p=d[g-1])),o[g]=s(o[g],i,p),"A"!=d[g]&&"C"==m&&(d[g]="C"),c(o,g),n&&(n[g]&&(m=n[g][0]),"C"!=m&&(u[g]=m,g&&(p=u[g-1])),n[g]=s(n[g],r,p),"A"!=u[g]&&"C"==m&&(u[g]="C"),c(n,g)),l(o,n,i,r,g),l(n,o,r,i,g);var h=o[g],_=n&&n[g],v=h.length,y=n&&_.length;i.x=h[v-2],i.y=h[v-1],i.bx=X(h[v-4])||i.x,i.by=X(h[v-3])||i.y,r.bx=n&&(X(_[y-4])||r.x),r.by=n&&(X(_[y-3])||r.y),r.x=n&&_[y-2],r.y=n&&_[y-1]}return n||(t.curve=xe(o)),n?[o,n]:o},null,xe),Le=(t._parseDots=i(function(e){for(var a=[],o=0,n=e.length;n>o;o++){var i={},r=e[o].match(/^([^:]*):?([\d\.]*)/);if(i.color=t.getRGB(r[1]),i.color.error)return null;i.color=i.color.hex,r[2]&&(i.offset=r[2]+"%"),a.push(i)}for(o=1,n=a.length-1;n>o;o++)if(!a[o].offset){for(var s=X(a[o-1].offset||0),c=0,l=o+1;n>l;l++)if(a[l].offset){c=a[l].offset;break}c||(c=100,l=n),c=X(c);for(var d=(c-s)/(l-o+1);l>o;o++)s+=d,a[o].offset=s+"%"}return a}),t._tear=function(e,a){e==a.top&&(a.top=e.prev),e==a.bottom&&(a.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)}),Ue=(t._tofront=function(e,a){a.top!==e&&(Le(e,a),e.next=null,e.prev=a.top,a.top.next=e,a.top=e)},t._toback=function(e,a){a.bottom!==e&&(Le(e,a),e.next=a.bottom,e.prev=null,a.bottom.prev=e,a.bottom=e)},t._insertafter=function(e,a,t){Le(e,t),a==t.top&&(t.top=e),a.next&&(a.next.prev=e),e.next=a.next,e.prev=a,a.next=e},t._insertbefore=function(e,a,t){Le(e,t),a==t.bottom&&(t.bottom=e),a.prev&&(a.prev.next=e),e.prev=a.prev,a.prev=e,e.next=a},t.toMatrix=function(e,a){var t=Te(e),o={_:{transform:I},getBBox:function(){return t}};return Re(o,a),o.matrix}),Re=(t.transformPath=function(e,a){return he(e,Ue(e,a))},t._extractTransform=function(e,a){if(null==a)return e._.transform;a=E(a).replace(/\.{3}|\u2026/g,e._.transform||I);var o=t.parseTransformString(a),n=0,i=0,r=0,s=1,c=1,l=e._,d=new g;if(l.transform=o||[],o)for(var u=0,m=o.length;m>u;u++){var p,f,h,_,v,y=o[u],w=y.length,k=E(y[0]).toLowerCase(),b=y[0]!=k,S=b?d.invert():0;"t"==k&&3==w?b?(p=S.x(0,0),f=S.y(0,0),h=S.x(y[1],y[2]),_=S.y(y[1],y[2]),d.translate(h-p,_-f)):d.translate(y[1],y[2]):"r"==k?2==w?(v=v||e.getBBox(1),d.rotate(y[1],v.x+v.width/2,v.y+v.height/2),n+=y[1]):4==w&&(b?(h=S.x(y[2],y[3]),_=S.y(y[2],y[3]),d.rotate(y[1],h,_)):d.rotate(y[1],y[2],y[3]),n+=y[1]):"s"==k?2==w||3==w?(v=v||e.getBBox(1),d.scale(y[1],y[w-1],v.x+v.width/2,v.y+v.height/2),s*=y[1],c*=y[w-1]):5==w&&(b?(h=S.x(y[3],y[4]),_=S.y(y[3],y[4]),d.scale(y[1],y[2],h,_)):d.scale(y[1],y[2],y[3],y[4]),s*=y[1],c*=y[2]):"m"==k&&7==w&&d.add(y[1],y[2],y[3],y[4],y[5],y[6]),l.dirtyT=1,e.matrix=d}e.matrix=d,l.sx=s,l.sy=c,l.deg=n,l.dx=i=d.e,l.dy=r=d.f,1==s&&1==c&&!n&&l.bbox?(l.bbox.x+=+i,l.bbox.y+=+r):l.dirtyT=1}),Be=function(e){var a=e[0];switch(a.toLowerCase()){case"t":return[a,0,0];case"m":return[a,1,0,0,1,0,0];case"r":return 4==e.length?[a,0,e[2],e[3]]:[a,0];case"s":return 5==e.length?[a,1,1,e[3],e[4]]:3==e.length?[a,1,1]:[a,1]}},Ge=t._equaliseTransform=function(e,a){a=E(a).replace(/\.{3}|\u2026/g,e),e=t.parseTransformString(e)||[],a=t.parseTransformString(a)||[];for(var o,n,i,r,s=G(e.length,a.length),c=[],l=[],d=0;s>d;d++){if(i=e[d]||Be(a[d]),r=a[d]||Be(i),i[0]!=r[0]||"r"==i[0].toLowerCase()&&(i[2]!=r[2]||i[3]!=r[3])||"s"==i[0].toLowerCase()&&(i[3]!=r[3]||i[4]!=r[4]))return;for(c[d]=[],l[d]=[],o=0,n=G(i.length,r.length);n>o;o++)o in i&&(c[d][o]=i[o]),o in r&&(l[d][o]=r[o])}return{from:c,to:l}};t._getContainer=function(e,a,o,n){var i;return i=null!=n||t.is(e,"object")?e:T.doc.getElementById(e),null!=i?i.tagName?null==a?{container:i,width:i.style.pixelWidth||i.offsetWidth,height:i.style.pixelHeight||i.offsetHeight}:{container:i,width:a,height:o}:{container:1,x:e,y:a,width:o,height:n}:void 0},t.pathToRelative=Me,t._engine={},t.path2curve=$e,t.matrix=function(e,a,t,o,n,i){return new g(e,a,t,o,n,i)},function(e){function a(e){return e[0]*e[0]+e[1]*e[1]}function o(e){var t=B.sqrt(a(e));e[0]&&(e[0]/=t),e[1]&&(e[1]/=t)}e.add=function(e,a,t,o,n,i){var r,s,c,l,d=[[],[],[]],u=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],m=[[e,t,n],[a,o,i],[0,0,1]];for(e&&e instanceof g&&(m=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]),r=0;3>r;r++)for(s=0;3>s;s++){for(l=0,c=0;3>c;c++)l+=u[r][c]*m[c][s];d[r][s]=l}this.a=d[0][0],this.b=d[1][0],this.c=d[0][1],this.d=d[1][1],this.e=d[0][2],this.f=d[1][2]},e.invert=function(){var e=this,a=e.a*e.d-e.b*e.c;return new g(e.d/a,-e.b/a,-e.c/a,e.a/a,(e.c*e.f-e.d*e.e)/a,(e.b*e.e-e.a*e.f)/a)},e.clone=function(){return new g(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(e,a){this.add(1,0,0,1,e,a)},e.scale=function(e,a,t,o){null==a&&(a=e),(t||o)&&this.add(1,0,0,1,t,o),this.add(e,0,0,a,0,0),(t||o)&&this.add(1,0,0,1,-t,-o)},e.rotate=function(e,a,o){e=t.rad(e),a=a||0,o=o||0;var n=+B.cos(e).toFixed(9),i=+B.sin(e).toFixed(9);this.add(n,i,-i,n,a,o),this.add(1,0,0,1,-a,-o)},e.x=function(e,a){return e*this.a+a*this.c+this.e},e.y=function(e,a){return e*this.b+a*this.d+this.f},e.get=function(e){return+this[E.fromCharCode(97+e)].toFixed(4)},e.toString=function(){return t.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},e.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var e={};e.dx=this.e,e.dy=this.f;var n=[[this.a,this.c],[this.b,this.d]];e.scalex=B.sqrt(a(n[0])),o(n[0]),e.shear=n[0][0]*n[1][0]+n[0][1]*n[1][1],n[1]=[n[1][0]-n[0][0]*e.shear,n[1][1]-n[0][1]*e.shear],e.scaley=B.sqrt(a(n[1])),o(n[1]),e.shear/=e.scaley;var i=-n[0][1],r=n[1][1];return 0>r?(e.rotate=t.deg(B.acos(r)),0>i&&(e.rotate=360-e.rotate)):e.rotate=t.deg(B.asin(i)),e.isSimple=!(+e.shear.toFixed(9)||e.scalex.toFixed(9)!=e.scaley.toFixed(9)&&e.rotate),e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate,e},e.toTransformString=function(e){var a=e||this[$]();return a.isSimple?(a.scalex=+a.scalex.toFixed(4),a.scaley=+a.scaley.toFixed(4),a.rotate=+a.rotate.toFixed(4),(a.dx||a.dy?"t"+[a.dx,a.dy]:I)+(1!=a.scalex||1!=a.scaley?"s"+[a.scalex,a.scaley,0,0]:I)+(a.rotate?"r"+[a.rotate,0,0]:I)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(g.prototype);for(var ze=function(){this.returnValue=!1},Ke=function(){return this.originalEvent.preventDefault()},Fe=function(){this.cancelBubble=!0},He=function(){return this.originalEvent.stopPropagation()},Ve=function(e){var a=T.doc.documentElement.scrollTop||T.doc.body.scrollTop,t=T.doc.documentElement.scrollLeft||T.doc.body.scrollLeft;return{x:e.clientX+t,y:e.clientY+a}},We=function(){return T.doc.addEventListener?function(e,a,t,o){var n=function(e){var a=Ve(e);return t.call(o,e,a.x,a.y)};if(e.addEventListener(a,n,!1),D&&U[a]){var i=function(a){for(var n=Ve(a),i=a,r=0,s=a.targetTouches&&a.targetTouches.length;s>r;r++)if(a.targetTouches[r].target==e){a=a.targetTouches[r],a.originalEvent=i,a.preventDefault=Ke,a.stopPropagation=He;break}return t.call(o,a,n.x,n.y)};e.addEventListener(U[a],i,!1)}return function(){return e.removeEventListener(a,n,!1),D&&U[a]&&e.removeEventListener(U[a],i,!1),!0}}:T.doc.attachEvent?function(e,a,t,o){var n=function(e){e=e||T.win.event;var a=T.doc.documentElement.scrollTop||T.doc.body.scrollTop,n=T.doc.documentElement.scrollLeft||T.doc.body.scrollLeft,i=e.clientX+n,r=e.clientY+a;return e.preventDefault=e.preventDefault||ze,e.stopPropagation=e.stopPropagation||Fe,t.call(o,e,i,r)};e.attachEvent("on"+a,n);var i=function(){return e.detachEvent("on"+a,n),!0};return i}:void 0}(),je=[],qe=function(e){for(var t,o=e.clientX,n=e.clientY,i=T.doc.documentElement.scrollTop||T.doc.body.scrollTop,r=T.doc.documentElement.scrollLeft||T.doc.body.scrollLeft,s=je.length;s--;){if(t=je[s],D&&e.touches){for(var c,l=e.touches.length;l--;)if(c=e.touches[l],c.identifier==t.el._drag.id){o=c.clientX,n=c.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var d,u=t.el.node,m=u.nextSibling,p=u.parentNode,g=u.style.display;T.win.opera&&p.removeChild(u),u.style.display="none",d=t.el.paper.getElementByPoint(o,n),u.style.display=g,T.win.opera&&(m?p.insertBefore(u,m):p.appendChild(u)),d&&a("raphael.drag.over."+t.el.id,t.el,d),o+=r,n+=i,a("raphael.drag.move."+t.el.id,t.move_scope||t.el,o-t.el._drag.x,n-t.el._drag.y,o,n,e)}},Ye=function(e){t.unmousemove(qe).unmouseup(Ye);for(var o,n=je.length;n--;)o=je[n],o.el._drag={},a("raphael.drag.end."+o.el.id,o.end_scope||o.start_scope||o.move_scope||o.el,e);je=[]},Je=t.el={},Ze=L.length;Ze--;)!function(e){t[e]=Je[e]=function(a,o){return t.is(a,"function")&&(this.events=this.events||[],this.events.push({name:e,f:a,unbind:We(this.shape||this.node||T.doc,e,a,o||this)})),this},t["un"+e]=Je["un"+e]=function(a){for(var o=this.events||[],n=o.length;n--;)o[n].name!=e||!t.is(a,"undefined")&&o[n].f!=a||(o[n].unbind(),o.splice(n,1),!o.length&&delete this.events);return this}}(L[Ze]);Je.data=function(e,o){var n=de[this.id]=de[this.id]||{};if(0==arguments.length)return n;if(1==arguments.length){if(t.is(e,"object")){for(var i in e)e[C](i)&&this.data(i,e[i]);return this}return a("raphael.data.get."+this.id,this,n[e],e),n[e]}return n[e]=o,a("raphael.data.set."+this.id,this,o,e),this},Je.removeData=function(e){return null==e?de[this.id]={}:de[this.id]&&delete de[this.id][e],this},Je.getData=function(){return o(de[this.id]||{})},Je.hover=function(e,a,t,o){return this.mouseover(e,t).mouseout(a,o||t)},Je.unhover=function(e,a){return this.unmouseover(e).unmouseout(a)};var Qe=[];Je.drag=function(e,o,n,i,r,s){function c(c){(c.originalEvent||c).preventDefault();var l=c.clientX,d=c.clientY,u=T.doc.documentElement.scrollTop||T.doc.body.scrollTop,m=T.doc.documentElement.scrollLeft||T.doc.body.scrollLeft;if(this._drag.id=c.identifier,D&&c.touches)for(var p,g=c.touches.length;g--;)if(p=c.touches[g],this._drag.id=p.identifier,p.identifier==this._drag.id){l=p.clientX,d=p.clientY;break}this._drag.x=l+m,this._drag.y=d+u,!je.length&&t.mousemove(qe).mouseup(Ye),je.push({el:this,move_scope:i,start_scope:r,end_scope:s}),o&&a.on("raphael.drag.start."+this.id,o),e&&a.on("raphael.drag.move."+this.id,e),n&&a.on("raphael.drag.end."+this.id,n),a("raphael.drag.start."+this.id,r||i||this,c.clientX+m,c.clientY+u,c)}return this._drag={},Qe.push({el:this,start:c}),this.mousedown(c),this},Je.onDragOver=function(e){e?a.on("raphael.drag.over."+this.id,e):a.unbind("raphael.drag.over."+this.id)},Je.undrag=function(){for(var e=Qe.length;e--;)Qe[e].el==this&&(this.unmousedown(Qe[e].start),Qe.splice(e,1),a.unbind("raphael.drag.*."+this.id));!Qe.length&&t.unmousemove(qe).unmouseup(Ye),je=[]},k.circle=function(e,a,o){var n=t._engine.circle(this,e||0,a||0,o||0);return this.__set__&&this.__set__.push(n),n},k.rect=function(e,a,o,n,i){var r=t._engine.rect(this,e||0,a||0,o||0,n||0,i||0);return this.__set__&&this.__set__.push(r),r},k.ellipse=function(e,a,o,n){var i=t._engine.ellipse(this,e||0,a||0,o||0,n||0);return this.__set__&&this.__set__.push(i),i},k.path=function(e){e&&!t.is(e,W)&&!t.is(e[0],j)&&(e+=I);var a=t._engine.path(t.format[N](t,arguments),this);return this.__set__&&this.__set__.push(a),a},k.image=function(e,a,o,n,i){var r=t._engine.image(this,e||"about:blank",a||0,o||0,n||0,i||0);return this.__set__&&this.__set__.push(r),r},k.text=function(e,a,o){var n=t._engine.text(this,e||0,a||0,E(o));return this.__set__&&this.__set__.push(n),n},k.set=function(e){!t.is(e,"array")&&(e=Array.prototype.splice.call(arguments,0,arguments.length));var a=new da(e);return this.__set__&&this.__set__.push(a),a.paper=this,a.type="set",a},k.setStart=function(e){this.__set__=e||this.set()},k.setFinish=function(e){var a=this.__set__;return delete this.__set__,a},k.getSize=function(){var e=this.canvas.parentNode;return{width:e.offsetWidth,height:e.offsetHeight}},k.setSize=function(e,a){return t._engine.setSize.call(this,e,a)},k.setViewBox=function(e,a,o,n,i){return t._engine.setViewBox.call(this,e,a,o,n,i)},k.top=k.bottom=null,k.raphael=t;var Xe=function(e){var a=e.getBoundingClientRect(),t=e.ownerDocument,o=t.body,n=t.documentElement,i=n.clientTop||o.clientTop||0,r=n.clientLeft||o.clientLeft||0,s=a.top+(T.win.pageYOffset||n.scrollTop||o.scrollTop)-i,c=a.left+(T.win.pageXOffset||n.scrollLeft||o.scrollLeft)-r;return{y:s,x:c}};k.getElementByPoint=function(e,a){var t=this,o=t.canvas,n=T.doc.elementFromPoint(e,a);if(T.win.opera&&"svg"==n.tagName){var i=Xe(o),r=o.createSVGRect();r.x=e-i.x,r.y=a-i.y,r.width=r.height=1;var s=o.getIntersectionList(r,null);s.length&&(n=s[s.length-1])}if(!n)return null;for(;n.parentNode&&n!=o.parentNode&&!n.raphael;)n=n.parentNode;return n==t.canvas.parentNode&&(n=o),n=n&&n.raphael?t.getById(n.raphaelid):null},k.getElementsByBBox=function(e){var a=this.set();return this.forEach(function(o){t.isBBoxIntersect(o.getBBox(),e)&&a.push(o)}),a},k.getById=function(e){for(var a=this.bottom;a;){if(a.id==e)return a;a=a.next}return null},k.forEach=function(e,a){for(var t=this.bottom;t;){if(e.call(a,t)===!1)return this;t=t.next}return this},k.getElementsByPoint=function(e,a){var t=this.set();return this.forEach(function(o){o.isPointInside(e,a)&&t.push(o)}),t},Je.isPointInside=function(e,a){var o=this.realPath=fe[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(o=t.transformPath(o,this.attr("transform"))),t.isPointInsidePath(o,e,a)},Je.getBBox=function(e){if(this.removed)return{};var a=this._;return e?((a.dirty||!a.bboxwt)&&(this.realPath=fe[this.type](this),
a.bboxwt=Te(this.realPath),a.bboxwt.toString=f,a.dirty=0),a.bboxwt):((a.dirty||a.dirtyT||!a.bbox)&&((a.dirty||!this.realPath)&&(a.bboxwt=0,this.realPath=fe[this.type](this)),a.bbox=Te(he(this.realPath,this.matrix)),a.bbox.toString=f,a.dirty=a.dirtyT=0),a.bbox)},Je.clone=function(){if(this.removed)return null;var e=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(e),e},Je.glow=function(e){if("text"==this.type)return null;e=e||{};var a={width:(e.width||10)+(+this.attr("stroke-width")||1),fill:e.fill||!1,opacity:e.opacity||.5,offsetx:e.offsetx||0,offsety:e.offsety||0,color:e.color||"#000"},t=a.width/2,o=this.paper,n=o.set(),i=this.realPath||fe[this.type](this);i=this.matrix?he(i,this.matrix):i;for(var r=1;t+1>r;r++)n.push(o.path(i).attr({stroke:a.color,fill:a.fill?a.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(a.width/t*r).toFixed(3),opacity:+(a.opacity/t).toFixed(3)}));return n.insertBefore(this).translate(a.offsetx,a.offsety)};var ea=function(e,a,o,n,i,r,s,c,u){return null==u?l(e,a,o,n,i,r,s,c):t.findDotsAtSegment(e,a,o,n,i,r,s,c,d(e,a,o,n,i,r,s,c,u))},aa=function(e,a){return function(o,n,i){o=$e(o);for(var r,s,c,l,d,u="",m={},p=0,g=0,f=o.length;f>g;g++){if(c=o[g],"M"==c[0])r=+c[1],s=+c[2];else{if(l=ea(r,s,c[1],c[2],c[3],c[4],c[5],c[6]),p+l>n){if(a&&!m.start){if(d=ea(r,s,c[1],c[2],c[3],c[4],c[5],c[6],n-p),u+=["C"+d.start.x,d.start.y,d.m.x,d.m.y,d.x,d.y],i)return u;m.start=u,u=["M"+d.x,d.y+"C"+d.n.x,d.n.y,d.end.x,d.end.y,c[5],c[6]].join(),p+=l,r=+c[5],s=+c[6];continue}if(!e&&!a)return d=ea(r,s,c[1],c[2],c[3],c[4],c[5],c[6],n-p),{x:d.x,y:d.y,alpha:d.alpha}}p+=l,r=+c[5],s=+c[6]}u+=c.shift()+c}return m.end=u,d=e?p:a?m:t.findDotsAtSegment(r,s,c[0],c[1],c[2],c[3],c[4],c[5],1),d.alpha&&(d={x:d.x,y:d.y,alpha:d.alpha}),d}},ta=aa(1),oa=aa(),na=aa(0,1);t.getTotalLength=ta,t.getPointAtLength=oa,t.getSubpath=function(e,a,t){if(this.getTotalLength(e)-t<1e-6)return na(e,a).end;var o=na(e,t,1);return a?na(o,a).end:o},Je.getTotalLength=function(){var e=this.getPath();return e?this.node.getTotalLength?this.node.getTotalLength():ta(e):void 0},Je.getPointAtLength=function(e){var a=this.getPath();return a?oa(a,e):void 0},Je.getPath=function(){var e,a=t._getPath[this.type];return"text"!=this.type&&"set"!=this.type?(a&&(e=a(this)),e):void 0},Je.getSubpath=function(e,a){var o=this.getPath();return o?t.getSubpath(o,e,a):void 0};var ia=t.easing_formulas={linear:function(e){return e},"<":function(e){return F(e,1.7)},">":function(e){return F(e,.48)},"<>":function(e){var a=.48-e/1.04,t=B.sqrt(.1734+a*a),o=t-a,n=F(K(o),1/3)*(0>o?-1:1),i=-t-a,r=F(K(i),1/3)*(0>i?-1:1),s=n+r+.5;return 3*(1-s)*s*s+s*s*s},backIn:function(e){var a=1.70158;return e*e*((a+1)*e-a)},backOut:function(e){e-=1;var a=1.70158;return e*e*((a+1)*e+a)+1},elastic:function(e){return e==!!e?e:F(2,-10*e)*B.sin(2*(e-.075)*H/.3)+1},bounce:function(e){var a,t=7.5625,o=2.75;return 1/o>e?a=t*e*e:2/o>e?(e-=1.5/o,a=t*e*e+.75):2.5/o>e?(e-=2.25/o,a=t*e*e+.9375):(e-=2.625/o,a=t*e*e+.984375),a}};ia.easeIn=ia["ease-in"]=ia["<"],ia.easeOut=ia["ease-out"]=ia[">"],ia.easeInOut=ia["ease-in-out"]=ia["<>"],ia["back-in"]=ia.backIn,ia["back-out"]=ia.backOut;var ra=[],sa=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,16)},ca=function(){for(var e=+new Date,o=0;o<ra.length;o++){var n=ra[o];if(!n.el.removed&&!n.paused){var i,r,s=e-n.start,c=n.ms,l=n.easing,d=n.from,u=n.diff,m=n.to,p=(n.t,n.el),g={},f={};if(n.initstatus?(s=(n.initstatus*n.anim.top-n.prev)/(n.percent-n.prev)*c,n.status=n.initstatus,delete n.initstatus,n.stop&&ra.splice(o--,1)):n.status=(n.prev+(n.percent-n.prev)*(s/c))/n.anim.top,!(0>s))if(c>s){var h=l(s/c);for(var _ in d)if(d[C](_)){switch(oe[_]){case V:i=+d[_]+h*c*u[_];break;case"colour":i="rgb("+[la(Q(d[_].r+h*c*u[_].r)),la(Q(d[_].g+h*c*u[_].g)),la(Q(d[_].b+h*c*u[_].b))].join(",")+")";break;case"path":i=[];for(var y=0,w=d[_].length;w>y;y++){i[y]=[d[_][y][0]];for(var k=1,b=d[_][y].length;b>k;k++)i[y][k]=+d[_][y][k]+h*c*u[_][y][k];i[y]=i[y].join(P)}i=i.join(P);break;case"transform":if(u[_].real)for(i=[],y=0,w=d[_].length;w>y;y++)for(i[y]=[d[_][y][0]],k=1,b=d[_][y].length;b>k;k++)i[y][k]=d[_][y][k]+h*c*u[_][y][k];else{var S=function(e){return+d[_][e]+h*c*u[_][e]};i=[["m",S(0),S(1),S(2),S(3),S(4),S(5)]]}break;case"csv":if("clip-rect"==_)for(i=[],y=4;y--;)i[y]=+d[_][y]+h*c*u[_][y];break;default:var A=[][O](d[_]);for(i=[],y=p.paper.customAttributes[_].length;y--;)i[y]=+A[y]+h*c*u[_][y]}g[_]=i}p.attr(g),function(e,t,o){setTimeout(function(){a("raphael.anim.frame."+e,t,o)})}(p.id,p,n.anim)}else{if(function(e,o,n){setTimeout(function(){a("raphael.anim.frame."+o.id,o,n),a("raphael.anim.finish."+o.id,o,n),t.is(e,"function")&&e.call(o)})}(n.callback,p,n.anim),p.attr(m),ra.splice(o--,1),n.repeat>1&&!n.next){for(r in m)m[C](r)&&(f[r]=n.totalOrigin[r]);n.el.attr(f),v(n.anim,n.el,n.anim.percents[0],null,n.totalOrigin,n.repeat-1)}n.next&&!n.stop&&v(n.anim,n.el,n.next,null,n.totalOrigin,n.repeat)}}}ra.length&&sa(ca)},la=function(e){return e>255?255:0>e?0:e};Je.animateWith=function(e,a,o,n,i,r){var s=this;if(s.removed)return r&&r.call(s),s;var c=o instanceof _?o:t.animation(o,n,i,r);v(c,s,c.percents[0],null,s.attr());for(var l=0,d=ra.length;d>l;l++)if(ra[l].anim==a&&ra[l].el==e){ra[d-1].start=ra[l].start;break}return s},Je.onAnimation=function(e){return e?a.on("raphael.anim.frame."+this.id,e):a.unbind("raphael.anim.frame."+this.id),this},_.prototype.delay=function(e){var a=new _(this.anim,this.ms);return a.times=this.times,a.del=+e||0,a},_.prototype.repeat=function(e){var a=new _(this.anim,this.ms);return a.del=this.del,a.times=B.floor(G(e,0))||1,a},t.animation=function(e,a,o,n){if(e instanceof _)return e;(t.is(o,"function")||!o)&&(n=n||o||null,o=null),e=Object(e),a=+a||0;var i,r,s={};for(r in e)e[C](r)&&X(r)!=r&&X(r)+"%"!=r&&(i=!0,s[r]=e[r]);if(i)return o&&(s.easing=o),n&&(s.callback=n),new _({100:s},a);if(n){var c=0;for(var l in e){var d=ee(l);e[C](l)&&d>c&&(c=d)}c+="%",!e[c].callback&&(e[c].callback=n)}return new _(e,a)},Je.animate=function(e,a,o,n){var i=this;if(i.removed)return n&&n.call(i),i;var r=e instanceof _?e:t.animation(e,a,o,n);return v(r,i,r.percents[0],null,i.attr()),i},Je.setTime=function(e,a){return e&&null!=a&&this.status(e,z(a,e.ms)/e.ms),this},Je.status=function(e,a){var t,o,n=[],i=0;if(null!=a)return v(e,this,-1,z(a,1)),this;for(t=ra.length;t>i;i++)if(o=ra[i],o.el.id==this.id&&(!e||o.anim==e)){if(e)return o.status;n.push({anim:o.anim,status:o.status})}return e?0:n},Je.pause=function(e){for(var t=0;t<ra.length;t++)ra[t].el.id!=this.id||e&&ra[t].anim!=e||a("raphael.anim.pause."+this.id,this,ra[t].anim)!==!1&&(ra[t].paused=!0);return this},Je.resume=function(e){for(var t=0;t<ra.length;t++)if(ra[t].el.id==this.id&&(!e||ra[t].anim==e)){var o=ra[t];a("raphael.anim.resume."+this.id,this,o.anim)!==!1&&(delete o.paused,this.status(o.anim,o.status))}return this},Je.stop=function(e){for(var t=0;t<ra.length;t++)ra[t].el.id!=this.id||e&&ra[t].anim!=e||a("raphael.anim.stop."+this.id,this,ra[t].anim)!==!1&&ra.splice(t--,1);return this},a.on("raphael.remove",y),a.on("raphael.clear",y),Je.toString=function(){return"Raphaël’s object"};var da=function(e){if(this.items=[],this.length=0,this.type="set",e)for(var a=0,t=e.length;t>a;a++)!e[a]||e[a].constructor!=Je.constructor&&e[a].constructor!=da||(this[this.items.length]=this.items[this.items.length]=e[a],this.length++)},ua=da.prototype;ua.push=function(){for(var e,a,t=0,o=arguments.length;o>t;t++)e=arguments[t],!e||e.constructor!=Je.constructor&&e.constructor!=da||(a=this.items.length,this[a]=this.items[a]=e,this.length++);return this},ua.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},ua.forEach=function(e,a){for(var t=0,o=this.items.length;o>t;t++)if(e.call(a,this.items[t],t)===!1)return this;return this};for(var ma in Je)Je[C](ma)&&(ua[ma]=function(e){return function(){var a=arguments;return this.forEach(function(t){t[e][N](t,a)})}}(ma));return ua.attr=function(e,a){if(e&&t.is(e,j)&&t.is(e[0],"object"))for(var o=0,n=e.length;n>o;o++)this.items[o].attr(e[o]);else for(var i=0,r=this.items.length;r>i;i++)this.items[i].attr(e,a);return this},ua.clear=function(){for(;this.length;)this.pop()},ua.splice=function(e,a,t){e=0>e?G(this.length+e,0):e,a=G(0,z(this.length-e,a));var o,n=[],i=[],r=[];for(o=2;o<arguments.length;o++)r.push(arguments[o]);for(o=0;a>o;o++)i.push(this[e+o]);for(;o<this.length-e;o++)n.push(this[e+o]);var s=r.length;for(o=0;o<s+n.length;o++)this.items[e+o]=this[e+o]=s>o?r[o]:n[o-s];for(o=this.items.length=this.length-=a-s;this[o];)delete this[o++];return new da(i)},ua.exclude=function(e){for(var a=0,t=this.length;t>a;a++)if(this[a]==e)return this.splice(a,1),!0},ua.animate=function(e,a,o,n){(t.is(o,"function")||!o)&&(n=o||null);var i,r,s=this.items.length,c=s,l=this;if(!s)return this;n&&(r=function(){!--s&&n.call(l)}),o=t.is(o,W)?o:r;var d=t.animation(e,a,o,r);for(i=this.items[--c].animate(d);c--;)this.items[c]&&!this.items[c].removed&&this.items[c].animateWith(i,d,d),this.items[c]&&!this.items[c].removed||s--;return this},ua.insertAfter=function(e){for(var a=this.items.length;a--;)this.items[a].insertAfter(e);return this},ua.getBBox=function(){for(var e=[],a=[],t=[],o=[],n=this.items.length;n--;)if(!this.items[n].removed){var i=this.items[n].getBBox();e.push(i.x),a.push(i.y),t.push(i.x+i.width),o.push(i.y+i.height)}return e=z[N](0,e),a=z[N](0,a),t=G[N](0,t),o=G[N](0,o),{x:e,y:a,x2:t,y2:o,width:t-e,height:o-a}},ua.clone=function(e){e=this.paper.set();for(var a=0,t=this.items.length;t>a;a++)e.push(this.items[a].clone());return e},ua.toString=function(){return"Raphaël‘s set"},ua.glow=function(e){var a=this.paper.set();return this.forEach(function(t,o){var n=t.glow(e);null!=n&&n.forEach(function(e,t){a.push(e)})}),a},ua.isPointInside=function(e,a){var t=!1;return this.forEach(function(o){return o.isPointInside(e,a)?(t=!0,!1):void 0}),t},t.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var a={w:e.w,face:{},glyphs:{}},t=e.face["font-family"];for(var o in e.face)e.face[C](o)&&(a.face[o]=e.face[o]);if(this.fonts[t]?this.fonts[t].push(a):this.fonts[t]=[a],!e.svg){a.face["units-per-em"]=ee(e.face["units-per-em"],10);for(var n in e.glyphs)if(e.glyphs[C](n)){var i=e.glyphs[n];if(a.glyphs[n]={w:i.w,k:{},d:i.d&&"M"+i.d.replace(/[mlcxtrv]/g,function(e){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[e]||"M"})+"z"},i.k)for(var r in i.k)i[C](r)&&(a.glyphs[n].k[r]=i.k[r])}}return e},k.getFont=function(e,a,o,n){if(n=n||"normal",o=o||"normal",a=+a||{normal:400,bold:700,lighter:300,bolder:800}[a]||400,t.fonts){var i=t.fonts[e];if(!i){var r=new RegExp("(^|\\s)"+e.replace(/[^\w\d\s+!~.:_-]/g,I)+"(\\s|$)","i");for(var s in t.fonts)if(t.fonts[C](s)&&r.test(s)){i=t.fonts[s];break}}var c;if(i)for(var l=0,d=i.length;d>l&&(c=i[l],c.face["font-weight"]!=a||c.face["font-style"]!=o&&c.face["font-style"]||c.face["font-stretch"]!=n);l++);return c}},k.print=function(e,a,o,n,i,r,s,c){r=r||"middle",s=G(z(s||0,1),-1),c=G(z(c||1,3),1);var l,d=E(o)[$](I),u=0,m=0,p=I;if(t.is(n,"string")&&(n=this.getFont(n)),n){l=(i||16)/n.face["units-per-em"];for(var g=n.face.bbox[$](b),f=+g[0],h=g[3]-g[1],_=0,v=+g[1]+("baseline"==r?h+ +n.face.descent:h/2),y=0,w=d.length;w>y;y++){if("\n"==d[y])u=0,S=0,m=0,_+=h*c;else{var k=m&&n.glyphs[d[y-1]]||{},S=n.glyphs[d[y]];u+=m?(k.w||n.w)+(k.k&&k.k[d[y]]||0)+n.w*s:0,m=1}S&&S.d&&(p+=t.transformPath(S.d,["t",u*l,_*l,"s",l,l,f,v,"t",(e-f)/l,(a-v)/l]))}}return this.path(p).attr({fill:"#000",stroke:"none"})},k.add=function(e){if(t.is(e,"array"))for(var a,o=this.set(),n=0,i=e.length;i>n;n++)a=e[n]||{},S[C](a.type)&&o.push(this[a.type]().attr(a));return o},t.format=function(e,a){var o=t.is(a,j)?[0][O](a):arguments;return e&&t.is(e,W)&&o.length-1&&(e=e.replace(A,function(e,a){return null==o[++a]?I:o[a]})),e||I},t.fullfill=function(){var e=/\{([^\}]+)\}/g,a=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,t=function(e,t,o){var n=o;return t.replace(a,function(e,a,t,o,i){a=a||o,n&&(a in n&&(n=n[a]),"function"==typeof n&&i&&(n=n()))}),n=(null==n||n==o?e:n)+""};return function(a,o){return String(a).replace(e,function(e,a){return t(e,a,o)})}}(),t.ninja=function(){return x.was?T.win.Raphael=x.is:delete Raphael,t},t.st=ua,a.on("raphael.DOMload",function(){w=!0}),function(e,a,o){function n(){/in/.test(e.readyState)?setTimeout(n,9):t.eve("raphael.DOMload")}null==e.readyState&&e.addEventListener&&(e.addEventListener(a,o=function(){e.removeEventListener(a,o,!1),e.readyState="complete"},!1),e.readyState="loading"),n()}(document,"DOMContentLoaded"),function(){if(t.svg){var e="hasOwnProperty",a=String,o=parseFloat,n=parseInt,i=Math,r=i.max,s=i.abs,c=i.pow,l=/[, ]+/,d=t.eve,u="",m=" ",p="http://www.w3.org/1999/xlink",g={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},f={};t.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var h=function(o,n){if(n){"string"==typeof o&&(o=h(o));for(var i in n)n[e](i)&&("xlink:"==i.substring(0,6)?o.setAttributeNS(p,i.substring(6),a(n[i])):o.setAttribute(i,a(n[i])))}else o=t._g.doc.createElementNS("http://www.w3.org/2000/svg",o),o.style&&(o.style.webkitTapHighlightColor="rgba(0,0,0,0)");return o},_=function(e,n){var l="linear",d=e.id+n,m=.5,p=.5,g=e.node,f=e.paper,_=g.style,v=t._g.doc.getElementById(d);if(!v){if(n=a(n).replace(t._radial_gradient,function(e,a,t){if(l="radial",a&&t){m=o(a),p=o(t);var n=2*(p>.5)-1;c(m-.5,2)+c(p-.5,2)>.25&&(p=i.sqrt(.25-c(m-.5,2))*n+.5)&&.5!=p&&(p=p.toFixed(5)-1e-5*n)}return u}),n=n.split(/\s*\-\s*/),"linear"==l){var y=n.shift();if(y=-o(y),isNaN(y))return null;var w=[0,0,i.cos(t.rad(y)),i.sin(t.rad(y))],k=1/(r(s(w[2]),s(w[3]))||1);w[2]*=k,w[3]*=k,w[2]<0&&(w[0]=-w[2],w[2]=0),w[3]<0&&(w[1]=-w[3],w[3]=0)}var b=t._parseDots(n);if(!b)return null;if(d=d.replace(/[\(\)\s,\xb0#]/g,"_"),e.gradient&&d!=e.gradient.id&&(f.defs.removeChild(e.gradient),delete e.gradient),!e.gradient){v=h(l+"Gradient",{id:d}),e.gradient=v,h(v,"radial"==l?{fx:m,fy:p}:{x1:w[0],y1:w[1],x2:w[2],y2:w[3],gradientTransform:e.matrix.invert()}),f.defs.appendChild(v);for(var S=0,A=b.length;A>S;S++)v.appendChild(h("stop",{offset:b[S].offset?b[S].offset:S?"100%":"0%","stop-color":b[S].color||"#fff"}))}}return h(g,{fill:"url('"+document.location+"#"+d+"')",opacity:1,"fill-opacity":1}),_.fill=u,_.opacity=1,_.fillOpacity=1,1},v=function(e){var a=e.getBBox(1);h(e.pattern,{patternTransform:e.matrix.invert()+" translate("+a.x+","+a.y+")"})},y=function(o,n,i){if("path"==o.type){for(var r,s,c,l,d,m=a(n).toLowerCase().split("-"),p=o.paper,_=i?"end":"start",v=o.node,y=o.attrs,w=y["stroke-width"],k=m.length,b="classic",S=3,A=3,C=5;k--;)switch(m[k]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":b=m[k];break;case"wide":A=5;break;case"narrow":A=2;break;case"long":S=5;break;case"short":S=2}if("open"==b?(S+=2,A+=2,C+=2,c=1,l=i?4:1,d={fill:"none",stroke:y.stroke}):(l=c=S/2,d={fill:y.stroke,stroke:"none"}),o._.arrows?i?(o._.arrows.endPath&&f[o._.arrows.endPath]--,o._.arrows.endMarker&&f[o._.arrows.endMarker]--):(o._.arrows.startPath&&f[o._.arrows.startPath]--,o._.arrows.startMarker&&f[o._.arrows.startMarker]--):o._.arrows={},"none"!=b){var T="raphael-marker-"+b,x="raphael-marker-"+_+b+S+A+"-obj"+o.id;t._g.doc.getElementById(T)?f[T]++:(p.defs.appendChild(h(h("path"),{"stroke-linecap":"round",d:g[b],id:T})),f[T]=1);var M,N=t._g.doc.getElementById(x);N?(f[x]++,M=N.getElementsByTagName("use")[0]):(N=h(h("marker"),{id:x,markerHeight:A,markerWidth:S,orient:"auto",refX:l,refY:A/2}),M=h(h("use"),{"xlink:href":"#"+T,transform:(i?"rotate(180 "+S/2+" "+A/2+") ":u)+"scale("+S/C+","+A/C+")","stroke-width":(1/((S/C+A/C)/2)).toFixed(4)}),N.appendChild(M),p.defs.appendChild(N),f[x]=1),h(M,d);var O=c*("diamond"!=b&&"oval"!=b);i?(r=o._.arrows.startdx*w||0,s=t.getTotalLength(y.path)-O*w):(r=O*w,s=t.getTotalLength(y.path)-(o._.arrows.enddx*w||0)),d={},d["marker-"+_]="url(#"+x+")",(s||r)&&(d.d=t.getSubpath(y.path,r,s)),h(v,d),o._.arrows[_+"Path"]=T,o._.arrows[_+"Marker"]=x,o._.arrows[_+"dx"]=O,o._.arrows[_+"Type"]=b,o._.arrows[_+"String"]=n}else i?(r=o._.arrows.startdx*w||0,s=t.getTotalLength(y.path)-r):(r=0,s=t.getTotalLength(y.path)-(o._.arrows.enddx*w||0)),o._.arrows[_+"Path"]&&h(v,{d:t.getSubpath(y.path,r,s)}),delete o._.arrows[_+"Path"],delete o._.arrows[_+"Marker"],delete o._.arrows[_+"dx"],delete o._.arrows[_+"Type"],delete o._.arrows[_+"String"];for(d in f)if(f[e](d)&&!f[d]){var D=t._g.doc.getElementById(d);D&&D.parentNode.removeChild(D)}}},w={"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},k=function(e,t,o){if(t=w[a(t).toLowerCase()]){for(var n=e.attrs["stroke-width"]||"1",i={round:n,square:n,butt:0}[e.attrs["stroke-linecap"]||o["stroke-linecap"]]||0,r=[],s=t.length;s--;)r[s]=t[s]*n+(s%2?1:-1)*i;h(e.node,{"stroke-dasharray":r.join(",")})}else h(e.node,{"stroke-dasharray":"none"})},b=function(o,i){var c=o.node,d=o.attrs,m=c.style.visibility;c.style.visibility="hidden";for(var g in i)if(i[e](g)){if(!t._availableAttrs[e](g))continue;var f=i[g];switch(d[g]=f,g){case"blur":o.blur(f);break;case"title":var w=c.getElementsByTagName("title");if(w.length&&(w=w[0]))w.firstChild.nodeValue=f;else{w=h("title");var b=t._g.doc.createTextNode(f);w.appendChild(b),c.appendChild(w)}break;case"href":case"target":var S=c.parentNode;if("a"!=S.tagName.toLowerCase()){var C=h("a");S.insertBefore(C,c),C.appendChild(c),S=C}"target"==g?S.setAttributeNS(p,"show","blank"==f?"new":f):S.setAttributeNS(p,g,f);break;case"cursor":c.style.cursor=f;break;case"transform":o.transform(f);break;case"arrow-start":y(o,f);break;case"arrow-end":y(o,f,1);break;case"clip-rect":var T=a(f).split(l);if(4==T.length){o.clip&&o.clip.parentNode.parentNode.removeChild(o.clip.parentNode);var x=h("clipPath"),M=h("rect");x.id=t.createUUID(),h(M,{x:T[0],y:T[1],width:T[2],height:T[3]}),x.appendChild(M),o.paper.defs.appendChild(x),h(c,{"clip-path":"url(#"+x.id+")"}),o.clip=M}if(!f){var N=c.getAttribute("clip-path");if(N){var O=t._g.doc.getElementById(N.replace(/(^url\(#|\)$)/g,u));O&&O.parentNode.removeChild(O),h(c,{"clip-path":u}),delete o.clip}}break;case"path":"path"==o.type&&(h(c,{d:f?d.path=t._pathToAbsolute(f):"M0,0"}),o._.dirty=1,o._.arrows&&("startString"in o._.arrows&&y(o,o._.arrows.startString),"endString"in o._.arrows&&y(o,o._.arrows.endString,1)));break;case"width":if(c.setAttribute(g,f),o._.dirty=1,!d.fx)break;g="x",f=d.x;case"x":d.fx&&(f=-d.x-(d.width||0));case"rx":if("rx"==g&&"rect"==o.type)break;case"cx":c.setAttribute(g,f),o.pattern&&v(o),o._.dirty=1;break;case"height":if(c.setAttribute(g,f),o._.dirty=1,!d.fy)break;g="y",f=d.y;case"y":d.fy&&(f=-d.y-(d.height||0));case"ry":if("ry"==g&&"rect"==o.type)break;case"cy":c.setAttribute(g,f),o.pattern&&v(o),o._.dirty=1;break;case"r":"rect"==o.type?h(c,{rx:f,ry:f}):c.setAttribute(g,f),o._.dirty=1;break;case"src":"image"==o.type&&c.setAttributeNS(p,"href",f);break;case"stroke-width":(1!=o._.sx||1!=o._.sy)&&(f/=r(s(o._.sx),s(o._.sy))||1),c.setAttribute(g,f),d["stroke-dasharray"]&&k(o,d["stroke-dasharray"],i),o._.arrows&&("startString"in o._.arrows&&y(o,o._.arrows.startString),"endString"in o._.arrows&&y(o,o._.arrows.endString,1));break;case"stroke-dasharray":k(o,f,i);break;case"fill":var D=a(f).match(t._ISURL);if(D){x=h("pattern");var I=h("image");x.id=t.createUUID(),h(x,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),h(I,{x:0,y:0,"xlink:href":D[1]}),x.appendChild(I),function(e){t._preload(D[1],function(){var a=this.offsetWidth,t=this.offsetHeight;h(e,{width:a,height:t}),h(I,{width:a,height:t})})}(x),o.paper.defs.appendChild(x),h(c,{fill:"url(#"+x.id+")"}),o.pattern=x,o.pattern&&v(o);break}var P=t.getRGB(f);if(P.error){if(("circle"==o.type||"ellipse"==o.type||"r"!=a(f).charAt())&&_(o,f)){if("opacity"in d||"fill-opacity"in d){var E=t._g.doc.getElementById(c.getAttribute("fill").replace(/^url\(#|\)$/g,u));if(E){var $=E.getElementsByTagName("stop");h($[$.length-1],{"stop-opacity":("opacity"in d?d.opacity:1)*("fill-opacity"in d?d["fill-opacity"]:1)})}}d.gradient=f,d.fill="none";break}}else delete i.gradient,delete d.gradient,!t.is(d.opacity,"undefined")&&t.is(i.opacity,"undefined")&&h(c,{opacity:d.opacity}),!t.is(d["fill-opacity"],"undefined")&&t.is(i["fill-opacity"],"undefined")&&h(c,{"fill-opacity":d["fill-opacity"]});P[e]("opacity")&&h(c,{"fill-opacity":P.opacity>1?P.opacity/100:P.opacity});case"stroke":P=t.getRGB(f),c.setAttribute(g,P.hex),"stroke"==g&&P[e]("opacity")&&h(c,{"stroke-opacity":P.opacity>1?P.opacity/100:P.opacity}),"stroke"==g&&o._.arrows&&("startString"in o._.arrows&&y(o,o._.arrows.startString),"endString"in o._.arrows&&y(o,o._.arrows.endString,1));break;case"gradient":("circle"==o.type||"ellipse"==o.type||"r"!=a(f).charAt())&&_(o,f);break;case"opacity":d.gradient&&!d[e]("stroke-opacity")&&h(c,{"stroke-opacity":f>1?f/100:f});case"fill-opacity":if(d.gradient){E=t._g.doc.getElementById(c.getAttribute("fill").replace(/^url\(#|\)$/g,u)),E&&($=E.getElementsByTagName("stop"),h($[$.length-1],{"stop-opacity":f}));break}default:"font-size"==g&&(f=n(f,10)+"px");var L=g.replace(/(\-.)/g,function(e){return e.substring(1).toUpperCase()});c.style[L]=f,o._.dirty=1,c.setAttribute(g,f)}}A(o,i),c.style.visibility=m},S=1.2,A=function(o,i){if("text"==o.type&&(i[e]("text")||i[e]("font")||i[e]("font-size")||i[e]("x")||i[e]("y"))){var r=o.attrs,s=o.node,c=s.firstChild?n(t._g.doc.defaultView.getComputedStyle(s.firstChild,u).getPropertyValue("font-size"),10):10;if(i[e]("text")){for(r.text=i.text;s.firstChild;)s.removeChild(s.firstChild);for(var l,d=a(i.text).split("\n"),m=[],p=0,g=d.length;g>p;p++)l=h("tspan"),p&&h(l,{dy:c*S,x:r.x}),l.appendChild(t._g.doc.createTextNode(d[p])),s.appendChild(l),m[p]=l}else for(m=s.getElementsByTagName("tspan"),p=0,g=m.length;g>p;p++)p?h(m[p],{dy:c*S,x:r.x}):h(m[0],{dy:0});h(s,{x:r.x,y:r.y}),o._.dirty=1;var f=o._getBBox(),_=r.y-(f.y+f.height/2);_&&t.is(_,"finite")&&h(m[0],{dy:_})}},C=function(e){return e.parentNode&&"a"===e.parentNode.tagName.toLowerCase()?e.parentNode:e},T=function(e,a){this[0]=this.node=e,e.raphael=!0,this.id=t._oid++,e.raphaelid=this.id,this.matrix=t.matrix(),this.realPath=null,this.paper=a,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!a.bottom&&(a.bottom=this),this.prev=a.top,a.top&&(a.top.next=this),a.top=this,this.next=null},x=t.el;T.prototype=x,x.constructor=T,t._engine.path=function(e,a){var t=h("path");a.canvas&&a.canvas.appendChild(t);var o=new T(t,a);return o.type="path",b(o,{fill:"none",stroke:"#000",path:e}),o},x.rotate=function(e,t,n){if(this.removed)return this;if(e=a(e).split(l),e.length-1&&(t=o(e[1]),n=o(e[2])),e=o(e[0]),null==n&&(t=n),null==t||null==n){var i=this.getBBox(1);t=i.x+i.width/2,n=i.y+i.height/2}return this.transform(this._.transform.concat([["r",e,t,n]])),this},x.scale=function(e,t,n,i){if(this.removed)return this;if(e=a(e).split(l),e.length-1&&(t=o(e[1]),n=o(e[2]),i=o(e[3])),e=o(e[0]),null==t&&(t=e),null==i&&(n=i),null==n||null==i)var r=this.getBBox(1);return n=null==n?r.x+r.width/2:n,i=null==i?r.y+r.height/2:i,this.transform(this._.transform.concat([["s",e,t,n,i]])),this},x.translate=function(e,t){return this.removed?this:(e=a(e).split(l),e.length-1&&(t=o(e[1])),e=o(e[0])||0,t=+t||0,this.transform(this._.transform.concat([["t",e,t]])),this)},x.transform=function(a){var o=this._;if(null==a)return o.transform;if(t._extractTransform(this,a),this.clip&&h(this.clip,{transform:this.matrix.invert()}),this.pattern&&v(this),this.node&&h(this.node,{transform:this.matrix}),1!=o.sx||1!=o.sy){var n=this.attrs[e]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":n})}return this},x.hide=function(){return this.removed||(this.node.style.display="none"),this},x.show=function(){return this.removed||(this.node.style.display=""),this},x.remove=function(){var e=C(this.node);if(!this.removed&&e.parentNode){var a=this.paper;a.__set__&&a.__set__.exclude(this),d.unbind("raphael.*.*."+this.id),this.gradient&&a.defs.removeChild(this.gradient),t._tear(this,a),e.parentNode.removeChild(e),this.removeData();for(var o in this)this[o]="function"==typeof this[o]?t._removedFactory(o):null;this.removed=!0}},x._getBBox=function(){if("none"==this.node.style.display){this.show();var e=!0}var a,t=!1;this.paper.canvas.parentElement?a=this.paper.canvas.parentElement.style:this.paper.canvas.parentNode&&(a=this.paper.canvas.parentNode.style),a&&"none"==a.display&&(t=!0,a.display="");var o={};try{o=this.node.getBBox()}catch(n){o={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{o=o||{},t&&(a.display="none")}return e&&this.hide(),o},x.attr=function(a,o){if(this.removed)return this;if(null==a){var n={};for(var i in this.attrs)this.attrs[e](i)&&(n[i]=this.attrs[i]);return n.gradient&&"none"==n.fill&&(n.fill=n.gradient)&&delete n.gradient,n.transform=this._.transform,n}if(null==o&&t.is(a,"string")){if("fill"==a&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==a)return this._.transform;for(var r=a.split(l),s={},c=0,u=r.length;u>c;c++)a=r[c],a in this.attrs?s[a]=this.attrs[a]:t.is(this.paper.customAttributes[a],"function")?s[a]=this.paper.customAttributes[a].def:s[a]=t._availableAttrs[a];return u-1?s:s[r[0]]}if(null==o&&t.is(a,"array")){for(s={},c=0,u=a.length;u>c;c++)s[a[c]]=this.attr(a[c]);return s}if(null!=o){var m={};m[a]=o}else null!=a&&t.is(a,"object")&&(m=a);for(var p in m)d("raphael.attr."+p+"."+this.id,this,m[p]);for(p in this.paper.customAttributes)if(this.paper.customAttributes[e](p)&&m[e](p)&&t.is(this.paper.customAttributes[p],"function")){var g=this.paper.customAttributes[p].apply(this,[].concat(m[p]));this.attrs[p]=m[p];for(var f in g)g[e](f)&&(m[f]=g[f])}return b(this,m),this},x.toFront=function(){if(this.removed)return this;var e=C(this.node);e.parentNode.appendChild(e);var a=this.paper;return a.top!=this&&t._tofront(this,a),this},x.toBack=function(){if(this.removed)return this;var e=C(this.node),a=e.parentNode;return a.insertBefore(e,a.firstChild),t._toback(this,this.paper),this.paper,this},x.insertAfter=function(e){if(this.removed||!e)return this;var a=C(this.node),o=C(e.node||e[e.length-1].node);return o.nextSibling?o.parentNode.insertBefore(a,o.nextSibling):o.parentNode.appendChild(a),t._insertafter(this,e,this.paper),this},x.insertBefore=function(e){if(this.removed||!e)return this;var a=C(this.node),o=C(e.node||e[0].node);return o.parentNode.insertBefore(a,o),t._insertbefore(this,e,this.paper),this},x.blur=function(e){var a=this;if(0!==+e){var o=h("filter"),n=h("feGaussianBlur");a.attrs.blur=e,o.id=t.createUUID(),h(n,{stdDeviation:+e||1.5}),o.appendChild(n),a.paper.defs.appendChild(o),a._blur=o,h(a.node,{filter:"url(#"+o.id+")"})}else a._blur&&(a._blur.parentNode.removeChild(a._blur),delete a._blur,delete a.attrs.blur),a.node.removeAttribute("filter");return a},t._engine.circle=function(e,a,t,o){var n=h("circle");e.canvas&&e.canvas.appendChild(n);var i=new T(n,e);return i.attrs={cx:a,cy:t,r:o,fill:"none",stroke:"#000"},i.type="circle",h(n,i.attrs),i},t._engine.rect=function(e,a,t,o,n,i){var r=h("rect");e.canvas&&e.canvas.appendChild(r);var s=new T(r,e);return s.attrs={x:a,y:t,width:o,height:n,rx:i||0,ry:i||0,fill:"none",stroke:"#000"},s.type="rect",h(r,s.attrs),s},t._engine.ellipse=function(e,a,t,o,n){var i=h("ellipse");e.canvas&&e.canvas.appendChild(i);var r=new T(i,e);return r.attrs={cx:a,cy:t,rx:o,ry:n,fill:"none",stroke:"#000"},r.type="ellipse",h(i,r.attrs),r},t._engine.image=function(e,a,t,o,n,i){var r=h("image");h(r,{x:t,y:o,width:n,height:i,preserveAspectRatio:"none"}),r.setAttributeNS(p,"href",a),e.canvas&&e.canvas.appendChild(r);var s=new T(r,e);return s.attrs={x:t,y:o,width:n,height:i,src:a},s.type="image",s},t._engine.text=function(e,a,o,n){var i=h("text");e.canvas&&e.canvas.appendChild(i);var r=new T(i,e);return r.attrs={x:a,y:o,"text-anchor":"middle",text:n,"font-family":t._availableAttrs["font-family"],"font-size":t._availableAttrs["font-size"],stroke:"none",fill:"#000"},r.type="text",b(r,r.attrs),r},t._engine.setSize=function(e,a){return this.width=e||this.width,this.height=a||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},t._engine.create=function(){var e=t._getContainer.apply(0,arguments),a=e&&e.container,o=e.x,n=e.y,i=e.width,r=e.height;if(!a)throw new Error("SVG container not found.");var s,c=h("svg"),l="overflow:hidden;";return o=o||0,n=n||0,i=i||512,r=r||342,h(c,{height:r,version:1.1,width:i,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),1==a?(c.style.cssText=l+"position:absolute;left:"+o+"px;top:"+n+"px",t._g.doc.body.appendChild(c),s=1):(c.style.cssText=l+"position:relative",a.firstChild?a.insertBefore(c,a.firstChild):a.appendChild(c)),a=new t._Paper,a.width=i,a.height=r,a.canvas=c,a.clear(),a._left=a._top=0,s&&(a.renderfix=function(){}),a.renderfix(),a},t._engine.setViewBox=function(e,a,t,o,n){d("raphael.setViewBox",this,this._viewBox,[e,a,t,o,n]);var i,s,c=this.getSize(),l=r(t/c.width,o/c.height),u=this.top,p=n?"xMidYMid meet":"xMinYMin";for(null==e?(this._vbSize&&(l=1),delete this._vbSize,i="0 0 "+this.width+m+this.height):(this._vbSize=l,i=e+m+a+m+t+m+o),h(this.canvas,{viewBox:i,preserveAspectRatio:p});l&&u;)s="stroke-width"in u.attrs?u.attrs["stroke-width"]:1,u.attr({"stroke-width":s}),u._.dirty=1,u._.dirtyT=1,u=u.prev;return this._viewBox=[e,a,t,o,!!n],this},t.prototype.renderfix=function(){var e,a=this.canvas,t=a.style;try{e=a.getScreenCTM()||a.createSVGMatrix()}catch(o){e=a.createSVGMatrix()}var n=-e.e%1,i=-e.f%1;(n||i)&&(n&&(this._left=(this._left+n)%1,t.left=this._left+"px"),i&&(this._top=(this._top+i)%1,t.top=this._top+"px"))},t.prototype.clear=function(){t.eve("raphael.clear",this);for(var e=this.canvas;e.firstChild;)e.removeChild(e.firstChild);this.bottom=this.top=null,(this.desc=h("desc")).appendChild(t._g.doc.createTextNode("Created with Raphaël "+t.version)),e.appendChild(this.desc),e.appendChild(this.defs=h("defs"))},t.prototype.remove=function(){d("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null};var M=t.st;for(var N in x)x[e](N)&&!M[e](N)&&(M[N]=function(e){return function(){var a=arguments;return this.forEach(function(t){t[e].apply(t,a)})}}(N))}}(),function(){if(t.vml){var e="hasOwnProperty",a=String,o=parseFloat,n=Math,i=n.round,r=n.max,s=n.min,c=n.abs,l="fill",d=/[, ]+/,u=t.eve,m=" progid:DXImageTransform.Microsoft",p=" ",g="",f={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},h=/([clmz]),?([^clmz]*)/gi,_=/ progid:\S+Blur\([^\)]+\)/g,v=/-?[^,\s-]+/g,y="position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",w=21600,k={path:1,rect:1,image:1},b={circle:1,ellipse:1},S=function(e){var o=/[ahqstv]/gi,n=t._pathToAbsolute;if(a(e).match(o)&&(n=t._path2curve),o=/[clmz]/g,n==t._pathToAbsolute&&!a(e).match(o)){var r=a(e).replace(h,function(e,a,t){var o=[],n="m"==a.toLowerCase(),r=f[a];return t.replace(v,function(e){n&&2==o.length&&(r+=o+f["m"==a?"l":"L"],o=[]),o.push(i(e*w))}),r+o});return r}var s,c,l=n(e);r=[];for(var d=0,u=l.length;u>d;d++){s=l[d],c=l[d][0].toLowerCase(),"z"==c&&(c="x");for(var m=1,_=s.length;_>m;m++)c+=i(s[m]*w)+(m!=_-1?",":g);r.push(c)}return r.join(p)},A=function(e,a,o){var n=t.matrix();return n.rotate(-e,.5,.5),{dx:n.x(a,o),dy:n.y(a,o)}},C=function(e,a,t,o,n,i){var r=e._,s=e.matrix,d=r.fillpos,u=e.node,m=u.style,g=1,f="",h=w/a,_=w/t;if(m.visibility="hidden",a&&t){if(u.coordsize=c(h)+p+c(_),m.rotation=i*(0>a*t?-1:1),i){var v=A(i,o,n);o=v.dx,n=v.dy}if(0>a&&(f+="x"),0>t&&(f+=" y")&&(g=-1),
m.flip=f,u.coordorigin=o*-h+p+n*-_,d||r.fillsize){var y=u.getElementsByTagName(l);y=y&&y[0],u.removeChild(y),d&&(v=A(i,s.x(d[0],d[1]),s.y(d[0],d[1])),y.position=v.dx*g+p+v.dy*g),r.fillsize&&(y.size=r.fillsize[0]*c(a)+p+r.fillsize[1]*c(t)),u.appendChild(y)}m.visibility="visible"}};t.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var T=function(e,t,o){for(var n=a(t).toLowerCase().split("-"),i=o?"end":"start",r=n.length,s="classic",c="medium",l="medium";r--;)switch(n[r]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":s=n[r];break;case"wide":case"narrow":l=n[r];break;case"long":case"short":c=n[r]}var d=e.node.getElementsByTagName("stroke")[0];d[i+"arrow"]=s,d[i+"arrowlength"]=c,d[i+"arrowwidth"]=l},x=function(n,c){n.attrs=n.attrs||{};var u=n.node,m=n.attrs,f=u.style,h=k[n.type]&&(c.x!=m.x||c.y!=m.y||c.width!=m.width||c.height!=m.height||c.cx!=m.cx||c.cy!=m.cy||c.rx!=m.rx||c.ry!=m.ry||c.r!=m.r),_=b[n.type]&&(m.cx!=c.cx||m.cy!=c.cy||m.r!=c.r||m.rx!=c.rx||m.ry!=c.ry),v=n;for(var y in c)c[e](y)&&(m[y]=c[y]);if(h&&(m.path=t._getPath[n.type](n),n._.dirty=1),c.href&&(u.href=c.href),c.title&&(u.title=c.title),c.target&&(u.target=c.target),c.cursor&&(f.cursor=c.cursor),"blur"in c&&n.blur(c.blur),(c.path&&"path"==n.type||h)&&(u.path=S(~a(m.path).toLowerCase().indexOf("r")?t._pathToAbsolute(m.path):m.path),n._.dirty=1,"image"==n.type&&(n._.fillpos=[m.x,m.y],n._.fillsize=[m.width,m.height],C(n,1,1,0,0,0))),"transform"in c&&n.transform(c.transform),_){var A=+m.cx,x=+m.cy,N=+m.rx||+m.r||0,O=+m.ry||+m.r||0;u.path=t.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",i((A-N)*w),i((x-O)*w),i((A+N)*w),i((x+O)*w),i(A*w)),n._.dirty=1}if("clip-rect"in c){var I=a(c["clip-rect"]).split(d);if(4==I.length){I[2]=+I[2]+ +I[0],I[3]=+I[3]+ +I[1];var P=u.clipRect||t._g.doc.createElement("div"),E=P.style;E.clip=t.format("rect({1}px {2}px {3}px {0}px)",I),u.clipRect||(E.position="absolute",E.top=0,E.left=0,E.width=n.paper.width+"px",E.height=n.paper.height+"px",u.parentNode.insertBefore(P,u),P.appendChild(u),u.clipRect=P)}c["clip-rect"]||u.clipRect&&(u.clipRect.style.clip="auto")}if(n.textpath){var $=n.textpath.style;c.font&&($.font=c.font),c["font-family"]&&($.fontFamily='"'+c["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,g)+'"'),c["font-size"]&&($.fontSize=c["font-size"]),c["font-weight"]&&($.fontWeight=c["font-weight"]),c["font-style"]&&($.fontStyle=c["font-style"])}if("arrow-start"in c&&T(v,c["arrow-start"]),"arrow-end"in c&&T(v,c["arrow-end"],1),null!=c.opacity||null!=c["stroke-width"]||null!=c.fill||null!=c.src||null!=c.stroke||null!=c["stroke-width"]||null!=c["stroke-opacity"]||null!=c["fill-opacity"]||null!=c["stroke-dasharray"]||null!=c["stroke-miterlimit"]||null!=c["stroke-linejoin"]||null!=c["stroke-linecap"]){var L=u.getElementsByTagName(l),U=!1;if(L=L&&L[0],!L&&(U=L=D(l)),"image"==n.type&&c.src&&(L.src=c.src),c.fill&&(L.on=!0),(null==L.on||"none"==c.fill||null===c.fill)&&(L.on=!1),L.on&&c.fill){var R=a(c.fill).match(t._ISURL);if(R){L.parentNode==u&&u.removeChild(L),L.rotate=!0,L.src=R[1],L.type="tile";var B=n.getBBox(1);L.position=B.x+p+B.y,n._.fillpos=[B.x,B.y],t._preload(R[1],function(){n._.fillsize=[this.offsetWidth,this.offsetHeight]})}else L.color=t.getRGB(c.fill).hex,L.src=g,L.type="solid",t.getRGB(c.fill).error&&(v.type in{circle:1,ellipse:1}||"r"!=a(c.fill).charAt())&&M(v,c.fill,L)&&(m.fill="none",m.gradient=c.fill,L.rotate=!1)}if("fill-opacity"in c||"opacity"in c){var G=((+m["fill-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+t.getRGB(c.fill).o+1||2)-1);G=s(r(G,0),1),L.opacity=G,L.src&&(L.color="none")}u.appendChild(L);var z=u.getElementsByTagName("stroke")&&u.getElementsByTagName("stroke")[0],K=!1;!z&&(K=z=D("stroke")),(c.stroke&&"none"!=c.stroke||c["stroke-width"]||null!=c["stroke-opacity"]||c["stroke-dasharray"]||c["stroke-miterlimit"]||c["stroke-linejoin"]||c["stroke-linecap"])&&(z.on=!0),("none"==c.stroke||null===c.stroke||null==z.on||0==c.stroke||0==c["stroke-width"])&&(z.on=!1);var F=t.getRGB(c.stroke);z.on&&c.stroke&&(z.color=F.hex),G=((+m["stroke-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+F.o+1||2)-1);var H=.75*(o(c["stroke-width"])||1);if(G=s(r(G,0),1),null==c["stroke-width"]&&(H=m["stroke-width"]),c["stroke-width"]&&(z.weight=H),H&&1>H&&(G*=H)&&(z.weight=1),z.opacity=G,c["stroke-linejoin"]&&(z.joinstyle=c["stroke-linejoin"]||"miter"),z.miterlimit=c["stroke-miterlimit"]||8,c["stroke-linecap"]&&(z.endcap="butt"==c["stroke-linecap"]?"flat":"square"==c["stroke-linecap"]?"square":"round"),"stroke-dasharray"in c){var V={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};z.dashstyle=V[e](c["stroke-dasharray"])?V[c["stroke-dasharray"]]:g}K&&u.appendChild(z)}if("text"==v.type){v.paper.canvas.style.display=g;var W=v.paper.span,j=100,q=m.font&&m.font.match(/\d+(?:\.\d*)?(?=px)/);f=W.style,m.font&&(f.font=m.font),m["font-family"]&&(f.fontFamily=m["font-family"]),m["font-weight"]&&(f.fontWeight=m["font-weight"]),m["font-style"]&&(f.fontStyle=m["font-style"]),q=o(m["font-size"]||q&&q[0])||10,f.fontSize=q*j+"px",v.textpath.string&&(W.innerHTML=a(v.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var Y=W.getBoundingClientRect();v.W=m.w=(Y.right-Y.left)/j,v.H=m.h=(Y.bottom-Y.top)/j,v.X=m.x,v.Y=m.y+v.H/2,("x"in c||"y"in c)&&(v.path.v=t.format("m{0},{1}l{2},{1}",i(m.x*w),i(m.y*w),i(m.x*w)+1));for(var J=["x","y","text","font","font-family","font-weight","font-style","font-size"],Z=0,Q=J.length;Q>Z;Z++)if(J[Z]in c){v._.dirty=1;break}switch(m["text-anchor"]){case"start":v.textpath.style["v-text-align"]="left",v.bbx=v.W/2;break;case"end":v.textpath.style["v-text-align"]="right",v.bbx=-v.W/2;break;default:v.textpath.style["v-text-align"]="center",v.bbx=0}v.textpath.style["v-text-kern"]=!0}},M=function(e,i,r){e.attrs=e.attrs||{};var s=(e.attrs,Math.pow),c="linear",l=".5 .5";if(e.attrs.gradient=i,i=a(i).replace(t._radial_gradient,function(e,a,t){return c="radial",a&&t&&(a=o(a),t=o(t),s(a-.5,2)+s(t-.5,2)>.25&&(t=n.sqrt(.25-s(a-.5,2))*(2*(t>.5)-1)+.5),l=a+p+t),g}),i=i.split(/\s*\-\s*/),"linear"==c){var d=i.shift();if(d=-o(d),isNaN(d))return null}var u=t._parseDots(i);if(!u)return null;if(e=e.shape||e.node,u.length){e.removeChild(r),r.on=!0,r.method="none",r.color=u[0].color,r.color2=u[u.length-1].color;for(var m=[],f=0,h=u.length;h>f;f++)u[f].offset&&m.push(u[f].offset+p+u[f].color);r.colors=m.length?m.join():"0% "+r.color,"radial"==c?(r.type="gradientTitle",r.focus="100%",r.focussize="0 0",r.focusposition=l,r.angle=0):(r.type="gradient",r.angle=(270-d)%360),e.appendChild(r)}return 1},N=function(e,a){this[0]=this.node=e,e.raphael=!0,this.id=t._oid++,e.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=a,this.matrix=t.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!a.bottom&&(a.bottom=this),this.prev=a.top,a.top&&(a.top.next=this),a.top=this,this.next=null},O=t.el;N.prototype=O,O.constructor=N,O.transform=function(e){if(null==e)return this._.transform;var o,n=this.paper._viewBoxShift,i=n?"s"+[n.scale,n.scale]+"-1-1t"+[n.dx,n.dy]:g;n&&(o=e=a(e).replace(/\.{3}|\u2026/g,this._.transform||g)),t._extractTransform(this,i+e);var r,s=this.matrix.clone(),c=this.skew,l=this.node,d=~a(this.attrs.fill).indexOf("-"),u=!a(this.attrs.fill).indexOf("url(");if(s.translate(1,1),u||d||"image"==this.type)if(c.matrix="1 0 0 1",c.offset="0 0",r=s.split(),d&&r.noRotation||!r.isSimple){l.style.filter=s.toFilter();var m=this.getBBox(),f=this.getBBox(1),h=m.x-f.x,_=m.y-f.y;l.coordorigin=h*-w+p+_*-w,C(this,1,1,h,_,0)}else l.style.filter=g,C(this,r.scalex,r.scaley,r.dx,r.dy,r.rotate);else l.style.filter=g,c.matrix=a(s),c.offset=s.offset();return null!==o&&(this._.transform=o,t._extractTransform(this,o)),this},O.rotate=function(e,t,n){if(this.removed)return this;if(null!=e){if(e=a(e).split(d),e.length-1&&(t=o(e[1]),n=o(e[2])),e=o(e[0]),null==n&&(t=n),null==t||null==n){var i=this.getBBox(1);t=i.x+i.width/2,n=i.y+i.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",e,t,n]])),this}},O.translate=function(e,t){return this.removed?this:(e=a(e).split(d),e.length-1&&(t=o(e[1])),e=o(e[0])||0,t=+t||0,this._.bbox&&(this._.bbox.x+=e,this._.bbox.y+=t),this.transform(this._.transform.concat([["t",e,t]])),this)},O.scale=function(e,t,n,i){if(this.removed)return this;if(e=a(e).split(d),e.length-1&&(t=o(e[1]),n=o(e[2]),i=o(e[3]),isNaN(n)&&(n=null),isNaN(i)&&(i=null)),e=o(e[0]),null==t&&(t=e),null==i&&(n=i),null==n||null==i)var r=this.getBBox(1);return n=null==n?r.x+r.width/2:n,i=null==i?r.y+r.height/2:i,this.transform(this._.transform.concat([["s",e,t,n,i]])),this._.dirtyT=1,this},O.hide=function(){return!this.removed&&(this.node.style.display="none"),this},O.show=function(){return!this.removed&&(this.node.style.display=g),this},O.auxGetBBox=t.el.getBBox,O.getBBox=function(){var e=this.auxGetBBox();if(this.paper&&this.paper._viewBoxShift){var a={},t=1/this.paper._viewBoxShift.scale;return a.x=e.x-this.paper._viewBoxShift.dx,a.x*=t,a.y=e.y-this.paper._viewBoxShift.dy,a.y*=t,a.width=e.width*t,a.height=e.height*t,a.x2=a.x+a.width,a.y2=a.y+a.height,a}return e},O._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},O.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),t.eve.unbind("raphael.*.*."+this.id),t._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null;this.removed=!0}},O.attr=function(a,o){if(this.removed)return this;if(null==a){var n={};for(var i in this.attrs)this.attrs[e](i)&&(n[i]=this.attrs[i]);return n.gradient&&"none"==n.fill&&(n.fill=n.gradient)&&delete n.gradient,n.transform=this._.transform,n}if(null==o&&t.is(a,"string")){if(a==l&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var r=a.split(d),s={},c=0,m=r.length;m>c;c++)a=r[c],a in this.attrs?s[a]=this.attrs[a]:t.is(this.paper.customAttributes[a],"function")?s[a]=this.paper.customAttributes[a].def:s[a]=t._availableAttrs[a];return m-1?s:s[r[0]]}if(this.attrs&&null==o&&t.is(a,"array")){for(s={},c=0,m=a.length;m>c;c++)s[a[c]]=this.attr(a[c]);return s}var p;null!=o&&(p={},p[a]=o),null==o&&t.is(a,"object")&&(p=a);for(var g in p)u("raphael.attr."+g+"."+this.id,this,p[g]);if(p){for(g in this.paper.customAttributes)if(this.paper.customAttributes[e](g)&&p[e](g)&&t.is(this.paper.customAttributes[g],"function")){var f=this.paper.customAttributes[g].apply(this,[].concat(p[g]));this.attrs[g]=p[g];for(var h in f)f[e](h)&&(p[h]=f[h])}p.text&&"text"==this.type&&(this.textpath.string=p.text),x(this,p)}return this},O.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&t._tofront(this,this.paper),this},O.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),t._toback(this,this.paper)),this)},O.insertAfter=function(e){return this.removed?this:(e.constructor==t.st.constructor&&(e=e[e.length-1]),e.node.nextSibling?e.node.parentNode.insertBefore(this.node,e.node.nextSibling):e.node.parentNode.appendChild(this.node),t._insertafter(this,e,this.paper),this)},O.insertBefore=function(e){return this.removed?this:(e.constructor==t.st.constructor&&(e=e[0]),e.node.parentNode.insertBefore(this.node,e.node),t._insertbefore(this,e,this.paper),this)},O.blur=function(e){var a=this.node.runtimeStyle,o=a.filter;return o=o.replace(_,g),0!==+e?(this.attrs.blur=e,a.filter=o+p+m+".Blur(pixelradius="+(+e||1.5)+")",a.margin=t.format("-{0}px 0 0 -{0}px",i(+e||1.5))):(a.filter=o,a.margin=0,delete this.attrs.blur),this},t._engine.path=function(e,a){var t=D("shape");t.style.cssText=y,t.coordsize=w+p+w,t.coordorigin=a.coordorigin;var o=new N(t,a),n={fill:"none",stroke:"#000"};e&&(n.path=e),o.type="path",o.path=[],o.Path=g,x(o,n),a.canvas.appendChild(t);var i=D("skew");return i.on=!0,t.appendChild(i),o.skew=i,o.transform(g),o},t._engine.rect=function(e,a,o,n,i,r){var s=t._rectPath(a,o,n,i,r),c=e.path(s),l=c.attrs;return c.X=l.x=a,c.Y=l.y=o,c.W=l.width=n,c.H=l.height=i,l.r=r,l.path=s,c.type="rect",c},t._engine.ellipse=function(e,a,t,o,n){var i=e.path();return i.attrs,i.X=a-o,i.Y=t-n,i.W=2*o,i.H=2*n,i.type="ellipse",x(i,{cx:a,cy:t,rx:o,ry:n}),i},t._engine.circle=function(e,a,t,o){var n=e.path();return n.attrs,n.X=a-o,n.Y=t-o,n.W=n.H=2*o,n.type="circle",x(n,{cx:a,cy:t,r:o}),n},t._engine.image=function(e,a,o,n,i,r){var s=t._rectPath(o,n,i,r),c=e.path(s).attr({stroke:"none"}),d=c.attrs,u=c.node,m=u.getElementsByTagName(l)[0];return d.src=a,c.X=d.x=o,c.Y=d.y=n,c.W=d.width=i,c.H=d.height=r,d.path=s,c.type="image",m.parentNode==u&&u.removeChild(m),m.rotate=!0,m.src=a,m.type="tile",c._.fillpos=[o,n],c._.fillsize=[i,r],u.appendChild(m),C(c,1,1,0,0,0),c},t._engine.text=function(e,o,n,r){var s=D("shape"),c=D("path"),l=D("textpath");o=o||0,n=n||0,r=r||"",c.v=t.format("m{0},{1}l{2},{1}",i(o*w),i(n*w),i(o*w)+1),c.textpathok=!0,l.string=a(r),l.on=!0,s.style.cssText=y,s.coordsize=w+p+w,s.coordorigin="0 0";var d=new N(s,e),u={fill:"#000",stroke:"none",font:t._availableAttrs.font,text:r};d.shape=s,d.path=c,d.textpath=l,d.type="text",d.attrs.text=a(r),d.attrs.x=o,d.attrs.y=n,d.attrs.w=1,d.attrs.h=1,x(d,u),s.appendChild(l),s.appendChild(c),e.canvas.appendChild(s);var m=D("skew");return m.on=!0,s.appendChild(m),d.skew=m,d.transform(g),d},t._engine.setSize=function(e,a){var o=this.canvas.style;return this.width=e,this.height=a,e==+e&&(e+="px"),a==+a&&(a+="px"),o.width=e,o.height=a,o.clip="rect(0 "+e+" "+a+" 0)",this._viewBox&&t._engine.setViewBox.apply(this,this._viewBox),this},t._engine.setViewBox=function(e,a,o,n,i){t.eve("raphael.setViewBox",this,this._viewBox,[e,a,o,n,i]);var r,s,c=this.getSize(),l=c.width,d=c.height;return i&&(r=d/n,s=l/o,l>o*r&&(e-=(l-o*r)/2/r),d>n*s&&(a-=(d-n*s)/2/s)),this._viewBox=[e,a,o,n,!!i],this._viewBoxShift={dx:-e,dy:-a,scale:c},this.forEach(function(e){e.transform("...")}),this};var D;t._engine.initWin=function(e){var a=e.document;a.styleSheets.length<31?a.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):a.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");try{!a.namespaces.rvml&&a.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),D=function(e){return a.createElement("<rvml:"+e+' class="rvml">')}}catch(t){D=function(e){return a.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},t._engine.initWin(t._g.win),t._engine.create=function(){var e=t._getContainer.apply(0,arguments),a=e.container,o=e.height,n=e.width,i=e.x,r=e.y;if(!a)throw new Error("VML container not found.");var s=new t._Paper,c=s.canvas=t._g.doc.createElement("div"),l=c.style;return i=i||0,r=r||0,n=n||512,o=o||342,s.width=n,s.height=o,n==+n&&(n+="px"),o==+o&&(o+="px"),s.coordsize=1e3*w+p+1e3*w,s.coordorigin="0 0",s.span=t._g.doc.createElement("span"),s.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",c.appendChild(s.span),l.cssText=t.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",n,o),1==a?(t._g.doc.body.appendChild(c),l.left=i+"px",l.top=r+"px",l.position="absolute"):a.firstChild?a.insertBefore(c,a.firstChild):a.appendChild(c),s.renderfix=function(){},s},t.prototype.clear=function(){t.eve("raphael.clear",this),this.canvas.innerHTML=g,this.span=t._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},t.prototype.remove=function(){t.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null;return!0};var I=t.st;for(var P in O)O[e](P)&&!I[e](P)&&(I[P]=function(e){return function(){var a=arguments;return this.forEach(function(t){t[e].apply(t,a)})}}(P))}}(),x.was?T.win.Raphael=t:Raphael=t,"object"==typeof exports&&(module.exports=t),t}),JustGage=function(e){if(!e.id)return alert("Missing id parameter for gauge!"),!1;if(!document.getElementById(e.id))return alert('No element with id: "'+e.id+'" found!'),!1;this.config={id:e.id,title:e.title?e.title:"Title",titleFontColor:e.titleFontColor?e.titleFontColor:"#999999",value:e.value?e.value:0,valueFontColor:e.valueFontColor?e.valueFontColor:"#010101",min:e.min?e.min:0,max:e.max?e.max:100,showMinMax:null!=e.showMinMax?e.showMinMax:!0,gaugeWidthScale:e.gaugeWidthScale?e.gaugeWidthScale:1,gaugeColor:e.gaugeColor?e.gaugeColor:"#edebeb",label:e.label?e.label:"",showInnerShadow:null!=e.showInnerShadow?e.showInnerShadow:!0,shadowOpacity:e.shadowOpacity?e.shadowOpacity:.2,shadowSize:e.shadowSize?e.shadowSize:5,shadowVerticalOffset:e.shadowVerticalOffset?e.shadowVerticalOffset:3,levelColors:e.levelColors?e.levelColors:percentColors,levelColorsGradient:null!=e.levelColorsGradient?e.levelColorsGradient:!0,labelFontColor:e.labelFontColor?e.labelFontColor:"#b3b3b3",startAnimationTime:e.startAnimationTime?e.startAnimationTime:700,startAnimationType:e.startAnimationType?e.startAnimationType:">",refreshAnimationTime:e.refreshAnimationTime?e.refreshAnimationTime:700,refreshAnimationType:e.refreshAnimationType?e.refreshAnimationType:">"},e.value>this.config.max&&(this.config.value=this.config.max),e.value<this.config.min&&(this.config.value=this.config.min),this.originalValue=e.value,this.canvas=Raphael(this.config.id,"100%","100%");var a,t,o=1*getStyle(document.getElementById(this.config.id),"width").slice(0,-2),n=1*getStyle(document.getElementById(this.config.id),"height").slice(0,-2);o/n>1.25?(a=1.25*n,t=n):(a=o,t=o/1.25);var i=(o-a)/2,r=(n-t)/2,s=0,c=i+a/2,l=r+t/6.5,d=0,u=i+a/2,m=r+t/1.4,p=t/16>10?t/16:10,g=i+a/2,f=m+d/2+6,h=t/16>10?t/16:10,_=i+a/10+a/6.666666666666667*this.config.gaugeWidthScale/2,v=r+t/1.126760563380282,y=t/16>10?t/16:10,w=i+a-a/10-a/6.666666666666667*this.config.gaugeWidthScale/2,k=r+t/1.126760563380282;this.params={canvasW:o,canvasH:n,widgetW:a,widgetH:t,dx:i,dy:r,titleFontSize:s,titleX:c,titleY:l,valueFontSize:d,valueX:u,valueY:m,labelFontSize:p,labelX:g,labelY:f,minFontSize:h,minX:_,minY:v,maxFontSize:y,maxX:w,maxY:k},this.canvas.customAttributes.pki=function(e,a,t,o,n,i,r,s){var c,l=(1-(e-a)/(t-a))*Math.PI,d=o/2-o/10,u=d-o/6.666666666666667*s,m=o/2+i,p=n/1.25+r,g=o/2+i+d*Math.cos(l),f=n-(n-p)+r-d*Math.sin(l),h=o/2+i+u*Math.cos(l),_=n-(n-p)+r-u*Math.sin(l);return c+="M"+(m-u)+","+p+" ",c+="L"+(m-d)+","+p+" ",c+="A"+d+","+d+" 0 0,1 "+g+","+f+" ",c+="L"+h+","+_+" ",c+="A"+u+","+u+" 0 0,0 "+(m-u)+","+p+" ",c+="z ",{path:c}},this.gauge=this.canvas.path().attr({stroke:"none",fill:this.config.gaugeColor,pki:[this.config.max,this.config.min,this.config.max,this.params.widgetW,this.params.widgetH,this.params.dx,this.params.dy,this.config.gaugeWidthScale]}),this.gauge.id=this.config.id+"-gauge",this.level=this.canvas.path().attr({stroke:"none",fill:getColorForPercentage((this.config.value-this.config.min)/(this.config.max-this.config.min),this.config.levelColors,this.config.levelColorsGradient),pki:[this.config.min,this.config.min,this.config.max,this.params.widgetW,this.params.widgetH,this.params.dx,this.params.dy,this.config.gaugeWidthScale]}),this.level.id=this.config.id+"-level",this.txtTitle=this.canvas.text(this.params.titleX,this.params.titleY,this.config.title),this.txtTitle.attr({"font-size":this.params.titleFontSize,"font-weight":"bold","font-family":"Arial",fill:this.config.titleFontColor,"fill-opacity":"1"}),this.txtTitle.id=this.config.id+"-txttitle",this.txtValue=this.canvas.text(this.params.valueX,this.params.valueY,this.originalValue),this.txtValue.attr({"font-size":this.params.valueFontSize,"font-weight":"bold","font-family":"Arial",fill:this.config.valueFontColor,"fill-opacity":"0"}),this.txtValue.id=this.config.id+"-txtvalue",this.txtLabel=this.canvas.text(this.params.labelX,this.params.labelY,this.config.label),this.txtLabel.attr({"font-size":this.params.labelFontSize,"font-weight":"normal","font-family":"Arial",fill:this.config.labelFontColor,"fill-opacity":"0"}),this.txtLabel.id=this.config.id+"-txtlabel",this.txtMin=this.canvas.text(this.params.minX,this.params.minY,this.config.min),this.txtMin.attr({"font-size":this.params.minFontSize,"font-weight":"normal","font-family":"Arial",fill:this.config.labelFontColor,"fill-opacity":1==this.config.showMinMax?"1":"0"}),this.txtMin.id=this.config.id+"-txtmin",this.txtMax=this.canvas.text(this.params.maxX,this.params.maxY,this.config.max),this.txtMax.attr({"font-size":this.params.maxFontSize,"font-weight":"normal","font-family":"Arial",fill:this.config.labelFontColor,"fill-opacity":1==this.config.showMinMax?"1":"0"}),this.txtMax.id=this.config.id+"-txtmax";var b=this.canvas.canvas.childNodes[1],S="http://www.w3.org/2000/svg";9>ie?onCreateElementNsReady(function(){this.generateShadow()}):this.generateShadow(S,b),this.level.animate({pki:[this.config.value,this.config.min,this.config.max,this.params.widgetW,this.params.widgetH,this.params.dx,this.params.dy,this.config.gaugeWidthScale]},this.config.startAnimationTime,this.config.startAnimationType),this.txtValue.animate({"fill-opacity":"1"},this.config.startAnimationTime,this.config.startAnimationType),this.txtLabel.animate({"fill-opacity":"1"},this.config.startAnimationTime,this.config.startAnimationType)},JustGage.prototype.refresh=function(e){originalVal=e,e>this.config.max&&(e=this.config.max),e<this.config.min&&(e=this.config.min);var a=getColorForPercentage((e-this.config.min)/(this.config.max-this.config.min),this.config.levelColors,this.config.levelColorsGradient);this.canvas.getById(this.config.id+"-txtvalue").attr({text:originalVal}),this.canvas.getById(this.config.id+"-level").animate({pki:[e,this.config.min,this.config.max,this.params.widgetW,this.params.widgetH,this.params.dx,this.params.dy,this.config.gaugeWidthScale],fill:a},this.config.refreshAnimationTime,this.config.refreshAnimationType)};var percentColors=["#a9d70b","#f9c802","#ff0000"];JustGage.prototype.generateShadow=function(e,a){var t=document.createElementNS(e,"filter");t.setAttribute("id",this.config.id+"-inner-shadow"),a.appendChild(t);var o=document.createElementNS(e,"feOffset");o.setAttribute("dx",0),o.setAttribute("dy",this.config.shadowVerticalOffset),t.appendChild(o);var n=document.createElementNS(e,"feGaussianBlur");n.setAttribute("result","offset-blur"),n.setAttribute("stdDeviation",this.config.shadowSize),t.appendChild(n);var i=document.createElementNS(e,"feComposite");i.setAttribute("operator","out"),i.setAttribute("in","SourceGraphic"),i.setAttribute("in2","offset-blur"),i.setAttribute("result","inverse"),t.appendChild(i);var r=document.createElementNS(e,"feFlood");r.setAttribute("flood-color","black"),r.setAttribute("flood-opacity",this.config.shadowOpacity),r.setAttribute("result","color"),t.appendChild(r);var s=document.createElementNS(e,"feComposite");s.setAttribute("operator","in"),s.setAttribute("in","color"),s.setAttribute("in2","inverse"),s.setAttribute("result","shadow"),t.appendChild(s);var c=document.createElementNS(e,"feComposite");c.setAttribute("operator","over"),c.setAttribute("in","shadow"),c.setAttribute("in2","SourceGraphic"),t.appendChild(c),1==this.config.showInnerShadow&&(this.canvas.canvas.childNodes[2].setAttribute("filter","url(#"+this.config.id+"-inner-shadow)"),this.canvas.canvas.childNodes[3].setAttribute("filter","url(#"+this.config.id+"-inner-shadow)"))};var getColorForPercentage=function(e,a,t){var o=a.length;if(1===o)return a[0];for(var n=t?1/(o-1):1/o,i=new Array,r=0;r<a.length;r++){var s=t?n*r:n*(r+1),c=parseInt(cutHex(a[r]).substring(0,2),16),l=parseInt(cutHex(a[r]).substring(2,4),16),d=parseInt(cutHex(a[r]).substring(4,6),16);i[r]={pct:s,color:{r:c,g:l,b:d}}}if(0==e)return"rgb("+[i[0].color.r,i[0].color.g,i[0].color.b].join(",")+")";for(var r=0;r<i.length;r++)if(e<=i[r].pct){if(1==t){var u=i[r-1],m=i[r],p=m.pct-u.pct,g=(e-u.pct)/p,f=1-g,h=g,_={r:Math.floor(u.color.r*f+m.color.r*h),g:Math.floor(u.color.g*f+m.color.g*h),b:Math.floor(u.color.b*f+m.color.b*h)};return"rgb("+[_.r,_.g,_.b].join(",")+")"}return"rgb("+[i[r].color.r,i[r].color.g,i[r].color.b].join(",")+")"}},ie=function(){for(var e,a=3,t=document.createElement("div"),o=t.getElementsByTagName("i");t.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->",o[0];);return a>4?a:e}();define("justgage",function(){}),app.service("$store",["$location","$rootScope",function(e,a){var t="x-yz-authtoken-"+e.host(),o="x-yz-tempauthtoken-"+e.host(),n=Intercom.getInstance(),i="intercom_"+(new Date).getTime()*(100*Math.random()+1);n.on("notice-logout",function(a){console.log(a.message),document.cookie="display_language=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;",location.href=e.path()}),n.on("notice-login",function(a){console.log(a.message);var t=e.search();t&&(t._return||t._n)||a.currenttab&&i==a.currenttab||(location.href=e.path())});var r=288e5;return a.$on("SC_CONFIG_LOADED",function(){console.log("sc $rootScope.config"),r=a.config.temporary_timeout_session}),{getAllValues:function(){return amplify.store()},getToken:function(){var e=amplify.store(t);if(e)this.setToken(e);else{var a=this.getValue("currentUser");a&&a.id&&this.setValue("currentUser",{})}return e||!1},setToken:function(e,a){var o=24192e5;a&&a.expires&&(o=a.expires);var n={expires:o};amplify.store(t,e,n)},extendExpiry:_.debounce(function(e){e=e||24192e5,console.info("[store.extendExpiry] extending expiry time by "+e+" milliseconds...");var a={expires:e},t=amplify.store();for(var o in t)amplify.store(o,t[o],a)},5e3),getTempToken:function(){var e=amplify.store(o);if(e)this.setTempToken(e);else{var a=this.getValue("tempUser");a&&a.id&&this.setValue("tempUser",{})}return e||!1},setTempToken:function(e,a){var t=288e5;r&&(t=r),a&&a.expires&&(t=a.expires);var n={expires:t};amplify.store(o,e,n)},setValue:function(a,t,o){var r=this.getValue("currentUser"),s={};o&&o.expires&&(s={expires:o.expires}),amplify.store(e.host()+"-"+a,t,s),"currentUser"==a&&(t&&t.id?r&&r.id&&r.id==t.id||n.emit("notice-login",{message:"login",currenttab:i}):n.emit("notice-logout",{message:"logout",currenttab:i}))},getValue:function(a){return amplify.store(e.host()+"-"+a)||""},setSessionValue:function(a,t,o){amplify.store.sessionStorage(e.host()+"-session-"+a,t,o)},getSessionValue:function(a){return amplify.store.sessionStorage(e.host()+"-session-"+a)||""}}}]),define("storage.service",function(){}),app.service("$dataService",["$http","$rootScope","$store","$window","$popupService","$timeout",function(e,a,t,o,n,i){return{setcsrfToken:function(e){},setHeader:function(a,t){t?e.defaults.headers.common[a]=t:delete e.defaults.headers.common[a]},setNetworkShortcutHeader:function(a){a?e.defaults.headers.common["current-network-shortcut"]=a:delete e.defaults.headers.common["current-network-shortcut"]},get:function(r,s,c){function l(){var e=-1;if("Microsoft Internet Explorer"==o.navigator.appName){var a=o.navigator.userAgent,t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=t.exec(a)&&(e=parseFloat(RegExp.$1))}else if("Netscape"==o.navigator.appName){var a=o.navigator.userAgent,t=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})");null!=t.exec(a)&&(e=parseFloat(RegExp.$1))}return 11==e}var d={headers:{}};if(c&&(d.headers["x-yz-api-ver"]=c),d.headers["x-yz-authtoken"]=t.getToken()||t.getTempToken(),l()){console.log("Config navigator isIE11 true ");var u=-1===r.indexOf("?")?"?":"&";r=r+u+"ts="+(new Date).getTime()}var m=t.getTempToken();t.getToken()&&(m=t.getToken()),e.get(r,d).success(function(e,o){console.log("dataService GET response for %s",r);var c=e,l=e.status;return!e||(200==o&&(a.comm_busy=!1),!e.status||"SESSION_EXPIRED"!=e.status.code&&"SESSION_INVALID"!=e.status.code&&"AUTH_NOT_FOUND"!=e.status.code||!m||m!=t.getToken()&&m!=t.getTempToken())?s(l,c):("SESSION_EXPIRED"==e.status.code&&n.showAutoMessage($("#session-expired-message:first").text(),5e3),"SESSION_INVALID"==e.status.code&&n.showAutoMessage($("#session-invalid-message:first").text(),5e3),"AUTH_NOT_FOUND"==e.status.code&&n.showAutoMessage($("#auth-not-found-message:first").text(),5e3),void i(function(){t.setValue("currentUser",""),t.setValue("tempUser",""),t.setToken(""),t.setTempToken(""),a.authToken="",a.currentUser={},a.tempUser={}},5e3))}).error(function(e,t){var o={code:"error",message:t};return a.comm_busy=!1,s(o,t)})},post:function(o,r,s,c){var l={headers:{}},d=t.getTempToken();t.getToken()&&(d=t.getToken()),void 0!=c&&""!=c&&(l.headers["x-yz-api-ver"]=c),l.headers["x-yz-authtoken"]=d,console.log("apiService POST to %s",o),console.log("apiService options %s",l),console.log("apiService fields %s",r),a.comm_busy=!0,o+=o.indexOf("?")>-1?"&ts="+(new Date).getTime():"?ts="+(new Date).getTime(),e.post(o,r,l).success(function(e,r){console.log("dataService POST response for %s",o),console.log(e),console.log(r);var c=e,l=e.status;return a.comm_busy=!1,e&&e.status&&"SESSION_EXPIRED"==e.status.code?void(!d||d!=t.getToken()&&d!=t.getTempToken()||(n.showAutoMessage($("#session-expired-message:first").text(),5e3),i(function(){a.authToken="",a.currentUser={},a.tempUser={},t.setValue("currentUser",""),t.setValue("tempUser",""),t.setToken(""),t.setTempToken("")},5e3))):s(l,c)}).error(function(e,t){return a.comm_busy=!1,s(!0,t,e)})}}}]),app.service("$apiService",["$rootScope","$dataService","$store","$q",function(e,a,t,o){var n=function(t){var i=o.defer(),r=0,s="?t="+(new Date).getTime();return a.get(e.fs_cdn_url_vd+"mashups/"+t.code+"/"+t.topic+"/"+t.lang+".json"+s,function(e,a){if(e&&404==e.message&&!r){r=1,t.lang="en-US";var o=n(t);return void o.then(function(e){i.resolve(e)},function(e){i.resolve(e)})}i.resolve(a)}),i.promise},i=function(e){console.log("Before exclusion",e);var a=[],t="ads";return angular.forEach(e,function(e,o){e.type!==t&&(!_.isUndefined(e.post.privateData)&&null!==e.post.privateData&&e.post.privateData.isReported||a.push(e))}),console.log("After exclusion",a),e};return{setcsrfToken:function(e){a.setcsrfToken(e)},setHeader:function(e,t){a.setHeader(e,t)},setNetworkShortcutHeader:function(e){a.setNetworkShortcutHeader(e)},fetchShortCodeUrl:function(e,t){a.get("/api/socialcommerce/fetchShortCodeUrl/"+e,function(e,a){return t(!1,a)})},getUrlRedirect:function(e,t){a.get("/api/socialcommerce/getUrlRedirect?shortcut="+e,function(e,a){return t(!1,a)})},systemSettings:{list:function(e,t){a.get("/api/management/system/setting/list",function(e,a){return t(!1,a)})}},search:{getSearch:function(e,t,o,n,i,r){e=arguments[0],t=arguments[1],o=arguments[2],n=arguments[3],i=arguments[4],r=arguments[arguments.length-1];var s="?";e===!1&&(e="all"),"hashtag"==e&&(t='"'+t+'"',e="tags"),arguments.length>5&&i&&i.excludeFollowedUsers&&(s+="&excludeFollowedUsers="+i.excludeFollowedUsers),a.get(dataUrl.search.getSearch+"/"+t+"/"+e+"/"+o+"/"+n+s,function(e,a){var t=[];if(a.tiles.length>0)for(var o in a.tiles)t.push(a.tiles[o]);var n={tiles:t,current_total_results:a.tiles.length,total_results:a.total_results};return r(!1,n)})},getSearchWithinNetwork:function(e,t,o,n,i){a.get("/api/search/"+e+"/withinnetwork/"+t+"/"+o+"/"+n,function(e,a){var t=[];if(a.tiles.length>0)for(var o in a.tiles)t.push(a.tiles[o]);var n={tiles:t,current_total_results:a.tiles.length,total_results:a.total_results};return i(!1,n)})},getSearchCelebrities:function(e,t,o,n,i){a.get("/api/search/"+e+"/celebrities/"+t+"/"+o+"/"+n,function(e,a){var t=[];if(a.tiles.length>0)for(var o in a.tiles)t.push(a.tiles[o]);var n={tiles:t,current_total_results:a.tiles.length,total_results:a.total_results};return i(!1,n)})},getPlatformGroupSearch:function(e,t,o,n,i){a.get("/api/search/platformGrouped/"+e+"/"+t+"/"+o+"/"+n,function(e,a){
return i(!1,a)})},getSearchPlatformGrouped:function(e,t){a.get("/api/search/searchPlatformGrouped?query="+e.query+"&group="+e.group+"&page="+e.page+"&count="+e.count,function(e,a){return t(!1,a)},"1.1")}},visualcaptcha:{"try":function(t,o){return e.config.feature_locks.enable_captcha?void a.post("/api/captcha/try",t,function(e,a){return o(!1,a)}):o(!0,t)}},auth:{requestToken:function(e){a.get("/api/3rdparty/requestToken",function(a,t){return e(!1,t)})}},virtualcurrency:{getVoucherList:function(e,t,o){e||(e=1),t||(t=10),a.get("/api/user/listVouchers?page="+e+"&limit="+t,function(e,a){return o(!1,a)})},purchaseVoucher:function(e,t){var o={value:e};console.log("POSTING purchaseVoucher",o),a.post("/api/user/purchaseVoucher",o,function(e,a){return t(!1,a)})},getPackages:function(e,t){e.page||(e.page=1),e.count||(e.count=10);var o="?page="+e.page+"&count="+e.count;a.get("/api/virtualcurrency/listPackages/"+o,function(e,a){return t(!1,a)})},purchaseTopUp:function(e,t){a.post("/api/virtualcurrency/topUp",e,function(e,a){return t(!1,a)})},getInvoicesDetails:function(e,t){e.uuid||(e.uuid=""),a.get("/api/socialcommerce/getInvoiceDetails/"+e.uuid,function(e,a){return t(!1,a)})}},user:{getListCompetitionsForNetworkOwner:function(e,t){e.page||(e.page=1),e.count||(e.count=10);var o="page="+e.page+"&count="+e.count+(void 0!=e.status?"&status="+e.status:"");a.get("/api/network/listCompetitionsForNetworkOwner?"+o,function(e,a){return t(!1,a)})},updateCompetition:function(e,t,o){a.post("/api/network/updateCompetition/"+e,t,function(e,a){return o(!1,a)})},fecthCompetition:function(e,t,o){t.leaderBoardLimit||(t.leaderBoardLimit=10),t.contestantsLimit||(t.contestantsLimit=8);var n="?leaderBoardLimit="+t.leaderBoardLimit+"&contestantsLimit="+t.contestantsLimit;a.get("/api/network/fetchCompetition/"+e+n,function(e,a){return o(!1,a)})},listContestants:function(e,t,o){t.page||(t.page=1),t.count||(t.count=10);var n="?page="+t.page+"&count="+t.count+(t.status?"&status="+t.status:"");a.get("/api/network/listContestants/"+e+n,function(e,a){return o(!1,a)})},approveRejectContestant:function(e,t){a.post("/api/network/approveRejectContestant/",e,function(e,a){return t(!1,a)})},createCompetition:function(e,t){a.post("/api/network/createCompetition/",e,function(e,a){return t(!1,a)})},purchaseSuccess:function(e,t){var o={networkShortcut:e};a.post("/api/user/onPurchaseSuccess",o,function(e,a){return t(!1,a)})},login:function(o,n,i,r,s,c){var l=CryptoJS.SHA1(n),d=l.toString(CryptoJS.enc.Hex),u={password:d,ref_network_id:i,ref_user_id:r,mobile_country_code:s.mobile_country_code};e.config.platform_feature.phone_auth&&-1===o.indexOf("@")?u.mobile_number=o:u.email_address=o,s&&s.referral_code&&(u.referral_code=s.referral_code),console.log("logging in..."),console.log(u),a.post("/api/user/auth/login",u,function(a,o){return console.log("success!"),console.log(o),t.setToken(o.authToken),e.authToken=o.authToken,t.setTempToken(""),t.setValue("tempUser",""),t.setValue("finished_signup_game_id",""),t.setValue("landing_game_coupon",""),c(!1,o)})},fetchLoginSocialNetwork:function(e,t){a.get("/api/user/auth/profile/getConnectedSources/"+e,function(e,a){return t(!1,a)})},iahconnect:function(o,n,i,r,s){var c={username:o,password:n,ref_network_id:i,ref_user_id:r};console.log("iah connecting in..."),console.log(c),a.post("/auth/iahgames",c,function(a,o){return console.log("success!"),console.log(o),t.setToken(o.authToken),e.authToken=o.authToken,s(!1,o)})},logout:function(e){a.get("/api/user/auth/logout",function(a,t){return e(!1,t)})},verifyToken:function(e,t){a.get("/api/user/auth/verify?token="+e,function(e,a){return t(!1,a.profile)})},register:function(o,n,i,r,s,c,l,d,u,m,p,g,f,h,_,v){var y=CryptoJS.SHA1(n),w=y.toString(CryptoJS.enc.Hex),k={password:w,ref_network_id:u,ref_user_id:m};e.config.feature_locks.user_agreement&&(k.tnc_agreement=g?1:3),s&&(k.realname=r,k.sns_id=s,k.dob_year=c,k.dob_month=l,k.dob_day=d),e.config.platform_feature.phone_email_auth||e.config.platform_feature.phone_auth&&-1===o.indexOf("@")?(k.mobile_number=o,k.mobile_country_code=_):k.email_address=o,e.config.platform_feature.phone_email_auth&&(k.email_address=o,k.mobile_number=h),p&&(k.ref_code=p),f&&(f.referral_code&&(k.referral_code=f.referral_code),(f.first_name||f.last_name)&&(k.first_name=f.first_name,k.last_name=f.last_name)),console.log("registering..."),console.log(k),console.log(dataUrl.auth.register),delete k.ref_user_id,delete k.ref_network_id,e.config.platform_feature.phone_email_auth?a.post(dataUrl.auth.registerWithOTP,k,function(a,o){return o.status.success&&(t.setToken(o.authToken),e.authToken=o.authToken,t.setTempToken(""),t.setValue("tempUser",""),t.setValue("finished_signup_game_id","")),v(!1,o)}):a.post(dataUrl.auth.register,k,function(a,o){return o.status.success&&(t.setToken(o.authToken),e.authToken=o.authToken,t.setTempToken(""),t.setValue("tempUser",""),t.setValue("finished_signup_game_id","")),v(!1,o)})},forgotpassword:function(e,t){var o={email_address:e};a.post(dataUrl.auth.forgotpassword,o,function(e,a){return t(!1,a)})},setTourValue:function(e,t,o){a.post(dataUrl.user.setTourValue+"/"+t,{tourStatus:e},function(e,a){return o(!1,a)})},resetpassword:function(e,t,o){var n=CryptoJS.SHA1(t),i=n.toString(CryptoJS.enc.Hex),r={newpassword:i,resetpassword_key:e};a.post(dataUrl.auth.resetpassword,r,function(e,a){return o(!1,a)})},confirmEmail:function(e,t){var o={confirmationKey:e};a.post("/api/user/auth/confirmemail",o,function(e,a){return t(!1,a)})},resendConfirmEmail:function(e,t){var o={emailAddress:e};a.post("/api/user/auth/resendconfirmemail",o,function(e,a){return t(!1,a)})},checkPermission:function(e,t,o){a.get("/api/user/hasUserPermission/"+e+"/"+t,function(e,a){return o(!1,a)})},profile:function(e,t){var o="?t="+(new Date).getTime();a.get(dataUrl.user.getProfile+"/"+e+o,function(e,a){return t(!1,a)})},profileByAuthToken:function(e,t){"?t="+(new Date).getTime();a.get("/api/user/auth/profile/authtoken/"+e,function(e,a){return t(!1,a)})},profileByEmail:function(e,t){"?t="+(new Date).getTime();a.get("/api/user/profile/email/"+e,function(e,a){return t(!1,a)})},profileByMobileNumber:function(e,t){"?t="+(new Date).getTime();a.get("/api/user/profile/mobilenumber/"+e,function(e,a){return t(!1,a)})},profileByAuthTokenOther:function(e,t,o){var n=("?t="+(new Date).getTime(),0);t&&(n=1),console.log("profileByAuthToken--"),a.get("/api/user/profile/authtoken/"+e+"?isEncrypted="+n,function(e,a){return console.log("============="),o(!1,a)})},getmessagecount:function(e,t){a.get(dataUrl.user.getProfile+"/"+e+"/getmessagecount",function(e,a){return t(!1,a)})},getCalendar:function(e,t,o,n){a.get("/api/user/calendar/"+e+"/"+t+"/"+o,function(e,a){return n(!1,a)})},newsfeeds_articles:function(e,t,o,n,i,r){o||(o="");var s="?page="+n+"&count="+i;a.get("/api/user/"+e+"/newsfeeds/network/"+t+"/"+o+s,function(e,a){return r(!1,a)})},newsfeeds:function(e,t,o,n,i,r){var s="?network_page="+t+"&network_count="+o+"&page="+n+"&count="+i;a.get("/api/user/"+e+"/newsfeeds"+s,function(e,a){return r(!1,a)})},fetchNewsfeeds:function(e,t,o){var n=5,i=1,r="?page="+e+"&count="+t+"&commentSize="+n+"&retComment="+i;a.get("/api/user/fetchNewsFeed"+r,function(e,a){return o(!1,a)})},getFollowingNetworks:function(e,t,o,n){var i="/api/user/getFollowingNetworks/"+e+"?page="+t+"&count="+o;a.get(i,function(e,a){return n(!1,a)})},getNetworkWallPosts:function(e,t,o,n,i,r){var s="/api/articles/article-wall-collection/"+e+"/wall?page="+t+"&count="+o+"&lastComment="+n+"&tag="+i;a.get(s,function(e,a){return r(!1,a)})},pinboard:function(e,t,o,n,i){var r="?page="+o+"&count="+n;a.get("/api/articles/article-favourite/"+e+"/"+t+r,function(e,a){return i(!1,a)})},networks:function(e,t,o,n){var i="?page="+t+"&count="+o;a.get(dataUrl.user.getNetworks+"/"+e+i,function(e,a){return n(!1,a)})},followersNotInNetwork:function(e,t,o,n,i){var r="?network="+t+"&page="+o+"&count="+n;a.get(dataUrl.user.getFollowersNotInNetwork+"/"+e+r,function(e,a){return i(!1,a)})},followers:function(e,t,o,n){var i="?page="+t+"&count="+o;a.get(dataUrl.user.getFollowers+"/"+e+i,function(e,a){return n(!1,a)})},following:function(e,t,o,n){var i="?page="+t+"&count="+o;a.get(dataUrl.user.getFollowing+"/"+e+i,function(e,a){return n(!1,a)})},gallery:function(t,o,n,r,s){var c=0;e.currentUser&&e.currentUser.id&&(c=1);var l="?page="+o+"&count="+n+"&tag="+r+"&ignoreReported="+c;a.get("/api/user/"+t+"/gallery"+l,function(e,a){return a.tiles=i(a.tiles),s(!1,a)})},platform:function(e,t){console.log("platform api service called "+dataUrl.user.getPlatform);var o="?ts="+(new Date).getTime();a.get(dataUrl.user.getPlatform+o,function(e,a){return console.log("platform api service got data",a),t(!1,a)})},getTransactionHistory:function(o){a.get("/api/user/vcLedger",function(a,n){return n.user&&(console.log("updating txn userprofile.."),angular.extend(e.currentUser,n.user),t.setValue("currentUser",e.currentUser)),o(!1,n)})},followUser:function(e,t){a.post(dataUrl.user.followUser+"/"+e,!1,function(e,a){return t(!1,a)})},unFollowUser:function(e,t){a.post(dataUrl.user.unFollowUser+"/"+e,!1,function(e,a){return t(!1,a)})},cropProfilePhoto:function(e,t){var o={x:e.x,y:e.y,width:e.width,height:e.height,fsRef:e.fsRef};a.post("/api/media/cropandresize",o,function(e,a){return t(!1,a)})},updateProfile:function(e,t,o){var n=t.id,i={email_address:t.emailAddress,first_name:t.first_name,last_name:t.last_name,gender:t.gender,country:t.country,charity_id:t.charity_id,language:t.display_language,shortcut:t.shortcut,dob_year:t.dob_year,dob_month:t.dob_month,dob_day:t.dob_day,theme:t.theme,additional_info:t.additional_info,email_notification_frequency:t.email_notification_frequency,tour_enabled:t.tour_enabled,contact_number:t.contact_number,shipping_addresses:JSON.stringify(t.shipping_addresses),activity_notification:t.activity_notification,mobile_number:t.mobile_number};t.sns_id&&t.realname&&(i.sns_id=t.sns_id,i.realname=t.realname),a.post(dataUrl.user.updateProfile+"/"+n,i,function(e,a){return o(!1,a)})},updateProfilePassword:function(e,t){var o=(e.shortcut,e.id),n=CryptoJS.SHA1(e.currentpassword),i=n.toString(CryptoJS.enc.Hex),r=CryptoJS.SHA1(e.newpassword),s=r.toString(CryptoJS.enc.Hex),c={};c.current_password=i,c.password=s,a.post(dataUrl.user.updateProfile+"/"+o,c,function(e,a){return t(!1,a)})},updateProfileMobile:function(e,t){var o=(e.shortcut,e.id),n={mobile_number:e.mobile_number,mobile_country_code:e.selected_country_code};a.post("/api/user/updateUserMobile/"+o,n,function(e,a){return t(!1,a)})},updateProfilePhoto:function(t,o){var n=(t.shortcut,t.id),i={profile_photo_fsref:t.profilePhotoUrl};e.config.cdn_url&&(i.profile_photo_fsref=i.profile_photo_fsref.split(e.config.cdn_url).join("")),a.post(dataUrl.user.updateProfile+"/"+n,i,function(e,a){return o(!1,a)})},updateTnCAgreement:function(e,t){var o={tnc_agreement:e};a.post("/api/user/updateTnCAgreement",o,function(e,a){return t(!1,a)})},getMutualFollowers:function(e,t,o,n){t||(t=""),o||(o="");var i="?page="+t+"&count="+o;a.get("/api/user/getMutualFollowers/"+e+i,function(e,a){return n(!1,a)})},getThemes:function(e){a.get("/api/user/themes",function(a,t){return e(!1,t)})},getInbox:function(e,t,o,n,i,r,s,c,l){n||(n=1),i||(i=30),o||(o=""),r||(r=0),s||(s=0),c||(c=0),a.get("/api/inbox/list/"+e+"/"+t+"?filter="+o+"&page="+n+"&count="+i+"&retComment="+r+"&commentSize="+s+"&retParticipant="+c,function(e,a){return l(!1,a)})},getMessageReplies:function(e,t,o,n,i){e=arguments[0],t=arguments[1],o=arguments[2],n=arguments[3],i=arguments[arguments.length-1],t||(t=1),o||(o=30);var r="?page="+t+"&count="+o;arguments.length>4&&n&&n.markAsRead&&(r+="&markAsRead="+n.markAsRead),a.get("/api/articles/article-comments/"+e+r,function(e,a){return i(!1,a)})},getMessageParticipants:function(e,t){a.get("/api/inbox/getParticipants/"+e,function(e,a){return t(!1,a)})},createMessage:function(e,t){var o={recipients:e.participants,message_body:e.message_text,"private":"private"==e.type?1:0};e.subject&&(o.message_title=e.subject),e.attachments&&(o.attachments=e.attachments),e.isInitialMessage&&(o.isInitialMessage=e.isInitialMessage),a.post("/api/inbox/createNewMessage",o,function(e,a){return t(!1,a)})},replyMessage:function(e,t,o,n){var i={article_id:e,reply_body:t};o&&(i.attachments=o),a.post("/api/inbox/replyMessage",i,function(e,a){return n(!1,a)})},addParticipant:function(e,t,o){var n={participant_id:t};a.post("/api/inbox/addParticipant/"+e,n,function(e,a){return o(!1,a)})},addMoreParticipant:function(e,t,o){var n={participant_ids:t};a.post("/api/inbox/addMultipleParticipants/"+e,n,function(e,a){return o(!1,a)})},removeParticipant:function(e,t,o){var n={participant_id:t,action:"remove"};a.post("/api/inbox/removeParticipant/"+e,n,function(e,a){return o(!1,a)})},markAsUnread:function(e,t){a.post("/api/inbox/markAsUnread/"+e,{},function(e,a){return t(!1,a)})},markAsRead:function(e,t){a.post("/api/inbox/markAsRead/"+e,{},function(e,a){return t(!1,a)})},removeGroupMessage:function(e,t){a.post("/api/inbox/removeGroupMessage/"+e,{},function(e,a){return t(!1,a)})},leaveGroupMessage:function(e,t){a.post("/api/inbox/leaveAsParticipant/"+e,{},function(e,a){return t(!1,a)})},sendSupport:function(e,t){var o={name:e.contact_name,emailAddress:e.contact_email,contactNo:e.contact_number,query:e.detail};a.post("/api/user/supportEmail",o,function(e,a){return t(!1,a)})},getArticleComments:function(e,t,o,n){var i="?page="+t+"&count="+o+"&ts="+(new Date).getTime();a.get("/api/articles/article-comments/"+e+i,function(e,a){return n(!1,a)})},getAnnouncementList:function(e,t,o,n){var i="?page="+t+"&count="+o;a.get("/api/announcement/listAnnouncements/"+e+i,function(e,a){return n(!1,a)})},getAnnouncement:function(e,t,o,n){var i="?page="+t+"&count="+o;a.get("/api/announcement/getAnnouncementbyId/"+e+i,function(e,a){return n(!1,a)})},markReadUnreadAnnouncement:function(e,t,o){var n={announcement_id:e,action:t};a.post("/api/announcement/markReadUnreadAnnouncement",n,function(e,a){return o(!1,a)})},commentOnAnnouncement:function(e,t,o,n){var i={announcement_id:e,content:t,attachments:o?o:0};a.post("/api/announcement/commentOnAnnouncement",i,function(e,a){return n(!1,a)})},removeAnnouncementComment:function(e,t){var o={announcement_Comment_id:e};a.post("/api/announcement/removeAnnouncementComment",o,function(e,a){return t(!1,a)})},inviteToNetwork:function(e,t,o,n){var i={userIds:e,networkId:t};o&&(i.text=o),domainName="?domainName="+location.host,a.post("/api/user/inviteToNetwork"+domainName,i,function(e,a){return n(!1,a)})},acceptRejectInvitation:function(e,t,o,n,i,r){var s={inviter_user_id:e,article_id:t,networkId:o,action:n,source:i};a.post("/api/user/acceptRejectInvitation",s,function(e,a){return r(!1,a)})},linkIAH:function(e,t){a.post("/api/user/linkIAH",e,function(e,a){return t(!1,a)})},createIAH:function(e,t){a.post("/api/user/createIAH",e,function(e,a){return t(!1,a)})},fetchNotifications:function(e){a.get("/api/user/activityFeed",function(a,t){return e(!1,t)})},updateNotificationRead:function(e,t){a.post("/api/user/updateFeedRead",{feed_id:e},function(e,a){return t(!1,a)})},updateMultipleFeedsRead:function(e,t){a.post("/api/user/updateMultipleFeedsRead",{feed_ids:e},function(e,a){return t(!1,a)})},updateActivityTimestamp:function(e,t){a.post("/api/user/updateActivityTimestamp/"+e,{},function(e,a){return t(!1,a)})},resendVerificationCode:function(e,t){a.post("/api/user/auth/resendVerificationCode",{mobile_number:e.mobile_number,mobile_country_code:e.mobile_country_code.replace("+","")},function(e,a){return t(!1,a)})},verifysms:function(e,t){a.post("/api/user/auth/verifysms",{code:e},function(e,a){return t(!1,a)})},resetPasswordSMS:function(e,t,o){a.post("/api/user/auth/resetPasswordSMS",{mobile_number:e,mobile_country_code:t},function(e,a){return o(!1,a)})},completeResetPasswordSMS:function(e,t,o){var n=CryptoJS.SHA1(t),i=n.toString(CryptoJS.enc.Hex),r={newpassword:i,resetpassword_key:e};a.post("/api/user/auth/completeResetPasswordSMS",r,function(e,a){return o(!1,a)})},authconnect:function(e,t){a.post("/auth/authconnect",e,function(e,a){return t(!1,a)})},requestCampaignReferralCode:function(e,t){a.post("/api/user/requestCampaignReferralCode",e,function(e,a){return t(!1,a)})},fetchCampaignByReferralCode:function(e,t){a.get("/api/user/fetchCampaignByReferralCode/"+e.campaign_code,function(e,a){return t(!1,a)})},updateUserFlowStatus:function(e,t){a.post("/api/user/updateUserFlowStatus",e,function(e,a){return t(!1,a)})},autoFolloNetworkByReferralCode:function(e,t){a.post("/api/user/auth/autoFolloNetworkByReferralCode",e,function(e,a){return t(!1,a)})},profileById:function(e,t){a.get("/api/user/profile/detailed/id/"+e,function(e,a){return t(!1,a)})},buddylist:function(e,t){a.get("/api/chat/user/buddylist/"+e,function(e,a){return t(!1,a)},"1.1")},chatlist:function(e,t){a.get("/api/chat/user/chatlist/"+e,function(e,a){return t(!1,a)},"1.1")},updateMessage:function(e,t,o){a.post("/api/inbox/updateRemoveArticles/"+e,t,function(e,a){return o(!1,a)})}},competition:{voteForContestant:function(e,t,o){a.post("/api/competition/voteForContestant/"+e,t,function(e,a){return o(!1,a)})},fecthCompetition:function(e,t,o){t.leaderBoardLimit||(t.leaderBoardLimit=10),t.contestantsLimit||(t.contestantsLimit=10);var n="?leaderBoardLimit="+t.leaderBoardLimit+"&contestantsLimit="+t.contestantsLimit;a.get("/api/competition/fetchCompetition/"+e+n,function(e,a){return o(!1,a)})},listCompetitions:function(e,t){e="All"==e?"":"?filter="+e,a.get("/api/competition/listCompetitions"+e,function(e,a){return t(!1,a)})},listContestants:function(e,t,o){t.page||(t.page=1),t.count||(t.count=10);var n="?page="+t.page+"&count="+t.count+"&sort=votes"+(t.status?"&status="+t.status:"");a.get("/api/competition/listContestants/"+e+n,function(e,a){return o(!1,a)})},leaderBoard:function(e,t,o){var n="?count=5&sort=votes";a.get("/api/competition/listContestants/"+e+n,function(e,a){return o(!1,a)})},fetchWinner:function(e,t){a.get("/api/competition/fetchWinner/"+e,function(e,a){return t(!1,a)})}},articles:{getArticle:function(e,t,o,n){o?a.get("/api/management/network/article/draft/"+e+"/"+t,function(e,a){return n(!1,a)}):a.get("/api/articles/article/"+e+"/"+t,function(e,a){return n(!1,a)})},getArticleWall:function(e,t,o,n,i,r){t||(t=1),o||(o=30);var s="wall";if(""!==n&&(s="walltag"),""!=i)var i="&filter="+i,c=n+i;else var c=n;a.get("/api/articles/article-wall-collection/"+e+"/"+s+"?page="+t+"&count="+o+"&lastComment=1&tag="+c,function(e,a){return r(!1,a)})},getScheduleArticleWall:function(e,t,o,n){t||(t=1),o||(o=30),a.get("/api/network/getScheduledArticles/"+e+"?page="+t+"&count="+o,function(e,a){return console.log(a),n(!1,a)})},removeScheduleArticle:function(e,t,o){var n={article_id:t,action:"remove"};a.post("/api/network/updateRemoveSchedulePost/"+e,n,function(e,a){return o(!1,a)})},joinEvent:function(e,t,o){var n={event_id:e,action:t};a.post("/api/network/eventattendaction/"+e,n,function(e,a){return o(!1,a)})},getEventWall:function(e,t,o,n){t||(t=1),o||(o=30),a.get("/api/articles/article-wall-collection/"+e+"/events?filter=activeevents&page="+t+"&count="+o,function(e,a){return console.log(a),n(!1,a)})},getMediaItems:function(t,o,n,r,s){o||(o=1),n||(n=30),_.isUndefined(r)&&(r="");var c=0;e.currentUser&&e.currentUser.id&&(c=1),a.get("/api/articles/article-wall-collection/"+t+"/gallery?page="+o+"&count="+n+"&tag="+r+"&ignoreReported="+c,function(e,a){return a&&a.status.success&&(a.network.tiles=i(a.network.tiles)),s(!1,a)})},getAlbumItems:function(e,t,o,n){t||(t=1),o||(o=30),a.get("/api/articles/listAlbumImages/"+e+"?page="+t+"&count="+o,function(e,a){return a.network.tiles=i(a.network.tiles),n(!1,a)})},getAllAlbumItems:function(e,t){a.get("/api/articles/listAlbumImages/"+e,function(e,a){return a.network.tiles=i(a.network.tiles),t(!1,a)})},uploadMedia:function(e,t){var o={attachment_collection:e.medias};a.post("/api/articles/"+e.profile_shortcut+"/album/uploadWithTag/"+e.profile_media_collection_id,o,function(e,a){return t(!1,a)})},getArticleGuide:function(e,t,o,n,i){t||(t=1),o||(o=30),1==n?a.get("/api/management/network/listNetworkDraftArticles/guides/"+e+"?page="+t+"&count="+o+"&status=2",function(e,a){return i(!1,a)}):2==n?a.get("/api/management/network/listNetworkDraftArticles/guides/"+e+"?page="+t+"&count="+o+"&status=5",function(e,a){return console.log(a),i(!1,a)}):a.get("/api/articles/article-wall-collection/"+e+"/guides?page="+t+"&count="+o,function(e,a){return console.log(a),i(!1,a)})},getArticleDownload:function(e,t,o,n){t||(t=1),o||(o=30),a.get("/api/articles/article-wall-collection/"+e+"/downloads?page="+t+"&count="+o,function(e,a){return console.log(a),n(!1,a)})},getArticleDocument:function(e,t,o,n,i){t||(t=1),o||(o=30),1==n?a.get("/api/management/network/listNetworkDraftArticles/articles/"+e+"?page="+t+"&count="+o+"&status=2",function(e,a){return i(!1,a)}):2==n?a.get("/api/management/network/listNetworkDraftArticles/articles/"+e+"?page="+t+"&count="+o+"&status=5",function(e,a){return console.log(a),i(!1,a)}):a.get("/api/articles/article-wall-collection/"+e+"/documents?page="+t+"&count="+o,function(e,a){return console.log(a),i(!1,a)})},getArticleComments:function(e,t,o,n,i){n||(n=10),a.get("/api/articles/article-comments/"+e+"/"+t+"?page="+o+"&count="+n,function(e,a){return i(!1,a)})},createNewBlogPost:function(e,t,o,n,i,r){var s={article_collection_id:e,articletitle:t,text:o,post_as_network:i?1:0};n&&(s.attachments=n),a.post("/api/articles/newpost",s,function(e,a){return r(!1,a)})},updateBlogPost:function(e,t){a.post("/api/articles/updateRemoveArticles/"+e.article_id,e,function(e,a){return t(!1,a)})},createNewArticle:function(e,t,o,n,i){var r={article_collection_id:e,text:t,post_as_network:n?1:0};o&&(r.attachments=o),a.post("/api/articles/newpost",r,function(e,a){return i(!1,a)})},createNewScheduleArticle:function(t,o,n,i,r,s,c,l){var d={text:o,post_as_network:i?1:0,scheduled_on:r,expire_on:s,markAsStickyPost:c};n&&(d.attachments=n),console.log("checking params",d),a.post("/api/network/schedulePost/"+e.currentNetwork.info.shortcut,d,function(e,a){return l(!1,a)})},createNewArticleComment:function(t,o,n,i,r){var s={article_id:t,text:o};n&&(s.attachments=n),i&&(s.network_shortcut=e.currentNetwork.info.shortcut,s.post_as_network=!0),a.post("/api/articles/newcomment",s,function(e,a){return r(!1,a)})},removeArticleComment:function(e,t){var o={article_comment_id:e};a.post("/api/articles/removecomment",o,function(e,a){return t(!1,a)})},articleAction:function(e,t,o,n){a.post("/api/articles/article/"+e+"/"+t+"/"+o,{},function(e,a){return console.log(a,"articleAction"),n(!1,a)})},articleCommentAction:function(e,t,o,n){a.post("/api/articles/article-comment/"+e+"/"+t+"/"+o,{},function(e,a){return console.log(a,"articleCommentAction"),n(!1,a)})},articleUrlCache:function(e,t){a.get("/api/articles/urlcache/get?url="+e,function(e,a){return console.log(a,"articleUrlCache"),t(!1,a)})},getFileContent:function(e,t){a.get(e,function(e,a){return console.log(a,"getFileContent"),t(!1,a)})},createNewGuideArticlesDownloadsSP:function(e,t){var o={article_collection_id:e.articleCollectionId,type:e.activePage,title:e.networkArticles.title,description:e.networkArticles.description,sequence:e.networkArticles.sequence,html_content:e.networkArticles.html_content,article_preview_photo_fsref:e.networkArticles.article_preview_photo_fsref};0!=e.publishDate&&(o.scheduled_on=publishDate),0!=e.expiryDate&&(o.expire_on=expiryDate),e.networkArticles.text&&""!==e.networkArticles.text&&(o.text=e.text),a.post("/api/management/network/createNetworkArticles",o,function(e,a){return t(!1,a)})},createNewGuideArticlesDownloads:function(e,t,o,n,i,r,s,c,l,d,u){var m={article_collection_id:e,type:t,title:o,description:n,sequence:i,html_content:r,article_preview_photo_fsref:s};0!=l&&(m.scheduled_on=l),0!=d&&(m.expire_on=d),c&&""!==c&&(m.text=c),a.post("/api/management/network/createNetworkArticles",m,function(e,a){return u(!1,a)})},updateGuideArticlesDownloadsSchedule:function(e,t,o,n,i,r,s,c,l,d,u,m,p){""===t&&(t=0);var g={article_id:e,action:o};"update"==o&&(g.title=n,g.description=i,g.sequence=r,g.html_content=s,g.article_preview_photo_fsref=c),0!=u&&(g.scheduled_on=u,"update"==o&&(l=!0)),0!=m&&(g.expire_on=m),d&&""!==d&&(g.text=d),l?a.post("/api/management/network/updateRemoveDraftArticles/"+e+"/"+t,g,function(e,a){return p(!1,a)}):a.post("/api/management/network/updateRemoveArticles/"+e+"/"+t,g,function(e,a){return p(!1,a)})},updateGuideArticlesDownloads:function(t,o,n,i,r,s,c,l,d,u,m,p,g){""===o&&(o=0);var f={article_id:t,action:n};"markactive"!=n||e.isArticleDraft||(f.action="update"),f.title=i,f.description=r,f.sequence=s?s:0,f.html_content=c,f.article_preview_photo_fsref=l,0!=m&&(f.scheduled_on=m),0!=p&&(f.expire_on=p),u&&""!==u&&(f.text=u),d?a.post("/api/management/network/updateRemoveDraftArticles/"+t+"/"+o,f,function(e,a){return g(!1,a)}):(f.preserveAuthor=!0,console.log("ldz params",f),a.post("/api/management/network/updateRemoveArticles/"+t+"/"+o,f,function(e,a){return g(!1,a)}))},updateWallPost:function(e,t){a.post("/api/articles/updateRemoveArticles/"+e.article_id,e,function(e,a){return t(!1,a)})},getMashupTopics:function(e,a){var t=!1,o={};angular.forEach(e.topics,function(i,r){if(!t){var s={code:e.code,lang:e.lang,topic:i},c=n(s);c.then(function(t){return o[i]=t,_.size(o)==e.topics.length?a(!1,o):void 0},function(e){return a(!1,o)})}})},chatmessage:function(e,t){e.page||(e.page=1),e.count||(e.count=30),a.get("/api/articles/chatmessage/"+e.userId+"?page="+e.page+"&count="+e.count,function(e,a){return t(!1,a)})},fetchRecentPosts:function(e){a.get("/api/articles/fetchRecentPosts?count=6",function(a,t){return e(!1,t)})}},network:{getlistBettingMatches:function(o,n,i,r,s,c){a.get("/api/network/listBettingMatches/"+o+"?page="+n+"&count="+i+"&filter="+r+"&category_id="+s,function(a,o){return console.log("getlistBettingMatches",o),o.user&&(console.log("updating txn userprofile.."),angular.extend(e.currentUser,o.user),t.setValue("currentUser",e.currentUser)),c(!1,o)})},getDynamicNetworkList:function(e){a.get("/api/network/dynamicNetwork?most-followed-count=15&newly-created-count=15&nonchurch-count=15",function(a,t){return console.log("getDynamicNetwork",t),e(!1,t)})},betgame:function(e,t,o,n){var i={betting_match_id:e,option:t,currency:o};a.post("/api/user/betOnMatch/",i,function(e,a){return n(!1,a)})},betGameCategories:function(e,t){a.get("/api/virtualcurrency/listBettingCategories/"+e,function(e,a){return t(!1,a)})},getShopInfo:function(e,t){a.get("/api/network/fetchShop/"+e,function(e,a){return t(!1,a)})},getListOfBlogPosts:function(e,t,o){a.get("/api/network/tiles/"+e+"/"+t,function(e,a){return o(!1,a)})},getListOfBlogPostsTags:function(e,t,o,n){a.get("/api/network/tiles/"+e+"/"+t+"/"+o,function(e,a){return n(!1,a)})},getListOfBlogPostsArchive:function(e,t,o,n,i){a.get("/api/network/tiles/"+e+"/"+t+"/"+o+"/"+n,function(e,a){return i(!1,a)})},getNetworkDocuments:function(e,t){var o={"recent-blogs":"recentblogs","popular-posts":"popularposts"},n=e.shortcut,i=e.type,r=o[i];if(!n)throw new Error("Network shortcut is required");if(!i)throw new Error("Document type is required");var s="/api/network/profile/"+n;console.info("[apiService.network.getNetworkDocuments] Getting network documents of type %s for network %s",i,n),a.get(s,function(e,a){if(e)return t(e);if(!a.network||!a.network.tiles)return t(new Error("Network does not have tiles"));var o=_.reduce(a.network.tiles,function(e,a){return a.type===i&&a[r]?e=e.concat(a[r]):e},[]);return 0===o.length&&console.warn("[apiService.network.getNetworkDocuments] No documents of type %s available for network %s",i,n),t(!1,o)})},dateRange:function(e,t){a.get("/api/network/fetchDateRange/"+e,function(e,a){return t(!1,a)})},getBlogPost:function(e,t,o){a.get("/api/network/post/"+e+"/"+t,function(e,a){return o(!1,a)})},explore:function(e,t,o,n){e||(e=1),a.get("/api/network/browse/"+o+"?page="+e+"&count="+t,function(e,a){return n(!1,a)})},listNetworksByTags:function(e,t){e.page||(e.page=1);var o="?type="+e.type+"&page="+e.page;e.count&&(o+="&count="+e.count),e.tags&&(o+="&tags="+e.tags),a.get("/api/network/listNetworksByTags"+o,function(e,a){return t(!1,a)})},getPromotedNetwork:function(e,t,o){e||(e=1),a.get("/api/network/promoted-network?page="+e+"&count="+t,function(e,a){return o(!1,a)})},getDiscoverNetwork:function(e,t,o){e||(e=1),a.get("/api/network/discover-network?page="+e+"&count="+t,function(e,a){return o(!1,a)})},event:function(e,t,o){console.log("getting event info..."),a.get("/api/articles/article-wall-collection/"+e+"/events?filter=activeevents",function(e,a){return o(!1,a)})},profile:function(e,t){a.get("/api/network/profile/"+e,function(e,a){return t(!1,a)})},profileDetail:function(e,t){a.get("/api/network/profile/detailed/"+e,function(o,n){return"relatedNetworks"in n&&0===n.relatedNetworks.length?void a.get("/api/network/profile/detailed/relatednetworks/"+e,function(e,a){return a.relatedNetworks&&(n.relatedNetworks=a.relatedNetworks),t(!1,n)},"1.1"):t(!1,n)},"1.1")},changeNetworkImage:function(e,t,o){a.post("/api/network/profile/changeNetworkImage/"+e,t,function(e,a){return o(!1,a)},"1.1")},socialfeed:function(e,t){a.get("/api/network/socialfeed/"+e,function(e,a){return t(!1,a)})},wall:function(e,t,o){a.get("/api/articles/article-wall-collection/"+e+" /wall",function(e,a){return o(!1,a)})},getContestantList:function(e,t,o){a.get("/api/network/listContestants/"+e,function(e,a){return o(!1,a)})},follower:function(e,t,o,n){t||(t=1),o||(o=30),a.get("/api/network/follower/"+e+"?page="+t+"&count="+o,function(e,a){return n(!1,a)})},followNetwork:function(e,t){domainName="?domainName="+location.host,a.post("/api/network/followNetwork/"+e+domainName,!1,function(e,a){return t(!1,a)})},unFollowNetwork:function(e,t){a.post("/api/network/unfollowNetwork/"+e,!1,function(e,a){return t(!1,a)})},products:function(e,t,o,n){a.get("/api/shop/"+e+"/productlist/"+t,function(e,a){n(!1,a)})},product_info:function(e,t,o){a.get("/api/shop/"+e+"/productinfo/"+t,function(e,a){return e?o(!0,null):o(!1,a)})},buynow:function(e,t,o,n,i,r){var s={item_id:t,shop_id:o,customer_email_address:n,category_id:i};a.post("/api/shop/"+e+"/buynow/"+t,s,function(e,a){return r(!1,a)})},getOrderList:function(e,t,o){a.get("/api/shop/"+e+"/purchased-orders/"+t,function(e,a){return o(!1,a)})},getOrderListItem:function(e,t,o,n){a.get("/api/shop/"+e+"/purchased-orders/"+t+"/"+o,function(e,a){return n(!1,a)})},singleArticle:function(e,t){a.get("/api/network/singlearticle/"+e,function(e,a){return t(!1,a)})},sample_community:function(e,t){a.get("/api/network/_layoutCommunity?networkname="+e,function(e,a){return t(!1,a)})},fetchPoll:function(e,t){a.get("/api/network/fetchPollbyId/"+e,function(e,a){return t(!1,a)})},submitPoll:function(e,t,o){var n={optionValue:t};a.post("/api/network/submitPoll/"+e,n,function(e,a){return o(!1,a)})},fetchResellerForms:function(e,t){var o="reseller";a.get("/api/network/fetchForms/"+e+"?filter="+o,function(e,a){return t(!1,a)})},fetchFormById:function(e,t){a.get("/api/network/fetchFormById/"+e,function(e,a){return t(!1,a)})},submitForm:function(e,t,o){var n={fields:t};domainName="?domainName="+location.host,a.post("/api/network/submitForm/"+e+domainName,n,function(e,a){return o(!1,a)})},joinCompetitionAsContestant:function(e,t,o){a.post("/api/network/joinCompetitionAsContestant/"+e,t,function(e,a){return o(!1,a)})},voteForContestant:function(e,t,o){a.post("/api/network/voteForContestant/"+e,t,function(e,a){return o(!1,a)})},updateContestant:function(e,t,o,n){a.post("/api/network/updateContestant/"+e+"/"+t,o,function(e,a){return n(!1,a)})},newNetworkRequest:function(e,t){a.post("/api/network/newNetworkRequest/",e,function(e,a){return t(!1,a)})},listNetworksByCategory:function(e,t){e.page||(e.page=1),e.count||(e.count=100),e.inclusive_tags||(e.inclusive_tags="");var o="?page="+e.page+"&count="+e.count+"&inclusive_tags="+e.inclusive_tags;a.get("/api/network/listNetworksByCategory/"+o,function(e,a){return t(!1,a)})},listAlbums:function(e,t){
e.page||(e.page=1),e.count||(e.count=10);var o="?page="+e.page+"&count="+e.count;a.get("/api/network/listAlbums/"+e.shortcut+o,function(e,a){return t(!1,a)})},unlockAlbum:function(e,t){a.post("/api/network/unlockAlbum/"+e.shortcut+"/"+e.albumid,!1,function(e,a){return t(!1,a)})},album:function(e,t){e.page||(e.page=1),e.count||(e.count=10);var o="?page="+e.page+"&count="+e.count;a.get("/api/network/album/"+e.shortcut+"/"+e.albumid+o,function(e,a){return t(!1,a)})}},league:{getResult:function(e,t){a.get(e,function(e,a){return t(!1,a)})},postRequest:function(e,t,o){a.post(e,t,function(e,a){return o(!1,a)})}},domain:{isDomainWhitelisted:function(e,t){a.post("/api/isDomainWhitelisted",{domain:e},function(e,a){return t(!1,a)})}},micropayment:{getMicroPaymentByCode:function(e,t){a.get("/api/socialcommerce/getMicroPaymentByCode/"+e,function(e,a){return t(!1,a)})},getMicroPaymentByCodes:function(e,t){a.get("/api/socialcommerce/getMicroPaymentByCodes/"+e,function(e,a){return t(!1,a)})},checkoutMicroPayment:function(e,t,o,n){a.post("/api/socialcommerce/checkoutMicroPayment/"+e+"/"+t,o,function(e,a){return n(!1,a)})}},payment:{makeYuupayPayment:function(e,t){a.post("/api/socialcommerce/makeYuupayPayment/"+e,{},function(e,a){return t(!1,a)})},makePaypalPayment:function(e,t,o){a.post("/api/socialcommerce/makePayPalPayment/"+e,t,function(e,a){return o(!1,a)})},makeAliPayPayment:function(e,t,o){a.post("/api/socialcommerce/makeAlipayPayment/"+e,t,function(e,a){return o(!1,a)})},makeCCAvenuePayment:function(e,t,o){a.post("/api/socialcommerce/makeCCAvenuePayment/"+e,t,function(e,a){return o(!1,a)})}},tribe:{getNetworkList:function(e,t){var o={page:1,count:15};e=angular.extend({},o,e);var n=_.reduce(e,function(e,a,t){return e.push(t+"="+a),e},[]).join("&");a.get("/api/tribe/networks/list?"+n,function(e,a){return"networks"in a?void t(!1,a.networks):t(new Error('Invalid response. "networks" not found'))},"1.1")},getCategory:function(e,t){var o="";a.get("/api/tribe/category"+o,function(e,a){return t(!1,a)},"1.1")},getSubCategory:function(e,t){var o="?";(0^e.rpage)===e.rpage&&(o+="rpage="+e.rpage+"&"),(0^e.rcount)===e.rcount&&(o+="rcount="+e.rcount+"&"),(0^e.apage)===e.apage&&(o+="apage="+e.apage+"&"),(0^e.acount)===e.acount&&(o+="acount="+e.acount+"&"),_.isEmpty(e.rids)||(o+="rids="+e.rids+"&"),a.get("/api/tribe/category/"+e.parentcat+"/"+e.subcat+o,function(e,a){return t(!1,a)},"1.1")},checkNetworkTitleAvailability:function(e,t){a.get("/api/network/tribe/validateNetworkTitle?title="+e,function(e,a){return t(!1,a)})},getAvailableCategories:function(e,t){var o="?";e.target&&(o+="&target="+e.target),e.domainName&&(o+="&domainName="+e.domainName),a.get("/api/socialcommerce/getAvailableCategories"+o,function(e,a){return t(!1,a)})},createTribeNetwork:function(t,o){var n="?domainName=";e.config&&e.config.assets.is_virtual_domain&&(n+=window.location.host),a.post("/api/network/tribe/createUserNetworkRequest"+n,t,function(e,a){return o(!1,a)})},updateTribeNetwork:function(e,t){a.post("/api/network/tribe/updateUserNetwork",e,function(e,a){return t(!1,a)})},networkList:function(e){a.get("/api/network/tribe/listAllUserNetworks",function(a,t){return e(!1,t)})},getUserTribe:function(e,t,o){a.get("/api/network/tribe/getUserNetwork/"+e+"?domainName="+t,function(e,a){return o(!1,a)})}},universalSearch:{ecommerce:function(e,t,o){var n="q="+e;"undefined"!=typeof t&&(n+="&count="+t),a.get("/api/search/ecommerceSuggestions?"+n,function(e,a){return o(!1,a)})},merchant:function(e,t,o,n,i){var r="q="+e;"undefined"!=typeof t&&(r+="&count="+t),"undefined"!=typeof o&&(r+="&country="+o),"undefined"!=typeof n&&(r+="&state="+n),a.get("/api/search/merchantSuggestions?"+r,function(e,a){return i(!1,a)})},network:function(e,t,o){var n="q="+e;"undefined"!=typeof t&&(n+="&count="+t),a.get("/api/search/networkSuggestions?"+n,function(e,a){return o(!1,a)})}},charity:{getCharityList:function(e){a.get("/api/charity/getCharityList",function(a,t){e(!1,t)})}},seo:{fetchSeo:function(e,t,o){a.get("/api/seo/fetchSeo?slug="+e+t,function(e,a){o(!1,a)})}},widget:{fetchWidget:function(e,t,o,n){a.get("/api/domainconfiguration/getWidget?domainName="+e+"&type="+t+"&key="+o,function(e,a){n(!1,a)})}}}}]),define("api.service",function(){}),app.service("$utility",["$window",function(e){return{window:{alert:function(e){},block:function(e){},unblock:function(){},pop:function(e,a){}},math:{isEven:function(e){return _.isNumber(e)&&e%2===0},isOdd:function(e){return _.isNumber(e)&&Math.abs(e)%2==1}},isArray:function(a){var t=e.Array.isArray||e.angular.isArray;return t(a)},isObject:function(e){return!(!this.isArray(e)||!this.isEmpty(e))},isJsonStr:function(e){try{JSON.parse(e)}catch(a){return!1}return!0},isEmpty:function(e){if(null==e||0===e.length)return!0;if(e.length>0)return!1;for(var a in e)if(hasOwnProperty.call(e,a))return!1;return!0}}}]),define("utility.service",function(){}),app.service("$popupService",["$rootScope","$timeout",function(e,a){return{initBlockPopup:function(){e.windowpopup={},e.windowpopup.isBlockUI=!0,$("#window_popup").data("reveal-init",{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,close_on_esc:!1,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",bg:$(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}})},initNormalPopup:function(){e.windowpopup={},e.windowpopup.isBlockUI=!1,$("#window_popup").data("reveal-init",{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,close_on_esc:!1,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",bg:$(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}})},show:function(){$("#window_popup").foundation("reveal","open")},showConfirmDialog:function(a,t,o,n){this.initBlockPopup(),e.windowpopup.content=a||"Are you sure?",e.windowpopup.isConfirmDialog=!0,e.windowpopup.okCallback=function(){"function"==typeof t&&t(n)},e.windowpopup.cancelCallback=o,$("#window_popup").foundation("reveal","open")},blockUI:function(a){this.initBlockPopup(),e.windowpopup.content=a||"Please wait...",$("#window_popup").foundation("reveal","open")},blockUIHTML:function(a){this.initBlockPopup(),e.windowpopup.isHTML=!0,e.windowpopup.content=a||"Please wait...",$("#window_popup").foundation("reveal","open")},close:function(){$("#window_popup").foundation("reveal","close")},toast:function(e){var a={};a.title=e.title,a.text=e.text,a.image=e.image||null,a.sticky=!1,a.time=e.time||1500,a.before_open=function(){return 3==$(".gritter-item-wrapper").length?!1:void 0},$.gritter.add(a)},showAutoError:function(t,o){this.initBlockPopup(),e.windowpopup.content=t||"Whoops! Something went wrong. Please try again later.",o||(o=2500),$("#window_popup").foundation("reveal","open");var n=this;a(function(){n.close()},o)},showAutoMessage:function(t,o,n){this.initBlockPopup(),e.windowpopup.content=t||"Whoops! Something went wrong. Please try again later.",o||(o=2500),$("#window_popup").foundation("reveal","open");var i=this;a(function(){i.close(),"function"==typeof n&&n()},o)}}}]),define("ui.popup",function(){}),app.service("$realtime",["$rootScope","atmosphere",function(e,a){return e.$watch("authToken + config",function(){e.authToken&&"undefined"!=e.authToken&&e.authToken!==!1&&e.config&&e.config.rtserver&&(console.log("RT> using authToken: "+e.authToken),a.setAuthToken(e.authToken),a.setEndpoint(e.config.rtserver.endpoint),a.connect())}),a.on("connection",function(e){e.status===!0?console.log("RT> Connection established"):console.log("RT> Connection failed - "+e.reason)}),a.on("ARTICLE_CREATED",function(a){console.log("RT> Article created"),a.payload.tile?e.$broadcast("REALTIME_ARTICLE_CREATED",a):5==a.payload.post.collection.collection_type?e.$broadcast("REALTIME_ARTICLE_CREATED_MESSAGE",a):12==a.payload.post.collection.collection_type&&e.$broadcast("REALTIME_ARTICLE_CREATED_MESSAGE",a)}),a.on("ARTICLE_UPDATED",function(a){console.log("RT> Article updated"),a.payload.tile?e.$broadcast("REALTIME_ARTICLE_UPDATED",a):5==a.payload.post.collection.collection_type&&e.$broadcast("REALTIME_ARTICLE_UPDATED_INBOX",a)}),a.on("NEW_FRIEND",function(a){console.log("RT> NEW_FRIEND",a),e.showNotificationIcon(),e.$broadcast("REALTIME_CHAT_NEW_FRIEND",a)}),a.on("NEW_FOLLOWER",function(a){console.log("RT> NEW_FOLLOWER",a),e.showNotificationIcon()}),a.on("FRIENDS_FOLLOW_NETWORK",function(a){console.log("RT> FRIENDS_FOLLOW_NETWORK",a),e.showNotificationIcon()}),a.on("FRIENDS_FOLLOW_EVENT",function(a){console.log("RT> FRIENDS_FOLLOW_EVENT",a),e.showNotificationIcon()}),a.on("EVENT_START",function(a){console.log("RT> EVENT_START",a),e.showNotificationIcon()}),a.on("EVENT_END",function(a){console.log("RT> EVENT_END",a),e.showNotificationIcon()}),a.on("SCHEDULED_POST_START",function(a){console.log("RT> SCHEDULED_POST_START",a),e.showNotificationIcon()}),a.on("SCHEDULED_POST_END",function(a){console.log("RT> SCHEDULED_POST_END",a),e.showNotificationIcon()}),a.on("REPORTED_POST",function(e){console.log("RT> REPORTED_POST",e)}),a.on("REPORTED_COMMENT",function(e){console.log("RT> REPORTED_COMMENT",e)}),a.on("CHAT_ONLINE",function(a){console.log("RT> CHAT_ONLINE",a),e.$broadcast("REALTIME_CHAT_ONLINE",a)}),a.on("CHAT_OFFLINE",function(a){console.log("RT> CHAT_OFFLINE",a),e.$broadcast("REALTIME_CHAT_OFFLINE",a)}),a.on("CHAT_ONLINE_LIST",function(a){console.log("RT> CHAT_ONLINE_LIST",a),e.$broadcast("REALTIME_CHAT_ONLINE_LIST",a)}),a.on("UNFOLLOW_FRIEND",function(a){console.log("RT> UNFOLLOW_FRIEND",a),e.$broadcast("REALTIME_CHAT_UNFOLLOW_FRIEND",a)}),{}}]),define("rt.service",function(){}),app.controller("socialNetworkPlatformCtrl",["$scope","$rootScope","$store","$apiService","$location","$realtime","$sce","$state","cssInjector","$window","$filter","$popupService","$analytics","$timeout","$compile",function(e,a,t,o,n,i,r,s,c,l,d,u,m,p,g){"use strict";var f=new UAParser,h=f.getResult();a.fix_device_type=h.device.type,console.log("fix_device_type",a.fix_device_type),a.showWelcomeBack=!1,console.log("socialNetworkPlatformCtrl"),a.password_length=8,i18njs&&(a.i18n=JSON.parse(i18njs.replace(/&quot;/g,'"'))),current_country_code&&(a.current_country_code=current_country_code),a.isMobileDevice=!1,/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(a.isMobileDevice=!0),e.moreMenu={};var v=!0,y=!1;e.openMenu=function(){v&&(y=!y,e.moreMenu.isOpen=y,v=!1),p(function(){v=!0},100)},a.isAnyPaymentEnable=function(){var e=!1;return angular.forEach(a.config.payment_settings,function(a,t){void 0!=a.enabled&&1==a.enabled&&(e=!0)}),e},a.openMicroPayment=function(){console.log("openMicroPayment .. call"),$("#micropay-box").data("reveal-init",{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,close_on_esc:!1,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",bg:$(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}}),$("#micropay-box").foundation("reveal","open")},e.splitStr=function(e,a){if(Array.isArray(e))return e;var t=[];return void 0===e||null===e?t:(void 0!==a&&null!==a||(a=","),t=e.split(a))},e.keydown=function(e){37==e.keyCode&&a.$broadcast("KEYPRESS_LEFT"),39==e.keyCode&&a.$broadcast("KEYPRESS_RIGHT")},a.seoString=function(e){var a=e.replace(/\W/g,"-");return a},a.redirect=function(e){l.location.href=e},e.$watch("fs_cdn_url + i18n",function(){a.fs_cdn_url=a.fs_cdn_url_vd=e.fs_cdn_url,""!==e.vd&&(e.vd+="/",a.fs_cdn_url_vd=e.fs_cdn_url+e.vd),a.vd=e.vd,console.log("$rootScope.fs_cdn_url_vd  "+a.fs_cdn_url_vd),console.log("$rootScope.vd "+a.vd),(a.fs_cdn_url||a.i18n)&&(e.inquiryCaptchaOptions={imgPath:a.fs_cdn_url_vd+"images/desktop/visualcaptcha/",language:{},captcha:{numberOfImages:5,url:n.$$protocol+"://"+n.$$host,routes:{start:"/api/captcha/start/en-US",image:"/api/captcha/image",audio:"/api/captcha/audio"},namespace:"inquiry",namespaceFieldName:"inquiryField"}},a.i18n["visualcaptcha.accessibilityAlt"]&&(e.inquiryCaptchaOptions.language.accessibilityAlt=a.i18n["visualcaptcha.accessibilityAlt"]),a.i18n["visualcaptcha.accessibilityTitle"]&&(e.inquiryCaptchaOptions.language.accessibilityTitle=a.i18n["visualcaptcha.accessibilityTitle"]),a.i18n["visualcaptcha.accessibilityDescription"]&&(e.inquiryCaptchaOptions.language.accessibilityDescription=a.i18n["visualcaptcha.accessibilityDescription"].replace(/&lt;/g,"<").replace(/&gt;/g,">")),a.i18n["visualcaptcha.explanation"]&&(e.inquiryCaptchaOptions.language.explanation=a.i18n["visualcaptcha.explanation"].replace(/&lt;/g,"<").replace(/&gt;/g,">")),a.i18n["visualcaptcha.refreshAlt"]&&(e.inquiryCaptchaOptions.language.refreshAlt=a.i18n["visualcaptcha.refreshAlt"]),a.i18n["visualcaptcha.refreshTitle"]&&(e.inquiryCaptchaOptions.language.refreshTitle=a.i18n["visualcaptcha.refreshTitle"]),e.captchaOptions={imgPath:a.fs_cdn_url_vd+"images/desktop/visualcaptcha/",language:{},captcha:{numberOfImages:5,url:n.$$protocol+"://"+n.$$host,routes:{start:"/api/captcha/start/en-US",image:"/api/captcha/image",audio:"/api/captcha/audio"}},init:function(a){e.captcha=a}},a.i18n["visualcaptcha.accessibilityAlt"]&&(e.captchaOptions.language.accessibilityAlt=a.i18n["visualcaptcha.accessibilityAlt"]),a.i18n["visualcaptcha.accessibilityTitle"]&&(e.captchaOptions.language.accessibilityTitle=a.i18n["visualcaptcha.accessibilityTitle"]),a.i18n["visualcaptcha.accessibilityDescription"]&&(e.captchaOptions.language.accessibilityDescription=a.i18n["visualcaptcha.accessibilityDescription"].replace(/&lt;/g,"<").replace(/&gt;/g,">")),a.i18n["visualcaptcha.explanation"]&&(e.captchaOptions.language.explanation=a.i18n["visualcaptcha.explanation"].replace(/&lt;/g,"<").replace(/&gt;/g,">")),a.i18n["visualcaptcha.refreshAlt"]&&(e.captchaOptions.language.refreshAlt=a.i18n["visualcaptcha.refreshAlt"]),a.i18n["visualcaptcha.refreshTitle"]&&(e.captchaOptions.language.refreshTitle=a.i18n["visualcaptcha.refreshTitle"]))}),a.myframebox=[],a.custom_top_include="",a.custom_side_include="",$(window).on("resizestop",function(){a.$broadcast("resizestop")}),e.$on("onUserLoginSuccess",function(){t.setValue("showWelcomeBack",1),console.log("onUserLoginSuccess : do a tour validation",s.current.name),"function"==typeof a.validateTour&&a.validateTour(s.current.name)}),a.$watch("config",function(e){if(console.log("CONFIG WATCH TIGGERED......",e),e){n.$$path.split("/").length<=2&&(l.document.title=a.config.site_name);var o=a.config.browserDefaultLang||"en-US",i=" is on ";"en-US"!=o&&(i=" 在 "),angular.isDefined(a.currentNetwork)&&angular.isDefined(a.currentNetwork.info)&&l.document.title==a.config.site_name?l.document.title=a.currentNetwork.info.name+i+a.config.site_name:angular.isDefined(a.viewed_user_profile)&&l.document.title==a.config.site_name&&(l.document.title=a.viewed_user_profile.shortcut+i+a.config.site_name),angular.isDefined(a.currentUser)&&(o=a.currentUser.display_language,"undefined"!=typeof m&&"undefined"!=typeof m.setUsername&&m.setUsername(a.currentUser.id,{name:a.currentUser.first_name})),t.getValue("showWelcomeBack")&&(console.log("welcome back"),a.showWelcomeBack=!0,p(function(){a.closeWelcome()},4500),t.setValue("showWelcomeBack",0)),t.setValue("globalCurrency",a.config.currency)}}),a.closeWelcome=function(){a.showWelcomeBack=!1},a.trimspace=function(e){return e.replace(/ /g,"")},a.stripPermalink=function(e){return"/"+e.replace(/^(?:\/\/|[^\/]+)*\//,"")},a.optimizeImageUrl=function(e){var t=e,o=a.getDomain(a.config.cdn_url),n=a.getDomain(e);return o==n&&(e+="_400"),t},a.networkTemplateUrl=function(e,a){return"/_partials/network/"+e+"/"+e+a};var f=new UAParser,h=f.getResult(),w=n.path();a._mobileweb=!1,a.stripHtml=function(e){return e.replace(/(<([^>]+)>)/gi,"")},a.timeConverter=function(e,a,t,o,n,i,r,s,c,l,d,u,m){var p=new Date(1e3*e);a||(a="Jan"),t||(t="Feb"),o||(o="Mar"),n||(n="Apr"),i||(i="May"),r||(r="Jun"),s||(s="Jul"),c||(c="Aug"),l||(l="Sep"),d||(d="Oct"),u||(u="Nov"),m||(m="Dec");var g=[a,t,o,n,i,r,s,c,l,d,u,m],f=(p.getFullYear(),g[p.getMonth()],p.getDate(),p.getHours()),h=p.getMinutes(),_=f>=12?"PM":"AM";f%=12,f=f?f:12,h=10>h?"0"+h:h;var v=f+":"+h+" "+_,y=v;return y},a.dateConverter=function(e,a,t,o,n,i,r,s,c,l,d,u,m){var p=new Date(1e3*e);a||(a="Jan"),t||(t="Feb"),o||(o="Mar"),n||(n="Apr"),i||(i="May"),r||(r="Jun"),s||(s="Jul"),c||(c="Aug"),l||(l="Sep"),d||(d="Oct"),u||(u="Nov"),m||(m="Dec");var g=[a,t,o,n,i,r,s,c,l,d,u,m],f=p.getFullYear(),h=g[p.getMonth()],_=p.getDate(),v=h+" "+_+" "+f;return v},a.dateTimeZoneConverter=function(e){var a=e;return a},a.initializeDropDownHover=function(e){var a=new UAParser,t=a.getResult();$("#"+e).foundation({dropdown:{is_hover:"tablet"!=t.device.type,closed:function(){}}}).click(function(e){"tablet"==t.device.type&&e.preventDefault()})},a.parseHTML=function(e){return r.trustAsHtml(e)},a.parseURL=function(e){return r.trustAsResourceUrl(e)},a.s3url=function(e){var t=e,o=a.getDomain(a.config.cdn_url),n=a.getDomain(e);return o==n&&(t+="_400"),t},a.s3url800=function(e){var t=e,o=a.getDomain(a.config.cdn_url),n=a.getDomain(e);return o==n&&(t+="_800"),t},"ie"==h.browser.name.toLowerCase()&&9==h.browser.major&&""===w&&n.path("/").replace(),e._isReady=!1,a.$on("$stateChangeSuccess",function(t,o,i,r,s){if(console.log("controller.socialplatform : stateChangeSuccess "),e._isReady=!0,a&&a.config&&"home"==o.name&&(l.document.title=a.config.site_name),a.viewBusy=!1,e.state_inprogress=!1,$(".reveal-modal.open").not("#landing-splash-screen").foundation("reveal","close"),_.isUndefined(s.shortcut)===!1&&_.isUndefined(i.shortcut)===!1&&o.name.indexOf("network")>-1&&i.shortcut!=s.shortcut){console.log("change location: ",o);var c=n.path();console.log("pathStr",c),window.location.href=c}}),a.$on("$stateChangeError",function(e){a.lastWorkingURL=document.referrer}),a.$on("$stateChangeStart",function(t,o,i,r,s){var l="";if("home"==r.name&&"home"!=o.name&&(Pace.stop(),t.preventDefault(),l=n.path(),window.location.href=l),("true"===isSocialCommercePage||isSocialCommercePage===!0)&&""==o.url)return void(window.location="/shopping/error");a.viewBusy=!0,"category_community"!=r.name&&"category_gaming"!=r.name&&"category_news"!=r.name&&"category_shopping"!=r.name&&"category_ecommerce"!=r.name||(console.log("stateChangeSuccess, coming from category page.."),Pace.stop(),t.preventDefault(),l=n.path(),window.location.href=l);var d=!1;return"network.landing"!=r.name&&"network.wall"!=r.name&&"network.guides"!=r.name&&"network.event"!=r.name&&"network.event"!=r.name&&"network.guides.draft"!=r.name&&"network.downloads"!=r.name&&"network.documents"!=r.name&&"network.documents.draft"!=r.name&&"network.medias"!=r.name&&"network.medias-tagged"!=r.name&&"network.medias-tagged"!=r.name&&"network.walltag"!=r.name&&"network.medias.album"!=r.name&&"network.productlist"!=r.name&&"network.productlist-category"!=r.name||"network.product-info"!=o.name&&"network.event-article"!=o.name&&"network.wall-article"!=o.name&&"network.media-article"!=o.name&&"network.guide-article"!=o.name&&"network.guide-draft-article"!=o.name&&"network.downloads-article"!=o.name&&"network.documents-article"!=o.name&&"network.documents-draft-article"!=o.name||(d=!0),d||(c.removeAll(),e.state_inprogress=!0),"me.zoocashtopup"==r.name&&"me.zoocashupdate"==o.name?(console.log("OK. PREVENT..........DEFAULT EVENT..."),void t.preventDefault()):void 0}),a.stateback=!1,a.isAuthTokenValid=function(e){console.log("authtoken valid..",e),o.user.profileByAuthToken(e,function(e,a){return!e&&a&&a.user?(console.log("authtoken valid..true"),ture):!1})},a.guid=function(){var e=new Date,a=e.getTime();return a},a.stripText=function(e,a){var t="";try{t=e&&e.length>a?e.substring(0,a):e}catch(o){}return t};var k=t.getToken(),b="";if(e.$watch("version",function(){a.version=e.version}),e.$watch("is_mobile",function(){console.log("is mobile => ",e.is_mobile),a.is_mobile=e.is_mobile}),e.$watch("mobile_agent",function(t){"undefined"!=t&&t&&(a.mobile_agent=e.mobile_agent)}),e.$watch("device",function(e){"undefined"!=e&&e&&(a.device=e)}),e.$watch("auth_user",function(e){if("undefined"!=e&&e){var i=JSON.parse(e);i.authToken!=k&&(t.setToken(i.authToken),a.authToken=i.authToken,t.setValue("currentUser",i),a.currentUser=i,console.log("authuser:",i+""));var r=n.search();if(r&&r._return){var s=a.getDomain(r._return);o.domain.isDomainWhitelisted(s,function(e,t){!e&&t&&t.iswhitelisted&&(!window.ga||!t.internalGATracker&&!t.externalGATracker||null==t.internalGATracker&&null==t.externalGATracker?o.auth.requestToken(function(e,t){t.status&&t.status.success?r._return.indexOf("?")>-1?window.location=r._return+"&token="+t.token+"&src="+window.location.hostname:window.location=r._return+"?token="+t.token+"&src="+window.location.hostname:(window.location.reload(),a.$broadcast("onUserLoginSuccess"))}):m.eventTrack("E-commerce Redirect (External-Already Login via SocialConnect)",{category:"actions",label:"Just redirected to e-commerce from external link",value:1,hitCallback:function(){o.auth.requestToken(function(e,a){a.status&&a.status.success&&(r._return.indexOf("?")>-1?window.location=r._return+"&token="+a.token+"&src="+window.location.hostname:window.location=r._return+"?token="+a.token+"&src="+window.location.hostname)})}}))})}}}),a.hasNewNotification=!1,a.showNotificationIcon=function(){a.hasNewNotification=!0},a.hideNotificationIcon=function(){a.hasNewNotification=!1},e.notifications=[],e.isFetchingNotification=!1,a.fetchNotifications=function(t){e.isFetchingNotification||(e.isFetchingNotification=!0,o.user.fetchNotifications(function(t,o){e.isFetchingNotification=!1,!t&&o.feeds&&o.status.success&&(angular.extend(e.notifications,o.feeds),o.feeds.activities&&o.feeds.follower&&o.feeds.friend&&((o.feeds.activities.length||o.feeds.follower.length||o.feeds.friend.length)&&!a.hasNewNotification?a.showNotificationIcon():o.feeds.activities.length||o.feeds.follower.length||o.feeds.friend.length||a.hideNotificationIcon()))}))},a.updateAllNotificationFeed=function(){var t=[];e.notifications.activities&&(t=_.map(e.notifications.activities,function(e){return e.activity._id})),o.user.updateMultipleFeedsRead(t,function(e,t){!e&&t.status.success&&(a.hideNotificationIcon(),$("#notification_box").removeClass("open"),$("#notification_box").css("left","-99999px"),$("#notification_box").trigger("closed"))})},k){a.authToken=k,o.user.profileByAuthToken(a.authToken,function(e,a){return!e&&a&&a.user?(console.log("authtoken valid..true"),void t.setValue("currentUser",a.user)):n.path().indexOf("shopping")>-1?void(l.location="/logout?returnurl=shopping"):void n.path("/logout")}),a.currentUser=t.getValue("currentUser"),console.log("userToken:",a.currentUser),b=a.currentUser.id;var S=n.search();if(S&&S._return){var A=a.getDomain(S._return);o.domain.isDomainWhitelisted(A,function(e,t){!e&&t&&t.iswhitelisted&&(!window.ga||!t.internalGATracker&&!t.externalGATracker||null==t.internalGATracker&&null==t.externalGATracker?o.auth.requestToken(function(e,t){t.status&&t.status.success?S._return.indexOf("?")>-1?window.location=S._return+"&token="+t.token+"&src="+window.location.hostname:window.location=S._return+"?token="+t.token+"&src="+window.location.hostname:(window.location.reload(),a.$broadcast("onUserLoginSuccess"))}):m.eventTrack("E-commerce Redirect (External-Already Login via Email)",{category:"actions",label:"Just redirected to e-commerce from external link",value:1,hitCallback:function(){o.auth.requestToken(function(e,a){a.status&&a.status.success&&(S._return.indexOf("?")>-1?window.location=S._return+"&token="+a.token+"&src="+window.location.hostname:window.location=S._return+"?token="+a.token+"&src="+window.location.hostname)})}}))})}o.user.getmessagecount(a.currentUser.shortcut,function(e,t){e||(a.messagescount=t)}),a.fetchNotifications()}e.$on("$destroy",function(){window.document.title=""}),e.$watch("currentNetwork",function(e){var t=a.config&&a.config.browserDefaultLang?a.config.browserDefaultLang:"en-US",i=" is on ";if("en-US"!=t&&(i=" 在 "),e&&(null===e.info||e.info&&!e.info.id))return a.lastWorkingURL=document.referrer,void n.path("/page_not_found");if(!e||!e.info)return void o.setNetworkShortcutHeader(!1);if(a.config&&(l.document.title=a.currentNetwork.info.name+i+a.config.site_name),e.info.metadata)try{a.currentNetwork.info.metadata=JSON.parse(e.info.metadata)}catch(r){}console.log("SET.............NETWORK SHORTCUT..",a.currentNetwork.info.shortcut),o.setNetworkShortcutHeader(a.currentNetwork.info.shortcut),a.$broadcast("load-mobile-ui-right-canvas")}),a.followNetworkFromAction=function(e){console.log("followNetworkFromAction....."),a.config.feature_locks.auto_follow_action&&(!e.id||e.id&&!a.currentNetwork.info||a.currentNetwork.info&&(e.id!=a.currentNetwork.info.id||a.currentNetwork.info.privateData&&a.currentNetwork.info.privateData.isFollower)||o.network.followNetwork(e.shortcut,function(e,t){!e&&t.status.success&&(m.eventTrack("Follow Network",{category:"network-followers",label:a.currentUser.id}),m.eventTrack("Follow Network",{category:"network-follow",label:a.currentNetwork.info.id+" - "+a.currentNetwork.info.name,value:1}),a.currentNetwork&&a.currentNetwork.info&&(a.currentNetwork.info.privateData||(a.currentNetwork.info.privateData={}),a.currentNetwork.info.privateData.isFollower=!0))}))},a.showFollowMessage=function(){if(!a.currentUser||!a.currentUser.id)return p(function(){angular.element("#signinheaderbtn").triggerHandler("click")}),!0;if(a.currentNetwork&&a.currentNetwork.info&&a.currentNetwork.info.privateData&&!a.currentNetwork.info.privateData.isFollower){if(!a.config.feature_locks.auto_follow_action)return u.showAutoMessage($("#followmessage_popuptext").text(),1500),!0;if(a.config.feature_locks.auto_follow_action&&a.config.feature_locks.id_realname_required&&2==a.currentNetwork.info.registration_type&&(!a.currentUser.realNameAvailability||!a.currentUser.snsAvailability))return a.$broadcast("FOLLOW_NETWORK"),!0}return!1},a.linkify=function(e,t){var o=$("<div />").html(angular.copy(e)).text();if(""===o)return r.trustAsHtml(o);var n="";return a.currentNetwork&&a.currentNetwork.info?n=a.currentNetwork.info.shortcut:a.viewed_user_profile&&a.viewed_user_profile.shortcut&&(n=a.viewed_user_profile.shortcut),angular.forEach(t,function(e,a){var t="(^|\\s|&#10;)#("+e+")",i=new RegExp(t,"gim");o=o.replace(i,'$1<a class="tag-link" href="/'+n+"/wall/t/"+e+'">#$2</a>')}),o=linkify(o),r.trustAsHtml(o)},a.extractLink=function(e){var a=[];if(""===e)return a;var t=e.replace(/\r\n/g,"\n").replace(/\n/g," ").split(" "),o=/((?:(http|https|Http|Https|rtsp|Rtsp):\/\/(?:(?:[a-zA-Z0-9\$\-\_\.\+\!\*\'\(\)\,\;\?\&\=]|(?:\%[a-fA-F0-9]{2})){1,64}(?:\:(?:[a-zA-Z0-9\$\-\_\.\+\!\*\'\(\)\,\;\?\&\=]|(?:\%[a-fA-F0-9]{2})){1,25})?\@)?)?((?:(?:[a-zA-Z0-9][a-zA-Z0-9\-]{0,64}\.)+(?:(?:aero|arpa|asia|a[cdefgilmnoqrstuwxz])|(?:biz|b[abdefghijmnorstvwyz])|(?:cat|com|coop|c[acdfghiklmnoruvxyz])|d[ejkmoz]|(?:edu|e[cegrstu])|f[ijkmor]|(?:gov|g[abdefghilmnpqrstuwy])|h[kmnrtu]|(?:info|int|i[delmnoqrst])|(?:jobs|j[emop])|k[eghimnrwyz]|l[abcikrstuvy]|(?:mil|mobi|museum|m[acdghklmnopqrstuvwxyz])|(?:name|net|n[acefgilopruz])|(?:org|om)|(?:pro|p[aefghklmnrstwy])|qa|r[eouw]|s[abcdeghijklmnortuvyz]|(?:tel|travel|t[cdfghjklmnoprtvwz])|u[agkmsyz]|v[aceginu]|w[fs]|y[etu]|z[amw]))|(?:(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9])\.(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9]|0)\.(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9]|0)\.(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[0-9])))(?:\:\d{1,5})?)(\/(?:(?:[a-zA-Z0-9\;\/\?\:\@\&\=\#\~\-\.\+\!\*\'\(\)\,\_])|(?:\%[a-fA-F0-9]{2}))*)?(?:\b|$)/i;return angular.forEach(t,function(e,t){var n=o.test(e);n&&("http"!=e.substr(0,4)&&(e="http://"+e),a.push(e))}),a},a.email_validator=function(e){var a=/^[a-zA-Z0-9._\+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;return a.test(e)},a.phone_validator=function(e){var a=/^\+([0-9]{2})?((-|\s)?[0-9]+)+$/;return a.test(e)},a.hasUpperCase=function(e){var a=/[A-Z]/;return a.test(e)},a.hasLowerCase=function(e){var a=/[a-z]/;return a.test(e)},a.hasSpecialCharacters=function(e){var a=/[ !\"#\$%&\'()\\+\,\-\.\/\:;<=\>\?@\[\\\]\^_`\{\|\}~]+.*/;return-1!==e.indexOf("*")||a.test(e)},a.hasNumber=function(e){var a=/[0-9]/;return a.test(e)},a.stateGoRefresh=function(e){s.go(e.state_name,e.data,{reload:!0})},a.flags={},a.homeLogoAction=function(){a.is_touch_device?a.flags.showPopupBrowse=!a.flags.showPopupBrowse:window.location="/"}}]),app.controller("resetpasswordCtrl",["$state","$rootScope",function(e,a){"use strict";a.resetpassword_key=e.params.resetpassword_key,"0"==e.params.resetpassword_key&&(a.resetpassword_key=""),console.log("resetpasswordCtrl : "+a.resetpassword_key),a.currentUser&&a.currentUser.id||($("#authwindow").foundation("reveal","open",{dismissmodalclass:"close-reveal-modal"}),a.logmode="resetpassword")}]),app.controller("promotedNetworkCtrl",["$scope","$state","$rootScope","$apiService","$analytics","$location",function(e,a,t,o,n,i){console.log("promotedNetworkCtrl"),e.showNext=!1,e.nextUrl=[],e.follow_network_loading=!0,console.log("$state.params.nexturl : ",a.params.nexturl),a.params.nexturl&&(e.showNext=!0,e.nextUrl=a.params.nexturl.split(",")),i.search().campaigncode&&(e.campaigncode=i.search().campaigncode),e.page=0,e.listOfNetwork=[],e.getNetworkList=function(){e.page=e.page+1,o.network.getPromotedNetwork(e.page,9,function(a,t){console.log("promoted network :=> ",t),0==e.listOfNetwork.length?e.listOfNetwork=t.tiles:e.listOfNetwork=e.listOfNetwork.concat(t.tiles),console.log(e.listOfNetwork)})},e.getNetworkList(),e.showInvite=function(e){if(document.getElementById("invitefriendswindow"))$("#invitefriendswindow").foundation("reveal","open");else{var a=[],t="";if(i.search().nexturl){a=i.search().nexturl.split(",");var o=a.indexOf(e);-1!==o&&a.length>o?(t=a.slice(o).join(","),window.location="/me/invite?nexturl="+t+"&campaigncode="+campaign_code):window.location="/me/invite?campaigncode="+campaign_code}else window.location="/me/invite?campaigncode="+campaign_code}}}]),app.controller("contactCtrl",["$scope","$rootScope","$timeout","$popupService","$apiService",function(e,a,t,o,n){"use strict";e.support={},e.show_support_form=!1,a.currentUser&&a.currentUser.id&&(e.support.contact_name=a.currentUser.first_name+" "+(a.currentUser.last_name?a.currentUser.last_name:""),e.support.contact_email=a.currentUser.emailAddress),e.sendInquiry=function(){if(a.currentUser&&a.currentUser.id||!a.config.feature_locks.enable_captcha)i();else{if(!e.captcha.getCaptchaData().valid)return o.showAutoMessage("You did not select an option."),void e.captcha.refresh();var t=$(".visualCaptcha-possibilities").hasClass("visualCaptcha-hide"),r={frontendData:e.captcha.getCaptchaData(),type:t?"audio":"image"};n.visualcaptcha["try"](r,function(a,t){return 200!=t.response?(o.showAutoMessage("You selected the wrong option."),void e.captcha.refresh()):(i(),void e.captcha.refresh())})}};var i=function(){e.support_form.$invalid||(e.is_support_loading=!0,e.support.support_email=a.config.support_email,a.currentUser&&a.currentUser.id&&(e.support.user_id=a.currentUser.id),e.support_send_error_msg="",e.support_send_error=!1,n.user.sendSupport(e.support,function(a,n){!a&&n.status.success?(o.showAutoMessage($("#inquiry_message_sent_div").text()),t(function(){o.close()},2e3),e.resetInquiry()):(e.support_send_error=!0,n.status&&n.status.err&&(e.support_send_error_msg=n.status.err)),e.is_support_loading=!1}))};e.resetInquiry=function(){e.show_support_form=!1,e.support_send_error=!1,e.support_send_error_msg="",e.support={},a.currentUser&&a.currentUser.id&&(e.support.contact_name=a.currentUser.first_name+" "+a.currentUser.last_name,e.support.contact_email=a.currentUser.emailAddress)}}]),app.controller("confirmEmailCtrl",["$scope","$rootScope","$apiService","$state","$store","$analytics",function(e,a,t,o,n,i){"use strict";console.log("confirmEmailCtrl"),e.is_email_activation_general_error=!1,
e.email_activation_error_code="",e.resend_email_activation_error_err="",e.is_email_activation_successful=!1,e.is_resend_email_activation_successful=!1,e.show_resend_email_activation_form=!1;var r=o.params.code||"";t.user.confirmEmail(r,function(t,o){!t&&o.status&&o.status.success?(i.eventTrack("User Confirmation",{category:"confirmed-signup",label:o.user.id}),e.is_email_activation_successful=!0,n.setToken(o.authToken),a.authToken=o.authToken,n.setValue("currentUser",o.user),a.currentUser=o.user):o.status&&o.status.code?e.email_activation_error_code=o.status.code:e.is_email_activation_general_error=!0,e.is_emailconfirmation_loading=!1}),e.confirmationemail={},e.showResendEmailActivationForm=function(){e.is_resend_email_activation_successful=!1,e.resend_email_activation_error_err="",e.show_resend_email_activation_form=!0,a.currentUser&&a.currentUser.id&&(e.confirmationemail.confirmation_email=a.currentUser.emailAddress)},e.closeResendEmailActivationForm=function(){e.confirmationemail={},e.show_resend_email_activation_form=!1},e.resendCodeFromActivationPage=function(){e.is_email_activation_general_error=!1,e.is_email_activation_successful=!1,e.is_resend_email_activation_successful=!1,e.show_resend_email_activation_form=!1,e.confirmationemail.confirmation_email&&(e.is_emailconfirmation_loading=!0,t.user.resendConfirmEmail(e.confirmationemail.confirmation_email,function(a,t){!a&&t.status.success?e.is_resend_email_activation_successful=!0:t.status&&t.status.err?e.resend_email_activation_error_err=t.status.err:e.is_email_activation_general_error=!0,e.closeResendEmailActivationForm(),e.is_emailconfirmation_loading=!1}))}}]),app.filter("startFrom",[function(){"use strict";return function(e,a){return a=+a,e.slice(a)}}]),app.controller("ordersCtrl",["$scope","$apiService","$rootScope",function(e,a,t){"use strict";e.orderList=null,e.listOfOrders=function(){var o=t.currentUser.shortcut,n=t.currentUser.emailAddress;a.network.getOrderList(o,n,function(a,t){e.orderList=t,console.log("---------->>>>>>> the orders are....."),console.log(e.orderList);for(var o=0;o<t.length;o+=1){var n=t[o],i="";2==n.invoiceInfo.status?i="Payment Pending":3==n.invoiceInfo.status?i="Payment Failed":4==n.invoiceInfo.status?i="Payment Success":5==n.invoiceInfo.status?i="Payment Cancelled":6==n.invoiceInfo.status?i="Shipment Success":7==n.invoiceInfo.status?i="Shipment Fail":8==n.invoiceInfo.status&&(i="Order is being processed"),e.orderList[o].invoiceInfo.status=i}})},e.listOfOrders(),e.goToOrder=function(e){var a="/orders/"+String(e);window.location.href=a}}]),app.controller("ordersCtrlItem",["$scope","$state","$apiService","$rootScope",function(e,a,t,o){"use strict";e.orderList=null,e.listOrderItem=function(){var n=a.params.orderId,i=o.currentUser.shortcut,r=o.currentUser.emailAddress;t.network.getOrderListItem(i,r,n,function(a,t){e.orderItem=t,2==e.orderItem.invoiceInfo.status?e.orderItemStatus="Payment Pending":3==e.orderItem.invoiceInfo.status?e.orderItemStatus="Payment Failed":4==e.orderItem.invoiceInfo.status?e.orderItemStatus="Payment Success":5==e.orderItem.invoiceInfo.status?e.orderItemStatus="Payment Cancelled":6==e.orderItem.invoiceInfo.status?e.orderItemStatus="Shipment Success":7==e.orderItem.invoiceInfo.status?e.orderItemStatus="Shipment Fail":8==e.orderItem.invoiceInfo.status&&(e.orderItemStatus="Order is being processed")})},e.listOrderItem(),e.backToOrderList=function(){window.location.href="/orders/"},e.changeMainImage=function(e){$("#order-main-image").attr("img",e),console.log("CHANGING IMAGE URL"),console.log("new image src is ",e)}}]),app.controller("mediaUploadCtrl",["$scope","$apiService","$state","$rootScope",function(e,a,t,o){"use strict";console.log("media upload controller",t);var n="",i=t.$current.parent.self.name||t.current.name;"me"==i?o.currentUser&&(n=o.currentUser.shortcut):n=t.params.shortcut,o.hideUploadButton=!0,o.usermenu_tab="media","network"==i&&a.network.profile(n,function(a,t){o.currentNetwork=t.network,e.networkHeader="/_partials/network/"+t.network.info.type+"/_header-"+t.network.info.type})}]),app.controller("logoutController",["$rootScope","$store","$apiService","$state",function(e,a,t,o){"use strict";console.log("--logout---");var n=o.params.returnurl?o.params.returnurl:"";console.log("--logout--- returnurl "+n),t.user.logout(function(t,o){!t&&o.status&&o.status.success&&(console.log("logout success"),e.authToken="",e.currentUser={},a.setValue("currentUser",{}),a.setToken(""),document.cookie="display_language=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;"),location.href="/logoutcomplete?returnurl="+n})}]),app.controller("followLinkedNetworkCtrl",["$scope","$rootScope","$apiService","$analytics",function(e,a,t,o){"use strict";a.is_follow_linked_network_triggered=!1,a.network_to_follow={},e.$watch("is_follow_linked_network_triggered",function(e){return e?($(".follow-linked-network-window").data("reveal-init",{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!1,close_on_esc:!1,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",bg:$(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}}),void $(".follow-linked-network-window").foundation("reveal","open")):($(".follow-linked-network-window").is(":visible")&&$(".follow-linked-network-window").foundation("reveal","close"),void(a.is_follow_linked_network_triggered=!1))}),$(document).on("closed",".follow-linked-network-window[data-reveal]",function(){e.$apply(function(){a.is_follow_linked_network_triggered=!1})}),a.global_follow_network_loading=!1,e.followLinkedNetwork=function(n){return!a.config.feature_locks.id_realname_required||2!=a.network_to_follow.registration_type||!a.currentUser||a.currentUser.realNameAvailability&&a.currentUser.snsAvailability?void(a.global_follow_network_loading||(a.global_follow_network_loading=!0,t.network.followNetwork(a.network_to_follow.shortcut,function(t,n){!t&&n.status.success&&(o.eventTrack("Follow Network",{category:"network-followers",label:a.currentUser.id}),o.eventTrack("Follow Network",{category:"network-follow",label:a.network_to_follow.id+" - "+a.network_to_follow.name,value:1}),a.network_to_follow.privateData.isFollower=!0,e.closeLinkedNetworkWindow()),a.global_follow_network_loading=!1}))):(a.is_follow_network_sns_triggered=!0,void console.log("not follow yet... trigger popup sns"))},e.closeLinkedNetworkWindow=function(){$(".follow-linked-network-window").foundation("reveal","close")}}]),app.controller("followNetworkSNSCtrl",["$scope","$rootScope","$apiService","$analytics","$store",function(e,a,t,o,n){"use strict";e.follow_network_sns_error="",e.follow_network_sns_error_required=!1,a.is_follow_network_sns_triggered=!1,a.network_to_follow={},e.sns={};var i=new Date;e.dobYears=_.range(i.getFullYear()-80,i.getFullYear()),e.dobDays=_.range(1,32),e.$watch("is_follow_network_sns_triggered",function(e){return e?($(".follow-network-sns-window").data("reveal-init",{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!1,close_on_esc:!1,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",bg:$(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}}),void $(".follow-network-sns-window").foundation("reveal","open")):($(".follow-linked-network-window").is(":visible")&&$(".follow-linked-network-window").foundation("reveal","close"),void(a.is_follow_network_sns_triggered=!1))}),$(document).on("closed",".follow-network-sns-window[data-reveal]",function(){e.$apply(function(){a.is_follow_network_sns_triggered=!1})}),a.global_follow_network_loading=!1,e.followNetworkSNS=function(i){if(e.follow_network_sns_error="",e.follow_network_sns_error_required=!1,!(e.sns.realname&&e.sns.sns_id&&e.sns.dob_year&&e.sns.dob_month&&e.sns.dob_day))return void(e.follow_network_sns_error_required=!0);if(!a.global_follow_network_loading){a.global_follow_network_loading=!0;var r=angular.copy(a.currentUser);r.realname=e.sns.realname,r.sns_id=e.sns.sns_id,r.dob_year=e.sns.dob_year,r.dob_month=e.sns.dob_month,r.dob_day=e.sns.dob_day,t.user.updateProfile(a.currentUser.shortcut,r,function(i,r){!i&&r.status.success?(n.setValue("currentUser",r.user),angular.extend(a.currentUser,r.user),a.currentUser=r.user,t.network.followNetwork(a.network_to_follow.shortcut,function(t,n){!t&&n.status.success?(o.eventTrack("Follow Network",{category:"network-followers",label:a.currentUser.id}),o.eventTrack("Follow Network",{category:"network-follow",label:a.network_to_follow.id+" - "+a.network_to_follow.name,value:1}),a.network_to_follow.privateData.isFollower=!0,e.closeNetworkSNSWindow()):t?e.follow_network_sns_error=$("#general-error-message:first").text():r.status.err&&(e.follow_network_sns_error=r.status.err)})):i?e.follow_network_sns_error=$("#general-error-message:first").text():r.status.err&&(e.follow_network_sns_error=r.status.err),a.global_follow_network_loading=!1})}},e.closeNetworkSNSWindow=function(){e.follow_network_sns_error="",e.follow_network_sns_error_required=!1,a.is_follow_network_sns_triggered=!1,e.sns={},$(".follow-network-sns-window").foundation("reveal","close")}}]),app.controller("voucherCtrl",["$scope","$apiService","$rootScope","$popupService",function(e,a,t,o){"use strict";console.log("voucherCtrl"),e.virtualcurrencyvoucher={},e.virtualcurrencyvoucher.paging={page:1,limit:10},e.virtualcurrencyvoucher.voucherList=[],e.virtualcurrencyvoucher.showLoadMore=!1;var n=function(){a.virtualcurrency.getVoucherList(e.virtualcurrencyvoucher.paging.page,e.virtualcurrencyvoucher.paging.limit,function(a,t){t&&t.status&&t.status.success&&t.virtualCurrencyVouchers&&t.virtualCurrencyVouchers.length>0?(angular.forEach(t.virtualCurrencyVouchers,function(a){e.virtualcurrencyvoucher.voucherList.push(a)}),t.virtualCurrencyVouchers.length<e.virtualcurrencyvoucher.paging.limit?e.virtualcurrencyvoucher.showLoadMore=!1:e.virtualcurrencyvoucher.showLoadMore=!0):e.virtualcurrencyvoucher.showLoadMore=!1})};n(),e.virtualcurrencyvoucher.loadmoreVoucher=function(){e.virtualcurrencyvoucher.paging.page+=1,n()},e.virtualcurrencyvoucher.doRedeem=function(e){return e?void a.virtualcurrency.purchaseVoucher({value:e.currency_required},function(e,a){return a&&a.status.success?void o.showAutoMessage("Voucher redeemed successfully."):void o.showAutoError(a.status.err)}):void o.showAutoError("Please choose a voucher to redeem.")}}]),app.controller("ctrlPaymentGateway",["$scope","$apiService","$rootScope","$timeout","$popupService","$state","$store",function(e,a,t,o,n,i,r){console.log("ctrlPaymentGateway"),e.isError=!1,e.isSucess=!1,e.isCancel=!1,console.log("$state.current.name "+i.current.name),"payments-successful"===i.current.name?(e.isSucess=!0,a.user.profile(t.currentUser.shortcut,function(e,a){t.isRedeeming=!1,t.isSuccess=!0,t.viewed_user_profile=a.user,r.setValue("currentUser",a.user),t.currentUser=a.user,console.log("REFRESH_CURRENCY ctrlPaymentGateway updated profile..")})):"payments-failure"===i.current.name?e.isError=!0:"payments-cancel"===i.current.name&&(e.isCancel=!0)}]),app.controller("socialAuthCallbackCtrl",["$scope","$store","$rootScope","$location","$apiService","$analytics",function(e,a,t,o,n,i){"use strict";var r=o.search();if(e.show_redirect=!0,e.onFacebook=function(){window.location="/auth/facebook"},e.onFacebookReRequest=function(){window.location="/auth/facebook?request=email"},r.rerequest&&!t.currentUser)return e.show_redirect=!1,$("body").on("keyup",function(e){return 27!==e.which}),void $("#facebook-rerequest").foundation("reveal","open");if(t.config&&t.config.fb_tracking_pixel&&"1"==t.config.fb_tracking_pixel.fb_pixel_enable&&r.isnew){var s=t.config.fb_tracking_pixel.sign_up_id,c=t.config.currency.code,l="0.00";!function(){var e=window._fbq||(window._fbq=[]);if(!e.loaded){var a=document.createElement("script");a.async=!0,a.src="//connect.facebook.net/en_US/fbds.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(a,t),e.loaded=!0,console.log("fb tracking sign up")}}(),window._fbq=window._fbq||[],window._fbq.push(["track",s,{value:l,currency:c}])}var d=a.getValue("_n"),u=a.getValue("_return");if("0"==r.redirect_to_promoted_network){var m=JSON.parse(localStorage.getItem("network_page"));m?(window.location.href=m.page_url,localStorage.removeItem("network_page")):window.location="/me/newsfeeds"}else{var m=JSON.parse(localStorage.getItem("network_page"));if(m)window.location.href=m.page_url,localStorage.removeItem("network_page");else{if(d&&""!=d){a.setValue("_n",null);var p=d.split("?"),g=null;return p&&p.length>1&&(g=_.object(_.compact(_.map(p[1].split("&"),function(e){return e?e.split("="):void 0})))),void(g&&g.campaigncode?n.user.fetchCampaignByReferralCode({campaign_code:g.campaigncode},function(e,a){console.log("socialAuthCallbackCtrl  fetchCampaignByReferralCode "),a.status&&a.status.success?(console.log("queryString.isnew",d,r.isnew,a.campaign.metadataObj.label),n.user.autoFolloNetworkByReferralCode({referral_code:g.campaigncode},function(e,a){}),"1"==r.isnew?(n.user.updateUserFlowStatus({flow_status:1},function(e,a){}),2==a.campaign.metadataObj.id?window.location="/me/info?edit=1&campaigncode="+g.campaigncode:window.location=d):(1==a.campaign.metadataObj.id&&n.user.updateUserFlowStatus({flow_status:1},function(e,a){}),window.location=d)):window.location=d}):window.location=d)}if(u&&""!=u){var f=t.getDomain(u),r=o.search(),h=[{category:"actions",action:"E-commerce Redirect (External-Login via Facebook)",label:"Just redirected to e-commerce from external link",value:1},{category:"actions",action:"E-commerce Redirect (External-Login via Twitter)",label:"Just redirected to e-commerce from external link",value:1},{category:"actions",action:"E-commerce Redirect (External-Login via Google)",label:"Just redirected to e-commerce from external link",value:1}],v=h[r.source]||!1;return void n.domain.isDomainWhitelisted(f,function(e,t){!e&&t&&t.iswhitelisted?(a.setValue("_return",null),!v||!window.ga||!t.internalGATracker&&!t.externalGATracker||null==t.internalGATracker&&null==t.externalGATracker?n.auth.requestToken(function(e,a){a.status&&a.status.success?window.location=u:window.location="/"}):i.eventTrack(v.action,{category:v.category,label:v.label,value:v.value,hitCallback:function(){n.auth.requestToken(function(e,a){a.status&&a.status.success?u.indexOf("?")>-1?window.location=u+"&token="+a.token+"&src="+window.location.hostname:window.location=u+"?token="+a.token+"&src="+window.location.hostname:window.location="/"})}})):window.location="/"})}window.location="/"}}}]),app.controller("urlGoCtrl",["$apiService","$state",function(e,a){"use strict";return console.log("urlGoCtrl",a),a.params.urlcode?void e.fetchShortCodeUrl(a.params.urlcode,function(e,a){return a.status&&a.status.success?void(window.location=a.url):void(window.location="/")}):void(window.location="/")}]),app.controller("urlGoShortCutCtrl",["$apiService","$state",function(e,a){"use strict";console.log("urlGoShortCutCtrl",a);var t="/",o=function(e){return e.replace(/\s/g,"-").replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"").toLowerCase()};a.params.shortcut&&e.getUrlRedirect(a.params.shortcut,function(e,a){if(a.status&&a.status.success){var n=a.urlRedirect;switch(n.redirect_type){case 1:t="/shopping/product/"+o(n.product.title_language)+"-"+n.product.product_id;break;case 2:t=n.merchant.permaLink;break;case 3:t=n.productCollection.permaLink;break;case 4:t=n.gameOffer.permaLink;break;case 5:t=n.network.permaLink;break;case 6:t="/shopping/category/"+o(n.category.title_language);break;case 7:t=n.event.permaLink}}window.location=t})}]),app.controller("createNetworkCtrl",["$scope","$apiService","$location","$rootScope","$timeout","$apiSocialCommerce",function(e,a,t,o,n,i){"use strict";console.log("createNetworkCtrl");var r="";if(e.isSubmitted=!1,!t.search().campaigncode)return void(window.location="/");if(r=t.search().campaigncode,!o.currentUser||!o.currentUser.id)return void(window.location="/campaign/"+r);e.network={};var s={target:3,count:null};i.getAvailableCategories(s,function(a,t){t.status&&t.status.success&&(e.networkCategories=t.categories)});var c={region:{},province:{},zone:{},area:{}};e.$watch("network.region",function(a){if(a){var t=_.find(e.networkCategories,function(e){return e.id==a});if(t.include_tags){var o=t.include_tags;c.region.inclusive_tags=o}if(t.exclude_tags){var n=t.exclude_tags;c.region.exclusive_tags=n}c.region.inclusive_tags_condition=t.inclusive_tags_condition?t.inclusive_tags_condition:"",c.region.exclusive_tags_condition=t.exclusive_tags_condition?t.exclusive_tags_condition:"",e.province_list=t.children,e.network.province=""}}),e.$watch("network.province",function(a){if(a){var t=_.find(e.province_list,function(e){return e.id==a});if(t.include_tags){var o=t.include_tags;c.province.inclusive_tags=o}if(t.exclude_tags){var n=t.exclude_tags;c.province.exclusive_tags=n}c.province.inclusive_tags_condition=t.inclusive_tags_condition?t.inclusive_tags_condition:"",c.province.exclusive_tags_condition=t.exclusive_tags_condition?t.exclusive_tags_condition:"",e.zone_list=t.children}else e.zone_list={},c.province.inclusive_tags=[],c.province.inclusive_tags=[],c.province.inclusive_tags_condition="",c.province.exclusive_tags_condition="";e.network.zone=""}),e.$watch("network.zone",function(a){if(a){var t=_.find(e.zone_list,function(e){return e.id==a});if(t.include_tags){var o=t.include_tags;c.zone.inclusive_tags=o}if(t.exclude_tags){var n=t.exclude_tags;c.zone.exclusive_tags=n}c.zone.inclusive_tags_condition=t.inclusive_tags_condition?t.inclusive_tags_condition:"",c.zone.exclusive_tags_condition=t.exclusive_tags_condition?t.exclusive_tags_condition:"",e.area_list=t.children}else e.area_list={},c.zone.inclusive_tags=[],c.zone.inclusive_tags=[],c.zone.inclusive_tags_condition="",c.zone.exclusive_tags_condition="";e.network.area=""}),e.$watch("network.area",function(a){if(a){var t=_.find(e.area_list,function(e){return e.id==a});if(t.include_tags){var o=t.include_tags;c.area.inclusive_tags=o}if(t.exclude_tags){var n=t.exclude_tags;c.area.exclusive_tags=n}c.area.inclusive_tags_condition=t.inclusive_tags_condition?t.inclusive_tags_condition:"",c.area.exclusive_tags_condition=t.exclusive_tags_condition?t.exclusive_tags_condition:""}else c.area.inclusive_tags=[],c.area.inclusive_tags=[],c.area.inclusive_tags_condition="",c.area.exclusive_tags_condition=""}),e.campaigncode=r,e.closeSuccessModal=function(){$("#newnetworksuccess").foundation("reveal","close"),window.location="/"},e.createNetwork=function(){if(console.log("createNetwork",e.network),e.isSubmitted=!0,e.errormsg="",0==$('input[name="shortcut"]').length&&(e.network.shortcut=e.network.name.replace(/ /g,"-")),e.shortcut_isinvalid=!1,e.network.shortcut&&""!==e.network.shortcut&&!(e.network.shortcut.length<0||e.network.shortcut.length>15)){var t=new RegExp("^[a-zA-Z0-9-_]*$");if(!t.test(e.network.shortcut))return void(e.shortcut_isinvalid=!0);e.network.shortcut=e.network.shortcut.toLowerCase();var o={title:e.network.name,description:e.network.description?e.network.description:"",shortcut:e.network.shortcut,tags:_.flatten([c.region.inclusive_tags,c.province.inclusive_tags,c.zone.inclusive_tags,c.area.inclusive_tags]),metadata:{founder:e.network.founder?e.network.founder:"",phone:e.network.phone?e.network.phone:"",websiteurl:e.network.websiteurl?e.network.websiteurl:"",type_founder:e.network.type_founder?e.network.type_founder:"",province_area:e.network.area_province?e.network.area_province:"",address:e.network.address?e.network.address:""},profileImageFsref:e.network.profile_photo?e.network.profile_photo.fsRef:"",coverImageFsref:e.network.cover_photo.fsRef?e.network.cover_photo.fsRef:"",profileImageUrl:e.network.profile_photo?e.network.profile_photo.url:"",coverImageUrl:e.network.cover_photo.url?e.network.cover_photo.url:""};e.isLoading=!0,a.network.newNetworkRequest(o,function(t,o){e.isLoading=!1,o.status&&o.status.success?(a.user.updateUserFlowStatus({flow_status:2},function(e,a){}),e.is_new_network_successful=!0,$("#newnetworksuccess").foundation("reveal","open")):(e.errormsg=$("#general-error-message:first").text(),o.status&&o.status.err&&(e.errormsg=o.status.err))})}},e.networkphoto={},e.openNetworkPicWindow=function(a){console.log("openNetworkPicWindow"),e.upload_network_pic_type=a,e.crop_ratio=1,"cover"==a&&(e.crop_ratio=.7),$(".changenetworkpic-window").data("reveal-init",{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!1,close_on_esc:!1,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",bg:$(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}}),$(".changenetworkpic-window").foundation("reveal","open")},e.changeNetworkPhoto={url:"/api/media/upload",singleFileUploads:!0,maxNumberOfFiles:1,autoUpload:!0,formData:{resize:[200,400,800]},pasteZone:null,add:function(a,t){e.network_fileupload_error=!1,e.network_fileupload_size_error=!1;var o=!1,n=/^image\/(gif|jpe?g|png)$/i;t.originalFiles[0]&&t.originalFiles[0].type&&!n.test(t.originalFiles[0].type)&&(o=!0),t.originalFiles[0]&&t.originalFiles[0].size&&t.originalFiles[0].size>5e6&&(e.network_fileupload_size_error=!0,o=!0),o||t.submit(),e.$apply()},done:function(a,t){e.networkphoto={url:o.config.cdn_url+t._response.result.fsRef,fsRef:t._response.result.fsRef},e.is_upload_preview_loading=!1,e.$apply()},progress:function(a,t){e.is_upload_preview_loading=!0,e.$apply()},fail:function(a,t){e.network_fileupload_error=!0,e.$apply(),console.log("File upload fail. Either the file is invalid or something went wrong. Please try again.",a,t)}},e.uploadfile_link=function(){$("#changephoto").click();var e=new UAParser,a=e.getResult();"mobile"!=o.device&&"mobile"!=a.device.type||n(function(){$("#changephoto").click()},1)},e.clearNetworkphoto=function(a){e.crop_coords={},e.is_upload_preview_loading=!1,e.network_fileupload_error=!1,e.network_fileupload_size_error=!1,e.networkphoto={},$(".changenetworkpic-window").foundation("reveal","close")},e.crop_coords={},e.setCropCoords=function(a){e.crop_coords=a,e.$apply()},e.saveNetworkPhoto=function(){e.cropPhoto()},e.cropPhoto=function(){if(console.log("crop"),e.crop_coords.w){var t=e.crop_coords;t.width=e.crop_coords.w,t.height=e.crop_coords.h,t.fsRef=e.networkphoto.fsRef,e.networkphoto_save_loading=!0,t.x<0&&(t.x=0),t.y<0&&(t.y=0),a.user.cropProfilePhoto(t,function(a,t){e.networkphoto_save_loading=!1;var o="";!a&&t.status.success?("profile"==e.upload_network_pic_type?e.network.profile_photo=angular.copy(e.networkphoto):"cover"==e.upload_network_pic_type&&(e.network.cover_photo=angular.copy(e.networkphoto)),e.clearNetworkphoto()):(o="",a?o=$("#general-error-message:first").text():t.status.err&&(o=t.status.err),$popupService.showAutoMessage(o,2e3,function(){e.clearNetworkphoto()}))})}}}]),app.controller("joinNetworkCtrl",["$scope","$apiService","$location","$rootScope","$timeout","$apiSocialCommerce","$analytics",function(e,a,t,o,n,i,r){"use strict";console.log("joinNetworkCtrl");var s="";if(!t.search().campaigncode)return void(window.location="/");if(s=t.search().campaigncode,!o.currentUser||!o.currentUser.id)return void(window.location="/campaign/"+s);e.network={};var c={target:3,count:null};i.getAvailableCategories(c,function(a,t){t.status&&t.status.success&&(e.networkCategories=t.categories)});var l={region:{},province:{},zone:{},area:{}};e.$watch("network.region",function(a){if(a){var t=_.find(e.networkCategories,function(e){return e.id==a});if(t.include_tags){var o=t.include_tags;l.region.inclusive_tags=o}if(t.exclude_tags){var n=t.exclude_tags;l.region.exclusive_tags=n}l.region.inclusive_tags_condition=t.inclusive_tags_condition?t.inclusive_tags_condition:"",l.region.exclusive_tags_condition=t.exclusive_tags_condition?t.exclusive_tags_condition:"",e.province_list=t.children,e.network.province=""}}),e.$watch("network.province",function(a){if(a){var t=_.find(e.province_list,function(e){return e.id==a});if(t.include_tags){var o=t.include_tags;l.province.inclusive_tags=o}if(t.exclude_tags){var n=t.exclude_tags;l.province.exclusive_tags=n}l.province.inclusive_tags_condition=t.inclusive_tags_condition?t.inclusive_tags_condition:"",l.province.exclusive_tags_condition=t.exclusive_tags_condition?t.exclusive_tags_condition:"",e.zone_list=t.children}else e.zone_list={},l.province.inclusive_tags=[],l.province.exclusive_tags=[],l.province.inclusive_tags_condition="",l.province.exclusive_tags_condition="";e.network.zone=""}),e.$watch("network.zone",function(a){if(a){var t=_.find(e.zone_list,function(e){return e.id==a});if(t.include_tags){var o=t.include_tags;l.zone.inclusive_tags=o}if(t.exclude_tags){var n=t.exclude_tags;l.zone.exclusive_tags=n}l.zone.inclusive_tags_condition=t.inclusive_tags_condition?t.inclusive_tags_condition:"",l.zone.exclusive_tags_condition=t.exclusive_tags_condition?t.exclusive_tags_condition:"",e.area_list=t.children}else e.area_list={},l.zone.inclusive_tags=[],l.zone.exclusive_tags=[],l.zone.inclusive_tags_condition="",l.zone.exclusive_tags_condition="";e.network.area=""}),e.$watch("network.area",function(a){if(a){var t=_.find(e.area_list,function(e){return e.id==a});if(t.include_tags){var o=t.include_tags;l.area.inclusive_tags=o}if(t.exclude_tags){var n=t.exclude_tags;l.area.exclusive_tags=n}l.area.inclusive_tags_condition=t.inclusive_tags_condition?t.inclusive_tags_condition:"",l.area.exclusive_tags_condition=t.exclusive_tags_condition?t.exclusive_tags_condition:""}else l.area.inclusive_tags=[],l.area.exclusive_tags=[],l.area.inclusive_tags_condition="",l.area.exclusive_tags_condition=""}),e.campaigncode=s,e.searchNetworkTags=function(){e.isLoading=!0;var t=_.flatten([l.region.inclusive_tags,l.province.inclusive_tags,l.zone.inclusive_tags,l.area.inclusive_tags]),o={inclusive_tags:t.join()};a.network.listNetworksByCategory(o,function(a,t){e.isLoading=!1,e.hasSearched=!0,t.status&&t.status.success&&(e.networkList=t.networks)})},e.followNetwork=function(t,n){return t&&t.stopPropagation(),n.linkedNetworks&&n.linkedNetworks.length?(o.is_follow_linked_network_triggered=!0,o.network_to_follow=n,void console.log("not follow yet... trigger popup linked")):!o.config.feature_locks.id_realname_required||2!=n.registration_type||!o.currentUser||o.currentUser.realNameAvailability&&o.currentUser.snsAvailability?void(e["follow_network_loading_"+n.shortcut]||(e["follow_network_loading_"+n.shortcut]=!0,a.network.followNetwork(n.shortcut,function(a,t){!a&&t.status.success?_.find(e.networkList,function(e){return e.shortcut==n.shortcut?(r.eventTrack("Follow Network",{category:"network-followers",label:o.currentUser.id}),r.eventTrack("Follow Network",{category:"network-follow",label:e.id+" - "+e.name,value:1}),e.privateData.isFollower=!0,!0):void 0}):a||"USER_ALREADY_FOLLOWING_NETWORK"!=t.status.code||(n.privateData.isFollower=!0),e["follow_network_loading_"+n.shortcut]=!1}))):(o.is_follow_network_sns_triggered=!0,o.network_to_follow=n,void console.log("not follow yet... trigger popup sns"))},e.unFollowNetwork=function(t,o){t&&t.stopPropagation(),a.network.unFollowNetwork(o.shortcut,function(a,t){!a&&t.status.success&&_.find(e.networkList,function(e){return e.shortcut==o.shortcut?(r.eventTrack("Unfollow Network",{category:"network-unfollow",label:e.id+" - "+e.name,value:1}),e.privateData.isFollower=!1,!0):void 0})})},e.nextProcess=function(){if(document.getElementById("invitefriendswindow"))$("#invitefriendswindow").foundation("reveal","open");else{var e=[],a="";t.search().nexturl&&(e=t.search().nexturl.split(","),e.length&&e.length>1&&(a=e[1])),window.location="/me/invite?nexturl="+a+"&campaigncode="+s}}}]),app.controller("letsGetStatedCtrl",["$scope","$apiService","$state","$rootScope",function(e,a,t,o){"use strict";console.log("letsGetStatedCtrl",t),o.hideAuthHeader=!0,e.getstartmode="signup",e.switchStartedMode=function(){"signup"==e.getstartmode?e.getstartmode="login":e.getstartmode="signup"}}]),define("controller.social.platform",function(){}),app.controller("testctrl",["$scope","$store","$apiService","$rootScope",function(e,a,t,o){console.log("testctrl..."),e.checkprofile=function(){console.log("check currentUser");var e=a.getValue("currentUser");console.log(e)},e.cleartour=function(){if(o.currentUser){var e=[];t.user.setTourValue(e,o.currentUser.shortcut,function(e,t){console.log("updated tour :",t.user),a.setValue("currentUser",t.user),o.currentUser=t.user,alert("clear tour value!")})}}}]),app.controller("angularticsCtrl",["$scope","$store","$analytics","$http","$timeout",function(e,a,t,o,n){console.log("angularticsCtrl..."),e.trackEventProgrammatically=function(){t.eventTrack("Click",{category:"Win Commands",label:"Track with Win"})},e.getPP=function(){var e=window.XMLHttpRequest||function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return null};null!==e&&(e.open("GET","/test/multiplepartialstream",!0),e.onprogress=function(){console.log("PROGRESS: "+e.responseText)},e.send())}}]),define("controller.test",function(){}),define("gapiLoader",{load:function(e,a,t,o){return o.isBuild?(console.log("[gapiLoader] Skipping runtime library"),void t()):void a(["gapi"],function(a){return a[e]?t(a[e]):void a.load(e,function(){t(a[e])})})}}),app.directive("uiPlatform",["$rootScope","$store","$location","$apiService","$state","$sce","$timeout","$popupService","$analytics",function(e,a,t,o,n,i,r,s,c){return{restrict:"C",scope:!0,link:function(s,l,d){$(document).on("opened.fndtn.reveal","[data-reveal]",function(){var e=$(this);$(window).innerHeight()<770&&$(e).css("top",$(document).scrollTop()+15+"px")}),console.log("uiPlatform"),e.class_state="",e.statename="",e.gotPromotedNetwork=!1,e.no_sticky=!1,e.show_tour=!0,$(window).on("scrollstop",function(){e.$broadcast("VALIDATE_IMAGE_ONSCROLL")}),$(window).on("resizestop",function(){e.$broadcast("VALIDATE_IMAGE_ONSCROLL")}),e.toDate=function(e,a){var t=moment.unix(e),o=t.format(a);return o},e.toDateTimezone=function(e,a,t){var o=moment.unix(e),n=o.format(a);return n},e.autoplayUrl=function(e){var a=document.createElement("a"),t=e;a.href=e;var o=a.hostname;return o=o.replace("www.",""),console.log("video domain: ",o),"youtube.com"!=o&&"youtu.be"!=a.hostname||(t=e+"?autoplay=1"),t},e.getPath=function(e){var a=document.createElement("a");return a.href=e,a.pathname},$(document).keyup(function(a){27==a.keyCode&&(e.$broadcast("CLOSE_POP_ON_ESC"),$(".close-reveal-modal").click())}),e.toDate=function(e,a){return moment.unix(e).format(a)},s.follow_network_loading=!1,e.followOtherNetwork=function(a){return e.currentUser&&e.currentUser.id?(s.follow_network_loading=!0,void o.network.followNetwork(a.shortcut,function(t,o){!t&&o.status.success?(a.privateData.isFollower=!0,console.log("network.privateData.isFollower ",a.privateData.isFollower),c.eventTrack("Follow Network",{category:"network-followers",label:e.currentUser.id}),c.eventTrack("Follow Network",{category:"network-follow",label:a.id+" - "+a.name,value:1})):t||"USER_ALREADY_FOLLOWING_NETWORK"!=o.status.code||(a.privateData.isFollower=!0,console.log("network.privateData.isFollower ",a.privateData.isFollower)),s.follow_network_loading=!1})):(r(function(){angular.element("#signinheaderbtn").triggerHandler("click")}),!0)},e.unFollowOtherNetwork=function(a){return e.currentUser&&e.currentUser.id?(s.follow_network_loading=!0,void o.network.unFollowNetwork(a.shortcut,function(e,t){!e&&t.status.success&&(a.privateData.isFollower=!1,console.log("network.privateData.isFollower ",a.privateData.isFollower),c.eventTrack("Unfollow Network",{category:"network-unfollow",label:a.id+" - "+a.name,value:1})),s.follow_network_loading=!1})):(r(function(){angular.element("#signinheaderbtn").triggerHandler("click")}),!0)};e.$watch("mobile_agent + config",function(){if(e.mobile_agent&&e.config){s.showMobile=!0;
var a=!0;if(a){s.showMobile=!0;var t=(e.config.user_from_country,"");if(n.current.name.indexOf("network")>0)if("ios"==e.mobile_agent)try{t=e.config.ios_appstore_url,s.appURL=e.currentNetwork.info.metadata.ios_appstore_url,s.appICON=e.currentNetwork.info.metadata.ios_appstore_iconurl,s.DownloadMessage="mobile.DownloadfromAppStore"}catch(o){t=e.config.ios_appstore_url,s.appURL=i.trustAsResourceUrl(t),s.appICON=e.config.ios_appstore_iconurl,s.DownloadMessage="mobile.DownloadfromAppStore",t||(s.showMobile=!1)}else if("android"==e.mobile_agent)try{s.appURL=e.currentNetwork.info.metadata.google_marketplace_url,s.appICON=e.currentNetwork.info.metadata.google_marketplace_iconurl,s.DownloadMessage="mobile.DownloadfromAppStore"}catch(o){s.appURL=e.config.google_marketplace_url,s.appICON=e.config.google_marketplace_iconurl,s.DownloadMessage="mobile.DownloadfromPlayStore",t||(s.showMobile=!1)}else s.showMobile=!1;else if("ios"==e.mobile_agent)try{t=e.config.ios_appstore_url,s.appURL=e.currentNetwork.info.metadata.ios_appstore_url,s.appICON=e.currentNetwork.info.metadata.ios_appstore_iconurl,s.DownloadMessage="mobile.DownloadfromAppStore"}catch(o){t=e.config.ios_appstore_url,s.appURL=i.trustAsResourceUrl(t),s.appICON=e.config.ios_appstore_iconurl,s.DownloadMessage="mobile.DownloadfromAppStore",console.log("================="),console.log(t),console.log(s.appURL),console.log(s.appICON),console.log(s.DownloadMessage),console.log("=====================")}else if("android"==e.mobile_agent)try{s.appURL=e.config.google_marketplace_url,s.appICON=e.config.google_marketplace_iconurl,s.DownloadMessage="mobile.DownloadfromPlayStore",console.log("================= andriod try --"),console.log(t),console.log(s.appURL),console.log(e.config),console.log(e.config.google_marketplace_iconurl),console.log(s.appICON),console.log(s.DownloadMessage),console.log("=====================")}catch(o){s.appURL=e.config.google_marketplace_url,s.appICON=e.config.google_marketplace_iconurl,s.DownloadMessage="mobile.DownloadfromPlayStore",console.log("================= andriod catch"),console.log(t),console.log(s.appURL),console.log(e.config.google_marketplace_iconurl),console.log(s.appICON),console.log(s.DownloadMessage),console.log("=====================")}else s.showMobile=!1}else s.showMobile=!1;console.log(n.current.name)}}),s.closeMobile=function(){s.showMobile=!1;var e=1/12,a=new Date;a.setTime(a.getTime()+24*e*60*60*1e3);var t="expires="+a.toGMTString();document.cookie="dismissForever=true; "+t},s.dismissForever=function(){var e=1/12,a=new Date;a.setTime(a.getTime()+24*e*60*60*1e3);var t="expires="+a.toGMTString();document.cookie="dismissForever=true; "+t},e._pageloading=!1,Pace.on("start",function(){e._pageloading=!0}),Pace.on("done",function(){e._pageloading=!1}),s.pageTourInit=!1,e.validateTour=function(t){if(e.class_state=t.replace(".",""),console.log("Validate Tour...."),console.log("currentUser",e.currentUser),e.currentUser){if(!e.currentUser.tour_enabled)return;var n=t,i=[],r=!0;e.currentUser.tourStatus&&(i=e.currentUser.tourStatus,console.log("tour object",i),$(i).each(function(e,a){a==n&&(r=!1)})),r?(e.show_tour=!0,console.log("start the tour now!"),Pace.once("done",function(){console.log("TOUR: pace done!"),e.$broadcast("REMOVE_STICKY"),s.pageTourInit=!0,$(document).ready(function(){tl.pg.init({default_zindex:2e3,ready_callback:function(){$(".tlypageguide_toggle").click(),$(".tlypageguide_close").click(function(){e.$broadcast("AGAIN_STICKY")}),"none"==$("#tlyPageGuideMessages").css("display")&&e.$broadcast("AGAIN_STICKY")}})})}),i.push(n),o.user.setTourValue(i,e.currentUser.shortcut,function(e,t){console.log("updated tour :",t.user),a.setValue("currentUser",t.user)})):(e.show_tour=!1,console.log("no tour needed"))}},s.$on("$stateChangeSuccess",function(a,o,n,i,r){e.tourCheckOnce=!1,$(".tlypageguide_close").click(),console.log("UIPLATFORM: stateChangeSuccess toState",o),console.log("UIPLATFORM: stateChangeSuccess fromState",i);var s=t.$$path.split("/");console.log(s[2]),console.log(s),$("body").animate({scrollTop:0},"fast"),s.length>1&&"search"==s[1]?$(".txtsearch").val(s[2]):$(".txtsearch").val(""),e.currentState=o.name,e.statename=o.name,e.validateTour(o.name),console.log("onUserLoginSuccess $rootScope.currentUser ",e.currentUser),e.config&&e.config.feature_locks.user_agreement&&e.currentUser&&-1==t.path().indexOf("logout")&&(console.log("$rootScope.currentUser.tnc_agreemen "+e.currentUser.tnc_agreement),2!=e.currentUser.tnc_agreement&&3!=e.currentUser.tnc_agreement||(e.closeWelcome(),e.showTocBox=!0,$("#tocbox").foundation("reveal","open")))}),e.html2text=function(e){var a=document.createElement("DIV");return a.innerHTML=e,a.textContent||a.innerText},$(document).on("opened","[data-reveal]",function(){console.log("something opened! "),$(".reveal-modal-bg").css({display:"block"});var e=n.current.name;return"network.documents"==e||"network.documents.draft"==e||"network.guides"==e||"network.guides.draft"==e?!0:($(".ui-sticky.header-canvas").removeClass("z-index_999"),$(window).trigger("scrollstop"),void $("body").addClass("fixed_object"))}),$(document).on("close","[data-reveal]",function(){var a=n.current.name;return console.log("something close! "+a),e.selected_network={},e.setFollow=!1,"network.documents"==a||"network.documents.draft"==a||"network.guides"==a||"network.guides.draft"==a?!0:(console.log("something close! "),$(".ui-sticky.header-canvas").addClass("z-index_999"),$(".platform-container").removeClass("blur-me"),$("body").removeClass("fixed_object"),"me.zoocashtopup"==a||"me.zoocashupdate"==a?(console.log("zoocash popup close! "),$(".reveal-modal-bg").css({display:"none"}),n.go("me.zoocashtopup"),t.path("/me/zoocashtopup"),!0):void 0)})}}}]),app.directive("onMobileTouch",["$timeout",function(e){return{restrict:"A",link:function(a,t,o){angular.element(t).on("touchstart",function(a){e(function(){console.log("on mobile touch"),angular.element(t).triggerHandler("click")},100),a.stopPropagation()})}}}]),app.directive("uiLogin",["$timeout","$rootScope","$apiService","$store","$location","$popupService","$analytics","$state","$q",function(e,a,t,o,n,i,r,s,c){return{restrict:"C",scope:!0,link:function(c,l,d){a.auth={},s.params.campaign_code&&s.params.campaign_code&&c.fetchCampaignReferal(""),c.fetchCampaignReferal=function(e){if(e){if(!c.auth.name)return;if(!c.auth.username)return;if(!c.auth.password)return;s.params.campaign_code=e}t.user.fetchCampaignByReferralCode({campaign_code:s.params.campaign_code},function(a,t){console.log("uiLogin fetchCampaignByReferralCode "),t.status&&t.status.success&&(c.campaign=t.campaign,e&&c.onSignup_first())})},c.switchToDefaultSign=function(){"login"==a.bk_logmode?c.openLoginWindow():"signup"==a.bk_logmode&&c.openSignupWindow()},c.gotoCampaign=function(){$("#authwindow").foundation("reveal","close"),n.path("/campaign/"+a.loginCampaign)},c.openCampaign=function(e){a.bk_logmode=e,a.logmode="network-campaign","login"==e&&a.config.feature_locks.display_campaign_login_form&&(a.logmode=e),$("#authwindow").foundation("reveal","open",{dismissmodalclass:"close-reveal-modal"})},c.openLoginWindow=function(){"get-started_social"==s.current.name?c.switchStartedMode():(a.auth.username="",a.auth.password="",$("#authwindow").foundation("reveal","off"),$("#authwindow").foundation("reveal","open",{dismissmodalclass:"close-reveal-modal"}),$("#authwindow").removeAttr("data-options"),$("#authwindow > a").show(),/^network.|^user./.test(s.current.name)?$("#authwindow > a").hide():$(".reveal-modal-bg").off("click").on("click",function(){$("#authwindow").foundation("reveal","close")}),$(document).on("opened","[data-reveal]",function(){$(".reveal-modal-bg").css({display:"block"}),$("#email_login").focus()}),a.logmode="login")},c.countryCodeList=[],c.preselectCountryCode=function(){var e=a.config.mobile_country_list;c.countryCodeList=e.countryList,a.auth.mobile_country_code=e.defaultCode,_.each(e.countryList,function(t){t.codeKey==e.defaultCode&&(a.auth.label_country_code="+"+t.countryCode)})},c.changeSelectedCountryCode=function(){_.each(c.countryCodeList,function(e){a.auth.mobile_country_code==e.display_text&&(a.auth.label_country_code="+"+e.countryCode)})},c.openSignupWindow=function(e){if("get-started_social"==s.current.name)c.switchStartedMode();else{a.auth.nextUrl=encodeURIComponent(location.href),a.auth.show_captcha=!1,console.log(a);var t=new Date;a.auth.dobYears=_.range(t.getFullYear()-80,t.getFullYear()),a.auth.dobDays=_.range(1,32),$("#authwindow").foundation("reveal","open",{dismissmodalclass:"close-reveal-modal"}),$("#authwindow").removeAttr("data-options"),$("#authwindow").attr("data-options","close_on_background_click:true;"),$("#authwindow > a").show(),/^network.|^user./.test(s.current.name)?$("#authwindow > a").hide():$(".reveal-modal-bg").off("click").on("click",function(){$("#authwindow").foundation("reveal","close")}),$(document).on("opened","[data-reveal]",function(){console.log("something opened! "),$(".reveal-modal-bg").css({display:"block"}),$("#email_signup").focus()}),$(document).on("closed","#authwindow",function(){console.log("#authwindow closed! "),a.auth.show_phone_verification=!1}),a.logmode="signup"}},c.validatePasswordStrength=function(){c.auth.error_register_all=!1;var e=c.auth.password;_.isEmpty(e)||(c.auth.password.length<a.password_length||!a.hasUpperCase(e)||!a.hasSpecialCharacters(e))&&(c.auth.error_register_all=!0)},c.onSignup_first=function(){if(c.auth.error_register_msg="",c.auth.error_register_pwd_length=!1,c.auth.error_user_name=!1,c.auth.error_full_name=!1,$("#authwindow [name='name']").length&&!c.auth.name)return void(c.auth.error_full_name=!0);if(!a.config.platform_feature.phone_email_auth&&!a.config.platform_feature.phone_auth&&!a.email_validator(c.auth.username))return void(c.auth.error_user_name=!0);if(c.validatePasswordStrength(),c.auth.error_register_all)return!1;if(c.auth.username&&c.auth.password||(c.auth.error_register_msg=1),c.auth.password!=c.auth.confirm_password&&(c.auth.error_register_msg=2),a.config.feature_locks.user_agreement&&!c.auth.toc)return void(c.auth.error_register_toc=!0);if(""!==c.auth.error_register_msg||c.auth.error_register_pwd_length)return!1;if(a.config.feature_locks.enable_captcha){a.auth.show_captcha=!0;var e=a.config.browserDefaultLang||"en-US";"en-US"!=e&&$(".visualCaptcha-accessibility-button").css("display","none")}else c.onSignup()},c.onLogout=function(){n.path("/logout")},c.setPromotedUrl=function(){var e=e=__YZ_CONFIG__.campaign_settings.default_campaign||"default2"},c.onWeibo=function(){r.eventTrack("Login",{category:"user-login",label:"Login via Weibo",value:1});var e=n.search();e&&e._return?o.setValue("_return",e._return):c.campaign&&c.campaign.metadataObj?2==c.campaign.metadataObj.id?o.setValue("_n","/?campaigncode="+c.campaign.referral_code):1==c.campaign.metadataObj.id?o.setValue("_n","/me/info?edit=1&campaigncode="+c.campaign.referral_code):6==c.campaign.metadataObj.id?o.setValue("_n","/network/create?campaigncode="+c.campaign.referral_code):7==c.campaign.metadataObj.id?o.setValue("_n","/promoted-network?nexturl="+c.campaign.metadataObj.redirect_url+"&campaigncode="+c.campaign.referral_code):9==c.campaign.metadataObj.id?o.setValue("_n","/"+c.campaign.network_shortcut+"?campaigncode="+c.campaign.referral_code):11==c.campaign.metadataObj.id&&o.setValue("_n",c.campaign.metadataObj.redirect_url+"?campaigncode="+c.campaign.referral_code):o.setValue("_n",location.href),window.location="/auth/weibo"},c.onQQ=function(){r.eventTrack("Login",{category:"user-login",label:"Login via QQ",value:1});var e=n.search();e&&e._return?o.setValue("_return",e._return):c.campaign&&c.campaign.metadataObj?2==c.campaign.metadataObj.id?o.setValue("_n","/?campaigncode="+c.campaign.referral_code):1==c.campaign.metadataObj.id?o.setValue("_n","/me/info?edit=1&campaigncode="+c.campaign.referral_code):6==c.campaign.metadataObj.id?o.setValue("_n","/network/create?campaigncode="+c.campaign.referral_code):7==c.campaign.metadataObj.id?o.setValue("_n","/promoted-network?nexturl="+c.campaign.metadataObj.redirect_url+"&campaigncode="+c.campaign.referral_code):9==c.campaign.metadataObj.id?o.setValue("_n","/"+c.campaign.network_shortcut+"?campaigncode="+c.campaign.referral_code):11==c.campaign.metadataObj.id&&o.setValue("_n",c.campaign.metadataObj.redirect_url+"?campaigncode="+c.campaign.referral_code):o.setValue("_n",location.href),window.location="/auth/qq"},c.onRenRen=function(){r.eventTrack("Login",{category:"user-login",label:"Login via RenRen",value:1});var e=n.search();e&&e._return?o.setValue("_return",e._return):c.campaign&&c.campaign.metadataObj?2==c.campaign.metadataObj.id?o.setValue("_n","/?campaigncode="+c.campaign.referral_code):1==c.campaign.metadataObj.id?o.setValue("_n","/me/info?edit=1&campaigncode="+c.campaign.referral_code):6==c.campaign.metadataObj.id?o.setValue("_n","/network/create?campaigncode="+c.campaign.referral_code):7==c.campaign.metadataObj.id?o.setValue("_n","/promoted-network?nexturl="+c.campaign.metadataObj.redirect_url+"&campaigncode="+c.campaign.referral_code):9==c.campaign.metadataObj.id?o.setValue("_n","/"+c.campaign.network_shortcut+"?campaigncode="+c.campaign.referral_code):11==c.campaign.metadataObj.id&&o.setValue("_n",c.campaign.metadataObj.redirect_url+"?campaigncode="+c.campaign.referral_code):o.setValue("_n",location.href),window.location="/auth/renren"},c.onFacebook=function(){r.eventTrack("Login",{category:"user-login",label:"Login via Facebook",value:1});var e=n.search();e&&e._return?o.setValue("_return",e._return):c.campaign&&c.campaign.metadataObj&&(2==c.campaign.metadataObj.id?o.setValue("_n","/?campaigncode="+c.campaign.referral_code):1==c.campaign.metadataObj.id?o.setValue("_n","/me/info?edit=1&campaigncode="+c.campaign.referral_code):6==c.campaign.metadataObj.id?o.setValue("_n","/network/create?campaigncode="+c.campaign.referral_code):7==c.campaign.metadataObj.id?o.setValue("_n","/promoted-network?nexturl="+c.campaign.metadataObj.redirect_url+"&campaigncode="+c.campaign.referral_code):9==c.campaign.metadataObj.id?o.setValue("_n","/"+c.campaign.network_shortcut+"?campaigncode="+c.campaign.referral_code):11==c.campaign.metadataObj.id&&o.setValue("_n",c.campaign.metadataObj.redirect_url+"?campaigncode="+c.campaign.referral_code)),e&&e._return||c.campaign&&c.campaign.metadataObj?window.location="/auth/facebook":c.redirectFromSocial("fb")},c.onGooglePlus=function(){r.eventTrack("Login",{category:"user-login",label:"Login via Google Plus",value:1});var e=n.search();e&&e._return?o.setValue("_return",e._return):c.campaign&&c.campaign.metadataObj&&(2==c.campaign.metadataObj.id?o.setValue("_n","/?campaigncode="+c.campaign.referral_code):1==c.campaign.metadataObj.id?o.setValue("_n","/me/info?edit=1&campaigncode="+c.campaign.referral_code):6==c.campaign.metadataObj.id?o.setValue("_n","/network/create?campaigncode="+c.campaign.referral_code):7==c.campaign.metadataObj.id?o.setValue("_n","/promoted-network?nexturl="+c.campaign.metadataObj.redirect_url+"&campaigncode="+c.campaign.referral_code):9==c.campaign.metadataObj.id?o.setValue("_n","/"+c.campaign.network_shortcut+"?campaigncode="+c.campaign.referral_code):11==c.campaign.metadataObj.id&&o.setValue("_n",c.campaign.metadataObj.redirect_url+"?campaigncode="+c.campaign.referral_code)),e&&e._return||c.campaign&&c.campaign.metadataObj?window.location="/auth/google":c.redirectFromSocial("gplus")},c.onTwitter=function(){r.eventTrack("Login",{category:"user-login",label:"Login via Twitter",value:1});var e=n.search();e&&e._return?o.setValue("_return",e._return):c.campaign&&c.campaign.metadataObj&&(2==c.campaign.metadataObj.id?o.setValue("_n","/?campaigncode="+c.campaign.referral_code):1==c.campaign.metadataObj.id?o.setValue("_n","/me/info?edit=1&campaigncode="+c.campaign.referral_code):6==c.campaign.metadataObj.id?o.setValue("_n","/network/create?campaigncode="+c.campaign.referral_code):7==c.campaign.metadataObj.id?o.setValue("_n","/promoted-network?nexturl="+c.campaign.metadataObj.redirect_url+"&campaigncode="+c.campaign.referral_code):9==c.campaign.metadataObj.id?o.setValue("_n","/"+c.campaign.network_shortcut+"?campaigncode="+c.campaign.referral_code):11==c.campaign.metadataObj.id&&o.setValue("_n",c.campaign.metadataObj.redirect_url+"?campaigncode="+c.campaign.referral_code)),e&&e._return||c.campaign&&c.campaign.metadataObj?window.location="/auth/twitter":c.redirectFromSocial("twitter")},c.redirectFromSocial=function(e){function a(a){t.user.fetchCampaignByReferralCode({campaign_code:a},function(a,t){if(t.status&&t.status.success){var n=t.campaign;if(n&&n.metadataObj){var i="/promoted-network?nexturl="+n.metadataObj.redirect_url+"&campaigncode="+n.referral_code;o.setValue("_n",i)}"fb"==e?window.location="/auth/facebook":"gplus"==e?window.location="/auth/google":"twitter"==e&&(window.location="/auth/twitter")}})}var n;n="default2","undefined"!=typeof __YZ_CONFIG__.campaign_settings&&(n=__YZ_CONFIG__.campaign_settings.default_campaign||"default2"),a(n)},c.onIAHLogin=function(e){r.eventTrack("Login",{category:"user-login",label:"Login via IAH",value:1}),t.user.iahconnect(c.auth.username,c.auth.password,a.currentNetwork&&a.currentNetwork.info?a.currentNetwork.info.id:!1,a.viewed_user_profile?a.viewed_user_profile.id:!1,function(e,i){if(i.status&&i.status.success){c.auth.error_login_msg="",console.log("current user token  : "+o.getToken()),o.setValue("currentUser",i.user),a.currentUser=i.user;var s=n.search();if(s&&s._return){var l=a.getDomain(s._return);t.domain.isDomainWhitelisted(l,function(e,o){!e&&o&&o.iswhitelisted?!window.ga||!o.internalGATracker&&!o.externalGATracker||null==o.internalGATracker&&null==o.externalGATracker?t.auth.requestToken(function(e,t){t.status&&t.status.success?s._return.indexOf("?")>-1?window.location=s._return+"&token="+t.token+"&src="+window.location.hostname:window.location=s._return+"?token="+t.token+"&src="+window.location.hostname:(window.location.reload(),a.$broadcast("onUserLoginSuccess"))}):r.eventTrack("E-commerce Redirect (External-Login via IAH)",{category:"actions",label:"Just redirected to e-commerce from external link",value:1,hitCallback:function(){t.auth.requestToken(function(e,t){t.status&&t.status.success?s._return.indexOf("?")>-1?window.location=s._return+"&token="+t.token+"&src="+window.location.hostname:window.location=s._return+"?token="+t.token+"&src="+window.location.hostname:(window.location.reload(),a.$broadcast("onUserLoginSuccess"))})}}):(window.location.reload(),a.$broadcast("onUserLoginSuccess"))})}else"ar-SA"==a.currentUser.display_language&&window.location.reload(),a.$broadcast("onUserLoginSuccess")}else i.status&&i.status.err?c.auth.error_login_msg=i.status.err:c.auth.error_login_msg=d.somethingWrong?d.somethingWrong:"Error!"})},c.onLogin=function(i,l){if(!c.loginInit){if(c.loginInit=!0,r.eventTrack("Login",{category:"user-login",label:"Login via Email",value:1}),c.auth.loginform_error_login_msg="",c.auth.username&&-1!==c.auth.username.indexOf("@")&&!a.email_validator(c.auth.username))return c.auth.loginform_error_login_msg="email_error",!1;if($.isEmptyObject(c.auth.password))return c.auth.loginform_error_login_msg="password_error",!1;c.auth.error_login_msg="",c.auth.isLoggingIn=!0;var u=angular.copy(c.auth.username);a.config.platform_feature.phone_auth&&(u=c.auth.username.replace(/(\-|\s)+/g,""));var m={};c.campaign&&c.campaign.referral_code&&(m.referral_code=c.campaign.referral_code),m.mobile_country_code=a.config.feature_locks.country_code_selection?c.auth.label_country_code:a.config.default_country_code,t.user.login(u,c.auth.password,a.currentNetwork&&a.currentNetwork.info?a.currentNetwork.info.id:!1,a.viewed_user_profile?a.viewed_user_profile.id:!1,m,function(i,l){if(c.loginInit=!1,l.status&&l.status.success){if(c.auth.error_login_msg="",console.log("current user token  : "+o.getToken()),o.setValue("currentUser",l.user),a.currentUser=l.user,s.current.name.indexOf("network")>-1){var u=n.url();u.indexOf("?follow")>-1&&t.network.followNetwork(s.params.shortcut,function(e,a){!e&&a.status.success&&(window.location.href=n.protocol()+"://"+n.host()+n.path())})}if(a.selected_network&&a.setFollow)return a.$broadcast("NETWORK_LIST_CONFIRM_FOLLOW",{network:a.selected_network,index:a.selected_network_index}),void $("#authwindow").foundation("reveal","close");var m=n.search();if(m&&m._return){var p=a.getDomain(m._return);c.auth.isLoggingIn=!0,t.domain.isDomainWhitelisted(p,function(o,n){!o&&n&&n.iswhitelisted?(!window.ga||!n.internalGATracker&&!n.externalGATracker||null==n.internalGATracker&&null==n.externalGATracker?(c.auth.isLoggingIn=!0,t.auth.requestToken(function(t,o){e(function(){c.auth.isLoggingIn=!1},5e3),o.status&&o.status.success?m._return.indexOf("?")>-1?window.location=m._return+"&token="+o.token+"&src="+window.location.hostname:window.location=m._return+"?token="+o.token+"&src="+window.location.hostname:(window.location.reload(),a.$broadcast("onUserLoginSuccess"))})):r.eventTrack("E-commerce Redirect (External-Login via Email)",{category:"actions",label:"Just redirected to e-commerce from external link",value:1,hitCallback:function(){c.auth.isLoggingIn=!0,t.auth.requestToken(function(t,o){e(function(){c.auth.isLoggingIn=!1},5e3),o.status&&o.status.success?m._return.indexOf("?")>-1?window.location=m._return+"&token="+o.token+"&src="+window.location.hostname:window.location=m._return+"?token="+o.token+"&src="+window.location.hostname:(window.location.reload(),a.$broadcast("onUserLoginSuccess"))})}}),e(function(){c.auth.isLoggingIn=!1},5e3)):(window.location.reload(),a.$broadcast("onUserLoginSuccess"),e(function(){c.auth.isLoggingIn=!1},5e3))})}else c.campaign&&c.campaign.metadataObj?(t.user.updateUserFlowStatus({flow_status:1},function(e,a){}),1==c.campaign.metadataObj.id?(window.location="/me/info?edit=1&campaigncode="+c.campaign.referral_code,a.$broadcast("onUserLoginSuccess")):9==c.campaign.metadataObj.id?(window.location="/"+c.campaign.network_shortcut+"?campaigncode="+c.campaign.referral_code,a.$broadcast("onUserLoginSuccess")):11==c.campaign.metadataObj.id?(window.location=c.campaign.metadataObj.redirect_url,a.$broadcast("onUserLoginSuccess")):(window.location="/?campaigncode="+c.campaign.referral_code,a.$broadcast("onUserLoginSuccess"),e(function(){c.auth.isLoggingIn=!1},5e3))):a.config.feature_locks.signin_to_newsfeeds?window.location="/me/newsfeeds":(window.location.reload(),a.$broadcast("onUserLoginSuccess"),e(function(){c.auth.isLoggingIn=!1},5e3))}else c.auth.isLoggingIn=!1,l.status&&l.status.err?(c.auth.error_login_msg=l.status.err,c.auth.login_socialnetwork={},"ACCOUNT_LINKED_VIA_SOCIAL_ACCOUNTS"==l.status.code&&(c.auth.login_error_code=l.status.code,c.auth.isLoggingIn=!0,t.user.fetchLoginSocialNetwork(c.auth.username,function(a,t){e(function(){c.auth.isLoggingIn=!1},5e3),t.status&&t.status.success&&(c.auth.login_socialnetwork=t)}))):(console.log("data.status--",l.status),c.auth.error_login_msg=d.somethingWrong?d.somethingWrong:"Error!")})}};var u=function(e,i,l){if(c.auth.error_register_msg="",a.config.feature_locks.id_realname_required&&a.currentNetwork&&a.currentNetwork.info&&2==a.currentNetwork.info.registration_type?c.auth.realname&&c.auth.sns_id&&c.auth.dob_year&&c.auth.dob_month&&c.auth.dob_day||(c.auth.error_register_msg=4):(c.auth.realname="",c.auth.sns_id="",c.auth.dob_year="",c.auth.dob_month="",c.auth.dob_day=""),c.auth.username&&c.auth.password||(c.auth.error_register_msg=1),c.auth.password!=c.auth.confirm_password&&(c.auth.error_register_msg=2),""!==c.auth.error_register_msg)return void(4!=c.auth.error_register_msg&&(a.auth.show_captcha=!1));c.auth.is_register_loading=!0;var d=angular.copy(c.auth.username);a.config.platform_feature.phone_auth&&(d=c.auth.username.replace(/(\-|\s)+/g,""));var u="";a.config.platform_feature.phone_email_auth&&(d=angular.copy(c.auth.username)),u=angular.copy(c.auth.mobile);var m=n.search().refcode,p={};c.campaign&&c.campaign.referral_code&&(p.referral_code=c.campaign.referral_code),(c.auth.first_name||c.auth.last_name)&&(p.first_name=c.auth.first_name,p.last_name=c.auth.last_name),c.auth.label_country_code=a.config.feature_locks.country_code_selection?c.auth.label_country_code:a.config.default_country_code,t.user.register(d,c.auth.password,c.auth.confirm_password,c.auth.realname,c.auth.sns_id,c.auth.dob_year,c.auth.dob_month,c.auth.dob_day,a.currentNetwork&&a.currentNetwork.info?a.currentNetwork.info.id:!1,a.viewed_user_profile?a.viewed_user_profile.id:!1,m,c.auth.toc,p,u,c.auth.label_country_code,function(e,i){if(c.auth.is_register_loading=!1,i.status&&i.status.success){if((a.config.platform_feature.phone_auth||a.config.platform_feature.phone_email_auth)&&i.isMobileVerificationNeeded)return c.auth.is_signup_successful=!1,c.auth.show_phone_verification=!0,!1;if("1"==a.config.fb_tracking_pixel.fb_pixel_enable){var l=a.config.fb_tracking_pixel.sign_up_id,d=a.config.currency.code,u="0.00";!function(){var e=window._fbq||(window._fbq=[]);if(!e.loaded){var a=document.createElement("script");a.async=!0,a.src="//connect.facebook.net/en_US/fbds.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(a,t),e.loaded=!0,console.log("fb tracking sign up")}}(),window._fbq=window._fbq||[],window._fbq.push(["track",l,{value:u,currency:d}])}c.auth.error_register_msg="",c.auth.is_signup_successful=!0,c.auth.username="",c.auth.password="",c.auth.confirm_password="",c.auth.realname="",c.auth.sns_id="",r.eventTrack("Register",{category:"user-signup",label:i.user.id,value:1});var m=n.search()._trk,p=n.search()._ref;m&&p?r.eventTrack("page:send",{url:"/_t/"+i.user.id+"/"+p}):m&&r.eventTrack("page:send",{url:"/_t/"+i.user.id}),a.currentUser=i.user,o.setValue("currentUser",i.user),console.log("currentUser to be save @ cache",i.user),$("#authwindow").foundation("reveal","close");var g=n.search();if(g&&g._return){var f=a.getDomain(g._return);t.domain.isDomainWhitelisted(f,function(e,o){!e&&o&&o.iswhitelisted&&(!window.ga||!o.internalGATracker&&!o.externalGATracker||null==o.internalGATracker&&null==o.externalGATracker?t.auth.requestToken(function(e,t){t.status&&t.status.success?g._return.indexOf("?")>-1?window.location=g._return+"&token="+t.token+"&src="+window.location.hostname:window.location=g._return+"?token="+t.token+"&src="+window.location.hostname:(window.location.reload(),a.$broadcast("onUserLoginSuccess"))}):r.eventTrack("E-commerce Redirect (External-Register)",{category:"actions",label:"Just redirected to e-commerce from external link",value:1,hitCallback:function(){t.auth.requestToken(function(e,a){a.status&&a.status.success&&(g._return.indexOf("?")>-1?window.location=g._return+"&token="+a.token+"&src="+window.location.hostname:window.location=g._return+"?token="+a.token+"&src="+window.location.hostname)})}}))})}else{var h=JSON.parse(localStorage.getItem("network_page"));if(c.campaign&&c.campaign.metadataObj)t.user.updateUserFlowStatus({flow_status:1},function(e,a){}),2==c.campaign.metadataObj.id?window.location="/?campaigncode="+c.campaign.referral_code:6==c.campaign.metadataObj.id?window.location="/network/create?campaigncode="+c.campaign.referral_code:7==c.campaign.metadataObj.id?window.location="/promoted-network?nexturl="+c.campaign.metadataObj.redirect_url+"&campaigncode="+c.campaign.referral_code:9==c.campaign.metadataObj.id?window.location="/"+c.campaign.network_shortcut+"?campaigncode="+c.campaign.referral_code:11==c.campaign.metadataObj.id?window.location=c.campaign.metadataObj.redirect_url:"0"==c.campaign.metadataObj.id&&(console.log("regiester scope.campaign.metadataObj id = ",c.campaign.metadataObj.id),window.location="/promoted-network?nexturl="+c.campaign.metadataObj.redirect_url+"&campaigncode="+c.campaign.referral_code);else if(h){if(s.current.name.indexOf("network")>-1){var _=n.url();_.indexOf("?follow")>-1&&t.network.followNetwork(s.params.shortcut,function(e,a){!e&&a.status.success&&(window.location.href=n.protocol()+"://"+n.host()+n.path())})}window.location.href=h.page_url,localStorage.removeItem("network_page")}else{var v=__YZ_CONFIG__.campaign_settings.default_campaign||"default2";t.user.fetchCampaignByReferralCode({campaign_code:v},function(e,t){if(console.log("uiSignup DEFAULT fetchCampaignByReferralCode "),t.status&&t.status.success)if(c.campaign=t.campaign,c.campaign&&c.campaign.metadataObj&&4==c.campaign.metadataObj.id){"/user/"+a.currentUser.shortcut+"/"+c.campaign.metadataObj.redirect_url[1]+"?nexturl=true";window.location="/"+c.campaign.metadataObj.redirect_url[0]+"?nexturl="+c.campaign.metadataObj.redirect_url[1]+","+c.campaign.metadataObj.redirect_url[2]}else c.campaign&&c.campaign.metadataObj&&-1!==[8,13].indexOf(c.campaign.metadataObj.id)?window.location="/promoted-network?nexturl="+c.campaign.metadataObj.redirect_url+"&campaigncode="+c.campaign.referral_code:a.validateTour(s.current.name)})}}}else a.auth.show_captcha=!1,i.status&&i.status.err?c.auth.error_register_msg=i.status.err:c.auth.error_register_msg=3;c.auth.is_register_loading=!1})};c.onSignup=function(o,n){if(c.validatePasswordStrength(),c.auth.error_register_all)return!1;if(!c.auth.is_register_loading){if(c.auth.error_register_msg="",a.config.feature_locks.id_realname_required&&a.currentNetwork&&a.currentNetwork.info&&2==a.currentNetwork.info.registration_type&&!(c.auth.realname&&c.auth.sns_id&&c.auth.dob_year&&c.auth.dob_month&&c.auth.dob_day))return void(c.auth.error_register_msg=4);if(c.captcha&&c.captcha.getCaptchaData().valid){var r=c.captcha.getCaptchaData(),s={frontendData:r};r.name===c.captcha.imageFieldName()?s.type="image":s.type="audio",t.visualcaptcha["try"](s,function(a,t){if(200==t.response)return void u(o,n,t);var r=!1;$("#authwindow").hasClass("open")&&(r=!0),"failedPost"==t.status?i.showAutoMessage(d.failedPost?d.failedPost:"Failed Post"):"failedImage"==t.status?i.showAutoMessage(d.failedImage?d.failedImage:"You chosed the wrong image."):"failedAudio"==t.status&&i.showAutoMessage(d.failedPost?d.failedAudio:"You chosed the wrong audio."),r&&e(function(){$("#authwindow").foundation("reveal","open",{dismissmodalclass:"close-reveal-modal"})},3e3)})}else{if(c.captcha)return i.showAutoMessage(d.selectOption?d.selectOption:"You did not select an option."),void e(function(){$("#authwindow").foundation("reveal","open",{dismissmodalclass:"close-reveal-modal"})},3e3);console.log("sign up",n),u(o,n)}}},c.resendPhoneVerificationCode=function(){c.auth.is_register_loading=!0;var e=c.auth.username.replace(/(\-|\s)+/g,"");a.config.platform_feature.phone_email_auth&&(e=c.auth.mobile);var o={mobile_number:e,mobile_country_code:c.auth.label_country_code};t.user.resendVerificationCode(o,function(e,a){c.auth.is_register_loading=!1,a.status&&a.status.success||(c.auth.error_register_msg=3)})},c.verifyPhoneCode=function(){c.auth.is_register_loading=!0,t.user.verifysms(c.auth.phoneverificationcode,function(e,i){if(i.status&&i.status.success){if(o.setToken(i.authToken),a.authToken=i.authToken,o.setTempToken(""),o.setValue("tempUser",""),o.setValue("finished_signup_game_id",""),"1"==a.config.fb_tracking_pixel.fb_pixel_enable){var s=a.config.fb_tracking_pixel.sign_up_id,l=a.config.currency.code,d="0.00";!function(){var e=window._fbq||(window._fbq=[]);if(!e.loaded){var a=document.createElement("script");a.async=!0,a.src="//connect.facebook.net/en_US/fbds.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(a,t),e.loaded=!0,console.log("fb tracking sign up")}}(),window._fbq=window._fbq||[],window._fbq.push(["track",s,{value:d,currency:l}])}c.auth.error_register_msg="",c.auth.is_signup_successful=!0,c.auth.username="",c.auth.password="",c.auth.confirm_password="",c.auth.realname="",c.auth.sns_id="",r.eventTrack("Register",{category:"user-signup",label:i.user.id,value:1});var u=n.search()._trk,m=n.search()._ref;u&&m?r.eventTrack("page:send",{url:"/_t/"+i.user.id+"/"+m}):u&&r.eventTrack("page:send",{url:"/_t/"+i.user.id}),a.currentUser=i.user,o.setValue("currentUser",i.user),console.log("currentUser to be save @ cache",i.user),$("#authwindow").foundation("reveal","close");
var p=n.search();if(p&&p._return){var g=a.getDomain(p._return);t.domain.isDomainWhitelisted(g,function(e,o){!e&&o&&o.iswhitelisted&&(!window.ga||!o.internalGATracker&&!o.externalGATracker||null==o.internalGATracker&&null==o.externalGATracker?t.auth.requestToken(function(e,t){t.status&&t.status.success?p._return.indexOf("?")>-1?window.location=p._return+"&token="+t.token+"&src="+window.location.hostname:window.location=p._return+"?token="+t.token+"&src="+window.location.hostname:(window.location.reload(),a.$broadcast("onUserLoginSuccess"))}):r.eventTrack("E-commerce Redirect (External-Register)",{category:"actions",label:"Just redirected to e-commerce from external link",value:1,hitCallback:function(){t.auth.requestToken(function(e,a){a.status&&a.status.success&&(p._return.indexOf("?")>-1?window.location=p._return+"&token="+a.token+"&src="+window.location.hostname:window.location=p._return+"?token="+a.token+"&src="+window.location.hostname)})}}))})}}else i.status&&i.status.err?c.auth.error_register_msg=i.status.code:c.auth.error_register_msg=3;c.auth.is_register_loading=!1})},c.openForgotPasswordWindow=function(){c.auth.username="",c.auth.password="",c.auth.forgotpassword_msg="",$("#authwindow").foundation("reveal","open",{dismissmodalclass:"close-reveal-modal"}),a.logmode="forgotpassword"},c.onSendCodeResetPasswordPhone=function(){if(c.auth.username){if(c.auth.is_resetpassword_loading)return;var e=c.auth.username.replace(/(\-|\s)+/g,"");c.auth.is_resetpassword_loading=!0;var o=a.config.feature_locks.country_code_selection?c.auth.label_country_code:a.config.default_country_code;t.user.resetPasswordSMS(e,o,function(e,a){c.auth.is_resetpassword_loading=!1,a.status&&a.status.success?window.location="/resetpassword/0":a.status&&a.status.err?c.auth.forgotpassword_msg=a.status.code:c.auth.forgotpassword_msg=2})}},c.onResetPasswordPhone=function(){t.user.completeResetPasswordSMS(c.auth.phoneverificationcode,c.auth.newpassword,function(a,t){t.status&&t.status.success?(c.auth.resetpassword_msg=2,c.auth.error_resetpassword_msg="",c.auth.newpassword="",c.auth.confirm_newpassword="",c.auth.error_password_length="",e(function(){$("#authwindow").foundation("reveal","close"),n.path("/")},3e3)):t.status&&t.status.err?c.auth.error_resetpassword_msg=t.status.err:c.auth.error_resetpassword_msg=d.somethingWrong?d.somethingWrong:"Error!"})},c.onForgotPassword=function(){if(c.linkedviasocialaccount="",c.auth.username){if(-1===c.auth.username.indexOf("@")&&a.config.platform_feature.phone_auth)return void c.onSendCodeResetPasswordPhone();if(c.auth.is_resetpassword_loading)return;c.auth.is_resetpassword_loading=!0,t.user.forgotpassword(c.auth.username,function(e,a){c.auth.is_resetpassword_loading=!1,a.status&&a.status.success?(c.auth.forgotpassword_msg=1,c.auth.username=""):(a.status&&a.status.err&&(c.auth.forgotpassword_msg=a.status.err),"ACCOUNT_LINKED_VIA_SOCIAL_ACCOUNTS"==a.status.code?a.user.isFBConnected?c.linkedviasocialaccount="Facebook":a.user.isTwitterConnected?c.linkedviasocialaccount="Twitter":a.user.isGoogleConnected?c.linkedviasocialaccount="Google":a.user.isQQConnected?c.linkedviasocialaccount="QQ":a.user.isRenrenConnected?c.linkedviasocialaccount="Renren":a.user.isWeiboConnected?c.linkedviasocialaccount="Weibo":a.user.iahAccountId&&(c.linkedviasocialaccount="IAH"):c.auth.forgotpassword_msg=2)})}},c.validateResetPasswordStrength=function(){c.auth.error_resetpassword_msg="",c.auth.resetpassword_msg="",c.auth.error_password_length="",c.auth.error_password_strength="";var e=c.auth.newpassword;_.isEmpty(e)||(e<a.password_length||!a.hasUpperCase(e)||!a.hasSpecialCharacters(e))&&(c.auth.error_password_strength=1)},c.onResetPassword=function(){return c.validateResetPasswordStrength(),c.auth.error_resetpassword_msg="",c.auth.resetpassword_msg="",c.auth.error_password_length="",c.auth.newpassword&&c.auth.newpassword==c.auth.confirm_newpassword?""!==c.auth.newpassword&&c.auth.newpassword.length<a.password_length||""!==c.auth.confirm_newpassword&&c.auth.confirm_newpassword.length<a.password_length?void(c.auth.error_password_length=1):1!=c.auth.error_password_strength?!a.config.platform_feature.phone_auth||s.params.resetpassword_key&&"0"!=s.params.resetpassword_key?void t.user.resetpassword(a.resetpassword_key,c.auth.newpassword,function(a,t){t.status&&t.status.success?(c.auth.resetpassword_msg=2,c.auth.error_resetpassword_msg="",c.auth.newpassword="",c.auth.confirm_newpassword="",c.auth.error_password_length="",e(function(){$("#authwindow").foundation("reveal","close"),n.path("/")},3e3)):t.status&&t.status.err?c.auth.error_resetpassword_msg=t.status.err:c.auth.error_resetpassword_msg=d.somethingWrong?d.somethingWrong:"Error!"}):void c.onResetPasswordPhone():void 0:void(c.auth.error_resetpassword_msg=1)}}}}]),app.directive("uimasonryinit",["$timeout","$rootScope",function(e,a){return{restrict:"C",link:function(t,o,n){a.template_layout=[3,6,3,3,6,6,3],a.templateCounter=0,console.log("uimasonryinit");var i=$(o).width()/12;a.widthPerUnit=i,a.canvasSize=$(o).width(),""!==$(o).attr("masonry-gap")?a.masonryGap=$(o).attr("masonry-gap"):a.masonryGap=0,t.getPerUnit=function(){var e=$(o).width()/12,a=Math.floor(e);return 50>=a&&(a=60),a},t.setElementSize=function(e,a){var t=$(e).attr("small-width"),o=$(e).attr("small-height"),n=$(e).attr("max-width"),i=$(e).attr("max-height"),r=$(e).attr("max");"true"!=r?($(e).css("width",t*a+"px"),$(e).css("min-height",o*a+"px")):($(e).css("width",n*a+"px"),$(e).css("min-height",i*a+"px")),$(e).attr("mw",n*a+"px"),$(e).attr("mh",i*a+"px"),$(e).attr("sw",t*a+"px"),$(e).attr("sh",o*a+"px")},t.initWidget=function(){var e=t.getPerUnit();return a.widthPerUnit=e-a.masonryGap,$(".box-container .widgetbox").each(function(a,o){t.setElementSize(o,e)}),e},t.onWidgetClicked=function(a){var t=$(a.currentTarget).attr("id");console.log("currentID ",t),console.log("onWidgetClicked");var o=$("#"+t),n=o.attr("max");return $(".box-container .widgetbox").attr("max",""),console.log("expanding up #widget"+t),"true"!=n?o.attr("max","true"):o.attr("max",""),$(window).trigger("resizestop"),this.$emit("ON_WIDGET_CLICKED",t),e(function(){$(window).trigger("scrollstop")},200),!0},t.onWidgetCollapse=function(e){console.log("onWidgetCollapse");var a=$("#"+e),o={currentTarget:a};return t.onWidgetClicked(o),!0},t.$on("ON_LOADMORE_ARTICLES",function(){e(function(){a.loadmore_loading=!1,$(window).trigger("resizestop")},200)})}}}]),app.directive("uimasonry",["$timeout","$rootScope",function(e,a){return{restrict:"C",scope:!0,link:function(t,o,n){function i(){console.log("processing masonry ui"),console.log(a.widthPerUnit);t.initWidget();console.log("layout_resizing: resizestop"),$(window).trigger("resizestop"),$(window).on("resizestop",function(){a.loadmore_loading=!0,console.log("resizestop!"),a.widthPerUnit=$(".uimasonryinit").width()/12;var o=t.initWidget();console.log(o);var i=n.articlesort;return console.log("articlesort: ",i),a.masonry_loading===!0?!0:(a.masonry_loading=!0,void e(function(){i&&"true"==i?(console.log("sort is now enabled!"),a.tilecontainer.isotope({masonry:{columnWidth:o},getSortData:{number:function(e){return parseInt(e.attr("sort-timestamp"),10)}},animationEngine:"css",sortBy:"number",sortAscending:!1},function(){a.masonry_loading=!1,a.loadmore_loading=!1,console.log("masonry completed!"),$(".box-container .box").css("display","block")})):a.tilecontainer.isotope({masonry:{columnWidth:o},sortBy:"original-order",sortAscending:!0,animationEngine:"css"},function(){a.masonry_loading=!1,a.loadmore_loading=!1,console.log("masonry completed!"),$(".box-container .box").css("display","block")})},300))})}if(t.masonryready=!1,t.colored=!1,a.tilecontainer=$(".box-container"),t.tile.post&&t.tile.post.timestamp?n.$set("sort-timestamp",t.tile.post.timestamp):"ads"==t.tile.type&&n.$set("sort-timestamp",t.tile.ads.timestamp),t.tile.is_updated_article){var r=t.getPerUnit(),s=$(o).find(".widgetbox:first");t.setElementSize(s,r),$(o).css("display","block"),a.tilecontainer.isotope("addItems",o),t.tile.is_updated_article=!1,console.log("inserted here <<<<<<<")}t.$last===!0&&(console.log("last record..."),$(window).unbind("resizestop"),i())}}}]),app.directive("uimasonrystatic",["$timeout","$rootScope",function(e,a){return{restrict:"C",scope:!0,link:function(t,o,n){console.log("community directive"),t.masonryready=!1,t.colored=!1,e(function(){console.log(a.widthPerUnit);var e=t.initWidget();$(".box-container").isotope({masonry:{columnWidth:e},onLayout:function(){$(window).trigger("scroll"),console.log("EVENT: on layout masonry...")}}),$(".box-container .box").css("display","block"),$(window).trigger("resizestop"),$(window).trigger("scroll")},900),$(window).on("resizestop",function(){console.log("resizestop! - uimasonrystatic"),a.widthPerUnit=$(".uimasonryinit").width()/12;var e=t.initWidget();console.log(e),$(".box-container").isotope({masonry:{columnWidth:e}})})}}}]),app.directive("uiNetworkExplore",["$apiService","$rootScope","$state","$apiSocialCommerce",function(e,a,t,o){return{restrict:"C",scope:!0,link:function(n,i,r){n.pagecount=10,n.hideLoadMore=!1,n.loading=!1,n.isFilter=!1,n.tag="",n.page=1,n.networkExplore={},n.network={};var s={region:{},province:{},zone:{},area:{}};console.log("uiNetworkExplore :params",t.params),n.$watch("config",function(e){e&&("network_directory"==a.config.browse_network_type?c():l())});var c=function(){a.boxTemplate=[6,3,3,3,3,3,3,6,3,3,4,4,4];var e={target:3,count:null};o.getAvailableCategories(e,function(e,a){a.status&&a.status.success&&(n.networkExplore.categories=a.categories),n.searchNetworkDirectory()}),n.$watch("network.region",function(e){if(-1==e||e){-1==e&&(e="",s.region.inclusive_tags=[],n.province_list=[]);var a=_.find(n.networkExplore.categories,function(a){return a.id==e});if(a&&a.include_tags){var t=a.include_tags;s.region.inclusive_tags=t,n.province_list=a.children}n.network.province="",n.searchNetworkDirectory()}}),n.$watch("network.province",function(e){if(-1==e||e){-1==e&&(e="",s.province.inclusive_tags=[],n.zone_list=[]);var a=_.find(n.province_list,function(a){return a.id==e});if(a&&a.include_tags){var t=a.include_tags;s.province.inclusive_tags=t,n.zone_list=a.children}n.searchNetworkDirectory()}else n.zone_list={},s.province.inclusive_tags=[];n.network.zone=""}),n.$watch("network.zone",function(e){if(-1==e||e){-1==e&&(e="",s.zone.inclusive_tags=[],n.area_list=[]);var a=_.find(n.zone_list,function(a){return a.id==e});if(a&&a.include_tags){var t=a.include_tags;s.zone.inclusive_tags=t,n.area_list=a.children}n.searchNetworkDirectory()}else n.area_list={},s.zone.inclusive_tags=[];n.network.area=""}),n.$watch("network.area",function(e){if(-1==e||e){-1==e&&(e="",s.area.inclusive_tags=[]);var a=_.find(n.area_list,function(a){return a.id==e});if(a&&a.include_tags){var t=a.include_tags;s.area.inclusive_tags=t}n.searchNetworkDirectory()}else s.area.inclusive_tags=[]})},l=function(){t.params.tag&&(n.tag=t.params.tag,n.isFilter=!0),a.boxTemplate=[6,3,3,3,3,3,3,6,3,3,4,4,4],console.log("uiNetworkExplore"),e.network.explore(n.page,n.pagecount,n.tag,function(e,a){n.networkExplore=a,a.networklist.length||(n.hideLoadMore=!0),n.loadmoreNetworkTags()})};n.searchNetworkDirectory=function(){n.page=0,n.tempTiles=[],n.networkExplore.networklist=[],n.loadmoreNetworkDirectory()},n.filterNetwork=function(e){n.page=0,n.tag=e,n.networkExplore={},n.loadmoreNetworkTags()},n.tempTiles=[],n.loadmoreNetworkTags=function(){if(n.loading=!0,n.page=n.page+1,n.tempTiles.length)console.log("load pre fetch"),n.networkExplore.networklist=_.union(n.networkExplore.networklist,n.tempTiles),n.$broadcast("ON_LOADMORE_ARTICLES");else if(n.page>2)return console.log("stop loading"),n.loading=!1,void(n.hideLoadMore=!0);e.network.explore(n.page,n.pagecount,n.tag,function(e,a){n.loading=!1,n.tempTiles=a.networklist,2!=n.page||a.networklist.length||(n.hideLoadMore=!0)})},n.loadmoreNetworkDirectory=function(){if(n.loading=!0,n.page=n.page+1,n.tempTiles.length)console.log("load pre fetch"),n.networkExplore.networklist=_.union(n.networkExplore.networklist,n.tempTiles),n.$broadcast("ON_LOADMORE_ARTICLES");else if(n.page>2)return console.log("stop loading"),n.loading=!1,void(n.hideLoadMore=!0);var a=_.flatten([s.region.inclusive_tags,s.province.inclusive_tags,s.zone.inclusive_tags,s.area.inclusive_tags]),t={inclusive_tags:a.join(),page:n.page,count:n.pagecount};e.network.listNetworksByCategory(t,function(e,a){n.loading=!1,n.tempTiles=a.networks,2!=n.page||a.networks.length||(n.hideLoadMore=!0),1==n.page&&n.loadmoreNetworkDirectory()})},Pace.once("done",function(){a.$broadcast("ON_TAG_REFRESH"),a.$broadcast("resizestop"),$(".network-nav").removeClass("hide"),$(".loadmore").removeClass("hide")})}}}]),app.directive("uiNetworkTemplate",["$rootScope",function(e){return{restrict:"C",scope:!0,link:function(a,t,o){0===e.boxTemplate.length&&(e.boxTemplate=[6,3,3,3,3,3,3,6,3,3,4,4,4]),a.boxWidth=e.boxTemplate.shift()}}}]),app.directive("uiResize",[function(){return{restrict:"C",scope:!0,link:function(e,a,t){var o,n;$(a).parent().parent().height(),$(a).parent().width();$(a).attr("src",$("img").attr("src")).load(function(){o=this.width,n=this.height})}}}]),app.directive("uiScroller",["$timeout",function(e){return{restrict:"C",scope:!0,link:function(a,t,o){console.log("uiScroller"),a.init=function(){$(t).slimScroll({height:"100%"})},a.$on("SCROLLER_INIT",function(){e(function(){a.init()},300)}),a.$on("resizestop",function(){a.init()}),a.init()}}}]),app.directive("uiScrollerChatBox",["$timeout",function(e){return{restrict:"C",scope:!0,link:function(a,t,o){console.log("uiScrollerChatBox"),a.init=function(){$(t).slimScroll({height:"inherit"})},a.$on("SCROLLER_INIT",function(){e(function(){a.init()},300)}),a.$on("resizestop",function(){a.init()})}}}]),app.directive("uiScrollerContactList",["$timeout",function(e){return{restrict:"C",scope:!0,link:function(a,t,o){console.log("uiScrollerContactList"),a.init=function(){$(t).slimScroll({height:"inherit"})},a.$on("SCROLLER_INIT",function(){e(function(){a.init()},300)}),a.$on("resizestop",function(){a.init()})}}}]),app.directive("uiScrollerDynamicHeight",["$timeout",function(e){return{restrict:"C",scope:!0,link:function(a,t,o){console.log("uiScroller");var n=function(){var e,a,t;return e=parseInt($(".conversation-canvas").height()),a=80,t=e-a+"px",{scrollHeight:t}};a.init=function(){var e=n();$(t).slimScroll({height:e.scrollHeight})},a.$on("SCROLLER_INIT",function(){e(function(){a.init();var e=n();$(".ui-scroller-dynamic-height").slimScroll({scrollTo:e.scrollHeight})},100)}),a.$on("resizestop",function(){a.init()})}}}]),app.directive("uiLazyImage2",["$rootScope",function(e){return{restrict:"C",scope:!0,link:function(a,t,o){a.imageloaded=!1;var n=!1;a.validateimage=function(){if(console.log("validateimage"),a.imageloaded===!1){var i=$(t).visible();i===!0&&(console.log("startValidate now!"),a.imageloaded=!0,n=o.lazyurl,$(t).attr("src",n),console.log($(t).height()),$(t).addClass("expand-me"),n==a.blankgif?$(t).css({opacity:"0.0",height:"300px"}):""===n?$(t).css({opacity:"0.0",height:"300px"}):n.length<=0&&$(t).css({opacity:"0.0",height:"300px"}),e.$broadcast("ON_LOADMORE_ARTICLES"))}},$("img").error(function(){$(this).css({opacity:"1.0",height:"300px"}),$(this).attr("src",a.blankgif)}),Pace.on("done",function(){a.validateimage(),o.$observe("data-lazyurl",function(e){console.log("lazyurl"),e&&n!=e&&(a.imageloaded=!1,a.validateimage())})}),a.$on("VALIDATE_IMAGE_ONSCROLL",function(){a.validateimage()})}}}]),app.directive("uiLazyBox",["$rootScope",function(e){return{restrict:"C",replace:!0,scope:{lazyboxUrl:"@lazyboxUrl",imagefill:"@imageFill",tile_info:"@tile"},templateUrl:"/_partials/common/lazybox",link:function(a,t,o){function n(){var e=$(t).find(".tracker-bottom").visible(),o=$(t).find(".tracker-top").visible();if(o===!1&&e===!1)a.image_show=!1,$(t).find("img.main").fadeOut(100);else{var n=$(t).find("img.main");$(n).fadeIn(100),s.h=$(n).height(),s.w=$(n).width(),a.box_draw(s)}}var i=e.getDomain(e.config.cdn_url),r=e.getDomain(a.lazyboxUrl);i==r&&(a.lazyboxUrl=a.lazyboxUrl+"_400");var s={h:0,w:0};a.imgUrl=a.lazyboxUrl,a.box_draw=function(e){e.h_200=e.h/e.w*200,e.w_200=200;var a=document.createElement("canvas"),o=a.getContext("2d");a.height=e.h_200,a.width=e.w_200,o.fillStyle="#dddddd",o.fillRect(0,0,e.w,e.h);var n=a.toDataURL();$(t).find(".frame").attr("src",n)};var c={};if(a.tile_info&&(c=JSON.parse(a.tile_info),c&&c.metadata)){var l=c.metadata;s.h=l["img:height"],s.w=l["img:width"],0===s.h&&(s.w=640,s.h=400,$(t).find("img.main").load(function(){console.log("main image is loaded.. none S3 image.");var e={h:0,w:0};e.h=this.height,e.w=this.width;var o=$(t).find("img.frame").height();this.height<o&&(s.w=e.w,s.h=e.h,a.box_draw(s))})),a.meta=s,a.box_draw(s)}n(),a.$on("VALIDATE_IMAGE",function(){n()}),$(window).on("scrollstop",function(){n()})}}}]),app.directive("uiHeaderProfile",["$rootScope","$window",function(e,a){return{restrict:"A",scope:!0,link:function(a,t,o){a.initializeDropDownHover("header_profile_pic"),$("#header_notify").foundation("dropdown",{is_hover:!1,closed:function(){e.hideNotificationIcon()}}),a.initializeDropDownHover("header_profile_zuucash")}}}]),app.directive("uiHeader",[function(){return{restrict:"A",scope:!0,link:function(e,a,t){e.closeDropdown=function(e){$(e.currentTarget).parent().children(".f-dropdown").removeClass("open").hide()}}}}]),app.directive("uiPopup",[function(){return{restrict:"E",replace:!0,templateUrl:"/_partials/common/popup-windows",link:function(e,a,t){}}}]),app.directive("uiHotness",[function(){return{restrict:"C",scope:{score:"@uiRating"},link:function(e,a,t){$(".ui-hotness .bar").css("width",e.score+"%")}}}]),app.directive("gridMatchHeight",[function(){return{restrict:"A",replace:!0,link:function(e,a,t){console.log(" Equal height columns");var o=matchMedia(Foundation.media_queries.small).matches,n=$(a).find("[grid-height-watch]");if(n.height("inherit"),!o){var i=n.map(function(){return $(this).height()}),r=Math.max.apply(null,i);n.height(r)}}}}]),app.directive("fDropdown",[function(){return{restrict:"C",scope:!0,link:function(e,a,t){$(a).find("a").each(function(){$(this).on("click",function(e){$(a).removeClass("open").hide()})})}}}]),app.directive("uiMenuBar",["$timeout","$apiService","$state","$location","$rootScope","$popupService","$analytics","$http","$compile","$window","$FB",function(e,a,t,o,n,i,r,s,c,l,d){return{restrict:"C",scope:{homelink:"@homeUrl",hometext:"@homeText",icon:"@iconUrl",activePage:"@currentPage",currentpagelink:"@currentPageLink",hidepost:"@hidePostButton",showSchedPost:"@showSchedPost",enable_social_share:"@enableSocialShare",articleCollectionId:"@articleCollectionId",menu_links:"@menuLinks",hasManagementRoles:"@hasManagementRoles",hideMediaUpload:"@hideMediaUpload",hideMenu:"@hideMenu",menu_option:"@menuOption",hasNetworkManagementAccess:"@hasNetworkManagementAccess",currentNetworkId:"@currentNetworkId"},replace:!0,link:function(u,m,p){u.userInfo={access:{}},u.isOldManagementDisabled=n.config.platform_feature.disable_old_management,u.hasManagementRoles&&(u.hideMediaUpload=!1),1==u.showSchedPost&&(n.schedpost=!0),n.schedule_icon=!1,u.currentUser=n.currentUser,console.log("showSchedPost :? ",u.showSchedPost),u.facebook_refer_friend=n.config.feature_locks.facebook_refer_friend,!(n.currentUser&&n.config.feature_locks.id_realname_required&&n.currentNetwork.info&&2==n.currentNetwork.info.registration_type)||n.currentUser.realNameAvailability&&n.currentUser.snsAvailability||(u.is_needed_snsid=!0),s.get("/_partials/common/_menubar?"+(new Date).getTime()).success(function(e){m.html(""),m.append(c(e)(u))}),u.show_menu_reseller=!(!n.currentUser||!n.currentUser.isReseller),u.selectedArticleStatus="Active";try{u.network_info=n.currentNetwork.info,u.network_shortcut=n.currentNetwork.info.shortcut}catch(g){n.currentNetwork&&n.currentNetwork.network&&(u.network_info=n.currentNetwork.network,u.network_shortcut=n.currentNetwork.network.shortcut)}u.network_info&&!_.isEmpty(u.network_info.privateData)&&((u.network_info.privateData.isModerator||u.network_info.privateData.hasManagementAccess)&&(n.schedule_icon=!0),u.userInfo.access=u.network_info.privateData,console.log("ldz back",u.network_info),u.isModerator=!!u.network_info.privateData.isModerator,u.isCelebrity=!!u.network_info.privateData.isCelebrity),n._mobileweb===!1&&(console.log("activePage => ",u.activePage.toLowerCase()),u.activePage=u.activePage.toLowerCase(),"network.guides.draft"==t.current.name||"network.documents.draft"==t.current.name?u.selectedArticleStatus="Draft":"network.documents.schedule"!=t.current.name&&"network.guides.schedule"!=t.current.name||(u.selectedArticleStatus="Schedule"),u.selecteArticleStatus=function(e,a){if(u.selectedArticleStatus=e,"GUIDES"==u.activePage||"DOCUMENTS"==u.activePage){var t=u.homelink;switch("GUIDES"==u.activePage?t+="/guides":"DOCUMENTS"==u.activePage&&(t+="/documents"),a){case 1:l.location=t+"/draft";break;case 2:l.location=t+"/schedule";break;case 0:default:l.location=t}}},u.dropdown_link=[{url:"",text:""}],$(".ui-menu-bar .dropdown").foundation(),u.$watch("menu_links",function(){u.menu_links&&(u.dropdown_link=JSON.parse(u.menu_links),console.log("menu_links: ",u.dropdown_link))})),u.postText="",u.options={},u.options.post_as_network=!1,u.options.preserveAuthor=0,u.attachments=[],u.preview_links=[],u.isPostProccessing=!1,u.createNewArticle=function(){if(!n.showFollowMessage()){if(u.isInValidPost=!1,$.isEmptyObject(u.postText))return void(u.isInValidPost=!0);if(!u.isPostProccessing&&(""!==u.postText||u.uploaded_images.length)){u.isPostProccessing=!0,u.attachments=[];var e="";if(u.uploaded_images.length?e=u.uploaded_images[0]:u.preview_links.length&&(e=u.preview_links[0].link_url),e)a.articles.articleUrlCache(e,function(e,a){a.info&&u.attachments.push(a.info),""===u.postText&&(u.postText=" "),u.postTextAndAttachment()});else{var t=n.extractLink(u.postText),o=[],i=0;t.length?angular.forEach(t,function(e,n){a.articles.articleUrlCache(e,function(e,a){if(a.info&&a.info.thumbnail&&o.push(a.info),i+=1,i==t.length){if(o.length){var n=_.sortBy(o,function(e){return"video"!=e.type});u.attachments.push(n[0])}u.postTextAndAttachment()}})}):u.postTextAndAttachment()}}}},u.evaluate_link=function(e){if(u.share_fileupload_error=!1,u.share_fileupload_size_error=!1,!u.uploaded_images.length){var t=n.extractLink(e),o=[];t.length||(u.preview_links=[]);var i=0;angular.forEach(t,function(e,n){a.articles.articleUrlCache(e,function(e,a){if(a.info&&a.info.thumbnail&&o.push(a.info),i+=1,i==t.length&&(u.preview_links=[],o.length)){var n=_.sortBy(o,function(e){return"video"!=e.type});u.preview_links.push(n[0])}})})}},u.postTextAndAttachment=function(){if(u.isNewPost)if("network.wallschedule"==t.current.name){console.log("SCHEDULE POSTING ....");var e=!1,o=JSON.parse($("#selectTimeZone").val()),i=$("#txtPostedOn").val()+" "+$(".time-publish").find(".hour").val()+":"+$(".time-publish").find(".minute").val()+" "+o.timezoneTitle.substring(3),s=$("#txtPostedExpire").val()+" "+$(".time-expire").find(".hour").val()+":"+$(".time-expire").find(".minute").val()+" "+o.timezoneTitle.substring(3),c=moment(i,"DD/MM/YYYY HH:mm Z"),l=moment(s,"DD/MM/YYYY HH:mm Z"),d=l.unix();if($("#checkbox_sticky").is(":checked")&&(e=!0),$("#chkEnableExpire").is(":checked"))var d=l.unix();else d="";console.log("oPublishDate",c),console.log("oExpireDate",d),console.log("stickypost",e),a.articles.createNewScheduleArticle(u.articleCollectionId,u.postText,u.attachments,u.options.post_as_network,c.unix(),d,e,function(e,a){!e&&a.status.success&&(r.eventTrack("Make a schedule post",{category:"user-post",label:n.currentUser.id,value:1}),u.postText="",u.options.post_as_network=!1,u.attachments=[],u.uploaded_images=[],u.preview_links=[],u.$emit("UPDATE_ARTICLE",a.post),$(".share-window").foundation("reveal","close")),u.isPostProccessing=!1})}else a.articles.createNewArticle(u.articleCollectionId,u.postText,u.attachments,u.options.post_as_network,function(e,a){!e&&a.status.success&&(r.eventTrack("Mak a post",{category:"user-post",label:n.currentUser.id,value:1}),u.postText="",u.options.post_as_network=!1,u.attachments=[],u.uploaded_images=[],u.preview_links=[],u.$emit("UPDATE_ARTICLE",a.post),$(".share-window").foundation("reveal","close"),n.followNetworkFromAction(n.currentNetwork.info)),u.isPostProccessing=!1});else{var m={article_id:u.update_article_id,action:"update",text:u.postText,remove_attachments:1};u.attachments.length&&(m.attachments=u.attachments),u.options.post_as_network&&(m.post_as_network=1),console.log("scope.options.preserveAuthor",u.options.preserveAuthor),u.options.preserveAuthor&&(m.preserveAuthor=1),a.articles.updateWallPost(m,function(e,a){!e&&a.status&&a.status.success&&(u.postText="",u.options.post_as_network=!1,u.options.preserveAuthor=0,u.attachments=[],u.uploaded_images=[],u.preview_links=[],u.$emit("UPDATE_ARTICLE",a.post),$(".share-window").foundation("reveal","close")),u.isPostProccessing=!1})}},u.followNetwork=function(e){n.$broadcast("FOLLOW_NETWORK")},u.unFollowNetwork=function(e){n.$broadcast("UNFOLLOW_NETWORK")},u.inviteToNetwork=function(e){n.$broadcast("INVITE_TO_NETWORK")},u.onOpenReferafriendWindow=function(e){d.ui({method:"apprequests",message:"Come and join yuuzoo now"},function(e){console.log(e)})},u.onOpenPostWindow=function(e){console.log("onOpenPostWindow"),console.log(n.currentNetwork.info.type),console.log(n.currentNetwork),console.log(t.current),u.isNewPost=!0,"blog"==n.currentNetwork.info.type?a.network.profile(t.params.shortcut,function(e,a){if(console.log(a),a.network.info.privateData.isAuthor===!0||a.network.info.privateData.isContributor===!0)window.location="/"+n.currentNetwork.info.shortcut+"/create";else{var t="Oops. You can't create blog posts. ";i.showAutoMessage(t)}}):(u.postText="",u.options.post_as_network=!1,u.attachments=[],u.uploaded_images=[],u.preview_links=[],u.showPostEditWindow())},u.onOpenSchedPostWindow=function(e){console.log("onOpenPostWindow"),console.log(n.currentNetwork.info.type),console.log(n.currentNetwork),console.log(t.current),u.isNewPost=!0,u.postText="",u.options.post_as_network=!1,u.attachments=[],u.uploaded_images=[],u.preview_links=[],u.showPostEditWindow()},u.showPostEditWindow=function(){$(".share-window").data("reveal-init",{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,close_on_esc:!1,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",bg:$(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}}),$(".share-window").foundation("reveal","open"),$(document).on("opened","[data-reveal]",function(){console.log("something opened! "),$(".text-status").focus()})},n.$on("ON_ARTICLE_POST_EDIT",function(e,a){u.isNewPost=!1,u.update_article_id=a.post.article_id,u.options.post_as_network=a.post.is_posted_as_network,u.attachments=[],u.uploaded_images=[],u.preview_links=[],u.postText=a.post.text,a.post.previewAttachment&&("image"==a.post.previewAttachment.type?(u.evaluate_link(a.post.previewAttachment.thumbnail),u.uploaded_images[0]=a.post.previewAttachment.thumbnail):u.evaluate_link(a.post.text)),u.showPostEditWindow()}),u.uploadToAlbum=function(){console.log("Upload Album"),u.album.attachments=[];var t=u.uploaded_images;if(u.album.is_create_album&&!u.album.title)return i.blockUI("Please provide an album title."),void e(function(){$(".create-album-window").foundation("reveal","open")},2e3);if(!u.album.is_create_album&&!u.album.album_id)return i.blockUI("Please select an album."),void e(function(){$(".create-album-window").foundation("reveal","open")},2e3);if(!u.uploaded_images.length&&!u.album.videos.length)return i.blockUI("Please add a media first."),void e(function(){$(".create-album-window").foundation("reveal","open")},2e3);i.blockUI("Processing...");var r=u.uploaded_images.length;angular.forEach(u.album.videos,function(e,a){t.unshift({id:r+a,url:e.link,description:""}),r++}),angular.forEach(t,function(r,s){a.articles.articleUrlCache(r.url,function(c,l){l.info&&(""===l.info.title&&(l.info.title=r.description),u.album.attachments.push(l.info)),t.length-1==s&&(u.album.attachments.length?(u.album.network_shortcut=n.currentNetwork.info.shortcut,u.album.is_create_album?a.articles.createMediaAlbum(u.album,function(a,t){if(!a&&t.status.success)u.album={},u.album.attachments=[],u.album.is_create_album=!1,u.uploaded_images=[],o.path("/"+n.currentNetwork.info.shortcut+"/medias/"+t.album.album_id),$(".create-album-window").foundation("reveal","close");else{var r="";a?r=$("#general-error-message:first").text():t.status.err&&(r=t.status.err),i.blockUI(r),e(function(){$(".create-album-window").foundation("reveal","open")},2e3)}}):a.articles.uploadToAlbum(u.album,function(a,t){if(a){var r=$("#general-error-message:first").text();i.blockUI(r),e(function(){$(".create-album-window").foundation("reveal","open")},2e3)}else{var s=u.album.album_id;u.album={},u.album.attachments=[],u.album.is_create_album=!1,u.uploaded_images=[];var c="/"+n.currentNetwork.info.shortcut+"/medias/"+s;o.path()==c?(angular.forEach(t,function(e,a){n.currentNetwork.tiles.push(e)}),$(window).trigger("resizestop")):o.path(c),$(".create-album-window").foundation("reveal","close")}})):(i.blockUI("Please add a media first."),e(function(){$(".create-album-window").foundation("reveal","open")},2e3)))})})},u.album={},u.album.videos=[],u.album.videos_ctr=0,u.addvideotoalbum_link=function(e){var a=u.album.videos_ctr;u.album.videos.push({id:""+a}),u.album.videos_ctr=u.album.videos_ctr+1},u.removeVideoLink=function(e){u.album.videos.splice(e,1)},u.onOpenUploadToAlbumWindow=function(e){o.path("/"+n.currentNetwork.info.shortcut+"/media/upload")},u.onOpenCreateNetworkArticlesWindow=function(e){"function"==typeof u.resetNewNetworkArticles&&u.resetNewNetworkArticles(),$(".create-network-articles").data("reveal-init",{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!1,close_on_esc:!1,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",bg:$(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}}),$(".create-network-articles").foundation("reveal","open")}}}}]),app.directive("uiSticky",["$rootScope",function(e){return{restrict:"C",scope:{top_spacing:"@stickyTop"},link:function(e,a,t){e.$on("REMOVE_STICKY",function(){console.log("REMOVE_STICKY"),$(a).unstick()}),e.$on("AGAIN_STICKY",function(){console.log("AGAIN_STICKY...."+e.top_spacing),$(a).sticky({topSpacing:e.top_spacing})}),console.log("uiSticky "),$(document).ready(function(){console.log("uiSticky.."+e.top_spacing),$(a).sticky({topSpacing:e.top_spacing})})}}}]),app.directive("uiShareWindow",["$rootScope","$timeout","$state",function(e,a,t){return{restrict:"C",link:function(o,n,i){o.uploaded_images=[],o.timezone_list=timezone_list,o.currentState=t.current.name,o.currentTimeZone=moment().format("Z"),o.getTimeZoneValue=function(e){var a=JSON.parse(e);return a.timezoneTitle.substring(3)},o.addPhotoUploadOptions={url:"/api/media/upload",maxFileSize:5e6,singleFileUploads:!0,maxNumberOfFiles:1,autoUpload:!0,formData:{resize:[200,400,800]},pasteZone:null,add:function(e,a){o.share_fileupload_error=!1,o.share_fileupload_size_error=!1,a.originalFiles[0]&&a.originalFiles[0].size&&a.originalFiles[0].size>5e6?o.share_fileupload_size_error=!0:a.submit(),o.$apply()},start:function(e){},stop:function(e){},done:function(a,t){o.uploaded_images[0]=e.config.cdn_url+t._response.result.fsRef,o.is_upload_preview_loading=!1,o.$apply()},fail:function(e,a){o.share_fileupload_error=!0,o.is_upload_preview_loading=!1,o.$apply()},change:function(e,a){},progress:function(e,a){o.is_upload_preview_loading=!0,o.$apply()}},o.uploadfile_link=function(){a(function(){$("#addphoto").click()},1)},o.removeUpload=function(e){o.uploaded_images.splice(e,1),o.evaluate_link(o.postText)},$(".ui-share-window").foundation()}}}]),app.directive("uiCreateNetworkArticles",["$timeout","$rootScope","$apiService","$state","$popupService",function(e,a,t,o,n){
return{restrict:"C",link:function(i,r,s){a.skipFixObject=!0,i.currentSelectedTile=!1,i.isDraft=0,"network.guides.draft"!=o.current.name&&"network.documents.draft"!=o.current.name&&"network.guide-draft-article"!=o.current.name&&"network.documents-draft-article"!=o.current.name||(i.isDraft=1),i.isUpdateWithArticleId=!1,i.isWallPost=!1,i.wallpostdata={post_content:"",remove_attachment:!1,schedule_post:!1,enableExpire:!1,schedule_date:"",expire_date:"",schedule_hour:0,schedule_min:0,expire_hour:0,expire_min:0},console.log("$state.current.name "+o.current.name),i.resetNewNetworkArticles=function(){i.isUpdateWithArticleId=!1,i.newnetworkarticles={title:"",description:"",sequence:0,article_preview_photo_fsref:"",html_fsref:"",html_content:"",text:"",scheduled_on:0,expire_on:0},i.wallpostdata={post_content:"",remove_attachment:!1,schedule_post:!1,enableExpire:!1,schedule_date:"",expire_date:"",schedule_hour:0,schedule_min:0,expire_hour:0,expire_min:0};var e=new Date;e.setDate(e.getDate()+1);var a=moment(e);i.wallpostdata.schedule_date=a.format("DD/MM/YYYY"),e.setDate(e.getDate()+1),a=moment(e),i.wallpostdata.expire_date=a.format("DD/MM/YYYY"),"DOWNLOADS"==i.activePage&&(i.newnetworkarticles.html_fsref="fordownloads"),i.uploadoptions={html_detail:{loaded:0,total:0,loadedPct:0,uploadedfile:"",loadinginprogress:!1},preview_photo:{loaded:0,total:0,loadedPct:0,uploadedfile:"",loadinginprogress:!1}}},i.resetNewNetworkArticles(),"network.guides.schedule"!=o.current.name&&"network.documents.schedule"!=o.current.name||(i.wallpostdata.schedule_post=!0),console.log("scope.wallpostdata.schedule_post ",i.wallpostdata.schedule_post),i.articleDetailHTMLUploadOptions={url:"/api/management/uploadStaticHtml",maxFileSize:5e6,singleFileUploads:!0,maxNumberOfFiles:1,autoUpload:!0,pasteZone:null,formData:{resize:[200,400,800]},start:function(a){e(function(){i.uploadoptions.html_detail.loadinginprogress=!0,i.uploadoptions.html_detail.loaded=0,i.uploadoptions.html_detail.total=0,i.uploadoptions.html_detail.loadedPct=0},1)},stop:function(a){e(function(){i.uploadoptions.html_detail.loaded=0,i.uploadoptions.html_detail.total=0,i.uploadoptions.html_detail.loadedPct=0},1e3)},done:function(e,t){i.uploadoptions.html_detail.uploadedfile=a.config.cdn_url+t._response.result.fsRef,i.newnetworkarticles.html_fsref=t._response.result.fsRef,i.msg="File uploaded successfully.",i.uploadoptions.html_detail.loadinginprogress=!1},fail:function(e,a){i.msg="File could not upload."},change:function(e,a){angular.forEach(a.files,function(e,a){i.uploadoptions.html_detail.uploadedfile=e.name})},progress:function(a,t){e(function(){i.uploadoptions.html_detail.total=t.total,i.uploadoptions.html_detail.loaded=t.loaded,i.uploadoptions.html_detail.loadedPct=i.uploadoptions.html_detail.loaded/i.uploadoptions.html_detail.total*100},1)}},i.articlePreviewPhotoUploadOptions={url:"/api/media/upload",maxFileSize:5e6,singleFileUploads:!0,maxNumberOfFiles:1,autoUpload:!0,formData:{resize:[200,400,800]},pasteZone:null,start:function(a){e(function(){i.uploadoptions.preview_photo.loadinginprogress=!0,i.uploadoptions.preview_photo.loaded=0,i.uploadoptions.preview_photo.total=0,i.uploadoptions.preview_photo.loadedPct=0},1)},stop:function(a){e(function(){i.uploadoptions.preview_photo.loaded=0,i.uploadoptions.preview_photo.total=0,i.uploadoptions.preview_photo.loadedPct=0},1e3)},done:function(e,t){i.uploadoptions.preview_photo.uploadedfile=a.config.cdn_url+t._response.result.fsRef,i.newnetworkarticles.article_preview_photo_fsref=t._response.result.fsRef,i.msg="File uploaded successfully.",i.uploadoptions.preview_photo.loadinginprogress=!1},fail:function(e,a){i.msg="File could not upload."},change:function(e,a){angular.forEach(a.files,function(e,a){i.uploadoptions.preview_photo.uploadedfile=e.name})},progress:function(a,t){e(function(){i.uploadoptions.preview_photo.total=t.total,i.uploadoptions.preview_photo.loaded=t.loaded,i.uploadoptions.preview_photo.loadedPct=i.uploadoptions.preview_photo.loaded/i.uploadoptions.preview_photo.total*100},1)}},i.createNewNetworkArticle=function(a){i.isUpdatingInProgress=!0;var n=0,r=0;if(i.wallpostdata.schedule_post){var s=$("#txtPostedOn").val()+" "+$(".time-publish").find(".hour").val()+":"+$(".time-publish").find(".minute").val(),c=$("#txtPostedExpire").val()+" "+$(".time-expire").find(".hour").val()+":"+$(".time-expire").find(".minute").val();n=moment(s,"DD/MM/YYYY HH:mm"),n=n.unix(),($("#chkEnableExpire").is(":checked")||1==i.wallpostdata.enableExpire)&&(r=moment(c,"DD/MM/YYYY HH:mm"),r=r.unix())}i.newnetworkarticles.html_content=$(".ui-text-editor").editable("getHTML",!0,!0)[0];var l={articleCollectionId:i.articleCollectionId,activePage:i.activePage.toLowerCase(),networkArticles:i.newnetworkarticles,publishDate:n,expiryDate:r};t.articles.createNewGuideArticlesDownloadsSP(l,function(t,n){console.log("$state.current.name",o.current.name,n),n.status.success&&("GUIDES"==i.activePage&&("network.guides.draft"==o.current.name||"network.guides.schedule"==o.current.name)||"DOWNLOADS"==i.activePage&&"network.downloads"==o.current.name||"DOCUMENTS"==i.activePage&&("network.documents.draft"==o.current.name||"network.documents.schedule"==o.current.name))&&(a&&"markactive"==a?(i.isUpdateWithArticleId=n.post.post.article_id,i.isDraft=!0,console.log("make_action",a),i.updateNetworkArticleAction(a)):(i.resetNewNetworkArticles(),i.$emit("UPDATE_ARTICLE",n.post))),i.isUpdatingInProgress=!1,$(".create-network-articles").foundation("reveal","close"),e(function(){console.log("createNewNetworkArticle: resizestop"),$(window).trigger("resizestop")},300)})},i.updateNetworkArticleAction=function(n){if(console.log("############# updateNetworkArticleAction  make_action",n),n){if(i.isUpdatingInProgress=!0,i.newnetworkarticles.html_content=$(".ui-text-editor").editable("getHTML",!0,!0)[0],i.newnetworkarticles.article_id=i.isUpdateWithArticleId,i.wallpostdata.schedule_post){var r=$("#txtPostedOn").val()+" "+$(".time-publish").find(".hour").val()+":"+$(".time-publish").find(".minute").val(),s=$("#txtPostedExpire").val()+" "+$(".time-expire").find(".hour").val()+":"+$(".time-expire").find(".minute").val();oPublishDate=moment(r,"DD/MM/YYYY HH:mm"),oPublishDate=oPublishDate.unix(),oExpireDate=0,($("#chkEnableExpire").is(":checked")||1==i.wallpostdata.enableExpire)&&(oExpireDate=moment(s,"DD/MM/YYYY HH:mm"),oExpireDate=oExpireDate.unix()),console.log("oPublishDate",oPublishDate),console.log("oExpireDate",oExpireDate),i.newnetworkarticles.scheduled_on=oPublishDate,i.newnetworkarticles.expire_on=oExpireDate,"markactive"==n&&(n="markscheduled")}else i.newnetworkarticles.scheduled_on=0,i.newnetworkarticles.expire_on=0;a.isArticleDraft=i.isDraft,t.articles.updateGuideArticlesDownloads(i.isUpdateWithArticleId,i.activePage.toLowerCase(),n,i.newnetworkarticles.title,i.newnetworkarticles.description,i.newnetworkarticles.sequence,i.newnetworkarticles.html_content,i.newnetworkarticles.article_preview_photo_fsref,i.isDraft,i.newnetworkarticles.text,i.newnetworkarticles.scheduled_on,i.newnetworkarticles.expire_on,function(t,r){if(r.status.success&&console.log(n+" ############## updatedArticle.post ",r.post),r.post&&r.post.post&&(i.currentSelectedTile.post=r.post.post),r.status.success&&("GUIDES"==i.activePage||"DOWNLOADS"==i.activePage||"DOCUMENTS"==i.activePage))if("remove"==n||"markactive"==n&&i.isDraft){var s={post:{article_id:i.currentSelectedTile.post?i.currentSelectedTile.post.article_id:0},is_deleted_article:!0};i.$emit("UPDATE_ARTICLE",s)}else console.log("current post: ",i.currentSelectedTile.post),i.$emit("UPDATE_ARTICLE",{post:i.currentSelectedTile.post});if(i.isUpdatingInProgress=!1,$(".create-network-articles").foundation("reveal","close"),a.packedtiles&&a.packedtiles.layout(),i.currentSelectedTile.post&&e(function(){var e=i.currentSelectedTile.post.article_id,a=i.currentSelectedTile.post.articletitle,t=i.currentSelectedTile.post.articletitle;angular.element("#text_"+e).text(a),angular.element("#description_"+e).text(t)},100),("network.guide-draft-article"==o.current.name||"network.guide-article"==o.current.name||"network.documents-draft-article"==o.current.name||"network.documents-article"==o.current.name)&&"markactive"==n){var c="documents",l=o.current.name;switch(l){case"network.guide-draft-article":c="guides";break;case"network.guide-article":c="guides";break;case"network.documents-draft-article":c="documents";break;case"network.documents-article":c="documents";break;default:c="documents"}window.location="/"+o.params.shortcut+"/"+c}})}},i.getHtmlData=function(){$(".ui-text-editor").editable("getHTML",!0,!0)},i.updateNetworkArticle=function(e){if(e)if("remove"==e){var a=function(){n.close()};n.showConfirmDialog(s.confirmMessage?s.confirmMessage:"Are you sure?",i.updateNetworkArticleAction,a,e)}else i.updateNetworkArticleAction(e)},i.updateTiles=function(e){if("remove"!=e&&"markactive"!=e||!i.isDraft)console.log("current post: ",i.currentSelectedTile.post),i.$emit("UPDATE_ARTICLE",{post:i.currentSelectedTile.post});else{var a={post:{article_id:i.isUpdateWithArticleId},is_deleted_article:!0};i.$emit("UPDATE_NETWORK_DOCUMENTS_WALL",a)}},i.updateWallPost=function(){if(""!==i.wallpostdata.post_content){var e={article_id:i.isUpdateWithArticleId,action:"update",text:i.wallpostdata.post_content,remove_attachments:i.wallpostdata.remove_attachment};t.articles.updateWallPost(e,function(e,a){a.status.success&&i.currentSelectedTile&&(i.wallpostdata.remove_attachment&&(i.currentSelectedTile.post.previewAttachment=null,i.currentSelectedTile.post.attachments=null),i.currentSelectedTile.post.text=i.wallpostdata.post_content,$(".create-network-articles").foundation("reveal","close"))})}},$(".ui-create-network-articles").foundation(),a.$on("ON_CREATENETWORK_ARTICLES_EDIT",function(e,a){if(console.log("##### ON_CREATENETWORK_ARTICLES_EDIT ",a),i.currentSelectedTile=a,console.log(i.currentSelectedTile),a&&a.post&&a.post.article_id&&(i.isUpdateWithArticleId=a.post.article_id),"network.wall"!=o.current.name&&"network.wall-article"!=o.current.name||(i.isWallPost=!0,i.wallpostdata.post_content=a.post.text),a&&a.post&&a.post.otherData){var n="",r="";if(a.post.otherData.article_preview_photo_url){var s=a.post.otherData.article_preview_photo_url.split("/");s.length>0&&(n=s[s.length-1])}if("DOWNLOADS"==i.activePage&&"network.downloads"==o.current.name)r="fordownloads";else if(a.post.otherData.html_fsref_url){i.uploadoptions.html_detail.uploadedfile=a.post.otherData.html_fsref_url;var c=a.post.otherData.html_fsref_url.split("/");c.length>0&&(r=c[c.length-1])}if(a.post.scheduled_on){i.wallpostdata.schedule_post=!0,console.log("selectedArticleTile.post.scheduled_on : "+a.post.scheduled_on);var l=new Date(1e3*a.post.scheduled_on);console.log("WallpostData : "+l);var d=moment(l);i.wallpostdata.schedule_date=d.format("DD/MM/YYYY"),i.wallpostdata.schedule_hour=l.getHours(),1==i.wallpostdata.schedule_hour.length&&(i.wallpostdata.schedule_hour="0"+i.wallpostdata.schedule_hour),i.wallpostdata.schedule_min=l.getMinutes(),1==i.wallpostdata.schedule_min.length&&(i.wallpostdata.schedule_min="0"+i.wallpostdata.schedule_min),console.log("WallpostData : "+i.wallpostdata.schedule_hour+":"+i.wallpostdata.schedule_min)}if(a.post.expire_on){i.wallpostdata.enableExpire=!0,console.log("selectedArticleTile.post.expire_on : "+a.post.expire_on);var l=new Date(1e3*a.post.expire_on);console.log("WallpostData : "+l);var d=moment(l);i.wallpostdata.expire_date=d.format("DD/MM/YYYY"),i.wallpostdata.expire_hour=l.getHours(),1==i.wallpostdata.expire_hour.length&&(i.wallpostdata.expire_hour="0"+l.getHours()),i.wallpostdata.expire_min=l.getMinutes(),1==i.wallpostdata.expire_min.length&&(i.wallpostdata.expire_min="0"+l.getMinutes()),console.log("WallpostData : "+i.wallpostdata.expire_hour+":"+i.wallpostdata.expire_min)}i.uploadoptions.preview_photo.uploadedfile=a.post.otherData.article_preview_photo_url,console.log(a.post);var u="/_pipe_pages/d/"+encodeURIComponent(a.post.otherData.html_fsref_url);t.articles.getFileContent(u,function(e,t){i.newnetworkarticles={title:a.post.articletitle,description:a.post.otherData.description,sequence:parseInt(a.post.otherData.sequence),article_preview_photo_fsref:n,html_fsref:r,html_content:t,text:a.post.text},a.post.scheduled_on&&(i.newnetworkarticles.scheduled_on=a.post.scheduled_on,i.newnetworkarticles.expire_on=a.post.expire_on),$(".ui-text-editor").editable("setHTML",t,!0)})}})}}}]),app.directive("uiIframe",[function(){return{restrict:"C",scope:{webUrl:"@webUrl"},link:function(e,a,t){console.log("ui-iframe!"),e.$watch("webUrl",function(){console.log("refresh the frame pls.."),console.log(e.webUrl),$(a).empty();var t="<iframe src='"+e.webUrl+"' frameborder='0' webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>";$(a).html(t)})}}}]),app.directive("uiLoginMenu",["$rootScope","$timeout",function(e,a){return{restrict:"AEC",template:'<div ng-include="srcLoginMenuFile">{{srcLoginMenuFile}}</div>',link:function(t,o,n){t.srcLoginMenuFile="/_partials/common/_header-login",e.isCampaignMenu=!1,a(function(){$("body, .menu-bar-sticky").mouseover(function(){t.show_notification=!1,t.showPopMenu=!1,console.log("pinger",t.show_user_menu)})},0)}}}]),app.directive("uiLoginCampaignMenu",["$rootScope","$state",function(e,a){return{restrict:"AEC",template:'<div ng-include="srcLoginMenuFile"></div>',link:function(t,o,n){t.srcLoginMenuFile="/_partials/common/_header-login",console.log("uiLoginCampaignMenu  attrs :",n),e.loginCampaign=n.uiLoginCampaignMenu,e.isCampaignMenu=!0,"resetpassword"!==a.current.name&&(e.logmode="network-campaign")}}}]),app.directive("uiBrowseNetworkMenu",[function(){return{restrict:"AEC",template:'<div ng-include="srcBrowseFile"></div>',link:function(e,a,t){e.srcBrowseFile="/_partials/common/_header-network-browse"}}}]),app.directive("uiFooterWidget",["$rootScope",function(e){return{restrict:"AEC",template:'<div ng-include="srcFooterWidget"></div>',link:function(e,a,t){e.srcFooterWidget="/_partials/common/_footer-widget"}}}]),app.directive("uiVideoPlayer",[function(){return{restrict:"C",link:function(e,a,t){console.log("VideoPlayer"),$(a).mediaelementplayer()}}}]),app.directive("uiBoxSlide",[function(){return{restrict:"C",scope:!0,link:function(e,a,t){function o(){return(65536*(1+Math.random())|0).toString(16).substring(1)}console.log("loading.. uiBoxSlide.."),e.autoplay=!0,console.log("loop: ",t.autoplay),"false"==t.autoplay&&(e.autoplay=!1),console.log("new autoplay: ",e.autoplay);var n="cl_"+o();$(a).addClass(n),console.log("load uiBoxSlide :",n),e.$on("BOX_SLIDE_INIT",function(){console.log("BOX_SLIDE_INIT");var t=8e3;e.autoplay===!1&&(t=0),e.uiBoxSlide=new Swiper("."+n,{calculateHeight:!0,speed:900,autoplay:t,mode:"horizontal",loopAdditionalSlides:1,loop:e.isLoop,initialSlide:0,autoResize:!0,onImagesReady:function(e){console.log("swiper: imageready."),$(a).find(".image-canvas").imagefill()}}),e.$on("resizestop",function(){console.log("uiBoxSlide: resizestop"),e.uiBoxSlide.resizeFix(),$(a).find(".image-canvas").imagefill()})})}}}]),app.directive("uiBoxSlideItem",["$timeout","$rootScope",function(e,a){return{restrict:"C",scope:!0,link:function(t,o,n){t.$last===!0&&e(function(){a.$broadcast("BOX_SLIDE_INIT")},300)}}}]),app.directive("uiBoxSlideStatic",[function(){return{restrict:"C",scope:!0,link:function(e,a,t){function o(){return(65536*(1+Math.random())|0).toString(16).substring(1)}var n="cl_"+o();$(a).addClass(n),$(document).ready(function(){console.log("loading.. uiBoxSlide.."),e.uiBoxSlide=new Swiper("."+n,{speed:900,autoplay:8e3,mode:"horizontal",loopAdditionalSlides:1,loop:!0,initialSlide:0,autoResize:!0,onImagesReady:function(e){console.log("swiper: imageready."),$(a).find(".image-canvas").imagefill()}}),$rootScope.$on("resizestop",function(){console.log("uiBoxSlide: resizestop"),e.uiBoxSlide.resizeFix(),$(a).find(".image-canvas").imagefill()})})}}}]),app.directive("uiAlbumCanvas",["$timeout",function(e){return{restrict:"C",link:function(a,t,o){a.play_index=0,a.preview_count=0,a.play=function(){e(function(){if(!(a.preview_count<=0)){$(t).find("img").fadeOut();var e=$(t).find("img");$(e[a.play_index]).fadeIn(),console.log("play_index",a.play_index),a.play_index=a.play_index+1,a.play_index==a.preview_count&&(a.play_index=0),a.play()}},1e3)},a.onHover=function(){var e=$(t).find("img");a.preview_count=e.length,a.preview_count>1&&(console.log("scope.preview_count",a.preview_count),a.play())},a.onHoverOut=function(){a.preview_count=0}}}}]),app.directive("uiImageFill",[function(){return{restrict:"C",link:function(e,a,t){a.bind("load",function(){var e=this.height,t=$(this).parent().height(),o=this.width,n=$(this).parent().width(),i=!1;if(i=n>t,o>e)t>e&&n>o&&($(a).removeClass("max-width"),$(a).addClass("max-height")),e>t&&o>n&&($(a).removeClass("max-width"),$(a).addClass("max-height")),t>e&&($(a).removeClass("max-width"),$(a).addClass("max-height"));else{if(t>e&&n>o)return $(a).removeClass("max-height"),void $(a).addClass("max-width");if(e>t&&o>n)return void(i?($(a).removeClass("max-height"),$(a).addClass("max-width")):($(a).removeClass("max-width"),$(a).addClass("max-height")));if(n>o)return $(a).removeClass("max-height"),void $(a).addClass("max-width");if(t>e)return $(a).removeClass("max-width"),void $(a).addClass("max-height")}if(o>n){var r=(o-n)/2,s=-1*Math.floor(r);$(a).css("left",s)}$(this).removeClass("image-fade")})}}}]),app.directive("uiChangeProfilePhoto",["$rootScope","$store","$apiService","$popupService","$timeout","$http",function(e,a,t,o,n,i){return{restrict:"A",link:function(i,r,s){var c=window.URL||window.webkitURL,l=800,d=800;i.horizontal_min_pix=l,i.vertical_min_pix=d,i.dimension={};var u=function(){return!0};i.changeProfilePhoto={url:"/api/media/upload",singleFileUploads:!0,maxNumberOfFiles:1,autoUpload:!0,formData:{resize:[200,400,800]},pasteZone:null,add:function(e,a){i.profile_fileupload_error=!1,i.profile_fileupload_size_error=!1,i.profile_fileupload_error_dimension=!1,image=new Image,image.onload=function(){return i.dimension.width=this.width,i.dimension.height=this.height,u()?(a.originalFiles[0]&&a.originalFiles[0].size&&a.originalFiles[0].size>5e6?(i.profile_fileupload_size_error=!0,console.log("Upload file must be less than 4.8MB")):(i.is_upload_preview_loading=!0,a.submit()),void i.$apply()):(i.profile_fileupload_error_dimension=!0,void i.$apply())},image.src=c.createObjectURL(a.originalFiles[0]),i.$apply()},done:function(a,t){i.profilephoto={url:e.config.cdn_url+t._response.result.fsRef,fsRef:t._response.result.fsRef},i.is_upload_preview_loading=!1,i.$apply()},progress:function(e,a){i.is_upload_preview_loading=!0,i.$apply()},fail:function(e,a){i.profile_fileupload_error=!0,i.$apply(),console.log("File upload fail. Either the file is invalid or something went wrong. Please try again.",e,a)}},i.$on("resizestop",function(){if(console.log("resize stop ..uiChangeProfilePhoto"),i.profilephoto){var e=i.profilephoto.url;i.profilephoto.url="",n(function(){i.profilephoto.url=e},100)}}),$(document).off("touchstart click","#profilePhotoLink").on("touchstart click","#profilePhotoLink",function(e){e.stopPropagation(),e.preventDefault(),e.handled=!0,$("#changephoto").click()}),$(document).off("touchstart click","#uploadfile_link").on("touchstart click","#uploadfile_link",function(e){e.stopPropagation(),e.preventDefault(),e.handled=!0,i.uploadfile_link()}),i.uploadfile_link=function(){i.clearCapture(),n(function(){$("#changephoto").click()},1)},i.clearprofilephoto=function(e){i.crop_coords={},i.clearCapture(),i.is_upload_preview_loading=!1,i.profile_fileupload_error=!1,i.profile_fileupload_size_error=!1,$(".changeprofilepic-window").foundation("reveal","close")},i.crop_coords={},i.setCropCoords=function(e){i.crop_coords=e,i.$apply()},i.saveProfilePhoto=function(){return i.isCamOn?void i.saveShotPhoto():void i.cropPhoto()},i.cropPhoto=function(){if(console.log("crop"),i.crop_coords.w){var e=i.crop_coords;e.width=i.crop_coords.w,e.height=i.crop_coords.h,e.fsRef=i.profilephoto.fsRef,i.profilephoto_save_loading=!0,e.x<0&&(e.x=0),e.y<0&&(e.y=0),t.user.cropProfilePhoto(e,function(e,a){i.profilephoto_save_loading=!1;var t="";!e&&a.status.success?s.type&&"competition"==s.type?(i.application.teamprofile_photo=angular.copy(i.profilephoto),i.clearprofilephoto()):s.type&&"merchant"==s.type?(i.merchantPhoto=angular.copy(i.profilephoto),i.clearprofilephoto()):s.type&&"merchant_attach"==s.type?(i.merchantAttachPhoto=angular.copy(i.profilephoto),i.clearprofilephoto()):s.type&&"network_attach"==s.type?(i.updateNetworkImage(i.profilephoto),i.clearprofilephoto()):i.updateAccountProfilePhoto():(t="",e?t=$("#general-error-message:first").text():a.status.err&&(t=a.status.err),o.showAutoMessage(t,2e3,function(){i.clearprofilephoto()}))})}},i.updateAccountProfilePhoto=function(){var n={shortcut:e.currentUser.shortcut,id:e.currentUser.id,profilePhotoUrl:i.profilephoto.url};i.profilephoto_save_loading=!0,t.user.updateProfilePhoto(n,function(t,n){i.profilephoto_save_loading=!1;var r="";!t&&n.status.success?(angular.extend(i.userinfo,n.user),angular.extend(i.$parent.$parent.$parent.viewed_user_profile,n.user),a.setValue("currentUser",n.user),angular.extend(e.currentUser,n.user),r=$("#info-saved-successful-message:first").text(),o.showAutoMessage(r,2e3,function(){i.clearprofilephoto()})):(r="",t?r=$("#general-error-message:first").text():n.status.err&&(r=n.status.err),o.showAutoMessage(r,2e3,function(){i.clearprofilephoto()}))})},i.isCamOn=!1,i.canAccessCamera=!0;var m=$("#video_cam"),p=m[0],g=$("#cam_canvas")[0],f=null;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.oGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia?e.$watch("config",function(){e.config&&(e.config.browser.indexOf("Chrome")>-1&&!e.config.assets.enabled_ssl?i.isCameraSupported=!1:i.isCameraSupported=!0)}):i.isCameraSupported=!1,i.saveShotPhoto=function(){console.log("save shot..");var e=atob(i.profilephoto.url.split(",")[1]);console.log(i.profilephoto.url);for(var a=new ArrayBuffer(e.length),t=new Uint8Array(a),o=0;o<e.length;o++)t[o]=e.charCodeAt(o);var n=new Blob([a],{type:"image/png"}),r=new FormData;r.append("resize",[200,400,800]),r.append("files",n),i.profilephoto_save_loading=!0,$.ajax({type:"POST",url:"/api/media/upload",data:r,contentType:!1,processData:!1,success:function(e){console.log(" file is uploaded successfully "),console.log(e),i.profilephoto={url:e.link,fsRef:e.fsRef},i.cropPhoto()},error:function(){console.log(" file is uploaded FAIL "),i.profilephoto_save_loading=!1}})},i.snapshot=function(){g.width=p.videoWidth,g.height=p.videoHeight,g.getContext("2d").drawImage(p,0,0),i.profilephoto.url=g.toDataURL("image/png")},i.showCam=function(){i.clearCapture(),i.canAccessCamera=!0,navigator.getUserMedia?navigator.getUserMedia({video:!0,audio:!1},function(e){e.getVideoTracks().length>0&&(console.log("video stream ",e,e.ended),n(function(){return e.ended?void n(function(){i.canAccessCamera=!1},1):void 0},100),console.log("show cam"),i.isCamOn=!0,f=e,window.webkitURL?p.src=window.webkitURL.createObjectURL(e):void 0!==p.mozSrcObject?(p.mozSrcObject=e,p.play()):navigator.mozGetUserMedia?(p.src=e,p.play()):window.msURL?p.src=window.msURL.createObjectURL(e):window.URL?p.src=window.URL.createObjectURL(e):p.src=e)},function(e){n(function(){i.canAccessCamera=!1},1),console.log("User did not give access to the camera.",e)}):console.log("no media")},i.takeShot=function(){i.snapshot()},i.clearCapture=function(){f=null,i.profilephoto={},i.isCamOn=!1,i.canAccessCamera=!0}}}}]),app.directive("uiMediaUploadWindow",["$timeout","$rootScope","$apiService","$location","$popupService","$state",function(e,a,t,o,n,i){return{restrict:"C",link:function(r,s,c){r.mediaupload_links=[],r.mediaupload={},r.mediaupload.video_link_str="",r.upload_idctr=0,r.mediaUploadPhotoOptions={url:"/api/media/upload/multiple",maxFileSize:5e6,singleFileUploads:!1,autoUpload:!0,formData:{resize:[200,400,800]},pasteZone:null,add:function(e,a){angular.forEach(a.originalFiles,function(e,t){0===t&&(r.media_fileupload_error=!1,r.media_fileupload_size_error=!1,r.error_video_link=!1,r.is_notvideo=!1),e&&e.size&&e.size>5e6&&(r.media_fileupload_size_error=!0),t==a.originalFiles.length-1&&(r.$apply(),r.media_fileupload_size_error||(console.log(123),a.submit()))})},done:function(e,o){var n=0;angular.forEach(o.result.fsRef,function(e,i){t.articles.articleUrlCache(a.config.cdn_url+e,function(e,a){n+=1,a.info&&(r.mediaupload_links.unshift({upload_id:r.upload_idctr,type:"image",thumbnail_url:a.info.thumbnail,link_url:a.info.link_url,attachments:[a.info],description:"",tags_str:""}),r.upload_idctr=r.upload_idctr+1),n==o.result.fsRef.length&&(r.mediaupload.is_upload_preview_loading=!1)})})},progress:function(a,t){e(function(){r.mediaupload.is_upload_preview_loading=!0},1)},fail:function(e,a){r.media_fileupload_error=!0,r.mediaupload.is_upload_preview_loading=!1,r.$apply()}},r.mediauploadphoto_link=function(){$("#mediauploadphoto").click(),"mobile"==a.device&&e(function(){$("#mediauploadphoto").click()},1)},r.removeMediaUpload=function(e){r.mediaupload_links=_.without(r.mediaupload_links,_.findWhere(r.mediaupload_links,{upload_id:e}))},r.applyMediaTagsToAll=function(){var e=$("[name=album_hashtag]").val();angular.forEach(r.mediaupload_links,function(a,t){var o=$("[upload_id="+a.upload_id+"]").find("[hash-tag-input]"),n=e+","+$(o).val(),i=n.split(",");i=_.uniq(i),a.tags_str=i.join(),$(o).importTags(i.join())})},r.mediauploadvideo=function(){r.media_fileupload_error=!1,r.media_fileupload_size_error=!1,r.error_video_link=!1,r.is_notvideo=!1,r.mediaupload.video_link_str&&(r.mediaupload.is_upload_preview_loading=!0,linkstr=r.mediaupload.video_link_str,t.articles.articleUrlCache(linkstr,function(e,a){a.info&&("video"!=a.info.type?r.is_notvideo=!0:(r.mediaupload_links.unshift({upload_id:r.upload_idctr,type:"video",thumbnail_url:a.info.thumbnail,link_url:a.info.link_url,attachments:[a.info],description:"",tags_str:""}),r.upload_idctr=r.upload_idctr+1,r.show_video_field=!1,r.error_video_link=!1,r.is_notvideo=!1,r.mediaupload.video_link_str="")),a.success||(r.error_video_link=a["failure-reason"]),r.mediaupload.is_upload_preview_loading=!1}))},r.cancel_media_upload=function(){r.mediaupload.is_upload_preview_loading=!1,r.media_fileupload_error=!1,r.media_fileupload_size_error=!1,r.error_video_link=!1,r.is_notvideo=!1,r.mediaupload.video_link_str="",r.mediaupload_links=[],r.upload_idctr=0},r.save_media_upload=function(e){if(e.preventDefault(),r.mediaupload_links.length){n.blockUI("Uploading ...");var s="",c="",l=i.$current.parent.self.name||i.current.name;s=i.params.shortcut,c="network"==l?a.currentNetwork.info.media_collection_id:a.viewed_user_profile.media_collection_id,"me"==l&&a.currentUser&&(s=a.currentUser.shortcut);var d={profile_shortcut:s,profile_media_collection_id:c,medias:[]};angular.forEach(r.mediaupload_links,function(e,a){var t=$("[upload_id="+e.upload_id+"]").find("[hash-tag-input]");e.tags=[];var o=$(t).val(),n=o.split(",");e.tags_str=o,n.push(d.profile_shortcut),n=_.uniq(n),n=_.compact(n),e.tags=n,d.medias.push(e)}),t.articles.uploadMedia(d,function(e,a){if(!e){var t="";return t="network"==l?"/"+d.profile_shortcut+"/media":"/user/"+d.profile_shortcut+"/media",r.mediaupload_links=[],o.path(t),void n.close()}var i=$("#general-error-message:first").text();n.showAutoMessage(i)})}},r.$on("$stateChangeSuccess",function(a,t,o,n,i){console.log("MEDIA fromState",n.name),"network.medias"==n.name&&(console.log("force trigger!"),e(function(){console.log("upload video now.."),$("#mediauploadphoto").click()},400))})}}}]),app.directive("uiMakeCoverBox",[function(){return{restrict:"C",link:function(e,a,t){e.$first===!0?(e.custom_height="4",e.custom_width="4"):(e.custom_height="2",e.custom_width="2")}}}]),app.directive("uiDropdown",[function(){return{restrict:"C",link:function(e,a,t){$(a).foundation("dropdown")}}}]),app.directive("uiHtmlInject",["$sce",function(e){return{scope:{html_string:"@htmlString"},restrict:"C",link:function(a,t,o){console.log("uiHtmlInject"),a.trustedHtml=e.trustAsHtml(a.html_string),console.log("scope.html_string",a.html_string),console.log("trustedHtml",a.trustedHtml)}}}]),app.directive("uiAds",["$rootScope",function(e){return{restrict:"C",scope:"=",link:function(a,t,o){function n(){return(65536*(1+Math.random())|0).toString(16).substring(1)}var i=document.createElement("iframe"),r=(n()+n()+n()+n()+n()+n()).toLowerCase();i.setAttribute("frameborder","0"),i.setAttribute("scrolling","no"),i.setAttribute("height",a.tile.ads.ad_height),i.setAttribute("width",a.tile.ads.ad_width),i.id="id"+r,t[0].appendChild(i);var s=a.tile.ads.ad_script,c=i.document;if(i.contentDocument?c=i.contentDocument:i.contentWindow&&(c=i.contentWindow.document),e.currentUser){if(e.currentUser.dob_year){var l=e.currentUser.dob_year,d=new Date,u=d.getUTCFullYear(),m=u-l;s=s.replace(/age=/gi,"age="+m)}e.currentUser.gender&&(s=s.replace(/gender=/gi,"gender="+e.currentUser.gender))}s=s.replace(/INSERT_RANDOM_NUMBER_HERE/gi,r),_.isUndefined(c)||(c.open(),c.writeln(s),c.close()),i.onload=function(){$(i).contents().find("head").append($("<style type='text/css'>body{margin:0!important;}</style>"))};var p=t.parent().parent();p.removeClass("ui-masonry-item"),p.removeClass("tile-column-1"),p.removeClass("tile-column-2"),p.removeClass("tile-column-3"),p.removeClass("tile-column-4"),p.removeClass("tile-column-5"),p.removeClass("tile-column-6"),p.css("height",a.tile.ads.ad_height+"px"),p.css("width",a.tile.ads.ad_width+"px"),e.$broadcast("ON_LOADMORE_ARTICLES")}}}]),app.directive("uiAdProcessor",[function(){return{restrict:"C",link:function(e,a,t){e.adlist=[],e.$on("ON_AD_PROCESS",function(a,t){console.log("uiAdProcessor:ON_AD_PROCESS -> ",t);var o=amplify.store.sessionStorage(t);e.adlist.push(o)})}}}]),app.directive("uiFeatureBanner",["$timeout",function(e){return{restrict:"C",link:function(a,t){console.log("uiFeatureBanner!"),a.$last===!0&&e(function(){var e=8e3,t=!1;console.log(),a.tile&&"network-list"==a.tile.type?(a.tile.property.web&&a.tile.property.web.delay?e=a.tile.property.web.delay:a.tile.property.mobile&&a.tile.property.mobile.delay&&(e=a.tile.property.mobile.delay),e=1e3*e,a.tile.networks.length>1&&(t=!0)):a.tile&&"network-list"==a.tile.type&&a.tile.slides.length>1&&(t=!0),console.log("uiFeatureBanner.. last!"),a.banner=new Swiper(".swiper-container-"+a.tile.type,{speed:900,autoplay:e,mode:"horizontal",loopAdditionalSlides:1,loop:t,initialSlide:0,autoResize:!0,pagination:".swiper-pagination"}),$(window).trigger("scroll"),$(".swiper-container-"+a.tile.type).siblings(".nav-left").on("click",function(){console.log(".nav-left"),a.banner.slidePrev()}),$(".swiper-container-"+a.tile.type).siblings(".nav-right").on("click",function(){console.log(".nav-right"),a.banner.slideNext()})},200)}}}]),app.directive("uiTribeSearch",["$rootScope","$location","$state","$apiService",function(e,a,t,o){return{restrict:"C",scope:!0,link:function(e,a,t){a.bind("keydown",function(a){if(40===a.keyCode);else if(27===a.keyCode);else if(13===a.keyCode){console.log("ok cool, enter pressed");var n=e.searchKey;String(n).length<=0||void 0===n?console.log("empty search, show error message"):(o.systemSettings.list({},function(e,a){var t="",o="all";o=a&&a.metadata&&a.metadata.search_setting&&a.metadata.search_setting.default_search?a.metadata.search_setting.default_search:"tribes",t="/search/"+n+"/"+o+"/1/10",window.location=t}),e.$apply(function(){e.$eval(t.onEnter)}),a.preventDefault())}})}}}]),app.directive("uiSearch",["$rootScope","$location","$state",function(e,a,t){return{restrict:"C",scope:!0,link:function(o,n,i){var r=null;o.searchInNetwork=function(t){o.networkID=e.currentNetwork.info.id,o.networkName=e.currentNetwork.info.name;var n=o.networkID,i="/search/"+t+"/withinnetwork/"+String(n)+"/1/10";a.path(i)},o.searchCelebritiesInNetwork=function(t){o.networkID=e.currentNetwork.info.id,o.networkName=e.currentNetwork.info.name;var n=o.networkID,i="/search/"+t+"/celebrities/"+String(n)+"/1/10";
a.path(i)},o.mouseOverSearchSpan=function(e){console.log("============= mouseOverSearchSpan 3"),console.log(e),$(this).css("background-color","grey")},o.mouseLeaveSearchSpan=function(e){$(this).css("background-color","white")},o.searchAction=function(){if(""!=$.trim(o.searchKey)){var e=$.Event("keydown",{keyCode:13});n.triggerHandler(e)}};var s=$(".searchspan"),c=s.length,l=0;n.bind("keydown",function(n){var s=String(t.current.name),d=s.indexOf("network"),u=s.indexOf("withinnetwork"),m=s.indexOf("networkprofile"),p=!1;if(console.log("--->>> current init_count "),console.log(l),d>=0&&0>m&&0>u){p=!0,1>=l?$(".searchspan").css("display","inline-block"):$(".searchspan:last").css("display","inline-block");try{o.networkID=e.currentNetwork.info.id,o.networkName=e.currentNetwork.info.name,r=o.networkID}catch(g){}}else p=!1,$(".searchspan").css("display","none");if(40===n.keyCode)console.log("ths is DOWN"),2>l&&(l+=1),0==l?$(".searchspan").css("background-color","white"):1==l?$(".searchspan").first().css("background-color","grey"):($(".searchspan").css("background-color","white"),$(".searchspan:last").css("background-color","grey"));else if(27===n.keyCode)console.log("i should be selecting the to search network. "),p&&$(".searchspan").css("display","none"),l=c-1;else if(38===n.keyCode)console.log("this is UP"),l>0&&(l-=1),0==l?$(".searchspan").css("background-color","white"):1==l?($(".searchspan").css("background-color","white"),$(".searchspan").first().css("background-color","grey")):($(".searchspan").css("background-color","white"),$(".searchspan:last").css("background-color","grey"));else if(13===n.keyCode){console.log("ok cool, enter pressed"),$(".searchspan").css("background-color","white");var f=o.searchKey;if(String(f).length<=0||void 0===f)console.log("empty search, show error message"),$(".txtsearch").css("border","1px solid red"),$(".txtsearch").attr("placeholder","Search cannot be empty");else{var h=($(".searchspan").css("background-color"),"");if(0==l){if($(".searchspan").hide(),"#"==f.charAt(0)){var _=f.substring(1);h="/search/"+_+"/tags/1/10"}else h="/search/"+f+"/all/1/10";showErrorSpan=!1,$(".txtsearch").css("border","1px solid #999999")}else 1==l?($(".searchspan").hide(),h="/search/"+f+"/withinnetwork/"+String(r)+"/1/10",o.searchKey="",showErrorSpan=!1,$(".txtsearch").css("border","1px solid #999999")):($(".searchspan").hide(),h="/search/"+f+"/celebrities/"+String(r)+"/1/10",o.searchKey="",showErrorSpan=!1,$(".txtsearch").css("border","1px solid #999999"));l=0,$(".searchspan").css("background-color","white"),a.path(h),o.$apply(function(){o.$eval(i.onEnter)}),n.preventDefault()}}})}}}]),app.directive("uiQuickSearch",["$location","$apiService",function(e,a){return{restrict:"C",replace:!1,link:function(t,o,n){var i=e.$$path.split("/")[2];t.searchKey=i,t.redirect=function(e){e.length>=0},t.onSubmitSearch=function(){searchKey.length>=0&&t.tribeSearch()},o.bind("keydown",function(e){13==e.keyCode&&t.tribeSearch()}),t.tribeSearch=function(){var o=t.searchKey;a.systemSettings.list({},function(a,t){var n="",i="all";n="/search/"+o+"/"+i+"/0/10",e.path(n)}),t.$apply(function(){t.$eval(n.onEnter)}),event.preventDefault()}}}}]),app.directive("uiQuickSearchInit",["$location","$apiService","$timeout",function(e,a,t){return{restrict:"C",replace:!1,link:function(e,t,o){e.searchKey="",e.redirect=function(e){e.length>=0},e.onSubmitSearch=function(){searchKey.length>=0&&e.tribeSearch()},t.bind("keydown",function(a){console.log("keydown",a.keyCode),13==a.keyCode&&e.tribeSearch()}),e.tribeSearch=function(){var t=e.searchKey;a.systemSettings.list({},function(e,a){var o="",n="all";o="/search/"+t+"/"+n+"/0/10",window.location=o}),e.$apply(function(){e.$eval(o.onEnter)}),event.preventDefault()}}}}]),app.directive("uiSticko",[function(){return{restrict:"C",replace:!1,link:function(e,a,t){console.log("uiSticko"),$(a).stick_in_parent()}}}]),app.directive("uiPortaitBox",[function(){return{restrict:"C",replace:!1,scope:"=",link:function(e,a,t){e.window=$(window);try{e.tile.post.previewAttachment&&e.tile.post.previewAttachment.metadata&&e.tile.post.previewAttachment.metadata["img:height"]&&e.tile.post.previewAttachment.metadata["img:width"]&&e.$on(a,function(){})}catch(o){}}}}]),app.directive("uiProfilePictureCropper",[function(){return{restrict:"C",scope:{imgurl:"=",cropratio:"="},link:function(e,a,t){var o=!1,n=1;a.bind("$destroy",function(){o&&o.destroy()}),e.uploader_id=a.attr("id"),e.$watch("imgurl",function(){e.imgurl&&(a.attr("src",""),o&&(o.destroy(),$(a).removeAttr("style")),e.imgurl&&e.imgurl.length>0&&a.attr("src",e.imgurl))}),e.$watch("cropratio",function(){return e.cropratio?void(n=e.cropratio):void(n=1)}),$(a).on("load",function(){var t={boxWidth:a.parent().width(),boxHeight:400,onSelect:function(t){t.x<0&&(t.x=0),t.y<0&&(t.y=0);var o=Math.floor(a.width()),n=Math.floor(a.height());t.x2>o&&(t.x2=o,t.w=t.x2-t.x),t.y2>n&&(t.y2=n,t.h=t.y2-t.y),e.$parent.setCropCoords(t)},onRelease:function(){console.log("RELEASED"),e.$parent.setCropCoords({})}};t.aspectRatio=n,t.minSize=[100,100],$(a).Jcrop(t,function(){o=this})})}}}]),app.directive("hashTagInput",["$rootScope",function(e){return{restrict:"A",scope:{tagHeight:"@tagHeight"},link:function(a,t,o){var n="default";(e.currentUser&&e.currentUser.display_language&&("zh-CN"==e.currentUser.display_language||"zh"==e.currentUser.display_language||"zh-TW"==e.currentUser.display_language)||!e.currentUser&&e.config&&e.config.browserDefaultLang&&("zh-CN"==e.config.browserDefaultLang||"zh"==e.config.browserDefaultLang||"zh-TW"==e.config.browserDefaultLang))&&(n="zh"),"zh"==n?$(t).tagsInput({height:a.tagHeight+"px",width:"100%",defaultText:"标签"}):$(t).tagsInput({height:a.tagHeight+"px",width:"100%"})}}}]),app.directive("uiTagCloud",["$timeout","$rootScope","$state",function(e,a,t){return{restrict:"C",link:function(o,n,i){o.viewAllButton=!0,"network.medias"!=t.current.name&&"user.user_media"!=t.current.name&&"me.user_media"!=t.current.name||(o.viewAllButton=!1),o.tagInit=function(){console.log("attr",i.startColor);var e="888782",o="49473b";i.startColor&&(e=i.startColor),i.endColor&&(o=i.endColor),"network.medias"==t.current.name?a.currentNetwork.info.metadata&&a.currentNetwork.info.metadata.mediahashtagcolor&&(e=a.currentNetwork.info.metadata.mediahashtagcolor.start,o=a.currentNetwork.info.metadata.mediahashtagcolor.end):a.viewed_user_profile&&a.viewed_user_profile.metadata&&a.viewed_user_profile.metadata.mediahashtagcolor&&(e=a.viewed_user_profile.metadata.mediahashtagcolor.start,o=a.viewed_user_profile.metadata.mediahashtagcolor.end),console.log("tag cloud."),e="#"+e,o="#"+o,$.fn.tagcloud.defaults={size:{start:14,end:24,unit:"px"},color:{start:e,end:o}},$(".ui-tag-cloud .tag a").tagcloud(),$(".tag-container").show()},o.$watch(n,function(a){e(function(){o.tagInit()},400)}),o.$on("ON_TAG_REFRESH",function(){o.tagInit()})}}}]),app.directive("uiUserTopBar",["$rootScope",function(e){return{restrict:"C",link:function(a,t,o){a.open_messages=function(){e.$broadcast("OPEN_MESSAGES")},$("#invitefriendswindow").data("reveal-init",{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,close_on_esc:!1,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",bg:$(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}}),a.open_invite_friends=function(){console.log("open_invite_friends"),$("#invitefriendswindow").foundation("reveal","open"),$("#invitefriendswindow").bind("opened",function(){$(this).css("padding","0px"),$(this).find(".close-reveal-modal").css("background-color","transparent")})}}}}]),app.directive("uiCheckPromotedNetwork",["$rootScope",function(e){return{restrict:"C",link:function(a,t,o){console.log("uiCheckPromotedNetwork"),e.gotPromotedNetwork=!0}}}]),app.directive("uiCountry",["$rootScope",function(e){return{restrict:"C",link:function(a,t,o){o.$observe("ccode",function(t){var o=t,n="",i=country_list_english;(e.currentUser&&e.currentUser.display_language&&("zh-CN"==e.currentUser.display_language||"zh"==e.currentUser.display_language||"zh-TW"==e.currentUser.display_language)||!e.currentUser&&e.config&&e.config.browserDefaultLang&&("zh-CN"==e.config.browserDefaultLang||"zh"==e.config.browserDefaultLang||"zh-TW"==e.config.browserDefaultLang))&&(i=country_list_chinese),$(i).each(function(e,a){a.code==o&&(n=a.display)}),a.countryname=n})}}}]),app.directive("uiImageResize",["$rootScope",function(e){return{restrict:"C",link:function(a,t,o){a.resize=function(a,t){a.indexOf(e.config.cdn_url);if(-1!=a.indexOf(e.config.cdn_url)){var o=a.indexOf("gif");-1==o&&(a=a+"_"+t)}return a}}}}]),app.directive("uiSocialShare",["$location",function(e){return{restrict:"C",link:function(a,t,o){console.log(a),console.log(e);var n=e.$$protocol,i=e.$$host,r=e.$$path,s=r.split("/");console.log(s.length),s.length>=4&&(s.pop(),r=s.join(),console.log(" so in the if..... "),console.log(r),r=r.replace(/,/g,"/")),a.currentLocation=n+"://"+i+r+"/",a.noncoded_currentLocation=n+"://"+i+r+"/",a.currentLocation=encodeURIComponent(a.currentLocation)}}}]),app.directive("uiSocialShareHeader",["$location",function(e){return{restrict:"C",link:function(a,t,o){console.log(a),console.log(e);var n=e.$$absUrl,i=n.split("/");console.log(i.length),a.currentLocation=n,a.noncoded_currentLocation=n,a.currentLocation=encodeURIComponent(a.currentLocation),a.networkName=a["this"].hometext+"is on Yuuzoo"}}}]),app.directive("uiGaNetworklevel",[function(){return{restrict:"C",scope:{uaTrackingcode:"="},replace:!0,link:function(e,a,t){e.$watch("uaTrackingcode",function(e,a){console.log("uaTrackingcode......",e,a),e&&e!=a&&(window.ga?window.ga.getByName("yzgatracker2")||(ga("create",e,"auto",{name:"yzgatracker2",siteSpeedSampleRate:100}),ga("yzgatracker2.require","ecommerce","ecommerce.js"),ga("yzgatracker2.require","displayfeatures"),ga("yzgatracker2.send","pageview",window.location.pathname)):window._gaq&&(window._gaq._getTrackerByName("yzgatracker2")||(window._gaq._createTracker(e,"yzgatracker2"),window._gaq.push(["yzgatracker2._trackPageview",window.location.pathname]))))})}}}]),app.directive("uiPiwikNetworklevel",[function(){return{restrict:"C",scope:{uaTrackingcode:"="},replace:!0,link:function(e,a,t){e.$watch("uaTrackingcode",function(e,a){console.log("uaTrackingcode......",e,a),e&&(window.PiwikTrackers||(window.PiwikTrackers=[]),window.PiwikTrackers.push({piwikserver:"http://webloganalyzer.yuuinfra.net/piwik.php",siteid:e}))})}}}]),app.directive("isFeatureEnabled",[function(){return{restrict:"A",replace:!1,transclude:!1,link:function(e,a,t){t.isFeatureEnabled,t.ngIf;t.$set("ng-if",!1)}}}]),app.directive("uiImageFiller",["$timeout",function(e){return{restrict:"C",link:function(a,t,o){e(function(){$(t).imagefill(),a.$on("resizestop",function(){$(t).imagefill()})},300),$("img").error(function(){$(this).css({opacity:"0.0",height:"300px"})})}}}]),app.directive("uiImageLoaded",["$timeout",function(e){return{restrict:"C",link:function(e,a,t){imagesLoaded(a,function(){e.$broadcast("SCROLLER_INIT")})}}}]),app.directive("uiImageFiller2",["$timeout",function(e){return{restrict:"C",link:function(a,t,o){e(function(){$(t).imagefill(),a.$on("resizestop",function(){$(t).imagefill()})},300),$("img").error(function(){$(this).css({opacity:"0.0"})})}}}]),app.directive("uiPurchaseSuccess",["$store","$apiService",function(e,a){return{restrict:"C",link:function(t,o,n){var i=e.getValue("shortCut");a.user.purchaseSuccess(i,function(e,a){console.log("do nothing, just ping the backend")}),e.deleteValue("shortCut")}}}]),app.directive("ngEnter",[function(){return{restrict:"C, A",link:function(e,a,t){a.bind("keydown keypress",function(a){13===a.which&&(e.$apply(function(){e.$eval(t.ngEnter)}),a.preventDefault())})}}}]),app.directive("uiTextFlex",[function(){return{restrict:"C",link:function(e,a,t){var o=$(a).get(0);o.addEventListener("keyup",function(){this.style.overflow="hidden",this.style.height=0,this.style.height=this.scrollHeight+"px"},!1)}}}]),app.directive("ngCalcHeight",[function(){return{restrict:"C",scope:{percent:"@percent",deduct:"@deduct",isHeight:"@isheight"},link:function(e,a,t){e.init=function(){_.isUndefined(e.deduct)&&(e.deduct=0),_.isUndefined(e.isHeight)&&(e.isHeight=!1);var t=Math.max(document.documentElement.clientHeight,window.innerHeight||0),o=e.percent/100*t;o-=e.deduct,e.isHeight===!1?$(a).css("min-height",o):$(a).css("height",o)},e.init(),e.$on("resizestop",function(){e.init()})}}}]),app.directive("ngDeductHeight",["$timeout",function(e){return{restrict:"C",scope:{deduct:"@deduct",blocktarget:"@blocktarget"},link:function(a,t,o){a.init=function(){if(_.isUndefined(a.deduct)&&(a.deduct=0),_.isUndefined(a.blocktarget))console.log("blocktarget");else{var o=$(a.blocktarget).height();a.deduct=o,console.log("blockage height =>",o)}e(function(){var e=$(t).parent().height();e-=a.deduct,$(t).css("height",e)},300)},Pace.on("done",function(){a.init()}),a.$on("resizestop",function(){a.init()}),a.$on("INIT_HEIGHT",function(){a.init()})}}}]),app.directive("ngVerticalMid",["$timeout",function(e){return{restrict:"C",link:function(a,t,o){a.init=function(){_.isUndefined(a.deduct)&&(a.deduct=0),e(function(){$(t).css("height",$(t).parent().height())},100)},Pace.on("done",function(){a.init()}),a.$on("resizestop",function(){a.init()})}}}]),app.directive("ngCalcBox",[function(){return{restrict:"C",scope:{deduct:"@deduct"},link:function(e,a,t){e.init=function(){_.isUndefined(e.deduct)&&(e.deduct=0);var t=$(a).width(),o=t;o-=e.deduct,$(a).css("height",o)},e.init(),e.$on("resizestop",function(){e.init()})}}}]),app.directive("ngCalcBoxH",[function(){return{restrict:"C",scope:{deduct:"@deduct"},link:function(e,a,t){e.init=function(){_.isUndefined(e.deduct)&&(e.deduct=0);var t=$(a).height(),o=t;o-=e.deduct,$(a).css("width",o),$(a).css("height",o)},e.init(),e.$on("resizestop",function(){e.init()})}}}]),app.directive("ngWrapHeight",[function(){return{restrict:"C",scope:{percent:"@percent",deduct:"@deduct"},link:function(e,a,t){e.init=function(){console.log("ngWrapHeight"),_.isUndefined(e.deduct)&&(e.deduct=0);var t=$(a).parent.height-e.deduct;$(a).css("height",t)},e.init(),e.$on("resizestop",function(){e.init()})}}}]),app.directive("ngColumnEqual",["$timeout",function(e){return{restrict:"C",scope:{},link:function(a,t,o){a.init=function(){console.log("ngColumnEqual"),e(function(){var e=$(t).height();$(t).find(".columns").css("height",e)},300)},a.init(),a.$on("resizestop",function(){a.init()}),a.$on("COLUMN_EQUAL",function(){a.init()})}}}]),app.directive("uiRefreshResize",["$state",function(e){return{restrict:"C",link:function(a,t,o){$(window).on("resizestop",function(){console.log("uiRefreshResize"),e.go(e.$current,null,{reload:!0})})}}}]),app.directive("ngHeightInherit",["$timeout",function(e){return{restrict:"C",scope:{deduct:"@deduct"},link:function(a,t,o){a.init=function(){_.isUndefined(a.deduct)&&(a.deduct=0);var e=$(t).parent().innerHeight(),o=e-a.deduct;$(t).css("height",o)},a.init(),a.$on("resizestop",function(){$(t).css("height","auto"),e(function(){a.init()},10)})}}}]),app.directive("ngFitMe",[function(){return{restrict:"C",link:function(e,a,t){e.init=function(){_.isUndefined(e.deduct)&&(e.deduct=0);var t=$(a).parent().innerHeight(),o=$(a).parent().innerHeight();$(a).css("height",t),$(a).css("width",o)},e.init(),e.$on("resizestop",function(){e.init()})}}}]),app.directive("ngWidthInherit",[function(){return{restrict:"C",scope:{deduct:"@deduct"},link:function(e,a,t){e.init=function(){_.isUndefined(e.deduct)&&(e.deduct=0);var t=$(a).parent().innerWidth(),o=t-e.deduct;$(a).css("width",o)},e.init(),e.$on("resizestop",function(){e.init()})}}}]),app.directive("ngInheritBrowserHeight",[function(){return{restrict:"C",scope:{deduct:"@deduct"},link:function(e,a,t){e.init=function(){_.isUndefined(e.deduct)&&(e.deduct=0);var t=window.innerHeight;console.log("h=>",t);var o=t-e.deduct;$(a).css("height",o)},e.init(),e.$on("resizestop",function(){e.init()})}}}]),app.directive("ngGetVportHeight",[function(){return{restrict:"C",link:function(e,a,t){e.init=function(){var e=0;t.deduct&&(e=t.deduct),oHeight=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-e,$(a).css("height",oHeight)},e.init(),e.$on("resizestop",function(){e.init()})}}}]),app.directive("ngGetVportMinHeight",[function(){return{restrict:"C",link:function(e,a,t){e.init=function(){var e=0;t.deduct&&(e=t.deduct),oHeight=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-e,$(a).css("min-height",oHeight)},e.init(),e.$on("resizestop",function(){e.init()})}}}]),app.directive("uiDatePicker",[function(){return{restrict:"C",scope:{blockdays:"@blockdays",blankstart:"@blankstart"},link:function(e,a,t){var o=new Date,n=0,i=parseInt(e.blockdays);isNaN(i)||(n=i),o.setDate(o.getDate()+n);var r=moment(o),s=r.format("DD/MM/YYYY");"true"!=e.blankstart&&$(a).val(s),$(a).fdatepicker({format:"dd/mm/yyyy",onRender:function(e){if(!isNaN(i)){var a=new Date(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0,0);return e.valueOf()<a.valueOf()?"disabled":""}}}).on("changeDate",function(e){console.log("changeDate : ",e);var t=new Date(e.date),o=moment(t).format("DD/MM/YYYY");$(a).val(o),$(a).text(o),console.log("$(element).val : ",$(a).val())})}}}]),app.directive("columnSticky",[function(){return{restrict:"C",scope:{top_spacing:"@topgap"},link:function(e,a,t){e.init=function(){var t=$(a).parent().innerWidth();$(a).css("width",t),$(document).ready(function(){$(a).sticky({topSpacing:e.top_spacing})})},e.init(),e.$on("resizestop",function(){e.init()})}}}]),app.directive("uiUserCard",[function(){return{restrict:"C",scope:{network:"@network"},link:function(e,a,t){}}}]),app.directive("uiSocialAction",["$apiService","$state","$rootScope","$popupService","$analytics",function(e,a,t,o,n){return{restrict:"C",replace:!0,link:function(o,i,r){o.reporthis=function(){o.box_report=!0},o.box_delete=!1,o.box_report=!1,o.singleArticle={isDraft:!1,actions:{fa_trash_o:{loading:!1},fa_trash_o_comment:[]}},"network.guides.draft"!=a.current.name&&"network.documents.draft"!=a.current.name&&"network.guide-draft-article"!=a.current.name&&"network.documents-draft-article"!=a.current.name||(o.singleArticle.isDraft=!0),"network.downloads-article"==a.current.name?o.singleArticle.currentPage="DOWNLOADS":"network.wall-article"==a.current.name?o.singleArticle.currentPage="WALL":"network.guides-article"==a.current.name?o.singleArticle.currentPage="GUIDES":"network.documents-article"==a.current.name?o.singleArticle.currentPage="DOCUMENTS":"network.media-article"==a.current.name||"medias-upload"==a.current.name?o.singleArticle.currentPage="MEDIA":"network.followers"==a.current.name&&(o.singleArticle.currentPage="FOLLOWERS"),o.total_like_count=0,o.total_dislike_count=0,o.total_fav_count=0,o.verb_like="Like",o.verb_dislike="Dislike",o.verb_fav="Fav",o.tile.post.privateData&&(o.tile.post.privateData.isDisliked===!0&&(o.verb_dislike="Disliked"),o.tile.post.privateData.isLiked===!0&&(o.verb_like="Liked"),o.tile.post.privateData.isFavourited===!0&&(o.verb_fav="Faved")),o.SocialActionRemoveArticle=function(){o.box_delete=!0,console.log("SocialActionRemoveArticle   ",o.box_delete)},o.SocialActionRemoveArticleAction=function(i){if(!o.singleArticle.actions.fa_trash_o.loading){o.singleArticle.actions.fa_trash_o.loading=!0;var r=o.tile.post.article_id;o.tile.post.shadow_article_id&&(r=o.tile.post.shadow_article_id),"blog"==i?e.articles.updateGuideArticlesDownloads(r,i,"remove",!1,!1,!1,!1,!1,o.singleArticle.isDraft,!1,0,0,function(e,t){if(!e&&t.status.success){n.eventTrack("Delete an article",{category:"actions",label:"Just deleted an article, "+r});({post:{article_id:o.tile.post.article_id},is_deleted_article:!0});o.singleArticle.actions.fa_trash_o.loading=!1,console.log("--->>> delete now....."),console.log(a.$current.locals.globals.$stateParams.shortcut),$location.path("/"+a.$current.locals.globals.$stateParams.shortcut)}}):"network.wallschedule"==a.current.name?e.articles.removeScheduleArticle(t.currentNetwork.info.shortcut,r,function(e,a){if(!e&&a.status.success){t.$broadcast("resizestop"),n.eventTrack("Delete an article",{category:"actions",label:"Just deleted an article, "+r});var i={post:{article_id:o.tile.post.article_id},is_deleted_article:!0};o.$emit("UPDATE_ARTICLE",i),o.singleArticle.actions.fa_trash_o.loading=!1}0==a.status.success&&(o.tile.schedule_que=!0)}):e.articles.updateGuideArticlesDownloads(r,i,"remove",!1,!1,!1,!1,!1,o.singleArticle.isDraft,!1,0,0,function(e,a){if(!e&&a.status.success){t.$broadcast("resizestop"),n.eventTrack("Delete an article",{category:"actions",label:"Just deleted an article, "+r});var i={post:{article_id:o.tile.post.article_id},is_deleted_article:!0};o.$emit("UPDATE_ARTICLE",i),o.singleArticle.actions.fa_trash_o.loading=!1}})}},o.onSocialActionOpenCreateNetworkArticlesWindow=function(){return"network.wall"==a.current.name||"network.wall-article"==a.current.name?void t.$emit("ON_ARTICLE_POST_EDIT",o.tile):(t.$emit("ON_CREATENETWORK_ARTICLES_EDIT",o.tile),$(".create-network-articles").data("reveal-init",{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,close_on_esc:!1,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",bg:$(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}}),void $(".create-network-articles").foundation("reveal","open"))},o.GlobalPing=function(i,r,s,c){if(console.log("GlobalPing"),!t.showFollowMessage()&&o.currentUser){if(o.tile.post.privateData&&null!==o.tile.post.privateData||(o.tile.post.privateData={}),"fav_unfav"==i&&(i=o.tile.post.privateData&&o.tile.post.privateData.isFavourited?"unfavourite":"favourite"),("like"==i||"dislike"==i)&&o.tile.post.privateData&&(o.tile.post.privateData.isLiked||o.tile.post.privateData.isDisliked)){if("like"==i&&!o.tile.post.privateData.isLiked||"dislike"==i&&!o.tile.post.privateData.isDisliked)return;var l=i;return"like"==i?(l="undolike",o.tile.post.like_count-=1,o.tile.post.privateData&&(o.tile.post.privateData.isLiked=!1)):"dislike"==i&&(l="undodislike",o.tile.post.dislike_count-=1,o.tile.post.privateData&&(o.tile.post.privateData.isDisliked=!1)),void e.articles.articleAction(a.params.shortcut,o.tile.post.article_id,l,function(e,a){a.status.success?"like"==i?n.eventTrack("Undo liked post",{category:"actions",label:"Just undo liked post, "+o.tile.post.article_id}):"dislike"==i&&n.eventTrack("Undo disliked post",{category:"actions",label:"Just undo disliked post, "+o.tile.post.article_id}):"like"==i?(o.tile.post.like_count+=1,o.tile.post.privateData&&(o.tile.post.privateData.isLiked=!0)):"dislike"==i&&(o.tile.post.dislike_count+=1,o.tile.post.privateData&&(o.tile.post.privateData.isDisliked=!0))})}"like"==i?(o.tile.post.like_count+=1,o.tile.post.privateData&&(o.tile.post.privateData.isLiked=!0)):"dislike"==i?(o.tile.post.dislike_count+=1,o.tile.post.privateData&&(o.tile.post.privateData.isDisliked=!0)):"favourite"==i||"unfavourite"==i?("favourite"==i?o.tile.post.favourite_count+=1:"unfavourite"==i&&(o.tile.post.favourite_count-=1),o.tile.post.privateData.isFavourited=!o.tile.post.privateData.isFavourited):"report"==i&&(console.log("post reported.."),o.tile.post.privateData.isReported=!0),e.articles.articleAction(a.params.shortcut,o.tile.post.article_id,i,function(e,a){a.status.success?(console.log("articlAction.status.success"),t.followNetworkFromAction(o.tile.post.collection.owned_by_network),"like"==i?n.eventTrack("Like a post",{category:"actions",label:"Just liked a post, "+o.tile.post.article_id}):"dislike"==i?n.eventTrack("Dislike a post",{category:"actions",label:"Just disliked a post, "+o.tile.post.article_id}):"favourite"==i?n.eventTrack("Favourite a post",{category:"actions",label:"Just favourited a post, "+o.tile.post.article_id}):"unfavourite"==i?n.eventTrack("Unfavourite a post",{category:"actions",label:"Just unfavourited a post, "+o.tile.post.article_id}):"report"==i&&(console.log("scope.tile.post..",o.tile),t.$broadcast("resizestop"),n.eventTrack("Report a post",{category:"actions",label:"Just Reported a post, "+o.tile.post.article_id}))):"like"==i?(o.tile.post.like_count-=1,o.tile.post.privateData&&(o.tile.post.privateData.isLiked=!1)):"dislike"==i?(o.tile.post.dislike_count-=1,o.tile.post.privateData&&(o.tile.post.privateData.isDisliked=!1)):"favourite"==i||"unfavourite"==i?("favourite"==i?o.tile.post.favourite_count-=1:"unfavourite"==i&&(o.tile.post.favourite_count+=1),o.tile.post.privateData.isFavourited=!o.tile.post.privateData.isFavourited):"report"==i&&(o.tile.post.privateData.isReported=!0)})}},o.makePostSticky=function(){if(o.singleArticle.actions.fa_magnet||(o.singleArticle.actions.fa_magnet={}),!o.singleArticle.actions.fa_magnet.loading){o.singleArticle.actions.fa_magnet.loading=!0;var n="stick";o.tile.post.isStickyPost&&(n="unstick"),e.articles.articleAction(a.params.shortcut,o.tile.post.article_id,n,function(e,a){if(!e&&a.status.success){o.tile.post.isStickyPost=!o.tile.post.isStickyPost;var i=angular.copy(o.tile);i.new_article=!0,"stick"==n?(i.post.isStickyPost=!0,t.currentNetwork.stickyTiles&&t.currentNetwork.stickyTiles.unshift(i),t.currentNetwork.tiles&&t.currentNetwork.tiles.length&&(t.currentNetwork.tiles=_.reject(t.currentNetwork.tiles,function(e){return!(!e.post||e.post.article_id!=i.post.article_id)}))):(i.post.isStickyPost=!1,i.new_article=!1,t.currentNetwork.stickyTiles&&t.currentNetwork.stickyTiles.length&&(t.currentNetwork.stickyTiles=_.reject(t.currentNetwork.stickyTiles,function(e){return!(!e.post||e.post.article_id!=i.post.article_id)})),t.currentNetwork.tiles&&t.currentNetwork.tiles.unshift(i)),t.$broadcast("ON_LOADMORE_ARTICLES")}o.singleArticle.actions.fa_magnet.loading=!1})}},t.ActionDisabled=!1,o.Liked=!1,o.Disliked=!1;var s=a.current.name.indexOf("event");o.isEvent=!1,s>-1&&(o.isEvent=!0),o.globalPingArticle=function(e,a,n,i){t.showFollowMessage()||t.ActionDisabled===!0&&"favourite"!=e||"like"==e&&(o.Disliked=!0,t.ActionDisabled=!0,o.tile.post.privateData?o.tile.post.privateData.isLiked===!0?o.Liked=!0:o.Liked===!0||(o.tile.post.like_count=o.tile.post.like_count+1,o.verb_like="Liked",o.Liked=!0):(o.tile.post.like_count=o.tile.post.like_count+1,o.verb_like="Liked",o.Liked=!0))}}}}]),app.directive("uiNetworkPoll",["$apiService","$state",function(e,a){return{restrict:"C",scope:!0,link:function(t,o,n){t.statename=a.current.name,console.log("current statename:",a.current.name),t.tile.user_vote="",t.tile.vote_submitted=!1,t.tile.vote_loading=!1,t.pollSubmit=function(){t.tile.poll_error="",t.tile.vote_loading=!0,e.network.submitPoll(t.tile.poll.id,t.tile.user_vote,function(e,a){t.tile.vote_loading=!1,t.tile.vote_submitted=!0,!e&&a.status.success?a.poll&&a.poll.id&&angular.extend(t.tile.poll,a.poll):e||a.status.success?t.tile.vote_submitted=!1:t.tile.poll_error=a.status.err})}}}}]),app.directive("uiFrameBox",["$rootScope",function(e){return{restrict:"C",link:function(a,t,o){0===e.myframebox.length&&(console.log("resetting pattern..."),e.myframebox=[{w:70,h:40},{w:30,h:40},{w:20,h:30},{w:40,h:30},{w:20,h:30},{w:20,h:30},{w:30,h:40},{w:30,h:40},{w:40,h:40},{w:50,h:40},{w:50,h:40},{w:20,h:30},{w:40,h:30},{w:40,h:30}],console.log("myframebox...",e.myframebox));var n=e.myframebox.shift();if(null===n)return!1;a.frameWidth=n.w;var i=Math.max(document.documentElement.clientHeight,window.innerHeight||0),r=n.h/100*i;$(t).css("min-height",r)}}}]),app.directive("uiImageRatioCheck",["$timeout","$rootScope",function(e,a){return{restrict:"C",link:function(a,t,o){imagesLoaded(t,function(){e(function(){console.log("uiImageRatioCheck"),a.validateImageRatio()},300)}),a.validateImageRatio=function(){$(t).removeClass("expand-me"),$(t).removeClass("expand-me-height"),$(t).removeClass("center-horizontal"),$(t).addClass("visible"),$(t).height()>$(t).width()?($(t).addClass("expand-me"),$(t).show()):($(t).addClass("expand-me"),$(t).addClass("center-vertical"),$(t).show())},a.$on("VALIDATE_IMAGE_RATIO",function(){a.validateImageRatio()})}}}]),app.directive("uiCounter",["$timeout","$rootScope",function(e,a){return{restrict:"C",scope:{value:"@value"},link:function(t,o,n){Pace.once("done",function(){e(function(){console.log("currentuser",a.currentUser);var e={useEasing:!0,useGrouping:!0,separator:",",decimal:"."};t.counter=new countUp($(o).attr("id"),.01,t.value,2,2,e),t.counter.start()},300)}),t.$on("REFRESH_COUNTER",function(){e(function(){newVal=n.value;var e={useEasing:!0,useGrouping:!0,separator:",",decimal:"."};t.counter=new countUp($(o).attr("id"),.01,newVal,2,2,e),t.counter.start()},300)})}}}]),app.directive("uiFitText",["$timeout",function(e){return{restrict:"C",link:function(a,t,o){a.init=function(){e(function(){$(t).flowtype({fontRatio:21})},1400)},a.init(),a.$on("resizestop",function(){a.init()})}}}]),app.directive("uiShowMobileApp",["$rootScope",function(e){return{restrict:"C",link:function(e,a,t){e.showMobile=!1}}}]),app.directive("uiPushFooter",["$rootScope",function(e){return{restrict:"C",link:function(e,a,t){var o=$(window).height(),n=$(".footer-bar").height(),i=$(".footer-bar").position().top+n;o>i&&o>800&&$(".footer-bar").css("margin-top",10+(o-i)+"px")}}}]),app.directive("uiProductTile",["$rootScope","$timeout",function(e,a){return{restrict:"C",link:function(t,o,n){console.log("uiProductTile...  images.",t.tile.post.product);var i=0,r=[],s=[];e.currentNetwork&&e.currentNetwork.info&&(t.network_shortcut=e.currentNetwork.info.shortcut),t.tile.post.product.image_attachments&&angular.forEach(t.tile.post.product.image_attachments["en-US"],function(e,a){s.push(e),i+=1,i>=3&&(i=0,r.push(s),s=[])}),0!=s.length&&(r.push(s),s=[]),t.onAnimate=!0,t.tile.post.product.gallery=r,console.log("gallery.. ",r),t.mainPhotoUrl=t.tile.post.product.product_image["en-US"],t.resetPhoto=function(){t.mainPhotoUrl=t.tile.post.product.product_image["en-US"]},t.changePhoto=function(e){t.mainPhotoUrl=e},t.gallery_index=0,t.gallery_next=function(){t.gallery_index=t.gallery_index+1,t.gallery_index>t.tile.post.product.gallery.length-1&&(t.gallery_index=0),t.onAnimate()},t.gallery_prev=function(){t.gallery_index=t.gallery_index-1,t.gallery_index<0&&(t.gallery_index=t.tile.post.product.gallery.length-1),t.onAnimate()},t.onAnimate=function(){t.onAnimate=!1,a(function(){t.onAnimate=!0},400)},t.onAnimate()}}}]),app.directive("ecommerceAction",["$rootScope","$apiService","$popupService","$window",function(e,a,t,o){return{restrict:"CA",link:function(a,t,n){if(e.currentUser&&e.currentNetwork){var i=function(a){o.open("/"+e.currentNetwork.info.shortcut+"?openpage")};t.bind("click",i)}}}}]),app.directive("uiSlider",["$timeout",function(e){return{restrict:"EA",require:"ngModel",scope:{min:"@",max:"@",start:"@",step:"@",margin:"@",limit:"@",connect:"@",direction:"@",orientation:"@",behaviour:"@",animate:"@",snap:"@",ngModel:"=",ngModelRange:"="},link:function(a,t,o,n){console.log("uiSlider------"),$(t).noUiSlider({start:a.start,step:a.step,margin:a.step,connect:a.connect,direction:a.direction,orientation:a.orientation,snap:a.snap,limit:a.limit,animate:a.animate,behaviour:a.behaviour,format:wNumb({mark:",",decimals:1}),range:{min:parseInt(a.min),max:parseInt(a.max)}}),a.$watch("ngModel",function(e){e||$(t).val(0)}),$(t).Link("lower").to(function(a){e(function(){var e=a;if(Array.isArray(a)&&(e=a[0]),-1!=a.indexOf(",")){var t=a.split(",");e=t[0]}n.$setViewValue(e)})})}}}]),app.directive("uiYuupayPayments",["$rootScope","$timeout","$store","$apiService","$state","$location","$sce",function(e,a,t,o,n,i,r){return{restrict:"C",link:function(a,t,i){console.log(n),console.log(e),a.rootObj=e,a.token=n.params.token_id,a.invoiceId=n.params.invoice_id,a.actionUrl=r.trustAsResourceUrl((1==e.config.assets.enabled_ssl&&""!=e.config.assets.base_url?"http:":"")+e.config.assets.base_url+e.config.payment_settings.yuupay.return_url+a.invoiceId),console.log("------>>>> uiYuupayPayments"),o.virtualcurrency.getInvoicesDetails({uuid:a.invoiceId},function(e,t){
console.log(" uiYuupayPayments invoice detail :"+t.invoice.total_amount),a.total=t.invoice.total_amount}),a.getTrustedFormAction=function(e){return e?r.trustAsUrl(e):""}}}}]),app.directive("uiZooCashMenu",["$rootScope","$timeout","$store","$state","$location","$timeout",function(e,a,t,o,n,a){return{link:function(t,i,r){i.on("click",function(t){t.preventDefault();var r=i.attr("url"),s=r.split("/"),c=s[s.length-1];"me.zoocashtopup"==o.current.name?(e.selectZooCashPkg=_.find(e.zooCashPkgList,function(e){return e.package_uuid==c}),a(function(){$(".reveal-modal-bg").css({display:"block"}),$("#zuucashupdate").foundation("reveal","open",{dismissmodalclass:"close-reveal-modal",close_on_background_click:!0})},1),o.params.id&&""!=o.params.id||n.path(n.path()+"/"+c)):window.location.href=r})}}}]),app.directive("uiZooCashClose",["$rootScope","$timeout","$store","$state","$location","$timeout",function(e,a,t,o,n,a){return{link:function(e,a,t){a.on("click",function(e){return console.log("uiZooCashClose zuucash close! "),o.go("me.zoocashtopup"),!0})}}}]),app.directive("uiDropdownClose",[function(){return{restrict:"C",link:function(e,a,t){a.on("mouseleave",function(e){e.preventDefault();var t=$("#"+a.attr("data-dropdown"));t.hasClass("open")&&(t.removeClass("open"),t.css("left","-99999px"),t.trigger("closed")),t.on("mouseleave",function(e){e.preventDefault(),t.removeClass("open"),t.css("left","-99999px"),t.trigger("closed")})})}}}]),app.directive("uiNotification",["$apiService","$location","$rootScope","$timeout",function(e,a,t,o){return{restrict:"C",link:function(n,i,r){n.permlink="","activities"==r.cat?"SendVC"==n.activities.activity.type?n.permlink="/me/transactionhistory":"post"==n.activities.activity.actor_a.type||"comment"==n.activities.activity.actor_a.type?n.activities.activity.actor_a.metadata.collection.owned_by_network&&n.activities.activity.actor_a.metadata.collection.owned_by_network.id?n.permlink="/"+n.activities.activity.actor_a.metadata.collection.owned_by_network.shortcut+"/wall/"+n.activities.activity.actor_a.metadata.article_id:n.activities.activity.actor_a.metadata.collection.owned_by_user&&n.activities.activity.actor_a.metadata.collection.owned_by_user.id:"network"==n.activities.activity.actor_a.type?n.permlink="/"+n.activities.activity.actor_a.metadata.shortcut:"event"==n.activities.activity.actor_a.type&&n.activities.activity.actor_a.metadata.collection.owned_by_network&&n.activities.activity.actor_a.metadata.collection.owned_by_network.id&&(n.permlink="/"+n.activities.activity.actor_a.metadata.collection.owned_by_network.shortcut+"/events/"+n.activities.activity.actor_a.metadata.article_id):"followers"==r.cat?n.permlink="/me/followers":"friends"==r.cat&&(n.permlink="/me/friends"),t.clickedFromNotification=!1,n.updateNotificationFeed=function(){var i=n.activities.activity._id;e.user.updateNotificationRead(i,function(e,a){}),$("#notification_box").removeClass("open"),$("#notification_box").css("left","-99999px"),$("#notification_box").trigger("closed"),t.clickedFromNotification=!0,n.permlink&&o(function(){a.path(n.permlink)},1)},n.updateActivityTimestamp=function(){e.user.updateActivityTimestamp(r.cat,function(e,a){}),$("#notification_box").removeClass("open"),$("#notification_box").css("left","-99999px"),$("#notification_box").trigger("closed"),t.clickedFromNotification=!0,n.permlink&&o(function(){a.path(n.permlink)},1)}}}}]),app.directive("addStyles",function(){return{restrict:"A",link:function(e,a,t){t.$observe("addStyles",function(t){if(t){var o=e.$eval(t);a.text(o)}})}}}),app.directive("uiTocModal",["$apiService","$rootScope","$location","$store","$window",function(e,a,t,o,n){return{restrict:"C",link:function(i,r,s){i.logout=function(e){return console.log("$location.path()",t.path()),t.path().indexOf("shopping")>-1?void(n.location="/logout?returnurl=shopping"):void t.path("/logout")},i.closeModalProg=function(){$("#tocbox").foundation("reveal","close"),$(".reveal-modal-bg").hide()},i.updateTOC=function(t){console.log("updateTOC ... "+t),3==t?(a.showTocBox=!1,$("#tocbox").foundation("reveal","close"),$(".reveal-modal-bg").hide(),i.logout()):1==t&&e.user.updateTnCAgreement(t,function(e,t){t&&t.status.success?(console.log("data : ",t),a.showTocBox=!1,$("#tocbox").foundation("reveal","close"),$(".reveal-modal-bg").hide(),a.viewed_user_profile=t.user,o.setValue("currentUser",t.user),a.currentUser=t.user):(console.log("Error : updateTnCAgreement...",e),i.logout())})}}}}]),app.directive("uiInviteFriends",["$apiService","$rootScope","$location","$state","$timeout",function(e,a,t,o,n){return{restrict:"C",link:function(i,r,s){console.log("uiInviteFriends",o.params.nexturl),i.invite=[{email:"",name:""}],i.contacts_email=[],i.showNext=!1,i.nextUrl=[],o.params.nexturl&&(i.showNext=!0,i.nextUrl=o.params.nexturl.split(",")),t.search().campaigncode&&(i.showNext=!0),i.absUrl=t.protocol()+"://"+t.host()+":"+t.port(),i.baseUrl=i.absUrl,e.user.requestCampaignReferralCode({referral_source:"2"},function(e,a){if(console.log("uiInviteFriends  requestCampaignReferralCode "),a.status&&a.status.success){var t=a.campaign.referral_code;-1===i.absUrl.indexOf("?")?i.absUrl=i.absUrl+"?refcode="+t:i.absUrl=i.absUrl+"&refcode="+t}}),function(e,a,t){var o,n=e.getElementsByTagName(a)[0];e.getElementById(t)||(o=e.createElement(a),o.id=t,o.src="//connect.facebook.net/en_US/sdk.js",n.parentNode.insertBefore(o,n))}(document,"script","facebook-jssdk"),i.inviteFriendsOnFB=function(){var e=i.absUrl;o.current.name.indexOf("network")>-1&&(e=i.baseUrl+t.path()+"?follow"),window.fbAsyncInit=function(){a.config&&a.config.facebookAppId&&(FB.init({appId:a.config.facebookAppId,xfbml:!0,version:"v2.4"}),FB.ui({method:"send",link:e}))},window.fbAsyncInit()},i.$watch("config",function(){a.config&&a.config.googleAppId&&i.inviteFriendsOnGoogle(),a.config&&a.config.yahooAppId&&i.hello_init()}),i.inviteFriendsOnGoogle=function(){var e=i.absUrl;o.current.name.indexOf("network")>-1&&(e=i.baseUrl+t.path()+"?follow");var n={contenturl:e,contentdeeplinkid:"",clientid:a.config.googleAppId,cookiepolicy:"single_host_origin",prefilltext:"",calltoactionlabel:"",calltoactionurl:"",calltoactiondeeplinkid:e};require(["gapiLoader!interactivepost"],function(e){var a=angular.element(".invitegplus_btn");angular.forEach(a,function(a){e.render(a,n)})})},i.inviteWithEmails=function(){i.isSent=!1,i.hasError=!1,i.hasInvalidEmails=!1,i.errormsg="";var a={};i.hasEmptyField=!1;var t=!1;if(angular.forEach(i.invite,function(e){if(e.isInvalid&&(i.hasInvalidEmails=!0),""==e.email)t=!0;else{var o=e.name;""==o&&(o=e.email),a[e.email]=e.name}}),!i.hasInvalidEmails){var o=!1;if(angular.forEach(i.contacts_email,function(e){if(e.isActive){o=!0;var t=e.name;""==t&&(t=e.email),a[e.email]=e.name}}),!o&&t)return void(i.hasEmptyField=t);console.log("processing",a);var n=JSON.stringify(a);i.sendingInvite=!0,e.user.requestCampaignReferralCode({referral_source:"1",user_emails:n},function(e,a){i.sendingInvite=!1,a.status&&a.status.success?(i.isSent=!0,i.invite=[{email:"",name:""}],i.contacts_email=[]):e?errormsg=$("#general-error-message:first").text():a.status.err&&(errormsg=a.status.err)})}},i.hello_init=function(){$(document).ready(function(){hello.init({yahoo:a.config.yahooAppId,google:a.config.googleAppId},{redirect_uri:"/home/_blank",oauth_proxy:"https://auth-server.herokuapp.com/proxy",scope:"friends"})})},i.email_network={},i.getContactsEmails=function(e){i.email_network.name=e;var a="me/contacts";console.log("test... get emails"),hello(e).login({scope:"friends"}).then(function(t){console.log("auth:",t),hello(e).api(a,{limit:15}).then(function(e){console.log("contact resp",e),n(function(){i.contacts_email=e.data,e.paging?i.email_network.paging=e.paging:i.email_network.paging=null,i.invite&&1==i.invite.length&&!i.invite[0].email&&(i.invite=[])},1)})},function(){return!auth||auth.error?void console.log("Signin aborted"):void 0})},i.getMoreContactsEmails=function(e){hello(i.email_network.name).api(i.email_network.paging.next,{limit:15},function(e){console.log("contact resp",e),n(function(){i.contacts_email=i.contacts_email.concat(e.data),e.paging?i.email_network.paging=e.paging:i.email_network.paging=null},1)})},i.validateEmailField=function(e,t){t.isInvalid=!0,a.email_validator(t.email)&&(t.isInvalid=!1)},i.addInviteField=function(){i.invite.length>10||(i.invite.push({email:"",name:"",isInvalid:!0}),n(function(){angular.element(document).find(".invite-user .txt-email:last").focus()},200))},i.removeInviteField=function(e){i.invite.splice(e,1)},i.nextProcess=function(){i.isLoading=!0;var e=(t.search(),"invite"),a=i.nextUrl.indexOf(e);if(nextUrl=i.nextUrl[a+1],!nextUrl)return t.search().campaigncode?void(window.location="/me/newsfeeds"):(i.isLoading=!1,void $("#invitefriendswindow").foundation("reveal","close"));if("newsfeeds"===nextUrl)window.location="/me/newsfeeds";else{var n=o.href(nextUrl,{nexturl:i.nextUrl.slice(a+1).join(",")});window.location=n+"&campaigncode="+t.search().campaigncode}}}}}]),app.directive("uiCampaignAuth",["$apiService","$location","$rootScope","$timeout","$rootScope",function(e,a,t,o,n){return{restrict:"AE",scope:!0,template:'<ng-include src="getTemplateUrl()"/>',link:function(a,o,n){console.log("scope.campaign_code",a.campaign_code),a.showAuthView="login",a.campaign={},e.user.fetchCampaignByReferralCode({campaign_code:a.campaign_code},function(e,o){if(console.log("uiCampaignAuth  fetchCampaignByReferralCode "),o.status&&o.status.success){if(t.currentUser&&t.currentUser.id){if(1==o.campaign.metadataObj.id)return void(window.location="/me/info?edit=1&campaigncode="+o.campaign.referral_code);if(6==o.campaign.metadataObj.id)return void(window.location="/network/create?&campaigncode="+o.campaign.referral_code);if(7==o.campaign.metadataObj.id)return void(window.location="/promoted-network?nexturl="+o.campaign.metadataObj.redirect_url+"&campaigncode="+o.campaign.referral_code);if(9==o.campaign.metadataObj.id)return void(window.location="/"+o.campaign.network_shortcut+"?campaigncode="+o.campaign.referral_code)}t.campaign=a.campaign=o.campaign,o.campaign.metadataObj.form_preset.sign_in&&o.campaign.metadataObj.form_preset.sign_in.enable||1!=o.campaign.metadataObj.form_preset.sign_up.enable||a.showAuth("signup")}}),a.country_list=country_list_english;var i=new Date;a.dobYears=_.range(i.getFullYear()-80,i.getFullYear()),a.dobDays=_.range(1,32),a.getTemplateUrl=function(){return a.campaign.metadataObj?"/_partials/common/widget/uicampaignauth":void 0},a.showAuth=function(e){"signup"==e?a.showAuthView="signup":a.showAuthView="login"}}}}]),app.directive("uiMashup",["$rootScope","$apiService","$timeout","$interval","$location","$anchorScroll",function(e,a,t,o,n,i){return{restrict:"C",link:function(r,s,c){r.swiper={},r.params={},r.topics_data=[],r.isMashupLoading=!1,e.$watch("config",function(){if(e.config){var t=function(){r.params.lang=e.config.activeLanguage,r.isMashupLoading=!0,a.articles.getMashupTopics(r.params,function(e,a){r.isMashupLoading=!1,console.log(" getMashupTopics",a),e||(r.mashup_data=a)})};c.$observe("code",function(e){e&&(r.code=e)}),c.$observe("topic",function(e){e&&(r.topics=e.split(","),r.code&&(r.params={code:r.code,topics:r.topics},t()))}),r.$watch("code",function(){r.params.topics||(r.params={code:r.code,topics:r.topics},t())})}}),r["goto"]=function(e){console.log("goto",e),n.hash(e),i()};var l;r.onReadySwiper=function(e){console.log("swiper is ready",e),l=o(function(){t(function(){e.slideNext()},1e3)},5e3),r.$on("$destroy",function(){angular.isDefined(l)&&(o.cancel(l),l=void 0)})}}}}]),app.directive("yzMicropaymentButton",["$apiService","$location","$rootScope","$timeout","$store","$state",function(e,a,t,o,n,i){return{restrict:"C",scope:!0,templateUrl:"/_partials/common/widget/uimicropayment",transclude:!0,link:function(r,s,c,l,d){d(function(e){s.append(e)}),r.showMicroPayBox=!1,r.microData={payment_processing:!1},r.input_data={selected_payment_id:-1,email_address:"",user_name:"",user_note:"",isUserError:!1,response_message:"",isPaymentError:!1,isPublic:!1,isMicroPayGeneralError:!1,isMicroDataLoad:!1},r.selectedMicroOption={},r.dropdownMicroOption=[],c.$observe("code",function(a){a&&(r.input_data.isMicroPayGeneralError=!1,r.input_data.isMicroDataLoad=!1,e.micropayment.getMicroPaymentByCode(a,function(e,a){console.log("yzMicropaymentButton  getMicroPaymentByCode "),a.status&&a.status.success?(console.log("yzMicropaymentButton  getMicroPaymentByCode sucess data "),r.microData=a,r.input_data.selected_payment_id=r.microData.microPaymentOptions[0].microPaymentOptionId,angular.forEach(r.microData.microPaymentOptions,function(e,a){var o={microPaymentOptionId:e.microPaymentOptionId,deatils:e.comment_language+" ("+e.amount+r.microData.microPayment.localized.rate.currency_symbol+(e.enableZooCashReward?", "+e.zoocash+" "+t.i18n["user.menu.virtualcash"]:"")+")"};r.dropdownMicroOption.push(o)}),r.selectedMicroOption=r.dropdownMicroOption[0],o(function(){r.input_data.isMicroDataLoad=!0},1)):(r.input_data.isMicroPayGeneralError=!0,"MICRO_PAYMENT_NOT_FOUND"==a.status.code&&(r.input_data.response_message=a.status.err))}))}),s.on("click",function(e){r.showMicroPayBox=!0,e.preventDefault(),console.log("uimicropayment --"),o(function(){$("#micropay-box").data("reveal-init",{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,close_on_esc:!1,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",bg:$(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}}),$("#micropay-box").foundation("reveal","open")},1)}),r.closeMicroBox=function(){r.showMicroPayBox=!1,$("#micropay-box").foundation("reveal","close")},r.callCheckOut=function(s){r.input_data.isPaymentError=!1,r.input_data.isUserError=!1,console.log("scope.input_data.selected_payment_id --- > ",r.input_data.selected_payment_id);var c=1,l=0;i.current.name.indexOf("campaign")>-1?(c=3,t.campaign&&(l=t.campaign.campaign_id)):i.current.name.indexOf("network")>-1&&(c=2,t.currentNetwork&&(l=t.currentNetwork.info.id));var d={micro_payment_source_type:c,makePublic:r.input_data.isPublic,note:r.input_data.user_note,micro_payment_source_url:a.absUrl()};if(0!=l&&(d.micro_payment_source_id=l),!t.currentUser||!t.currentUser.id){if(0==r.input_data.email_address.length||0==r.input_data.user_name.length)return void(r.input_data.isUserError=!0);d.email_address=r.input_data.email_address,d.name=r.input_data.user_name}r.microData.payment_processing=!0,console.log(" @@@@@@@@@@@@ checkoutParams ",d),e.micropayment.checkoutMicroPayment(r.microData.microPayment.microPaymentId,r.input_data.selected_payment_id,d,function(a,i){if(!a&&i.status.success){var c=i.invoiceRepresentation.invoice_uuid;if(i.temporary_user_auth_token&&(n.setValue("tempUser",i.temporary_user),n.setTempToken(i.temporary_user_auth_token),r.temporary_user_auth_token=n.getTempToken(),r.tempUser=n.getValue("tempUser")),"paypal"==s){var l={redirect_url:t.config.assets.base_url+t.config.payment_settings.paypal.redirect_url+c,cancel_url:t.config.assets.base_url+t.config.payment_settings.paypal.redirect_url+c};e.payment.makePaypalPayment(c,l,function(e,a){o(function(){r.microData.payment_processing=!1},5e3),!e&&a.status.success?window.location.href=a.paypal.redirect_url:(e?r.input_data.response_message=$("#general-error-message:first").text():a.status.err&&(r.input_data.response_message=a.status.err),r.input_data.isPaymentError=!0)})}else if("yuupay"==s)e.payment.makeYuupayPayment(c,function(e,a){if(o(function(){r.microData.payment_processing=!1},5e3),!e&&a.status.success){var i=n.getToken(),s=0;t.currentUser&&t.currentUser.id||(i=n.getTempToken(),s=1),window.location.href=(1==t.config.assets.enabled_ssl&&""!=t.config.assets.base_url?"https:"+t.config.assets.base_url:"/")+"shopping/yuupay-payments/"+a.token.token+"/"+a.token.invoice.invoice_uuid+(1==t.config.assets.enabled_ssl&&""!=t.config.assets.base_url?"?t="+i+"&temp="+s:"")}else e?r.input_data.response_message=$("#general-error-message:first").text():a.status.err&&(r.input_data.response_message=a.status.err),r.input_data.isPaymentError=!0});else if("yuupay_nibss"==s){var d=n.getToken(),u=0;t.currentUser&&t.currentUser.id||(d=n.getTempToken(),u=1),window.location.href=(1==t.config.assets.enabled_ssl&&""!=t.config.assets.base_url?"https:"+t.config.assets.base_url:"/")+"shopping/yuupay-payments-2/"+c+(1==t.config.assets.enabled_ssl&&""!=t.config.assets.base_url?"?t="+d+"&temp="+u:"")}else if("yuupay_nibss_centralpay"==s)r.microData.payment_processing=!0,t.$broadcast("callmakeCentralPayPayment",i.invoiceRepresentation);else if("yuupay_nibss_mandatepay"==s){var d=n.getToken(),u=0;t.currentUser&&t.currentUser.id||(d=n.getTempToken(),u=1),window.location.href=(1==t.config.assets.enabled_ssl&&""!=t.config.assets.base_url?"https:"+t.config.assets.base_url:"/")+"shopping/nibss-mandate-payments/"+c+(1==t.config.assets.enabled_ssl&&""!=t.config.assets.base_url?"?t="+d+"&temp="+u:"")}else if("alipay"==s){var m={redirect_url:t.config.assets.base_url+"shopping/payments"+t.config.payment_settings.alipay.redirect_url,notify_url:t.config.assets.base_url+t.config.payment_settings.alipay.notify_url,error_notify_url:t.config.assets.base_url+t.config.payment_settings.alipay.error_notify_url};e.payment.makeAliPayPayment(c,m,function(e,a){o(function(){r.microData.payment_processing=!1},5e3),!e&&a.status.success?$("#alipaycontainer").html(a.response.htmlForm):(e?r.input_data.response_message=$("#general-error-message:first").text():a.status.err&&(r.input_data.response_message=a.status.err),r.input_data.isPaymentError=!0)})}else"netplus"==s&&(r.microData.payment_processing=!0,t.$broadcast("callmakeNetplusPayment",{data:i.invoiceRepresentation}))}else r.microData.payment_processing=!1,a?scoscope.input_datape.response_message=$("#general-error-message:first").text():i.status.err&&(r.input_data.response_message=i.status.err),r.input_data.isPaymentError=!0})}}}}]),app.directive("uiYuupayNibssCentralpay",["$rootScope","$apiSocialCommerce","$sce",function(e,a,t){return{restrict:"C",link:function(o,n,i){o.nibssCentralData={amount_shipping:"0.00",amount_coupon:"0.00",amount_tax:"0.00",item_quantity:[],item_name:[],item_no:[],item_desc:[],item_amount_unit:[]},o.invoiceDetail={},o.nibssCentralData.timestamp=parseInt(parseInt($.now())/1e3),o.nibssCentralData.sid=e.config.payment_settings.yuupay_nibss_centralpay.id,o.nibssCentralData.rcode=e.config.payment_settings.yuupay_nibss_centralpay.rcode,o.nibssCentralData.card_type=e.config.payment_settings.yuupay_nibss_centralpay.card_type,o.nibssCentralData.tx_action=e.config.payment_settings.yuupay_nibss_centralpay.tx_action,o.nibssCentralData.currency=e.config.currency.code,o.nibssCentralData.item_quantity=1;var r="";o.makeCentralPayPayment=function(n){o.nibssCentralData.tid=r=n.invoice_uuid,o.nibssCentralData.item_name=n.invoice_uuid,o.nibssCentralData.item_desc=n.invoice_uuid,o.nibssCentralData.item_no=n.invoice_id,o.nibssCentralData.redirect_url=t.trustAsResourceUrl((1==e.config.assets.enabled_ssl&&""!=e.config.assets.base_url?"http:":"")+e.config.assets.base_url+"shopping"+e.config.payment_settings.yuupay_nibss_centralpay.redirect_url+r),o.nibssCentralData.postback_url=t.trustAsResourceUrl((1==e.config.assets.enabled_ssl&&""!=e.config.assets.base_url?"http:":"")+e.config.assets.base_url+e.config.payment_settings.yuupay_nibss_centralpay.postback_url+r),o.nibssCentralData.item_amount_unit=n.total_amount;var i=o.nibssCentralData.sid+""+o.nibssCentralData.timestamp+String(n.total_amount.toFixed(2))+o.nibssCentralData.currency+e.config.payment_settings.yuupay_nibss_centralpay.rcode;o.nibssCentralData.hash=CryptoJS.MD5(i).toString(CryptoJS.enc.Hex),a.makeCentralPayPayment(r,o.nibssCentralData,function(e,a){a.status&&a.status.success&&(console.log("makeCentralPayPayment success"+$("#yuupayNibss2Form")),document.getElementById("yuupayNibss2Form").submit())})},o.$on("callmakeCentralPayPayment",function(e,a){o.makeCentralPayPayment(a)})}}}]),app.directive("uiDynamicNetworkList",["$apiService",function(e){return{restrict:"C",link:function(a,t,o){a.dynamicNetworkList={},e.network.getDynamicNetworkList(function(e,t){a.dynamicNetworkList=t,console.log("uiDynamicNetworkList",t)})}}}]),app.directive("uiNetplusPayment",["$rootScope","$apiSocialCommerce","$sce",function(e,a,t){return{restrict:"C",link:function(t,o,n){t.netPlusData={},t.netPlusData.narration=e.config.payment_settings.netplus.narration,t.netPlusData.merchant_id=e.config.payment_settings.netplus.merchant_id,t.netPlusData.currency_code=e.config.currency.code,t.makeNetplusPayment=function(o,n){var i="";console.log("$rootScope.currentUser ",e.currentUser),t.netPlusData.order_id=i=o.invoice_uuid,t.netPlusData.total_amount=o.total_amount,t.netPlusData.full_name=o.shipping_address.full_name,e.currentUser?e.currentUser.emailAddress?t.netPlusData.email=e.currentUser.emailAddress:e.currentUser.guest_email_address&&(t.netPlusData.email=e.currentUser.guest_email_address):o.guest_email_address?t.netPlusData.email=o.guest_email_address:o.shipping_address.email_address&&(t.netPlusData.email=o.shipping_address.email_address),t.netPlusData.return_url=(1==e.config.assets.enabled_ssl&&""!=e.config.assets.base_url?"http:":"")+e.config.assets.base_url+e.config.payment_settings.netplus.return_url+i+(n?"?applink="+n:""),console.log("scope.netPlusData ",t.netPlusData),a.makeNetPlusPayment(i,t.netPlusData,function(e,a){a.status&&a.status.success&&(console.log("makeNetPlusPayment success"+$("#netpluspayForm")),document.getElementById("netpluspayForm").submit())})},t.$on("callmakeNetplusPayment",function(e,a){t.makeNetplusPayment(a.data,a.applink)})}}}]),app.directive("uiDynamicNetworkList",["$apiService",function(e){return{restrict:"C",link:function(a,t,o){a.dynamicNetworkList={},e.network.getDynamicNetworkList(function(e,t){a.dynamicNetworkList=t,console.log("uiDynamicNetworkList",t)})}}}]),app.directive("uiSignupBox",["$apiService",function(e){return{restrict:"C",templateUrl:"/_partials/common/signin-box",link:function(e,a,t){console.log("signup box."),e.isSignUp=!0,e.switchSignIn_UP=function(){e.isSignUp=!e.isSignUp}}}}]),app.directive("uiEventAction",["$apiService","$rootScope",function(e,a){return{restrict:"C",link:function(t){console.log("uiEventAction"),t.processing=!1,t.action=function(o,n){console.log("uiEventAction action"),a.showFollowMessage()||(t.processing=!0,t.action_passed=n,e.articles.joinEvent(o,n,function(e,o){t.processing=!1,"ok"==o.status.code&&(t.tile.post.privateData.eventStatus=t.action_passed,a.currentNetwork&&a.currentNetwork.info?a.followNetworkFromAction(a.currentNetwork.info):t.tile.post.collection&&t.tile.post.collection.owned_by_network&&a.followNetworkFromAction(t.tile.post.collection.owned_by_network)),console.log("join result: ",o)}))}}}}]),app.directive("uiTribes",["$apiService","$analytics","$rootScope",function(e,a,t){function o(e){console.log("[uiTribes.TribesController] Initializing...")}return console.log("[uiTribes] Initializing..."),{restrict:"A",scope:{},replace:!0,controller:["$scope",o],link:function(a,o,n,i){function r(t,o){a.isLoading||(t=t||1,o=o||15,console.log("[uiTribes.loadTribes] Loading page %s for %s next items",t,o),a.isLoading=!0,e.tribe.getNetworkList({page:t,count:o},function(e,o){return e?void(a.isLoading=!1):(o&&o.length?a.items=a.items.concat(o):a.hasMore=!1,a.currentPage=t,void(a.isLoading=!1))}))}var s=t.$watch("config",function(){t.config&&(a.config=t.config,s())});a.items=[],a.currentPage=1,a.isLoading=!1,a.hasMore=!0,a.loadMore=function(e){var t=a.currentPage+1;r(t,15)},r()},templateUrl:"/_partials/common/widget/ui-tribes"}}]),app.directive("uiTribesCard",["$rootScope","$timeout","$state","$apiService","$analytics",function(e,a,t,o,n){function i(a){console.log("[uiTribesCard.TribesCardController] Initializing..."),a.selectedCard=null,this.selectCard=function(e){return a.isSearchResultsPage&&(window.location=e.tribe.permaLink),a.selectedCard&&a.selectedCard===e?void(a.selectedCard=null):(a.selectedCard&&(a.selectedCard.isActive=!1),void(a.selectedCard=e))},this.join=function(e){var a=e.tribe;console.log("[uiTribes.join] Joining tribe %s",a.name)},this.toggleFollowing=function(a,t){var i=a.tribe;console.log("[uiTribes.toggleFollowing] Toggling tribe %s",i.name),t?o.network.followNetwork(i.shortcut,function(t,o){t||(n.eventTrack("Follow Network",{category:"network-followers",label:e.currentUser.id}),n.eventTrack("Follow Network",{category:"network-follow",label:i.id+" - "+i.name,value:1}),a.tribe.privateData.isFollower=!0)}):o.network.unFollowNetwork(i.shortcut,function(e,t){e||(a.tribe.privateData.isFollower=!1)})}}return console.log("[uiTribesCard] Initializing..."),{restrict:"A",replace:!0,controller:["$scope",i],link:function(t,o,n,i){t.config=e.config,t.isActive=!1,console.log("inside out",t.insideOut),t.selectCard=function(e){e.target.attributes.href||(e.stopPropagation(),i.selectCard(t))},t.follow=function(o){return o.stopPropagation(),e.currentUser&&e.currentUser.id?void i.toggleFollowing(t,!0):(a(function(){angular.element("#signinheaderbtn").triggerHandler("click")}),!0)},t.unfollow=function(e){e.stopPropagation(),i.toggleFollowing(t,!1)},t.join=function(e){e.stopPropagation(),i.join(t)}},templateUrl:"/_partials/common/widget/ui-tribe-card"}}]),app.directive("uiStripText",["$apiService","$rootScope","$timeout","$sce",function(e,a,t,o){return{restrict:"C",scope:{tile:"=",max:"=",text:"=",tags:"="},transclude:!0,template:'<div><div ng-bind-html="short_text"></div><a ng-if="hasMore" ng-click="more_action()">{{more_text}}</a></div>',link:function(e,o){console.log("uiStripText");var n=(e.tags?e.tags:[],$("<div />").html(e.text)),i=$(n).text();e.more_text=a.i18n["...more"],e.hasMore=!1;try{i&&i.length>e.max&&(n=$(n).text(i.substring(0,e.max)),e.hasMore=!0)}catch(r){console.log("error_catch",r)}e.short_text=a.linkify($(n).prop("outerHTML"),e.tags),console.log("scope.short_text",e.short_text),e.more_action=function(){var e=$(o).parents(".wrapper:first").find("[ng-click^=onViewArticle]:first");console.log("view_elem",e),t(function(){angular.element(e).triggerHandler("click")})}}}}]),app.directive("uiJwplayer",["$compile",function(e){return{restrict:"C",scope:{videoUrl:"@videoUrl",imageUrl:"@imageUrl",videoTitle:"@videoTitle"},link:function(e,a,t){e.$watch("videoUrl",function(){var a={file:e.videoUrl,image:e.imageUrl,width:"100%",showicons:!0};$(".album_video_desktop").length&&(a.height="100%"),$(".jwplayer").length?jwplayer(t.id).load(a):jwplayer(t.id).setup(a)})}}}]),app.directive("uiUniversalSearch",["$rootScope","$location","$q","$apiService","$state","$timeout",function(e,a,t,o,n,i){function r(e){this.search=function(e,a,t){console.log("[UniversalSearchCtrl.search] %s in %s",e,a);var o;o="networks"==a?"/"+e.slug:"products"==a&&angular.isDefined(e.slug)?"/shopping/search/"+t+"/category/"+e.slug:"/search/"+e+"/all/1/10",window.location=o},this.ecommerce=function(e){var a=5,n=t.defer();return o.universalSearch.ecommerce(e,a,function(e,a){if(e)return void n.reject(e);var t=[];try{t=a.suggestedCategories.map(function(e){return{name:e.title["en-US"],slug:e.shortcut}})}catch(o){}var i={items:t,popular_searches:a.suggesstedKeywords};n.resolve(i)}),n.promise},this.merchant=function(e){var a=5,n=t.defer(),i="undefined"!=typeof current_country_code?current_country_code.replace(".","").toUpperCase():"",r="";return o.universalSearch.merchant(e,a,i,r,function(e,a){if(e)return void n.reject(e);var t=[];try{t=a.merchants.map(function(e){return{name:e.title,slug:e.slug_1}})}catch(o){}var i={items:[],popular_searches:[],merchants:t};n.resolve(i)}),n.promise},this.network=function(e){var a=5,n=t.defer();return o.universalSearch.network(e,a,function(e,a){if(e)return void n.reject(e);var t=[];try{t=a.networks.map(function(e){return{name:e.name,image:e.profilePhotoUrl,slug:e.shortcut}})}catch(o){}var i={items:t,popular_searches:[]};n.resolve(i)}),n.promise},this.suggest=function(e){return console.log("[UniversalSearchCtrl.suggest] %s in %s",e),t.all([this.ecommerce(e),this.merchant(e),this.network(e)])},$(document.body).on("click",function(e){if(0==$(e.target).closest(".ui-universal-search").length&&$(document).find(".ui-universal-search-dropdown:visible").length){var a=angular.element($(document).find(".ui-universal-search-dropdown:visible")).scope();a.$apply(function(){a.showingDropdown=!1})}})}var s=1,c=0,l=1,d=2,u=!0;return{restrict:"EA",scope:{searchPage:"@searchPage"},templateUrl:"/_partials/common/widget/ui-universal-search",link:function(e,a,t,o){function r(e){if(!e||e.length<s)return console.warn("[uiUniversalSearch] Query too short. Suggestion not activated"),l;var a;return(a=/[\?\*]/.exec(e))?(console.warn("[uiUniversalSearch] Query is invalid. Found invalid characters",a[0]),d):c}function m(a,t){"products"==a?(e.categorizedGroups[0].items=t.items,e.categorizedGroups[0].popular_searches=t.popular_searches,e.categorizedGroups[0]["default"]=!1):"merchants"==a?(e.categorizedGroups[1].items=t.items,e.categorizedGroups[1].merchants=t.merchants,e.categorizedGroups[1]["default"]=!1):"networks"==a&&(e.categorizedGroups[2].items=t.items,e.categorizedGroups[2]["default"]=!1),e.genericGroup=[],$(".ui-universal-search-dropdown > .content").scrollTop(0)}e.showingDropdown=!1,e.categorizedGroups={};var p=[{feature:"products",items:[],popular_searches:[],"default":!0},{feature:"merchants",items:[],popular_searches:[],merchants:[],"default":!0},{feature:"networks",items:[],popular_searches:[],"default":!0}];e.genericGroup=[],e.search_page=t.searchPage,i(function(){"shoppingCategorySearch"!=n.current.name&&"search-grp"!=n.current.name||(e.query=n.params.query||n.params.searchKey)},1e3),e.onKeyup=_.debounce(function(a,t){if(console.log("[uiUniversalSearch] onKeyup",t),$.isEmptyObject(t)&&!$.isEmptyObject(angular.element(a.target).val())&&(t=angular.element(a.target).val()),t=$.trim(t),27===a.which||$.isEmptyObject(t))return e.categorizedGroups=JSON.parse(JSON.stringify(p)),void(e.showingDropdown=!1);switch(r(t)){case l:e.showingDropdown=!1;break;case d:return void(e.showingDropdown=!1);case c:}if(13===a.which)return void o.search(t);if(t.length>=s)try{u?(u=!1,e.categorizedGroups=JSON.parse(JSON.stringify(p)),e.showingDropdown=!0,o.network(t).then(function(e){m("networks",e),u=!0}),o.merchant(t).then(function(e){m("merchants",e)}),o.ecommerce(t).then(function(e){m("products",e),u=!0})):console.debug("[uiUniversalSearch] Cancelling work in progress...")}catch(n){}else;},500),e.onKeydown=function(a,t){return(8===a.which||9===a.which||a.which>15&&a.which<21||32===a.which)&&$.isEmptyObject(t)||27===a.which||t&&t.length<=1?void(e.showingDropdown=!1):($.isEmptyObject(t)&&(e.categorizedGroups=JSON.parse(JSON.stringify(p))),void(e.showingDropdown=!0))},e.onSearchClick=function(e,a){console.log("[uiUniversalSearch] onSearchClick",a),$.isEmptyObject(a)||d===r(a)||o.search(a)},e.onItemClick=function(a,t,n){a.preventDefault(),console.log("[uiUniversalSearch] onItemClick",t,n),o.search(t,n,e.query)},e.highlight=function(a){return""==$.trim(a)&&(e.categorizedGroups=JSON.parse(JSON.stringify(p)),e.showingDropdown=!1),a.replace(new RegExp("("+e.query+")","i"),"<b>$1</b>")}},controller:["$scope",r]}}]),app.service("slimScrollDelegate",function(){var e={};return{register:function(a,t){e[a]=t},get:function(a){return e[a]},api:function(a,t,o){if(o=arguments.length>2?Array.prototype.slice.call(arguments,2):[],"height"===t){var n=o[0],i=e[a].scrollTop();e[a].slimScroll({destroy:!0}).slimScroll({height:n}).slimScroll({scrollTo:i})}}}}),app.directive("uiSlimScroll",["slimScrollDelegate",function(e){return{restrict:"AC",priority:-1e3,link:function(a,t,o){var n=o.uiSlimScroll?a.$eval(o.uiSlimScroll):{},i=o.uiSlimScrollRefresh,r=t.attr("id"),s=n.height||430,c=$(t).slimScroll({height:s});e.register(r,c),i&&a.$watch(i,function(){$(t).slimScroll({height:s})})}}}]),app.directive("autoScreenHeight",["$rootScope",function(e){return{restrict:"C",link:function(e,a,t){
var o=function(){var e=parseInt($(window).height());$(a).css({"min-height":e+"px"})};o(),$(window).on("resizestop",function(){o()})}}}]),app.directive("uiEventFeed",["$http",function(e){function a(e,a,o,n){this.getEvents=function(a){if(a=angular.extend(t,a),!e.currentNetwork)return o.reject(new Error("Current network undefined"));var i=e.currentNetwork.info.shortcut,r=o.defer();return n.get("/api/syndication/events/"+i+"?is_current=true&count="+a.limit,function(e,a){if(e)return void r.reject(e);var t=_.map(a[2],function(e){var a={},t=e[1];return angular.forEach(t,function(e){"date-time"===e[2]?a[e[0]]=Date.parse(e[3])/1e3:a[e[0]]=e[3]}),e.thumbnailUrl="http://maps.googleapis.com/maps/api/staticmap?zoom=12&size=200x200&sensor=false&center="+a.location,a});r.resolve(t)}),r.promise}}var t={limit:5};return{scope:{title:"@"},restrict:"E",templateUrl:"/_partials/common/widget/ui-event-feed",link:function(e,a,t,o){e.currentNetwork=e.$root.currentNetwork,e.events=[],e.busy=!0;var n={};o.getEvents(n).then(function(a){e.events=a})["finally"](function(){e.busy=!1})},controller:["$rootScope","$scope","$q","$dataService",a]}}]),app.directive("networksRecentPost",["$log","$location","$timeout","$state","$apiService","$rootScope",function(e,a,t,o,n,i){return{restrict:"C",templateUrl:"/_partials/recentpost/_widgets/ui-landingpage-networks-recent-post",scope:{result:"="},link:function(e){e.showMore=!1,e.limitText=function(a){return e.showMore=!1,a?a.length>150?(e.showMore=!0,a.substring(0,150)):a:""},n.articles.fetchRecentPosts(function(a,t){t.itemList.length>0&&(e.result=t.itemList)},function(e){})}}}]),app.directive("uiSignupStep2",["$rootScope","$state","$apiService","$apiSocialCommerce","$store",function(e,a,t,o,n){return{restrict:"C",scope:!0,link:function(a,i,r){if(a.currentUser&&a.currentUser.id&&(a.username=a.currentUser.display_name,a.iam_rccg=!1),a.step=2,__YZ_CONFIG__&&__YZ_CONFIG__.templates){var s={target:3};o.getAvailableCategories(s,function(e,t){t.status&&t.status.success&&(a.networkCategories=t.categories)})}a.$watch("region",function(e){if(e){var t=_.find(a.networkCategories,function(a){return a.id==e});a.province_list=t.children,a.province="",a.zone="",a.area=""}}),a.$watch("province",function(e){if(e){var t=_.find(a.province_list,function(a){return a.id==e});a.zone_list=t.children,a.zone="",a.area=""}}),a.$watch("zone",function(e){if(e){var t=_.find(a.zone_list,function(a){return a.id==e});a.area_list=t.children,a.area=""}}),a.$watch("area",function(e){if(e){_.find(a.area_list,function(a){return a.id==e})}}),a.next=function(){2==a.step?(a.step=3,a.formDetailsUpdate()):3==a.step&&(window.location="/me/newsfeeds")},a.formDetailsUpdate=function(){var o={rccg:a.iam_rccg,region:a.region,province:a.province,zone:a.zone,area:a.area};o={additional_info:JSON.stringify(o)},o.id=e.currentUser.id,t.user.updateProfile(e.currentUser.shortcut,o,function(a,t){!a&&t.status.success&&(n.setValue("currentUser",t.user),angular.extend(e.currentUser,t.user),e.currentUser=t.user)})}}}}]),app.directive("uiPageTitle",["$rootScope","$state","$apiService",function(e,a,t){return{restrict:"C",link:function(a,o,n){a.$on("$stateChangeSuccess",function(a,o,n,i,r){var s=window.location.pathname,c="";__YZ_CONFIG__.assets.virtual_domain_enable&&(c="&domainName="+window.location.host),t.seo.fetchSeo(s,c,function(a,t){t.status.success?e.$broadcast("CURRENT_PAGE_TITLE",{newval:t.result.title}):e.$broadcast("CURRENT_PAGE_TITLE",{newval:window.location.host})})}),a.$on("CURRENT_PAGE_TITLE",function(a,t){e.pageTitleText=t.newval})}}}]),app.directive("uiNetworkList",["$apiService","$rootScope",function(e,a){return{restrict:"E",templateUrl:"/_partials/common/network-list",scope:{page:"@",count:"@",tags:"@",type:"@"},link:function(t,o,n){if(!t.type)throw new Error("Attribue 'type' is required for ui-network-list directive");var i={page:t.page,count:t.count,tags:t.tags,type:t.type};t.listAllNetworks=function(){e.network.listNetworksByTags(i,function(e,a){t.ListOfNetworks=a.networklist})},t.listAllNetworks(),a.$on("NETWORK_LIST_CONFIRM_UNFOLLOW",function(e,o){t.unFollowThisNetwork(a.selected_network,a.selected_network_index)}),a.$on("NETWORK_LIST_CONFIRM_FOLLOW",function(e,a){t.followThisNetwork(a.network,a.index,function(){t.listAllNetworks()})}),t.getNetworkCountry=function(e){try{if(JSON.parse(e.metadata).model&&JSON.parse(e.metadata).model.Country)return JSON.parse(e.metadata).model.Country;if(JSON.parse(e.metadata).model&&JSON.parse(e.metadata).model.country)return JSON.parse(e.metadata).model.country}catch(a){return""}},t.getModelInfo=function(e){var a="",t="",o="";try{var n=JSON.parse(e.metadata).model;return n&&(n["Height (cm)"]||n.Height)&&(a=n["Height (cm)"]||n.Height),n&&(n.job1||n.Job1)&&(t=n.job1||n.Job1,""!=a&&(t=" | "+t)),n&&(n.job2||n.Job2)&&(o=n.job2||n.Job2,""==a&&""==t||(o=" | "+o)),a+t+o}catch(i){return""}},t.followThisNetwork=function(o,n,i){return a.selected_network=o,a.selected_network_index=n,a.setFollow=!0,a.currentUser?(t.ListOfNetworks[n].privateData||(t.ListOfNetworks[n].privateData={}),t.ListOfNetworks[n].followStarted=!0,t.ListOfNetworks[n].notification="Processing...",void e.network.followNetwork(o.shortcut,function(e,o){if(o&&o.status&&o.status.success||o.status&&"USER_ALREADY_FOLLOWING_NETWORK"==o.status.code){t.ListOfNetworks[n].privateData.isFollower=!0,t.ListOfNetworks[n].follower_count+=1;var r="You now following ";a.i18n["network.widget.You now following"]&&(r=a.i18n["network.widget.You now following"]),t.ListOfNetworks[n].notification=r+t.ListOfNetworks[n].name+"!",i&&i(),setTimeout(function(e){t.$apply(function(){t.ListOfNetworks[n].followStarted=!1})},3e3)}})):(a.logmode="login",void $("#authwindow").foundation("reveal","open"))},t.askUnfollow=function(e,t){a.selected_network=e,a.selected_network_index=t,a.setFollow=!1;var o="Are you sure to unfollow "+e.name+"?";a.i18n["network.widget.Are you sure to unfollow"]&&(o=a.i18n["network.widget.Are you sure to unfollow"]+e.name+"?"),a.$broadcast("NETWORK_LIST_ASK_UNFOLLOW",o),$("#unfollowModal").foundation("reveal","open")},t.unFollowThisNetwork=function(o,n){return a.currentUser?(t.ListOfNetworks[n].privateData||(t.ListOfNetworks[n].privateData={}),void e.network.unFollowNetwork(o.shortcut,function(e,a){a&&a.status&&a.status.success&&(t.ListOfNetworks[n].privateData.isFollower=!1,t.ListOfNetworks[n].follower_count-=1,$("#unfollowModal").foundation("reveal","close"))})):(a.logmode="login",void $("#authwindow").foundation("reveal","open"))}}}}]),app.directive("uiNetworkListUnfollowModal",["$rootScope",function(e){return{restrict:"E",templateUrl:"/_partials/common/un-follow-modal",link:function(a,t,o){e.$on("NETWORK_LIST_ASK_UNFOLLOW",function(e,t){a.message=t}),a.cancel=function(){$("#unfollowModal").foundation("reveal","close")},a.confirm=function(){e.$broadcast("NETWORK_LIST_CONFIRM_UNFOLLOW","")}}}}]),app.directive("uiSplashWidget",["$apiService","$rootScope",function(e,a){return{restrict:"E",templateUrl:"/_partials/common/splash-widget",scope:{},link:function(a,t,o){var n=window.location.hostname,i="desktop";window.innerWidth<991&&(i="mobile"),e.widget.fetchWidget(n,"splash",i,function(e,t){t&&t.status&&t.status.success&&(a.widget=t.widget)})}}}]),app.directive("uiShoppingBanner",["$apiService","$rootScope","$timeout",function(e,a,t){return{restrict:"E",templateUrl:"/_partials/common/shopping-banner",scope:{},link:function(a,o,n){var i=window.location.hostname,r="desktop";a.banners=[],window.innerWidth<991&&(r="mobile"),e.widget.fetchWidget(i,"shopping",r,function(e,o){o&&o.status&&o.status.success&&o.widget&&o.widget.banners&&(a.banners=o.widget.banners,t(function(){window.dispatchEvent(new Event("resize"))}))})}}}]),define("directive.social.platform",function(){}),app.directive("uiMasonryBlock",["$timeout","$rootScope",function(e,a){return{scope:{gap:"@masonryGap",watchData:"@watchData"},restrict:"C",link:function(t,o){console.log("uiMasonryBlock"),console.log("watch-data",t.watchData),imagesLoaded(o,function(){a.$broadcast("ON_LOADMORE_ARTICLES")}),t.gap||(t.gap=0),a.packedtiles&&a.packedtiles.destroy(),a.packedtiles=null,delete a.packedtiles,a.grid_unit=0,t.masonry_ready=!1,t.$watch(t.watchData,function(){console.log("changes.. @",t.watchData),t.tile_collection=document.querySelector(".tile-collection");var o=t.tile_collection.querySelector(".stamp-me");a.packedtiles=new Packery(t.tile_collection,{itemSelector:".tile-box",isInitLayout:!1,transitionDuration:0,gutter:parseInt(t.gap)}),a.packedtiles.on("layoutComplete",function(){console.log("layout is complete"),a.$broadcast("VALIDATE_IMAGE")}),a.packedtiles.stamp($(".sticky-post-list")),a.packedtiles.stamp(o),a.packedtiles.bindResize(),a.packedtiles.layout(),a.stateback&&e(function(){$(window).trigger("resize")},500)}),t.$on("ON_LOADMORE_ARTICLES",function(){e(function(){console.log(">>> ON_LOADMORE_ARTICLES <<<<"),a.packedtiles.layout()},500)}),Pace.once("done",function(){console.log("pace done!"),a.packedtiles&&a.packedtiles.layout()}),t.$on("resizestop",function(){e(function(){a.grid_unit&&a.packedtiles&&(a.packedtiles.columnWidth=a.grid_unit,a.packedtiles.layout())},400)})}}}]),app.directive("uiTileStatic",["$rootScope",function(e){return{restrict:"C",link:function(a,t,o){function n(){var e=Math.floor(t.width()/o.smallWidth);t.height(o.smallHeight*e)}console.log("uiTileStatic"),n(),e.stateback||$(window).on("resizestop",function(){n()})}}}]),app.directive("uiMasonryItem",["$rootScope","$timeout",function(e,a){return{restrict:"C",link:function(t,o,n){function i(){"true"!=n.noResize&&(t.tile&&"ads"==t.tile.type||a(function(){var a=n.smallHeight;t.$first&&$(o).addClass("cell-ref");var i;if("true"==n.staticTile){var r=Math.floor(o.width()/n.smallWidth);e.grid_unit=r,i=a*r}else i=a*e.grid_unit;isNaN(i)&&(i=48),_.isUndefined(n.strictHeight)?o.height(i):o.css("minHeight",i)},30))}if("true"==n.staticTile){var r={property:{web:{default_size:{width:n.smallWidth,height:n.smallHeight}}}};t.tile=r}t.$first&&e.packedtiles&&(e.grid_unit=Math.floor(o.width()/n.smallWidth),e.packedtiles.columnWidth=e.grid_unit),t.$on("resizestop",function(){i()}),t.$on("ON_LOADMORE_ARTICLES",function(){i()}),e.packedtiles&&(console.log("new  item"),i(),t.tile&&t.tile.new_article?(e.packedtiles.prepended(o),a(function(){t.tile.new_article=!1,e.packedtiles.layout(),window.scrollTo(0,0)},30)):e.packedtiles.addItems(o))}}}]),app.directive("uiGetHeight",["$rootScope",function(e){return{restrict:"C",link:function(a,t){$(t).ready(function(){e.canvas_width=$(this).width(),console.log("uiGetHeight => ",e.canvas_width)}),a.$on("resizestop",function(){e.canvas_width=$(".ui-get-height").width(),console.log("resizestop : uiGetHeight => ",e.canvas_width)})}}}]),app.directive("uiSetHeight",["$rootScope",function(e){return{restrict:"C",link:function(a,t,o){function n(){var a=e.canvas_width/4,n=o.smallHeight,i=n*a;$(t).css("height",i),console.log("newHeight",i);var r=$(".ui-platform-mw").css("height").replace("px",""),s=parseInt(r)+parseFloat(i)/2;$(".ui-platform-mw").css("height",s+"px")}$(t).ready(function(){n()}),a.$on("resizestop",function(){n()})}}}]),app.directive("uiInitPackery",["$rootScope",function(e){return{restrict:"C",link:function(){Pace.once("done",function(){e.packedtiles&&e.packedtiles.layout()})}}}]),define("directive.masonry",function(){}),app.directive("uiSocialCommerce",["$rootScope","$timeout","$apiSocialCommerce","$scService","$store","$state","$location","$analytics",function(e,a,t,o,n,i,r,s){return{restrict:"C",link:function(a,o,i){console.log("uiSocialCommerce"),e.showGSWindow=!1,e.floatingSearch=!1,e.abtest="",e.currentProduct="",e.cartLoading=!1,a.multiPurchaseNotAllowed=!1,a.addToCartObj={},a.addToCartObj.errorAddCartMsg="",a.$on("resizestop",function(){}),$(window).on("scrollstop",function(){e.$broadcast("scrollstop")}),a.$on("$stateChangeSuccess",function(a,t,o,n,i){e.$broadcast("ON_CHANGESTATE"),o.category&&(e.currentCategory=o.category),o.ab?e.abtest=!0:e.abtest=!1,Pace.once("done",function(){$("body").focus(),console.log("scroll once on top.."),$("body").animate({scrollTop:0},"fast")}),e.config&&e.config.feature_locks.user_agreement&&e.currentUser&&(r.path().indexOf("shopping")>-1||r.path().indexOf("gaming")>-1)&&(console.log("$rootScope.currentUser.tnc_agreemen "+e.currentUser.tnc_agreement+"..."+r.path()),2!=e.currentUser.tnc_agreement&&3!=e.currentUser.tnc_agreement||(e.closeWelcome(),e.showTocBox=!0,$("#tocbox").foundation("reveal","open")))}),a.cartdata={},a.cartdata.localized=null,a.cartdata.finalTotalPrice=0,a.cartdata.price_loading=!1,a.cartdata.hasProductNotAvailable=!1,a.listShoppingCartWidget=function(){var o=n.getValue("currentUser");if(o&&o.id||(o=n.getValue("tempUser")),o.id){var i={page:1};o.shipping_addresses&&o.shipping_addresses.length&&(i.address=o.shipping_addresses[o.shipping_addresses.length-1],a.cartdata.shoppingCartMetadata&&a.cartdata.shoppingCartMetadata.shipping_data&&o.shipping_addresses[a.cartdata.shoppingCartMetadata.shipping_data.selected_address_index]&&(i.address=o.shipping_addresses[a.cartdata.shoppingCartMetadata.shipping_data.selected_address_index])),a.cartdata.price_loading=!0,console.log("passing data with address into cart",i),t.listShoppingCart(i,function(t,o){if(console.log("listShoppingCart + address : ",o),a.cartdata.price_loading=!1,!t&&o&&o.status.success){a.cartdata.hasProductNotAvailable=!1,o.temporary_user_auth_token&&(n.setValue("tempUser",o.temporary_user),n.setTempToken(o.temporary_user_auth_token),a.temporary_user_auth_token=n.getTempToken(),a.tempUser=n.getValue("tempUser"));var i=angular.copy(a.cartdata.shoppingCartMetadata);a.cartdata.shoppingCartMetadata=o.shoppingCartMetadata,o.shoppingCartItems&&o.shoppingCartItems.length&&(e.listShoppingCartItems||(e.listShoppingCartItems=[]),a.cartdata.shoppingCartMetadata=o.shoppingCartMetadata,angular.forEach(o.shoppingCartItems,function(e,t){"shipping_option_not_available"!=e.errorCode&&"product_not_available"!=e.errorCode||(a.cartdata.hasProductNotAvailable=!0),a.cartdata.shoppingCartMetadata&&a.cartdata.shoppingCartMetadata.itemShippings&&a.cartdata.shoppingCartMetadata.itemShippings[e.shopping_cart_item_id]&&(e.shippoProvider=angular.copy(a.cartdata.shoppingCartMetadata.itemShippings[e.shopping_cart_item_id]))})),e.listShoppingCartItems=o.shoppingCartItems,a.cartdata.grossTotalPrice=o.totalPrice,a.cartdata.finalTotalPrice=o.totalPrice,a.cartdata.localized=o.localized,a.$broadcast("totalPrices",{finalTotalPrice:o.totalPrice,localized_final_price:o.localized.final_price});try{a.listShoppingCartItemsCount=o.shoppingCartItems.length}catch(t){a.listShoppingCartItemsCount=0}}return e.cartLoading=!1,console.log("addToCart --> done..cartLoading "+e.cartLoading),i&&i.shipping_data.selected_address_index==o.shoppingCartMetadata.shipping_data.selected_address_index||!o.shoppingCartMetadata||!o.shoppingCartMetadata.shipping_data?void 0:(console.log(" aaa",o.shoppingCartMetadata.shipping_data.selected_address_index),a.cartdata.shoppingCartMetadata.shipping_data.selected_address_index=o.shoppingCartMetadata.shipping_data.selected_address_index,void a.listShoppingCartWidget())})}},a.listShoppingCartWidget(),a.addToCartPress=_.debounce(function(t,o,n,i,r,s){e.$broadcast("ON_ADDTOCART"),a.addToCart(t,o,n,i,r,s)},500,!0),a.addToCart=function(o,i,r,s,c,l){a.addToCartObj.errorAddCartMsg="",console.log("addToCart --> in directive "+e.cartLoading);var d=o,u=s,m={},p={product_id:parseInt(d),product_listing_id:parseInt(i),quantity:parseInt(r)};l&&l.referrernetwork&&(m.network_shortcut=l.referrernetwork),_.isEmpty(u)||(p.variants=JSON.stringify(u),c&&(p.product_variants_combination_id=c)),p.metadata=JSON.stringify(m),a.cartdata.price_loading=!0,t.addToCart(p,function(t,o){a.cartdata.price_loading=!1,e.cartLoading=!1,!t&&o.status.success?(o.temporary_user_auth_token&&(n.setValue("tempUser",o.temporary_user),n.setTempToken(o.temporary_user_auth_token),a.temporary_user_auth_token=n.getTempToken(),a.tempUser=n.getValue("tempUser")),a.listShoppingCartWidget(),e.$broadcast("SHOWQUICKCART")):o&&o.status&&o.status.code&&("MULTI_PURCHASE_NOT_ALLOWED"==o.status.code||"CAN_PURCHASE_SINGLE_QUANTITY"==o.status.code?a.multiPurchaseNotAllowed=!0:a.addToCartObj.errorAddCartMsg=o.status.err)})}}}}]),app.directive("uiDropBox",[function(){return{restrict:"C",link:function(e,a,t){$(a).foundation("dropdown"),e.$on("INIT_DROPDOWN",function(){$(a).foundation("dropdown")})}}}]),app.directive("uiGage",["$timeout",function(e){return{restrict:"C",link:function(e,a,t){function o(){return(65536*(1+Math.random())|0).toString(16).substring(1)}e.gageId="";var n=50;e.gageId="gage"+o(),e.init=function(){if(console.log("scope.init:  "+e.gageId),$(a).not(":empty")&&$(a).empty(),document.getElementById(e.gageId)){new JustGage({id:e.gageId,value:n,min:0,max:100,gaugeWidthScale:1.1,title:"Review Meter",label:"",showInnerShadow:!0,levelColorsGradient:!0,showMinMax:!1,levelColors:["#83ba30"],gaugeColor:"#d84141"})}},t.$observe("id",function(a){console.log("attrs.$observe id : "+a),""!=a&&e.init()}),t.$observe("metervalue",function(a){n=a?a:0,0==n&&(n=50),n=Math.floor(n),e.init()}),e.$on("resizestop",function(){e.init()})}}}]),app.directive("uiLandingPage",["$rootScope","$scService","$timeout",function(e,a,t){return{restrict:"C",link:function(a,t,o){e.indexGroupLast=5,e.currentGroupIndex=1,console.log("uiLandingPage"),a.$watch("landingPageDetails",function(e){console.log("landingPageDetails update..",e),e&&console.log("update? landingPageDetails ",e)})}}}]),app.directive("uiSignupBoxWindow",["$timeout","$rootScope","$apiSocialCommerce",function(e,a,t){return{restrict:"C",link:function(e,a,o){t.getSignUpGame({},function(a,t){!a&&t.status.success&&(e.signupItem.game={},e.signup_popup_game.game=t.game,e.signupItem.game.game_details=e.signup_popup_game.game,e.signupItem.game.game_details&&(e.gamepath="/_partials/socialcommerce/games/"+e.signupItem.game.game_details.metadataObj.game_name))})}}}]),app.directive("uiProductSearchBox",["$timeout","$store","$rootScope",function(e,a,t){return{restrict:"C",scope:{data:"=productdata",sp:"=spage",sf:"=sfilter",skey:"=skey"},templateUrl:"/_partials/socialcommerce/search/search-group-collection/_product-box",link:function(e,o,n){e.animate=!1,e.currency=a.getValue("globalCurrency"),e.$watch("data",function(a){a&&(e.animate=!0,e.isCollection="productCollection"==a.type,t.currentPageParams.spage=e.sp,t.currentPageParams.sfilter=e.sf,t.currentPageParams.skey=e.skey)}),e.getSearchItemFriendlyUrl=function(e,a){var o=t.urlEncodedStr(e)+"-"+a;return o}}}}]),app.directive("uiProductSearchPoster",["$timeout","$store","$rootScope",function(e,a,t){return{restrict:"C",scope:{data:"=productdata",sp:"=spage",sf:"=sfilter",skey:"=skey"},templateUrl:"/_partials/socialcommerce/search/search-group-collection/_product_poster",link:function(e,o,n){e.animate=!1,e.currency=a.getValue("globalCurrency"),e.$watch("data",function(a){a&&(e.animate=!0,e.isCollection="productCollection"==a.type,t.currentPageParams.spage=e.sp,t.currentPageParams.sfilter=e.sf,t.currentPageParams.skey=e.skey)}),e.getSearchItemFriendlyUrl=function(e,a){var o=t.urlEncodedStr(e)+"-"+a;return o}}}}]),app.directive("uiProductBox",["$timeout","$store","$rootScope",function(e,a,t){return{restrict:"C",scope:{data:"=productdata"},templateUrl:"/_partials/socialcommerce/common/product-group-collection/_product-box",link:function(e,o,n){e.animate=!1,e.currency=a.getValue("globalCurrency"),e.itemUrl="",console.log("scope.currency - "+JSON.stringify(e.currency)),e.$watch("data",function(a){a&&(e.animate=!0,e.isCollection="productCollection"==a.type)}),e.getSearchItemFriendlyUrl=function(e,a){var o=t.urlEncodedStr(e)+"-"+a;return o}}}}]),app.directive("uiHeader",["$timeout","$rootScope",function(e,a){return{restrict:"C",link:function(t,o,n){t.SHOW_QUICKCART=!1,t.SHOW_USERMENU=!1,t.SHOW_UPSALE=!1,t.$on("SHOWQUICKCART",function(){t.showQuickCart()}),t.$on("OPENGETSTARTED",function(){return a.showGSWindow?void e(function(){$("#getstarted_email").focus()},1500):void t.showGetStarted()}),t.showMobileProfileMenu=function(){a.$broadcast("ON_PROFILE_MENU_CLICKED")},t.hideProfileMenu=function(){a.$broadcast("HIDE_PROFILE_MENU")},t.showGetStarted=function(){function t(e){a.$apply(function(){0==$(e.target).closest(".get-started-canvas").length&&0==$(e.target).closest(".get-started").length&&(a.showGSWindow=!1)}),$(document.body).off("click",t)}a.$broadcast("HIDE_MOBILE_MENU"),a.showGSWindow=!a.showGSWindow,e(function(){$("#getstarted_email").focus()},1500),e(function(){$(document.body).on("click",t)})},t.showQuickCart=function(){t.SHOW_QUICKCART=!0,t.SHOW_USERMENU=!1,t.SHOW_UPSALE=!1},t.showUserMenu=function(){t.SHOW_QUICKCART=!1,t.SHOW_USERMENU=!0,t.SHOW_UPSALE=!1},t.showUpsale=function(){t.SHOW_QUICKCART=!1,t.SHOW_USERMENU=!1,t.SHOW_UPSALE=!0},t.closeAll=function(){t.SHOW_QUICKCART=!1,t.SHOW_USERMENU=!1,t.SHOW_UPSALE=!1},t.$on("ON_ADDTOCART",function(){t.quickAdd=!0}),t.closeCart=function(){1==t.quickAdd?(t.quickAdd=!1,e(function(){t.closeAll()},5e3)):t.closeAll()}}}}]),app.directive("uiSearchCollectionGroup",["$rootScope","$timeout","$state",function(e,a,t){return{restrict:"C",templateUrl:"/_partials/socialcommerce/search/search-group-collection",link:function(t,o,n){t.isLoading=!0,t.templateUrl="/_partials/socialcommerce/search/search-group-collection/group-1",console.log("uiSearchCollectionGroup "),e.currentGroupIndex=e.currentGroupIndex+1,e.currentGroupIndex>=e.indexGroupLast&&(e.currentGroupIndex=1),t.checkBreakPoint=function(){a(function(){var e=$(o).find(".breakpoint").visible();t.isLoading&&e&&(t.isLoading=!1)},300)},t.init=function(){t.checkBreakPoint(),t.$on("scrollstop",function(){console.log("uiProductCollectionGroup: scrollstop"),t.checkBreakPoint()})},Pace.on("done",function(){t.init()}),e.ON_STATE_CHANGED&&a(function(){t.init()},300)}}}]),app.directive("uiProductCollectionGroup",["$rootScope","$timeout","$state",function(e,a,t){return{restrict:"C",templateUrl:"/_partials/socialcommerce/common/product-group-collection",link:function(t,o,n){t.isLoading=!0,t.collectionid=n.collectionid,t.productlist={},t.collection={},t.templateUrl="/_partials/socialcommerce/common/product-group-collection/group-"+e.currentGroupIndex,e.currentGroupIndex=e.currentGroupIndex+1,e.currentGroupIndex>=e.indexGroupLast&&(e.currentGroupIndex=1),t.checkBreakPoint=function(){a(function(){var e=$(o).find(".breakpoint").visible();if(t.isLoading&&e){console.log("Fetch Data now");var a={id:n.collectionid};t.getData(a,function(e){console.log("group collection data",e),t.productlist=e.products,t.collection=e.productCollectionDetail.productCollection,console.log("collection:",t.collection),t.isLoading=!1})}},300)},t.init=function(){t.checkBreakPoint(),t.$on("scrollstop",function(){console.log("uiProductCollectionGroup: scrollstop"),t.checkBreakPoint()})},Pace.on("done",function(){t.init()}),e.ON_STATE_CHANGED&&a(function(){t.init()},300)}}}]),app.directive("uiScYuupayPayments",["$rootScope","$timeout","$apiSocialCommerce","$scService","$store","$state","$location","$sce",function(e,a,t,o,n,i,r,s){return{restrict:"C",link:function(a,o,n){console.log("uiScYuupayPayments $state",i.params),a.token_id=i.params.token_id,a.invoice_uuid=i.params.invoice_uuid,a.yuupay_optionlist="",a.invoice_details={},a.isPaymentError=!1,a.isCashOnDelivery=!1,a.payment_error_message="",a.actionUrl=s.trustAsResourceUrl((1==e.config.assets.enabled_ssl&&""!=e.config.assets.base_url?"http:":"")+e.config.assets.base_url+e.config.payment_settings.yuupay.return_url+a.invoice_uuid),t.getInvoicesDetails({uuid:a.invoice_uuid},function(t,o){!t&&o.status.success?(2!=o.invoice.status&&i.go("sc_user.orderdetails",{id:o.invoice.invoice_uuid}),a.invoice_details=o.invoice,console.log(" ..data.invoice.status  "+o.invoice.status),11==o.invoice.status?a.isCashOnDelivery=!0:1!=o.invoice.status&&(a.isPaymentError=!0,a.payment_error_message=$("#general-error-message:first").text()),console.log(o.invoice.status+" data.invoice.status  "+a.isPaymentError),null!=o.invoice.coupon&&e.$broadcast("COUPON_USED_CLEAR",{newval:o.invoice.coupon.code})):(a.isPaymentError=!0,t?a.payment_error_message=$("#general-error-message:first").text():o.status.err&&(a.payment_error_message=o.status.err),console.log(" Err isPaymentError "+a.isPaymentError))}),a.getTrustedFormAction=function(e){return e?s.trustAsUrl(e):""},a.createYuuPayOptionList=function(){a.yuupay_optionlist=" ";for(var t=0;t<e.config.payment_settings.yuupay.payment_options.length;t++)a.yuupay_optionlist=a.yuupay_optionlist+e.config.payment_settings.yuupay.payment_options[t]+" "},e.config&&""==a.yuupay_optionlist&&a.createYuuPayOptionList()}}}]),app.directive("uiScPaymentsResponse",["$rootScope","$timeout","$apiSocialCommerce","$scService","$store","$state","$location","$sce","$interval","$analytics",function(e,a,t,o,n,i,r,s,c,l){return{restrict:"C",link:function(o,r,s){o.invoice_uuid=i.params.invoice_uuid,o.invoice_details={},o.payment_error_message="",o.payment_success_message="",o.payment_response_loading=!0,o.isPaymentError=!1,o.txid=i.params.parent_txid,o.isCashOnDelivery=!1,o.pendingInterval=void 0;var d=function(e){return!(1==e.status||2==e.status||!e.paymentDetails||6!=e.payment_type||"01"!=e.paymentDetails.code)};o.viewInvoice=function(){o.isPending=!1,o.pendingInterval&&(c.cancel(o.pendingInterval),o.pendingInterval=void 0),a(function(){$("#continuetoinvoice_btn")[0].click()},1)},console.log("uiScPaymentsResponse ... ",i.params.parent_txid),o.checkInvoice=function(){var a={uuid:o.invoice_uuid};i.params.parent_txid&&(a.txid=i.params.parent_txid),t.getInvoicesDetails(a,function(a,t){if(!a&&t.invoice){if(console.log(" invoice status :"+t.invoice.status),d(t.invoice))return o.$broadcast("timer-clear"),void i.go("sc_nibss-mandate-payment",{invoice_uuid:t.invoice.invoice_uuid,err:t.invoice.paymentDetails.message});if(o.invoice_details=t.invoice,o.isPaymentError=!1,o.isPending=!1,o.payment_response_loading=!1,1==t.invoice.status||11==t.invoice.status){11==t.invoice.status&&(o.isCashOnDelivery=!0),null!=t.invoice.coupon&&e.$broadcast("COUPON_USED_CLEAR",{newval:t.invoice.coupon.code}),e.$broadcast("USER_ZOOCASH_UPDATE",{zoocash:t.invoice.user.zoocash}),o.addFBTrackPixel(e.config.fb_tracking_pixel.sale_confirm_id,t.invoice.totalPrice),t.invoice.paymentDetails&&t.invoice.paymentDetails.message&&(o.payment_success_message=t.invoice.paymentDetails.message),c.cancel(o.pendingInterval),o.pendingInterval=void 0;var r=n.getSessionValue("purchase_"+t.invoice.invoice_uuid);if(!r){console.log("purchase_invoice----",r);var s=[];angular.forEach(t.invoice.items,function(e,a){var t={id:e.product.product_id,name:e.product.title_language,sku:e.product.sku_reference_id,category:"",price:e.productListing.final_price,quantity:e.quantity,dimension1:"",variant:""};e.product.hashTags&&(t.category=e.product.hashTags.join("_")),e.variants&&(t.variant=_.values(e.variants).join("_")),e.metadata&&e.metadata.network_shortcut&&(t.dimension1=e.metadata.network_shortcut),s.push(t)}),console.log("gaProducts",s),l.eventTrack("ecommerce:purchase",{id:t.invoice.invoice_uuid,affiliation:"",revenue:t.invoice.total_amount,shipping:t.invoice.total_shipping_costs,tax:t.invoice.total_tax,products:s}),n.setSessionValue("purchase_"+t.invoice.invoice_uuid,1)}}else 2==t.invoice.status?(o.isPending=!0,o.pendingInterval=c(function(){return o.isPending?void o.checkInvoice():(c.cancel(o.pendingInterval),void(o.pendingInterval=void 0))},5e3)):(o.isPaymentError=!0,o.isPending=!1,c.cancel(o.pendingInterval),o.pendingInterval=void 0,t.invoice.paymentDetails?t.invoice.paymentDetails.code&&"-098"==t.invoice.paymentDetails.code?o.payment_error_message=$("#server-not-available:first").text():t.invoice.paymentDetails.message&&(o.payment_error_message=t.invoice.paymentDetails.message):o.payment_error_message=$("#general-error-message:first").text())}else o.isPaymentError=!0,o.isPending=!1,o.payment_response_loading=!1,c.cancel(o.pendingInterval),o.pendingInterval=void 0,a?o.payment_error_message=$("#general-error-message:first").text():t.status.err&&(o.payment_error_message=t.status.err)})},o.checkInvoice()}}}]),app.directive("uiProductDashboard",["$rootScope","$timeout","$apiSocialCommerce","$scService","$store","$state","$location",function(e,a,t,o,n,i,r){return{restrict:"C",templateUrl:"/_partials/socialcommerce/common/product-dashboard",link:function(e,t,o){e.dashboard_height=0,e.calculate_height=function(){a(function(){e.dashboard_height=Math.max(document.documentElement.clientHeight,window.innerHeight||0),e.dashboard_height=e.dashboard_height/2,$(t).find(".order-list").css("min-height",e.dashboard_height/2),$(t).find(".order-list").css("max-height",e.dashboard_height)},200)},e.calculate_height(),e.$on("resizestop",function(){e.calculate_height()}),console.log("uiProductDashboard")}}}]),app.directive("uiProductReviewInput",["$apiSocialCommerce","$rootScope","$apiService",function(e,a,t){return{restrict:"C",templateUrl:"/_partials/socialcommerce/_product-review-input",link:function(o,n,i){console.log("uiProductReviewInput"),o.review={};var r={};o.review.ready=!0,o.review.uploaded_images=[],o.selectSticker=function(e){o.review.sticker=e,o.$broadcast("IMAGEFILL_INIT"),$(".f-dropdown").removeClass("open").css("left","-99999px"),"undefined"==typeof o.review.text&&(o.review.text="")},o.removeSticker=function(){o.review.sticker={},$(".f-dropdown").removeClass("open").css("left","-99999px"),""===o.review.text&&(o.review.text=void 0)},o.evaluate_link=function(e){if(o.review.share_fileupload_error=!1,o.review.share_fileupload_size_error=!1,!o.review.uploaded_images.length){var n=a.extractLink(e),i=[];n.length||(o.review.preview_links=[]);var r=0;angular.forEach(n,function(e,a){t.articles.articleUrlCache(e,function(e,a){if(a.info&&a.info.thumbnail&&i.push(a.info),r+=1,r==n.length&&(o.review.preview_links=[],i.length)){var t=_.sortBy(i,function(e){return"video"!=e.type});o.review.preview_links.push(t[0]),o.$broadcast("IMAGEFILL_INIT")}})})}},o.addReviewPhotoUploadOptions={url:"/api/media/upload",maxFileSize:5e6,singleFileUploads:!0,maxNumberOfFiles:1,autoUpload:!0,formData:{resize:[200,400,800]},pasteZone:null,add:function(e,a){o.review.share_fileupload_error=!1,o.review.share_fileupload_size_error=!1;var t=!1,n=/^image\/(gif|jpe?g|png)$/i;a.originalFiles[0]&&a.originalFiles[0].type&&!n.test(a.originalFiles[0].type)&&(t=!0),a.originalFiles[0]&&a.originalFiles[0].size&&a.originalFiles[0].size>5e6&&(o.review.share_fileupload_size_error=!0,t=!0),t||a.submit(),o.$apply()},start:function(e){},stop:function(e){},done:function(e,t){o.review.uploaded_images[0]=a.config.cdn_url+t._response.result.fsRef,o.review.upload_preview_loading=!1,o.$apply(),o.$broadcast("IMAGEFILL_INIT")},fail:function(e,a){o.review.share_fileupload_error=!0,o.review.upload_preview_loading=!1,o.$apply()},change:function(e,a){},progress:function(e,a){o.review.upload_preview_loading=!0,o.$apply()}},$(document).off("touchstart click","#addPhotoLink").on("touchstart click","#addPhotoLink",function(e){e.stopPropagation(),e.preventDefault(),e.handled=!0,$("#reviewaddphoto").click()}),o.uploadfile_link=function(){$("#reviewaddphoto").click();var e=new UAParser,t=e.getResult();"mobile"!=a.device&&"mobile"!=t.device.type||$timeout(function(){$("#reviewaddphoto").click()},1)},o.removeUpload=function(e){o.review.uploaded_images.splice(e,1),o.evaluate_link(o.review.text?o.review.text:""),$(".f-dropdown").removeClass("open").css("left","-99999px")},o.createReview=function(){if($.isEmptyObject(o.review.text))return void(o.IsValidReview=!0);if((0!=o.review.text.trim().length||!_.isEmpty(o.review.sticker)||o.review.uploaded_images.length)&&o.review.ready){o.review.ready=!1,o.IsValidReview=!1,o.review.attachments=[];var e="";if(o.review.uploaded_images.length?e=o.review.uploaded_images[0]:o.review.preview_links&&o.review.preview_links.length&&(e=o.review.preview_links[0].link_url),e)t.articles.articleUrlCache(e,function(e,a){a.info&&o.review.attachments.push(a.info),
"undefined"!=typeof o.review.text&&""!==o.review.text||(o.review.text=" "),o.sendReview()});else{o.review.text=o.review.text?o.review.text:"";var n=a.extractLink(o.review.text),i=[],r=0;n.length?angular.forEach(n,function(e,a){t.articles.articleUrlCache(e,function(e,a){if(a.info&&a.info.thumbnail&&i.push(a.info),r+=1,r==n.length){if(i.length){var t=_.sortBy(i,function(e){return"video"!=e.type});o.review.attachments.push(t[0])}"undefined"!=typeof o.review.text&&""!==o.review.text||($scope.review.text=" "),o.sendReview()}})}):o.sendReview()}}},o.sendReview=function(){r.product_id=o.productArticle.product.product_id,r.attachments=o.review.attachments,r.action="dislike"!=o.review.action?"like":"dislike",r.text=o.review.text,r.sticker_id=o.review.sticker&&o.review.sticker.sticker_id?o.review.sticker.sticker_id:"",e.createReview(r,function(e,a){if(o.review.ready=!0,!e&&a.status.success){var t=a.comment;if(!t)return;o.productArticle.comments||(o.productArticle.comments=[]);var n=_.find(o.productArticle.comments,function(e){return e.comment_id==t.comment_id});n||(o.productArticle.comment_count+=1,o.productArticle.comments.unshift(t)),o.$emit("MASONRY_INIT"),r={},o.review.text="",o.review.attachments="",o.review.action="",o.review.sticker_id="",o.review.uploaded_images=[],o.review.preview_links=[],o.review.sticker={}}})}}}}]),app.directive("uiReviewInputBox",[function(){return{restrict:"C",link:function(e,a,t){console.log("uiReviewInputBox")}}}]),app.directive("uiMeter",["$timeout",function(e){return{restrict:"C",link:function(e,a,t){console.log("uiMeter")}}}]),app.directive("uiMasonCanvas",["$timeout",function(e){return{restrict:"C",link:function(a,t,o){console.log(" uiMasonCanvas"),a.loaded=!1,a.initMason=function(){if(1==a.loaded)return!1;var t="#"+o.id,n=document.querySelector(t);a.masonry=new Packery(n,{itemSelector:".tile-box",gutter:0}),a.loaded=!0,e(function(){$(document).foundation()},1)},a.relayout=function(){a.masonry.layout()},a.$on("MASONRY_INIT",function(){console.log(" MASONRY_INIT"),e(function(){a.loaded=!1,a.initMason()},300)}),a.$on("TABSELECTED",function(){console.log(" TABSELECTED"),e(function(){a.loaded=!1,a.initMason()},300)}),a.$on("MASONRY_RELAYOUT",function(){console.log(" MASONRY_RELAYOUT"),a.relayout()})}}}]),app.directive("uiMasonCanvasItem",["$rootScope",function(e){return{restrict:"C",link:function(e,a,t){e.$last&&(console.log("uiMasonCanvasItem"),e.$emit("MASONRY_INIT"))}}}]),app.directive("uiFoundation",[function(){return{restrict:"c",link:function(e,a,t){$(a).foundation()}}}]),app.directive("uiReady",["$timeout",function(e){return{restrict:"A",link:function(a,t,o){a.$watch("ready",function(t){t&&(e(function(){a.mySwiper=new Swiper(".swiper-container",{slidesPerView:a.displaySlideNum,slidesPerViewFit:!0,autoResize:!0}),a.$apply()},1),e(function(){$(document).foundation({dropdown:{is_hover:!0}})},100))})}}}]),app.directive("uiInvoiceReady",["$timeout",function(e){return{restrict:"A",link:function(a,t,o){a.$watch("invoiceReady",function(t){t&&e(function(){a.mySwiper=new Swiper(".ui-order-history .swiper-container",{slidesPerView:a.displaySlideNum,slidesPerViewFit:!0,autoResize:!0}),console.log("mySwiper..."+a.mySwiper)},1)})}}}]),app.directive("uiZoocashReady",["$timeout",function(e){return{restrict:"A",link:function(a,t,o){console.log("uiZoocashReady directive "),a.$watch("transactionListReady",function(t){console.log("transactionListReady "+t),t&&e(function(){a.mySwiper=new Swiper("#zooswiper",{slidesPerView:a.displaySlideNum,slidesPerViewFit:!0,autoResize:!0}),console.log("mySwiper..."+a.mySwiper)},1)})}}}]),app.directive("uiBusinessListing",["$timeout",function(e){return{restrict:"A",link:function(a,t,o){a.$watch("merchantListReady",function(t){t&&e(function(){a.mySwiper=new Swiper(".ui-business-listing .swiper-container",{slidesPerView:a.displaySlideNum,slidesPerViewFit:!0,autoResize:!0}),console.log("mySwiper..."+a.mySwiper)},1)})}}}]),app.directive("uiOrderHistory",["$timeout",function(e){return{restrict:"C",link:function(a,t,o){console.log("uiOrderHistory"),a.thankyouFooter=!1,a.checkFooterVisibility=function(){e(function(){a.thankyouFooter=!$(t).find(".thank-you-pointer").visible()},300)},a.$on("resizestop",function(){a.checkFooterVisibility()}),a.$on("ON_NEW_COMMENT",function(){console.log("ON_NEW_COMMENT @ directive"),e(function(){var e=$(".content-wrap").height();$(".product-inquiry-modal").scrollTop(e)},300)}),a.$on("resizestop",function(){a.checkFooterVisibility()}),a.$on("scrollstop",function(){a.checkFooterVisibility()})}}}]),app.directive("uiDropdownAnimDown",["$timeout",function(e){return{link:function(a,t,o){t.on("mouseenter",function(a){a.preventDefault();var o=$("#"+t.attr("data-dropdown"));o.hasClass("open")||e(function(){o.addClass("animated bounceInDown"),e(function(){o.removeClass("animated bounceInDown")},750)},1),$(".ui-breadcrumbs-dropdown ul").each(function(e,a){$(this).is("#"+t.attr("data-dropdown"))||($(this).removeClass("animated bounceInDown"),$(this).removeClass("open"),$(this).css("left","-99999px"),$(this).trigger("closed"))})})}}}]),app.directive("uiDropdownAnimLeft",["$timeout",function(e){return{link:function(a,t,o){t.on("mouseenter",function(a){a.preventDefault();var o=$("#"+t.attr("data-dropdown"));o.hasClass("open")||e(function(){o.addClass("animated bounceLeft"),e(function(){o.removeClass("animated bounceLeft")},750)},1),$(".ui-breadcrumbs-dropdown").each(function(e,a){$(this)!=o&&$(this).hasClass("drop-right")&&($(this).removeClass("animated bounceLeft"),$(this).removeClass("open"),$(this).css("left","-99999px"),$(this).trigger("closed"))})})}}}]),app.directive("uiCatMenuAnim",["$timeout",function(e){return{link:function(a,t,o){t.on("click",function(a){a.preventDefault();var t=$("#"+o.uicat);t.hasClass("show fadeInLeft")?(t.removeClass("show fadeInLeft"),t.addClass("fadeOutUp"),e(function(){t.addClass("hide")},500)):(t.removeClass("hide fadeOutUp"),t.addClass("show fadeInLeft"))})}}}]),app.directive("uiTab",["$rootScope","$location","$anchorScroll","$timeout",function(e,a,t,o){return{restrict:"C",link:function(n,i,r){n.selectedTab=1,n.tabready=!0,Pace.once("done",function(){n.tabready=!0}),n.selectTab=function(i,r){n.selectedTab=i,e.$broadcast("TABSELECTED"),1==i&&r&&(a.hash("productfulldesc"),o(function(){t()},300)),o(function(){n.seeMore=$("#reviewlist").height()>600},500)},n.$on("SELECT_TAB",function(e,a){n.selectTab(a)})}}}]),app.directive("uiGallery",[function(e){return{restrict:"C",link:function(e,a,t){e.viewedItem={},e.currentViewIndex=0,e.currentViewType="image",e.viewGallery=function(a,t){console.log("item viewed"),e.hidePrevButton=!1,e.hideNextButton=!1,"video"==t?(e.viewedItem=e.productArticle.product.video_attachments_language[a],a>=e.productArticle.product.video_attachments_language.length-1&&(e.hideNextButton=!0),!(0>=a)||e.productArticle.product.image_attachments_language&&e.productArticle.product.image_attachments_language.length||(e.hidePrevButton=!0)):(e.viewedItem=e.productArticle.product.image_attachments_language[a],!(a>=e.productArticle.product.image_attachments_language.length-1)||e.productArticle.product.video_attachments_language&&e.productArticle.product.video_attachments_language.length||(e.hideNextButton=!0),0>=a&&(e.hidePrevButton=!0)),e.currentViewIndex=a,e.currentViewType=t,$("#modalgallery").foundation("reveal","open",{dismissmodalclass:"close-reveal-modal",close_on_background_click:!1})},e.prevViewItem=function(){var a=e.currentViewIndex,t=e.currentViewType;if(!("image"==e.currentViewType&&e.currentViewIndex<=0)){if("video"==e.currentViewType&&0==e.currentViewIndex){if(!e.productArticle.product.image_attachments_language.length)return;a=e.productArticle.product.image_attachments_language.length-1,t="image"}else a-=1;e.viewGallery(a,t)}},e.nextViewItem=function(){var a=e.currentViewIndex,t=e.currentViewType;if(!("video"==e.currentViewType&&e.currentViewIndex>=e.productArticle.product.video_attachments_language.length-1)){if("image"==e.currentViewType&&e.currentViewIndex>=e.productArticle.product.image_attachments_language.length-1){if(!e.productArticle.product.video_attachments_language||!e.productArticle.product.video_attachments_language.length)return;a=0,t="video"}else a+=1;e.viewGallery(a,t)}}}}}]),app.directive("uiProductInfo",["$timeout","$scService","$sce","$rootScope",function(e,a,t,o){return{restrict:"C",scope:!0,link:function(n,i,r){n.widgetinfo=!1,n.mySwiper,n.selectThumbnail="",o.productConfirm={discount:"",name:"",photo:"",merchant:"",description:"",counter:10},n.closeGameConfirm=function(){$("#game_confirm").foundation("reveal","close"),$(".reveal-modal-bg").css("display:none")},n.selectImage=function(e){n.selectThumbnail=e},n.clearImageSelect=function(){n.selectThumbnail=""},n.$on("scrollstop",function(){e(function(){var e=$(i).find(".product-info-breakpoint").visible();1==e?n.widgetinfo=!1:n.widgetinfo=!0},100)}),n.$watch("totalImg",function(e){console.log("UI Product INFO totalImg : "+e),e>1&&n.initProductGallery(e)}),n.$on("resizestop",function(){console.log(" UI Product INFO resizestop : "),n.initProductGallery(n.totalImg)}),n.initProductGallery=function(a){n.mySwiper&&($(".swiper-container").undelegate(),$(".swiper-container").unbind(),$(".swiper-slide").removeAttr("style"),$(".swiper-wrapper").removeAttr("style"),n.currentIndex=0,n.mySwiper=void 0),e(function(){var e=parseFloat($(".thumbnails").width()),t=parseFloat($(".swiper-slide").width());n.displayNum=parseInt(e/t)-1,a>n.displayNum&&(n.mySwiper=new Swiper(".swiper-container",{slidesPerView:n.displayNum+1,slidesPerViewFit:!0,autoResize:!1,roundLengths:!0}))},3)},n.toHTML=function(e){var a=t.trustAsHtml(e);return a},n.swipeGallery=function(e){console.log("swipeGallery scope.mySwiper "+n.mySwiper),n.currentIndex>e?n.mySwiper.swipePrev():n.mySwiper.swipeNext(),n.currentIndex=e},n.scrollTop=function(){a.scrollTop()},n.play=function(e,a){$(".game-frame").foundation("reveal","open")}}}}]),app.directive("uiProductPath",["$rootScope","$location","$state","$timeout","$scService",function(e,a,t,o,n){return{restrict:"C",link:function(a,o,i){var r="",s=t.params.collectid;a.productCollectionDetail&&(s=e.urlEncodedStr(a.productCollectionDetail.productCollection.shortcut)+"-"+a.productCollectionDetail.productCollection.product_collection_id,console.log(" productid :"+r+"   collectionurl :"+s)),r=e.urlEncodedStr(a.item.productArticle.product.title_language)+"-"+a.item.productArticle.product.product_id;var c="/shopping/product/",l="",d="productInfo";"collectionList"===t.current.name?(c="/shopping/collection/"+s+"/"+r,d="collectionPrdInfo"):t.params.category?(c=c+t.params.category+"/"+(t.params.path?t.params.path+"/":"")+r,d="categoryPrdInfo"):c+=r,a.product_path=c+l,a.getCountryName=function(e){return n.getCountryName(e)}}}}]),app.directive("uiProductReview",[function(){return{restrict:"C",templateUrl:"/_partials/socialcommerce/_product-reviews",link:function(e,a,t){}}}]),app.directive("uiCategoryList",["$scService","$rootScope","$timeout","$state",function(e,a,t,o){return{restrict:"C",link:function(n,i,r){console.log("uiCategoryList"),n.currentDict=[],n.show_menucanvas=!1,a.floatingSearch=!1,a.mobileProfileMenu=!1,n.currentSubDirectory={},n.getCategory(),n.currentState=o.current.name,n.leftCategoryDropdown=!1,n.rightCategoryDropdown=!1,n.cursor=!1,n.$on("HIDE_MOBILE_MENU",function(){a.mobilemenu=!1}),n.$on("ON_MENU_CLICKED",function(){a.mobilemenu=!a.mobilemenu,a.mobileProfileMenu=!1,a.mobilemenu?($(".main-view-holder").css("display","none"),$(".sc-footer").css("display","none")):($(".main-view-holder").css("display","block"),$(".sc-footer").css("display","block"))}),n.$on("HIDE_PROFILE_MENU",function(){n.hideProfileMenu()}),n.hideProfileMenu=function(){a.mobileProfileMenu=!1,$(".main-view-holder").css("display","block")},n.$on("ON_PROFILE_MENU_CLICKED",function(){a.mobileProfileMenu=!a.mobileProfileMenu,a.mobilemenu=!1,a.mobileProfileMenu?($(".main-view-holder").css("display","none"),$(".sc-footer").css("display","none")):($(".main-view-holder").css("display","block"),$(".sc-footer").css("display","block"))}),n.$on("ON_CART_MENU_CLICKED",function(){}),n.hideMobileMenu=function(){a.mobilemenu=!1},n.nospace=function(a){return e.noSpace(a)},n.$on("scrollstop",function(){var e=$(i).visible();0==e?a.floatingSearch=!0:a.floatingSearch=!1}),n.cursorOut=function(){n.cursor=!1},n.cursorIn=function(){n.cursor=!0},n.getOnlyWithChild=function(e){var a=[];return $(e).each(function(e,t){t&&t.children.length&&a.push(t)}),a},n.clearCategoryDetail=function(){n.currentSubDirectory={}},n.getCategoryDetail=function(e){n.currentSubDirectory.shortcut!=e.shortcut&&(n.currentSubDirectory=e,e.background_video_fsref?$("#categorybg video").attr("src",a.config.cdn_url+e.background_video_fsref):$("#categorybg video").attr("src",""),console.log("currentSubDirectory",n.currentSubDirectory)),n.currentSubDirectory&&n.currentSubDirectory.children&&0==n.currentSubDirectory.children.length&&(n.leftCategoryDropdown=!1,n.rightCategoryDropdown=!1)},n.categoryLeftHover=function(e){var a=function(){n.leftCategoryDropdown=e,n.rightCategoryDropdown=!1,n.currentSubDirectory&&n.currentSubDirectory.children&&0==n.currentSubDirectory.children.length&&(n.leftCategoryDropdown=!1,n.rightCategoryDropdown=!1)};e?t(function(){n.cursor&&a()},500):($("#categorybg video").attr("src",""),a())},n.categoryRightHover=function(e){var a=function(){n.leftCategoryDropdown=!1,n.rightCategoryDropdown=e,n.currentSubDirectory&&n.currentSubDirectory.children&&0==n.currentSubDirectory.children.length&&(n.leftCategoryDropdown=!1,n.rightCategoryDropdown=!1)};e?t(function(){n.cursor&&a()},500):($("#categorybg video").attr("src",""),a())};var s=function(e,a){console.log(a);for(var t=0;t<a.length;t++)if(a[t].shortcut===e)return a[t]};n.hoverMenu=function(a){var t=s(a,e.headerNavCat);n.currentDict=t,null!=t.children&&void 0!=t.children&&t.children.length>0?n.show_menucanvas=!0:n.show_menucanvas=!1},n.removeActive=function(){},n.closeMenu=function(){n.show_menucanvas=!1}}}}]),app.directive("uiCategoryFullList",["$timeout","$rootScope","$scService",function(e,a,t){return{restrict:"C",link:function(e,o,n){0==a.navCategoryList.length&&(a.loadNavCategory(),a.$broadcast("CATEGORY_FETCHED",a.navCategoryList)),e.categoryList=[],e.categoryMasonAr=[],e.$on("CATEGORY_FETCHED",function(a,o){console.log("uiCategoryFullList",o),e.categoryList=o,e.categoryMasonAr=t.masonArray(e.categoryList,6)})}}}]),app.directive("uiProductList",["$timeout","$rootScope",function(e,a){return{restrict:"C",link:function(a,t,o){a.$on("PRODUCTLIST_LOADED",function(){e(function(){a.animate=!0},300)})}}}]),app.directive("uiCollectionSlider",["$timeout","$rootScope",function(e,a){return{scope:{},restrict:"C",link:function(e,a,t){function o(){return(65536*(1+Math.random())|0).toString(16).substring(1)}console.log("uiCollectionSlider");var n="cl_"+o();$(a).addClass(n),e.collectionSlider=new Swiper("."+n,{speed:900,mode:"horizontal",loopAdditionalSlides:1,initialSlide:0,autoResize:!0})}}}]),app.directive("uiProductSlider",["$rootScope","$timeout",function(e,a){return{restrict:"C",link:function(e,t,o){var n=!1;e.$on("INIT_PRODUCT_BANNER",function(){e.banner=new Swiper(".swiper-container",{pagination:".pagination",paginationClickable:!0,autoplay:!0,speed:900,autoplay:4900}),n=!0}),e.$on("SLIDER_IMAGELOADED",function(e,a){0!=a.height&&$(t).css("height",a.height)}),e.$on("resizestop",function(){var e=$(t).find(".banner-image");n&&e.length>0&&a(function(){var a=e[0].height;$(t).css("height",a)},500)})}}}]),app.directive("uiImageFill",["$timeout",function(e){return{restrict:"C",link:function(a,t,o){e(function(){$(t).find("img").addClass("visible"),$(t).imagefill(),a.$on("resizestop",function(){$(t).imagefill()}),a.$on("IMAGEFILL_INIT",function(){$(t).find("img").hasClass("visible")||$(t).find("img").addClass("visible"),$(t).imagefill()})},300),Pace.on("once",function(){$(t).imagefill()})}}}]),app.directive("ngWidthInherit",[function(){return{restrict:"C",link:function(e,a,t){e.init=function(){var e=$(a).parent().innerWidth();$(a).css("width",e)},e.init(),e.$on("resizestop",function(){e.init()})}}}]),app.directive("ngHeightMemory",[function(){return{restrict:"C",link:function(e,a,t){e.init=function(){var e=$(a).height();console.log("ngHeightMemory..",e),$(a).css("min-height",e)},Pace.on("done",function(){e.init()}),e.$on("resizestop",function(){e.init()})}}}]),app.directive("ngGetVportHeight",[function(){return{restrict:"C",scope:{},link:function(e,a,t){e.init=function(){var e=0;t.deduct&&(e=t.deduct),oHeight=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-e,$(a).css("height",oHeight)},e.init(),e.$on("resizestop",function(){e.init()})}}}]),app.directive("ngLastIndex",["$rootScope",function(e){return{restrict:"C",link:function(a,t,o){var n=o.broadcast;a.$last&&e.$broadcast(n)}}}]),app.directive("ngWatchObject",["$rootScope",function(e){return{restrict:"C",link:function(a,t,o){var n=o.broadcast,i=o.watch;a.$watch(i,function(a){a&&e.$broadcast(n)})}}}]),app.directive("ngImageEvent",["$rootScope",function(e){return console.debug('[ngImageEvent] WTF prefixed custom directive with the presevred "ng"'),{restrict:"C",link:function(a,t,o){var n=o.broadcast;console.debug("[ngImageEvent] WTF broadcasts a generic/misleading thing like this"),imagesLoaded(t,function(){var a=$(t).height(),o=$(t).width();e.$broadcast(n,{height:a,width:o})})}}}]),app.directive("ngResizeStop",["$rootScope","$timeout",function(e,a){return{restrict:"C",link:function(t,o,n){var i=n.resizestopevent;t.$on("resizestop",function(){a(function(){var a=$(o).height(),t=$(o).width();e.$broadcast(i,{height:a,width:t})},1)})}}}]),app.directive("uiProductSearch",["$scService","$state","$stateParams","$apiSocialCommerce","$rootScope","$location",function(e,a,t,o,n,i){return{restrict:"C",link:function(e,r,s){e.other_params={},e.obj={},e.obj.scQueryValue=_.isNull(t.query)?"":t.query,e.isSuggestionBoxClick=!1,e.scSearchNow=function(){if(console.log("================= scSearchNow  : "+a.current),!$.isEmptyObject(e.obj.scQueryValue)){"shoppingSearch"==a.current&&(e.scFilter=i.$$path.split("/")[4],console.log("scSearchNow "+i.$$path),console.log("================= $location"),console.log(i.$$path.split("/")[3]),console.log("================= $location")),void 0===e.scFilter&&(e.scFilter="all"),n.searchValue=e.obj.scQueryValue,i.path("/shopping/search/"+e.obj.scQueryValue+"/"+e.scFilter);var t=e.obj.scQueryValue,r=1;o.search(t,r,e.scFilter,e.other_params,function(e,a){return console.log("========== this is uiProductSearch "),a})}},$(".serahSuggestionBox").on("mouseenter",function(a){e.isSuggestionBoxClick=!0}),$(".serahSuggestionBox").on("mouseleave",function(a){e.isSuggestionBoxClick=!1}),$(".searchInputBox").on("blur",function(a){e.isSuggestionBoxClick||($(".serahSuggestionBox").addClass("hide"),e.isSuggestionBoxClick=!1)}),$(".searchInputBox").on("keyup focus",function(e){$(".searchInputBox").val().length>0?$(".serahSuggestionBox").removeClass("hide"):$(".serahSuggestionBox").addClass("hide")}),r.bind("keydown",function(a){$(".searchInputBox").is(":focus")&&13===a.keyCode&&($(".serahSuggestionBox").addClass("hide"),e.scSearchNow())})}}}]),app.directive("ngPatternMaker",[function(){return{restrict:"C",scope:{pattern:"@pattern"},link:function(e,a,t){e.patternCopy=e.pattern,e.getPattern=function(){var e="";return e}}}}]),app.directive("uiCommentAction",["$apiSocialCommerce",function(e){return{restrict:"C",link:function(a,t,o){a.commentDIP=!1,a.removeComment=function(){if(!a.commentAIP){var t={product_id:a.productArticle.article_id,comment_id:a.comment.comment_id,action:"remove"};a.commentDIP=!0,e.commentAction(t,function(e,t){a.commentDIP=!1,!e&&t.status.success&&(a.productArticle.comments=_.reject(a.productArticle.comments,function(e){return a.comment.comment_id==e.comment_id&&(a.productArticle.comment_count=a.productArticle.comment_count-1,a.$emit("MASONRY_INIT")),a.comment.comment_id==e.comment_id}))})}},a.showConfirmation=function(e){a.closeConfirmation(),e&&("report"==e?a.showReportConfirmation=!0:"delete"==e&&(a.showDeleteConfirmation=!0))},a.closeConfirmation=function(){a.showReportConfirmation=!1,a.showDeleteConfirmation=!1},a.commentAIP=!1,a.commentAction=function(t){if(a.currentUser){if(a.comment.privateData||(a.comment.privateData={}),a.commentAIP||("like"==t||"dislike"==t)&&a.comment.privateData&&(a.comment.privateData.isLiked||a.comment.privateData.isDisliked))return void a.commentActionUndo(t);"like"==t?(a.comment.privateData.isLiked=!0,a.comment.like_count+=1):"dislike"==t?(a.comment.privateData.isDisliked=!0,a.comment.dislike_count+=1):"report"==t&&(a.comment.privateData.isReported=!0);var o={product_id:a.productArticle.article_id,comment_id:a.comment.comment_id,action:t};a.commentAIP=!0,e.commentAction(o,function(e,o){a.commentAIP=!1,a.closeConfirmation(),!e&&o.status.success||("like"==t?(a.comment.privateData.isLiked=!1,a.comment.like_count-=1):"dislike"==t&&(a.comment.privateData.isDisliked=!1,a.comment.dislike_count-=1))})}},a.commentActionUndo=function(t){if(a.currentUser&&(a.comment.privateData||(a.comment.privateData={}),a.commentAIP||("like"==t||"dislike"==t)&&a.comment.privateData&&(a.comment.privateData.isLiked||a.comment.privateData.isDisliked))){if("like"==t&&!a.comment.privateData.isLiked||"dislike"==t&&!a.comment.privateData.isDisliked)return;var o=t;"like"==t?(o="undolike",a.comment.privateData.isLiked=!1,a.comment.like_count-=1):"dislike"==t&&(o="undodislike",a.comment.privateData.isDisliked=!1,a.comment.dislike_count-=1);var n={product_id:a.productArticle.article_id,comment_id:a.comment.comment_id,action:o};a.commentAIP=!0,e.commentAction(n,function(e,o){a.commentAIP=!1,!e&&o.status.success||("like"==t?(a.comment.privateData.isLiked=!0,a.comment.like_count+=1):"dislike"==t&&(a.comment.privateData.isDisliked=!0,a.comment.dislike_count+=1))})}}}}}]),app.directive("uiGameCommand",["$timeout","$popupService","$rootScope",function(e,a,t){return{restrict:"C",link:function(a,o,n){"undefined"==typeof a.product_otherdata[a.product_game.game_id]&&(a.product_otherdata[a.product_game.game_id]={}),a.product_otherdata[a.product_game.game_id].game_expiry_ms=0,a.product_otherdata[a.product_game.game_id].isPlayedMax=!1,a.$watch("product_game.privateData.discountExpireOn",function(e,t){e&&(a.product_otherdata[a.product_game.game_id].game_expiry_ms=1e3*e)}),a.$watch("product_game.privateData.lastPlayedDate",function(e,t){if(console.log("product_game.privateData.lastPlayedDate",e),e){var o=e.split(" ");a.product_game.privateData.lastPlayedDate=o[0];var n=o[0].split("-"),i=new Date(n[0],n[1]-1,n[2]+1);i>new Date&&a.product_game.privateData.playedPerDay&&a.product_game.privateData.playedPerDay>=a.product_game.repetitionPerDay&&(a.product_otherdata[a.product_game.game_id].isPlayedMax=!0)}}),a.gameExpired=function(){console.log("game has expired"),e(function(){a.product_game.privateData.isCompleted=!1,a.product_otherdata[a.product_game.game_id].game_expiry_ms=0;var e=!1;a.product_otherdata[a.product_game.game_id].game_expiry_ms&&(e=!0),e||(a.productArticle.productListing.final_price=a.productArticle.productListing.original_price)})},a.openModalGame=function(){console.log("openModalGame",a),t.$broadcast("SHOW_GAME_MODAL",{scope:a}),t.productConfirm.counter=10,t.productConfirm.discount=a.product_game.discount},a.$on("POPUP_GAME_DONE",function(o,n){console.log("POPUP_GAME_DONE",n),t.$broadcast("HIDE_GAME_MODAL",{});var i=$("#gamedonemessage").text();if(n.status)if(n.status.success){if(a.product_game.game.game_id!=n.game_id)return;angular.forEach(a.productArticle.productListing.gameDiscountDetails.games,function(t){t.privateData||(t.privateData={}),t.game_id!=a.product_game.game_id?(t.privateData.isCompleted=!1,t.privateData.discountExpireOn=0):n.final_price?e(function(){t.privateData.isCompleted=!0,t.privateData.discountExpireOn=n.discount_expire_on,a.productArticle.productListing.final_price=n.final_price},1):n.playedPerDay&&e(function(){t.privateData.playedPerDay=n.playedPerDay,t.privateData.lastPlayedDate=n.lastPlayedDate+" "+new Date},1)})}else n.status.err&&(i=n.status.err);else i=$("#general-error-message:first").text();a.confirmCounter=function(){e(function(){t.productConfirm.counter=t.productConfirm.counter-1,t.productConfirm.counter>0?a.confirmCounter():(t.productConfirm.counter=10,$("#game_confirm").foundation("reveal","close"),$(".reveal-modal-bg").css("display:none"))},1e3)},e(function(){t.productConfirm.name=a.productArticle.product.title_language,t.productConfirm.merchant=a.productArticle.product.merchant.title,t.productConfirm.description=a.productArticle.product.description_language,t.productConfirm.photo=a.productArticle.product.product_image_language,$("#game_confirm").foundation("reveal","open"),a.confirmCounter()},1e3)})}}}]),app.directive("uiSocialShareHeader",["$location",function(e){return{restrict:"C",link:function(a,t,o){console.log(a),console.log(e);var n=e.$$absUrl,i=n.split("/");console.log(i.length),a.currentLocation=n,a.noncoded_currentLocation=n,a.currentLocation=encodeURIComponent(a.currentLocation),a.networkName=a["this"].hometext+"is on Yuuzoo"}}}]),app.directive("uiSocialShare",["$location",function(e){return{restrict:"C",link:function(a,t,o){a.currentLocation=e.$$absUrl}}}]),app.directive("uiCartItem",["$apiSocialCommerce","$store","$popupService","$analytics","$rootScope",function(e,a,t,o,n){return{restrict:"C",link:function(i,r,s){i.checkQtyApi=function(r,s){if(r&&r!=s){console.log("hey, item.quantity!",r,s);var c={quantity:r};i.cartdata.price_loading=!0,e.updateShoppingCartItem(c,i.item.shopping_cart_item_id,function(e,c){if(i.cartdata.price_loading=!1,!e&&c.status.success){var l="addToCart";s>r&&(l="removeFromCart");var d="";c.shoppingCartItem.metadata&&c.shoppingCartItem.metadata.network_shortcut&&(d=c.shoppingCartItem.metadata.network_shortcut);var u="",m="";c.shoppingCartItem.product.hashTags&&(m=c.shoppingCartItem.product.hashTags.join("_")),c.shoppingCartItem.variants&&(u=_.values(c.shoppingCartItem.variants).join("_")),o.eventTrack("ecommerce:"+l,{id:c.shoppingCartItem.shopping_cart_item_id,name:c.shoppingCartItem.product.title_language,sku:c.shoppingCartItem.product.sku_reference_id,category:m,price:c.shoppingCartItem.final_price,quantity:1,currency:n.config.currency.code,variant:u,dimension1:d}),c.temporary_user_auth_token&&(a.setValue("tempUser",c.temporary_user),a.setTempToken(c.temporary_user_auth_token),i.temporary_user_auth_token=a.getTempToken(),i.tempUser=a.getValue("tempUser")),i.item.quantity=r,i.listShoppingCartWidget()}else{s>r?i.item.quantity=r:i.item.quantity=s;var p="";e?p=$("#general-error-message:first").text():c.status.err&&(p=c.status.err),t.showAutoMessage(p)}})}},i.addQuantity=function(){i.checkQtyApi(i.item.quantity+1,i.item.quantity)},i.minusQuantity=function(){i.item.quantity>1&&i.checkQtyApi(i.item.quantity-1,i.item.quantity)},i.removeFromCartWidget=function(){i.cartdata.price_loading=!0;var t=[];t.push(i.item.shopping_cart_item_id);var r={shopping_cart_item_ids:t};e.removeFromShoppingCart(r,function(e,t){if(!e&&t.status.success){i.cartdata.price_loading=!1;var r="";i.item.metadata&&i.item.metadata.network_shortcut&&(r=i.item.metadata.network_shortcut);var s="",c="";i.item.product.hashTags&&(c=i.item.product.hashTags.join("_")),i.item.variants&&(s=_.values(i.item.variants).join("_")),o.eventTrack("ecommerce:removeFromCart",{id:i.item.shopping_cart_item_id,name:i.item.product.title_language,sku:i.item.product.sku_reference_id,category:c,price:i.item.final_price,quantity:i.item.quantity,currency:n.config.currency.code,variant:s,dimension1:r}),t.temporary_user_auth_token&&(a.setValue("tempUser",t.temporary_user),a.setTempToken(t.temporary_user_auth_token),i.temporary_user_auth_token=a.getTempToken(),i.tempUser=a.getValue("tempUser")),i.item.couponApplied&&(i.appliedCoupon=!!(i.cartdata&&null!=i.cartdata.coupon_code||""!=i.coupon_data.code)),i.listShoppingCartWidget()}})}}}}]),app.directive("uiGetStarted",["$apiService","$rootScope","$analytics","$store","$location","$popupService","$timeout",function(e,a,t,o,n,i,r){return{restrict:"A",link:function(i,s,c){i.getStartedData={},i.getStartedData.fields={},i.getStartedData.isSubscriber=!0,i.getStartedData.isValidEmail=!1,i.getStartedData.isValidMobile=!1,i.getStartedData.isloading=!1,i.getStartedData.err_msg="",i.getStartedData.isSignUpForm=!1,i.checkEmailChange=_.throttle(function(){i.getStartedData.err_msg="",i.getStartedData.err_register_code="",i.getStartedData.err_forgotpassword_code="",i.getStartedData.linkedviasocialaccount="",i.checkEmailSubscriber(),i.checkMobileSubscriber()},2e3),i.checkEmailSubscriber=function(){i.getStartedData.isValidEmail=i.emailValidator(i.getStartedData.fields.email),i.getStartedData.isValidEmail&&(i.getStartedData.isloading=!0,e.user.profileByEmail(i.getStartedData.fields.email,function(e,a){i.getStartedData.isloading=!1,!e&&a.status.success?(i.getStartedData.isSubscriber=!0,i.getStartedData.isSignUpForm=!1):(i.getStartedData.isSubscriber=!1,i.getStartedData.isSignUpForm=!0)}))},i.checkMobileSubscriber=function(){i.getStartedData.isValidMobile=i.phoneValidator(i.getStartedData.fields.email),i.getStartedData.isValidMobile&&(i.getStartedData.isloading=!0,e.user.profileByMobileNumber(i.getStartedData.fields.email,function(e,a){i.getStartedData.isloading=!1,!e&&a.status.success?(i.getStartedData.isSubscriber=!0,i.getStartedData.isSignUpForm=!1):(i.getStartedData.isSubscriber=!1,i.getStartedData.isSignUpForm=!0)}))},i.continueGetStarted=function(){i.getStartedData.isloading||(i.getStartedData.err_msg="",i.getStartedData.err_register_code="",i.getStartedData.err_forgotpassword_code="",i.getStartedData.linkedviasocialaccount="",i.getStartedData.isSubscriber?i.onLogin():i.onSignup())},i.onWeibo=function(){t.eventTrack("Login",{category:"user-login",label:"Login via Weibo",value:1});var e=n.search();e&&e._return?o.setValue("_return",e._return):o.setValue("_n",location.href),window.location="/auth/weibo"},i.onQQ=function(){t.eventTrack("Login",{category:"user-login",label:"Login via QQ",value:1});var e=n.search();e&&e._return?o.setValue("_return",e._return):o.setValue("_n",location.href),window.location="/auth/qq"},i.onRenRen=function(){t.eventTrack("Login",{category:"user-login",label:"Login via RenRen",value:1});var e=n.search();e&&e._return?o.setValue("_return",e._return):o.setValue("_n",location.href),window.location="/auth/renren"},i.onFacebook=function(){t.eventTrack("Login",{category:"user-login",label:"Login via Facebook",value:1});var e=n.search();e&&e._return?o.setValue("_return",e._return):o.setValue("_n",location.href),window.location="/auth/facebook"},i.onGooglePlus=function(){t.eventTrack("Login",{category:"user-login",label:"Login via Google Plus",value:1});var e=n.search();e&&e._return?o.setValue("_return",e._return):o.setValue("_n",location.href),window.location="/auth/google"},i.onTwitter=function(){t.eventTrack("Login",{category:"user-login",label:"Login via Twitter",value:1});var e=n.search();e&&e._return?o.setValue("_return",e._return):o.setValue("_n",location.href),window.location="/auth/twitter"},i.onLogin=function(){if(t.eventTrack("Login",{category:"user-login",label:"Login via Email",value:1}),i.getStartedData.err_msg="",!i.getStartedData.isloading&&i.getStartedData.isSubscriber){i.getStartedData.isloading=!0;var s={};e.user.login(i.getStartedData.fields.email,i.getStartedData.fields.password,a.currentNetwork&&a.currentNetwork.info?a.currentNetwork.info.id:!1,a.viewed_user_profile?a.viewed_user_profile.id:!1,s,function(s,c){if(r(function(){i.getStartedData.isloading=!1},4e3),c.status&&c.status.success){o.setValue("currentUser",c.user),a.currentUser=c.user;var l=n.search();if(l&&l._return){var d=a.getDomain(l._return);e.domain.isDomainWhitelisted(d,function(o,n){!o&&n&&n.iswhitelisted?t.eventTrack("E-commerce Redirect (External-Login via Email)",{category:"actions",label:"Just redirected to e-commerce from external link",
value:1,hitCallback:function(){e.auth.requestToken(function(e,t){t.status&&t.status.success?l._return.indexOf("?")>-1?window.location=l._return+"&token="+t.token+"&src="+window.location.hostname:window.location=l._return+"?token="+t.token+"&src="+window.location.hostname:(window.location.reload(),a.$broadcast("onUserLoginSuccess"))})}}):(window.location.reload(),a.$broadcast("onUserLoginSuccess"))})}else window.location.reload(),a.$broadcast("onUserLoginSuccess")}else c.status&&c.status.err?(i.getStartedData.err_msg=c.status.err,i.getStartedData.login_socialnetwork={},"ACCOUNT_LINKED_VIA_SOCIAL_ACCOUNTS"==c.status.code&&(i.getStartedData.login_error_code=c.status.code,e.user.fetchLoginSocialNetwork(i.getStartedData.fields.email,function(e,a){a.status&&a.status.success&&(i.getStartedData.login_socialnetwork=a)}))):i.getStartedData.err_msg=$("#general-error-message:first").text()})}},i.validatePasswordStrength=function(){i.getStartedData.err_register_code="";var e=i.getStartedData.fields.password;_.isEmpty(e)||(e<a.password_length||!a.hasUpperCase(e)||!a.hasSpecialCharacters(e))&&(i.getStartedData.err_register_code=5)},i.onSignup=function(){if(i.getStartedData.err_msg="",i.getStartedData.err_register_code="",i.validatePasswordStrength(),5!=i.getStartedData.err_register_code&&!i.getStartedData.isloading&&!i.getStartedData.isSubscriber){if(a.config.feature_locks.user_agreement&&!i.getStartedData.toc)return void(i.getStartedData.error_register_toc=!0);if(a.config.feature_locks.id_realname_required&&a.currentNetwork&&a.currentNetwork.info&&2==a.currentNetwork.info.registration_type){if(!(i.auth.realname&&i.auth.sns_id&&i.auth.dob_year&&i.auth.dob_month&&i.auth.dob_day))return void(i.getStartedData.err_register_code=4);i.getStartedData.fields.realname="",i.getStartedData.fields.sns_id="",i.getStartedData.fields.dob_year="",i.getStartedData.fields.dob_month="",i.getStartedData.fields.dob_day=""}var s={};e.visualcaptcha["try"](s,function(s,c){if(i.getStartedData.fields.email&&i.getStartedData.fields.password||(i.getStartedData.err_register_code=1),i.getStartedData.fields.password!=i.getStartedData.fields.password_confirm&&(i.getStartedData.err_register_code=2),""===i.getStartedData.err_register_code){var l=a.config.feature_locks.country_code_selection?i.getStartedData.label_country_code:a.config.default_country_code;i.getStartedData.isloading=!0,e.user.register(i.getStartedData.fields.email,i.getStartedData.fields.password,i.getStartedData.fields.password_confirm,i.getStartedData.fields.realname,i.getStartedData.fields.sns_id,i.getStartedData.fields.dob_year,i.getStartedData.fields.dob_month,i.getStartedData.fields.dob_day,a.currentNetwork&&a.currentNetwork.info?a.currentNetwork.info.id:!1,a.viewed_user_profile?a.viewed_user_profile.id:!1,null,i.getStartedData.toc,{},!1,l,function(s,c){if(r(function(){i.getStartedData.isloading=!1},4e3),c.status&&c.status.success){if("1"==a.config.fb_tracking_pixel.fb_pixel_enable){var l=a.config.fb_tracking_pixel.sign_up_id,d=a.config.currency.code,u="0.00";!function(){var e=window._fbq||(window._fbq=[]);if(!e.loaded){var a=document.createElement("script");a.async=!0,a.src="//connect.facebook.net/en_US/fbds.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(a,t),e.loaded=!0,console.log("fb tracking sign up")}}(),window._fbq=window._fbq||[],window._fbq.push(["track",l,{value:u,currency:d}])}i.getStartedData.err_register_code="",i.getStartedData.fields={},t.eventTrack("Register",{category:"user-signup",label:c.user.id,value:1});var m=n.search()._trk,p=n.search()._ref;m&&p?t.eventTrack("page:send",{url:"/_t/"+c.user.id+"/"+p}):m&&t.eventTrack("page:send",{url:"/_t/"+c.user.id}),a.currentUser=c.user,o.setValue("currentUser",c.user),a.showGSWindow=!1;var g=n.search();if(g&&g._return){var f=a.getDomain(g._return);e.domain.isDomainWhitelisted(f,function(a,o){!a&&o&&o.iswhitelisted&&t.eventTrack("E-commerce Redirect (External-Register)",{category:"actions",label:"Just redirected to e-commerce from external link",value:1,hitCallback:function(){e.auth.requestToken(function(e,a){a.status&&a.status.success&&(g._return.indexOf("?")>-1?window.location=g._return+"&token="+a.token+"&src="+window.location.hostname:window.location=g._return+"?token="+a.token+"&src="+window.location.hostname)})}})})}}else c.status&&c.status.err?i.getStartedData.err_msg=c.status.err:i.getStartedData.err_register_code=3})}})}},i.cancelForgotPassword=function(){i.getStartedData.err_msg="",i.getStartedData.isClickForgetPassword=!1,i.getStartedData.err_forgotpassword_code=""},i.showForgotPassword=function(){i.getStartedData.err_msg="",i.getStartedData.isClickForgetPassword=!0,i.getStartedData.err_forgotpassword_code=""},i.onForgotPassword=function(){i.getStartedData.err_msg="",i.getStartedData.err_register_code="",i.getStartedData.err_forgotpassword_code="",i.getStartedData.linkedviasocialaccount="",(i.getStartedData.isValidEmail||i.getStartedData.isValidMobile)&&(i.getStartedData.isClickForgetPassword=!0,i.getStartedData.isloading=!0,i.getStartedData.isValidEmail?e.user.forgotpassword(i.getStartedData.fields.email,function(e,a){i.getStartedData.isloading=!1,a.status&&a.status.success?i.getStartedData.err_forgotpassword_code=1:(a.status&&a.status.err&&(i.getStartedData.err_msg=a.status.err),"ACCOUNT_LINKED_VIA_SOCIAL_ACCOUNTS"==a.status.code?a.user.isFBConnected?i.getStartedData.linkedviasocialaccount="Facebook":a.user.isTwitterConnected?i.getStartedData.linkedviasocialaccount="Twitter":a.user.isGoogleConnected?i.getStartedData.linkedviasocialaccount="Google":a.user.isQQConnected?i.getStartedData.linkedviasocialaccount="QQ":a.user.isRenrenConnected?i.getStartedData.linkedviasocialaccount="Renren":a.user.isWeiboConnected?i.getStartedData.linkedviasocialaccount="Weibo":a.user.iahAccountId&&(i.getStartedData.linkedviasocialaccount="IAH"):i.getStartedData.err_forgotpassword_code=2)}):i.getStartedData.isValidMobile&&e.user.resetPasswordSMS(i.getStartedData.fields.email,"",function(e,a){i.getStartedData.isloading=!1,a.status&&a.status.success?i.getStartedData.err_forgotpassword_code=3:(a.status&&a.status.err&&(i.getStartedData.err_msg=a.status.err),"ACCOUNT_LINKED_VIA_SOCIAL_ACCOUNTS"==a.status.code?a.user.isFBConnected?i.getStartedData.linkedviasocialaccount="Facebook":a.user.isTwitterConnected?i.getStartedData.linkedviasocialaccount="Twitter":a.user.isGoogleConnected?i.getStartedData.linkedviasocialaccount="Google":a.user.isQQConnected?i.getStartedData.linkedviasocialaccount="QQ":a.user.isRenrenConnected?i.getStartedData.linkedviasocialaccount="Renren":a.user.isWeiboConnected?i.getStartedData.linkedviasocialaccount="Weibo":a.user.iahAccountId&&(i.getStartedData.linkedviasocialaccount="IAH"):i.getStartedData.err_forgotpassword_code=2)}))},i.resetPasswordSMS=function(){return i.getStartedData.err_msg="",i.getStartedData.fields.password!=i.getStartedData.fields.password_confirm?void(i.getStartedData.err_register_code=2):(i.getStartedData.isloading=!0,void e.user.completeResetPasswordSMS(i.getStartedData.fields.mobile_code,i.getStartedData.fields.password,function(e,a){i.getStartedData.isloading=!1,a.status&&a.status.success?(i.getStartedData.showSuccessfulReset=!0,i.cancelForgotPassword(),i.getStartedData.fields={},r(function(){i.getStartedData.showSuccessfulReset=!1},4e3)):a.status&&a.status.err?i.getStartedData.err_msg=a.status.err:i.getStartedData.err_forgotpassword_code=2}))}}}}]),app.directive("uiSimpleLoginSignup",["$apiService","$rootScope","$analytics","$store","$location","$popupService","$timeout",function(e,a,t,o,n,i,r){return{restrict:"E",templateUrl:"/_partials/socialcommerce/common/getstarted_dup",link:function(i,s,c){i.getStartedData={},i.getStartedData.fields={},i.getStartedData.isSubscriber=!0,i.getStartedData.isValidEmail=!1,i.getStartedData.isValidMobile=!1,i.getStartedData.isloading=!1,i.getStartedData.err_msg="",i.getStartedData.isSignUpForm=!1,i.checkEmailChange=_.throttle(function(){i.getStartedData.err_msg="",i.getStartedData.err_register_code="",i.getStartedData.err_forgotpassword_code="",i.getStartedData.linkedviasocialaccount="",i.checkEmailSubscriber(),i.checkMobileSubscriber()},2e3),i.countryCodeList=[],i.preselectCountryCode=function(){var e=a.config.mobile_country_list;i.countryCodeList=e.countryList,_.each(e.countryList,function(a){a.codeKey==e.defaultCode&&(i.getStartedData.label_country_code="+"+a.countryCode)})},i.changeSelectedCountryCode=function(){_.each(i.countryCodeList,function(e){i.getStartedData.fields.mobile_country_code==e.display_text&&(i.getStartedData.label_country_code="+"+e.countryCode)})},i.checkEmailSubscriber=function(){i.getStartedData.isValidEmail=i.emailValidator(i.getStartedData.fields.email),i.getStartedData.isValidEmail&&(i.getStartedData.isloading=!0,e.user.profileByEmail(i.getStartedData.fields.email,function(e,a){i.getStartedData.isloading=!1,!e&&a.status.success?(i.getStartedData.isSubscriber=!0,i.getStartedData.isSignUpForm=!1):(i.getStartedData.isSubscriber=!1,i.getStartedData.isSignUpForm=!0)}))},i.checkMobileSubscriber=function(){var a=i.getStartedData.label_country_code;i.getStartedData.isValidMobile=i.phoneValidator(a+i.getStartedData.fields.email),i.getStartedData.isValidMobile&&(i.getStartedData.isloading=!0,e.user.profileByMobileNumber(i.getStartedData.fields.email,function(e,a){i.getStartedData.isloading=!1,!e&&a.status.success?(i.getStartedData.isSubscriber=!0,i.getStartedData.isSignUpForm=!1):(i.getStartedData.isSubscriber=!1,i.getStartedData.isSignUpForm=!0)}))},i.continueGetStarted=function(){i.getStartedData.isloading||(i.getStartedData.err_msg="",i.getStartedData.err_register_code="",i.getStartedData.err_forgotpassword_code="",i.getStartedData.linkedviasocialaccount="",i.getStartedData.isSubscriber?i.onLogin():i.onSignup())},i.onWeibo=function(){t.eventTrack("Login",{category:"user-login",label:"Login via Weibo",value:1});var e=n.search();e&&e._return?o.setValue("_return",e._return):o.setValue("_n",location.href),window.location="/auth/weibo"},i.onQQ=function(){t.eventTrack("Login",{category:"user-login",label:"Login via QQ",value:1});var e=n.search();e&&e._return?o.setValue("_return",e._return):o.setValue("_n",location.href),window.location="/auth/qq"},i.onRenRen=function(){t.eventTrack("Login",{category:"user-login",label:"Login via RenRen",value:1});var e=n.search();e&&e._return?o.setValue("_return",e._return):o.setValue("_n",location.href),window.location="/auth/renren"},i.onFacebook=function(){t.eventTrack("Login",{category:"user-login",label:"Login via Facebook",value:1});var e=n.search();e&&e._return?o.setValue("_return",e._return):o.setValue("_n",location.href),window.location="/auth/facebook"},i.onGooglePlus=function(){t.eventTrack("Login",{category:"user-login",label:"Login via Google Plus",value:1});var e=n.search();e&&e._return?o.setValue("_return",e._return):o.setValue("_n",location.href),window.location="/auth/google"},i.onTwitter=function(){t.eventTrack("Login",{category:"user-login",label:"Login via Twitter",value:1});var e=n.search();e&&e._return?o.setValue("_return",e._return):o.setValue("_n",location.href),window.location="/auth/twitter"},i.onLogin=function(){if(t.eventTrack("Login",{category:"user-login",label:"Login via Email",value:1}),i.getStartedData.err_msg="",!i.getStartedData.isloading&&i.getStartedData.isSubscriber){i.getStartedData.isloading=!0;var r={};r.mobile_country_code=a.config.feature_locks.country_code_selection?i.getStartedData.label_country_code:a.config.default_country_code,e.user.login(i.getStartedData.fields.email,i.getStartedData.fields.password,a.currentNetwork&&a.currentNetwork.info?a.currentNetwork.info.id:!1,a.viewed_user_profile?a.viewed_user_profile.id:!1,r,function(r,s){if(i.getStartedData.isloading=!1,s.status&&s.status.success){o.setValue("currentUser",s.user),a.currentUser=s.user;var c=n.search();if(c&&c._return){var l=a.getDomain(c._return);e.domain.isDomainWhitelisted(l,function(o,n){!o&&n&&n.iswhitelisted?t.eventTrack("E-commerce Redirect (External-Login via Email)",{category:"actions",label:"Just redirected to e-commerce from external link",value:1,hitCallback:function(){e.auth.requestToken(function(e,t){t.status&&t.status.success?c._return.indexOf("?")>-1?window.location=c._return+"&token="+t.token+"&src="+window.location.hostname:window.location=c._return+"?token="+t.token+"&src="+window.location.hostname:(window.location.reload(),a.$broadcast("onUserLoginSuccess"))})}}):(window.location.reload(),a.$broadcast("onUserLoginSuccess"))})}else window.location.reload(),a.$broadcast("onUserLoginSuccess")}else s.status&&s.status.err?(i.getStartedData.err_msg=s.status.err,i.getStartedData.login_socialnetwork={},"ACCOUNT_LINKED_VIA_SOCIAL_ACCOUNTS"==s.status.code&&(i.getStartedData.login_error_code=s.status.code,e.user.fetchLoginSocialNetwork(i.getStartedData.fields.email,function(e,a){a.status&&a.status.success&&(i.getStartedData.login_socialnetwork=a)}))):i.getStartedData.err_msg=$("#general-error-message:first").text()})}},i.validatePasswordStrength=function(){i.getStartedData.err_register_code="";var e=i.getStartedData.fields.password;_.isEmpty(e)||(e<a.password_length||!a.hasUpperCase(e)||!a.hasSpecialCharacters(e))&&(i.getStartedData.err_register_code=5)},i.onSignup=function(){if(i.getStartedData.err_msg="",i.getStartedData.err_register_code="",i.validatePasswordStrength(),5!=i.getStartedData.err_register_code&&!i.getStartedData.isloading&&!i.getStartedData.isSubscriber){if(a.config.feature_locks.user_agreement&&!i.getStartedData.toc)return void(i.getStartedData.error_register_toc=!0);if(a.config.feature_locks.id_realname_required&&a.currentNetwork&&a.currentNetwork.info&&2==a.currentNetwork.info.registration_type){if(!(i.auth.realname&&i.auth.sns_id&&i.auth.dob_year&&i.auth.dob_month&&i.auth.dob_day))return void(i.getStartedData.err_register_code=4);i.getStartedData.fields.realname="",i.getStartedData.fields.sns_id="",i.getStartedData.fields.dob_year="",i.getStartedData.fields.dob_month="",i.getStartedData.fields.dob_day=""}var s={};e.visualcaptcha["try"](s,function(s,c){if(i.getStartedData.fields.email&&i.getStartedData.fields.password||(i.getStartedData.err_register_code=1),i.getStartedData.fields.password!=i.getStartedData.fields.password_confirm&&(i.getStartedData.err_register_code=2),""===i.getStartedData.err_register_code){i.getStartedData.isloading=!0;var l=a.config.feature_locks.country_code_selection?i.getStartedData.label_country_code:a.config.default_country_code;e.user.register(i.getStartedData.fields.email,i.getStartedData.fields.password,i.getStartedData.fields.password_confirm,i.getStartedData.fields.realname,i.getStartedData.fields.sns_id,i.getStartedData.fields.dob_year,i.getStartedData.fields.dob_month,i.getStartedData.fields.dob_day,a.currentNetwork&&a.currentNetwork.info?a.currentNetwork.info.id:!1,a.viewed_user_profile?a.viewed_user_profile.id:!1,null,i.getStartedData.toc,{},!1,l,function(s,c){if(r(function(){i.getStartedData.isloading=!1},4e3),c.status&&c.status.success){if("1"==a.config.fb_tracking_pixel.fb_pixel_enable){var l=a.config.fb_tracking_pixel.sign_up_id,d=a.config.currency.code,u="0.00";!function(){var e=window._fbq||(window._fbq=[]);if(!e.loaded){var a=document.createElement("script");a.async=!0,a.src="//connect.facebook.net/en_US/fbds.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(a,t),e.loaded=!0,console.log("fb tracking sign up")}}(),window._fbq=window._fbq||[],window._fbq.push(["track",l,{value:u,currency:d}])}if(i.getStartedData.err_register_code="",i.getStartedData.show_phone_verification=c.isMobileVerificationNeeded,c.user){i.getStartedData={},t.eventTrack("Register",{category:"user-signup",label:c.user.id,value:1});var m=n.search()._trk,p=n.search()._ref;m&&p?t.eventTrack("page:send",{url:"/_t/"+c.user.id+"/"+p}):m&&t.eventTrack("page:send",{url:"/_t/"+c.user.id}),a.currentUser=c.user,o.setValue("currentUser",c.user),a.showGSWindow=!1;var g=n.search();if(g&&g._return){var f=a.getDomain(g._return);e.domain.isDomainWhitelisted(f,function(a,o){!a&&o&&o.iswhitelisted&&t.eventTrack("E-commerce Redirect (External-Register)",{category:"actions",label:"Just redirected to e-commerce from external link",value:1,hitCallback:function(){e.auth.requestToken(function(e,a){a.status&&a.status.success&&(g._return.indexOf("?")>-1?window.location=g._return+"&token="+a.token+"&src="+window.location.hostname:window.location=g._return+"?token="+a.token+"&src="+window.location.hostname)})}})})}else window.location.reload()}}else c.status&&c.status.err?i.getStartedData.err_msg=c.status.err:i.getStartedData.err_register_code=3})}})}},i.verifyPhoneCodeShopping=function(){i.getStartedData.verification_loading=!0,e.user.verifysms(i.getStartedData.phoneverificationcode,function(r,s){if(s.status&&s.status.success){if(o.setToken(s.authToken),a.authToken=s.authToken,o.setTempToken(""),o.setValue("tempUser",""),o.setValue("finished_signup_game_id",""),"1"==a.config.fb_tracking_pixel.fb_pixel_enable){var c=a.config.fb_tracking_pixel.sign_up_id,l=a.config.currency.code,d="0.00";!function(){var e=window._fbq||(window._fbq=[]);if(!e.loaded){var a=document.createElement("script");a.async=!0,a.src="//connect.facebook.net/en_US/fbds.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(a,t),e.loaded=!0,console.log("fb tracking sign up")}}(),window._fbq=window._fbq||[],window._fbq.push(["track",c,{value:d,currency:l}])}t.eventTrack("Register",{category:"user-signup",label:s.user.id,value:1});var u=n.search()._trk,m=n.search()._ref;u&&m?t.eventTrack("page:send",{url:"/_t/"+s.user.id+"/"+m}):u&&t.eventTrack("page:send",{url:"/_t/"+s.user.id}),a.currentUser=s.user,o.setValue("currentUser",s.user);var p=n.search();if(p&&p._return){var g=a.getDomain(p._return);e.domain.isDomainWhitelisted(g,function(o,n){!o&&n&&n.iswhitelisted&&(!window.ga||!n.internalGATracker&&!n.externalGATracker||null==n.internalGATracker&&null==n.externalGATracker?e.auth.requestToken(function(e,t){t.status&&t.status.success?p._return.indexOf("?")>-1?window.location=p._return+"&token="+t.token+"&src="+window.location.hostname:window.location=p._return+"?token="+t.token+"&src="+window.location.hostname:(window.location.reload(),a.$broadcast("onUserLoginSuccess"))}):t.eventTrack("E-commerce Redirect (External-Register)",{category:"actions",label:"Just redirected to e-commerce from external link",value:1,hitCallback:function(){e.auth.requestToken(function(e,a){a.status&&a.status.success&&(p._return.indexOf("?")>-1?window.location=p._return+"&token="+a.token+"&src="+window.location.hostname:window.location=p._return+"?token="+a.token+"&src="+window.location.hostname)})}}))})}else window.location.reload()}else i.getStartedData.err_register_code="INVALID_VERIFICATION_CODE";i.getStartedData.verification_loading=!1})},i.resendPhoneVerificationCodeShopping=function(){i.getStartedData.verification_loading=!0;var a={mobile_number:i.getStartedData.fields.email,mobile_country_code:i.getStartedData.label_country_code};e.user.resendVerificationCode(a,function(e,a){i.getStartedData.verification_loading=!1,a.status&&a.status.success||(i.getStartedData.err_register_code="RESEND_FAILED")})},i.cancelForgotPassword=function(){i.getStartedData.err_msg="",i.getStartedData.isClickForgetPassword=!1,i.getStartedData.err_forgotpassword_code="",i.getStartedData.isShowChangePasswordMobile=!1},i.showForgotPassword=function(){i.getStartedData.err_msg="",i.getStartedData.isClickForgetPassword=!0,i.getStartedData.err_forgotpassword_code=""},i.onForgotPassword=function(){if(i.getStartedData.err_msg="",i.getStartedData.err_register_code="",i.getStartedData.err_forgotpassword_code="",i.getStartedData.linkedviasocialaccount="",i.getStartedData.isValidEmail||i.getStartedData.isValidMobile)if(i.getStartedData.isClickForgetPassword=!0,i.getStartedData.isloading=!0,i.getStartedData.isValidEmail)e.user.forgotpassword(i.getStartedData.fields.email,function(e,a){i.getStartedData.isloading=!1,a.status&&a.status.success?i.getStartedData.err_forgotpassword_code=1:(a.status&&a.status.err&&(i.getStartedData.err_msg=a.status.err),"ACCOUNT_LINKED_VIA_SOCIAL_ACCOUNTS"==a.status.code?a.user.isFBConnected?i.getStartedData.linkedviasocialaccount="Facebook":a.user.isTwitterConnected?i.getStartedData.linkedviasocialaccount="Twitter":a.user.isGoogleConnected?i.getStartedData.linkedviasocialaccount="Google":a.user.isQQConnected?i.getStartedData.linkedviasocialaccount="QQ":a.user.isRenrenConnected?i.getStartedData.linkedviasocialaccount="Renren":a.user.isWeiboConnected?i.getStartedData.linkedviasocialaccount="Weibo":a.user.iahAccountId&&(i.getStartedData.linkedviasocialaccount="IAH"):i.getStartedData.err_forgotpassword_code=2)});else if(i.getStartedData.isValidMobile){i.getStartedData.isShowChangePasswordMobile=!1;var t=a.config.feature_locks.country_code_selection?i.getStartedData.label_country_code:a.config.default_country_code;e.user.resetPasswordSMS(i.getStartedData.fields.email,t,function(e,a){i.getStartedData.isloading=!1,a.status&&a.status.success?(i.getStartedData.isShowChangePasswordMobile=!0,i.getStartedData.err_forgotpassword_code=3):(a.status&&a.status.err&&(i.getStartedData.err_msg=a.status.err),"ACCOUNT_LINKED_VIA_SOCIAL_ACCOUNTS"==a.status.code&&(a.user.isFBConnected?i.getStartedData.linkedviasocialaccount="Facebook":a.user.isTwitterConnected?i.getStartedData.linkedviasocialaccount="Twitter":a.user.isGoogleConnected?i.getStartedData.linkedviasocialaccount="Google":a.user.isQQConnected?i.getStartedData.linkedviasocialaccount="QQ":a.user.isRenrenConnected?i.getStartedData.linkedviasocialaccount="Renren":a.user.isWeiboConnected?i.getStartedData.linkedviasocialaccount="Weibo":a.user.iahAccountId&&(i.getStartedData.linkedviasocialaccount="IAH")))})}},i.resetPasswordSMS=function(){return i.getStartedData.err_msg="",i.getStartedData.err_register_code="",i.getStartedData.fields.password!=i.getStartedData.fields.password_confirm?void(i.getStartedData.err_register_code=2):(i.getStartedData.loading_changemobile=!0,void e.user.completeResetPasswordSMS(i.getStartedData.fields.mobile_code,i.getStartedData.fields.password,function(e,a){i.getStartedData.loading_changemobile=!1,a.status&&a.status.success?(i.getStartedData.showSuccessfulReset=!0,i.cancelForgotPassword(),i.getStartedData.fields={},r(function(){i.getStartedData.showSuccessfulReset=!1},4e3)):a.status&&a.status.err?i.getStartedData.err_msg=a.status.err:i.getStartedData.err_forgotpassword_code=2}))}}}}]),app.directive("uiDisplayStars",[function(){return{restrict:"C",link:function(e,a,t){e.starcount=0,t.$observe("starCount",function(a){a&&(e.starcount=a)})}}}]),app.directive("uiBackdrop",["$rootScope","$timeout",function(e,a){return{restrict:"C",link:function(t,o,n){t.wallpaper="",t.animate=!1,t.$on("CHANGE_WALLPAPER",function(o,n){t.wallpaper=n,t.animate=!1,a(function(){t.animate=!0,e.$broadcast("IMAGEFILL_INIT")},10),a(function(){e.$broadcast("IMAGEFILL_INIT")},300)})}}}]),app.directive("uiPromoSlide",["$rootScope","$http","$timeout",function(e,a,t){return{restrict:"C",link:function(o,n,i){o.currentIndex=0,o.maxIndex=2,o.animate=!1,o.noLoop=!1,o.slideList=[];var r="/client/socialcommerce/html/landing.json";""!=e.vd&&(r="/client/"+e.vd+"socialcommerce/html/landing.json"),a.get(r).success(function(a,t){console.log("uiPromoSlide",a);var n="default";if(e.current_country_code&&(n=e.current_country_code.replace(".","")),null!=a&&null!=a[n]?o.slideList=a[n]:null!=a&&null!=a["default"]?o.slideList=a["default"]:null!=a&&(o.slideList=a),null!=o.slideList&&o.slideList.length>0){var i=o.slideList[o.currentIndex].background;o.applyWallpaper(i)}}),o.initAnimate=function(){o.animate=!1,t(function(){o.animate=!0},800)},o.initAnimate(),o.applyWallpaper=function(a){e.$broadcast("CHANGE_WALLPAPER",a)},o.next=function(){o.currentIndex==o.maxIndex?o.currentIndex=0:o.currentIndex=o.currentIndex+1;var e=o.slideList[o.currentIndex].background;o.applyWallpaper(e),o.initAnimate()},o.prev=function(){0==o.currentIndex?o.currentIndex=o.maxIndex:o.currentIndex=o.currentIndex-1;var e=o.slideList[o.currentIndex].background;o.applyWallpaper(e),console.log("scope.currentIndex",o.currentIndex),o.initAnimate()},o.timeLoop=function(){0==o.noLoop&&t(function(){o.next(),o.timeLoop()},25e3)},o.timeLoop()}}}]),app.directive("uiCollectionGallery",[function(){return{scope:!0,restrict:"C",link:function(e,a,t){e.navigation=!1,t.groupLength>1&&(e.navigation=!0),e.next=function(e){console.log("collection next:",e);var a=0;return angular.forEach(e,function(t,o){1==t.visible&&(t.visible=!1,a=o==e.length-1?0:o+1)}),e[a].visible=!0,e},e.prev=function(e){var a=0;return angular.forEach(e,function(t,o){1==t.visible&&(t.visible=!1,a=0==o?e.length-1:o-1)}),e[a].visible=!0,e}}}}]),app.directive("uiContentSlider",["$timeout","$scService",function(e,a){return{scope:!0,restrict:"C",templateUrl:"/_partials/socialcommerce/common/component/content-slider",link:function(a,t,o){console.log("uiGroupSlider"),console.log("uiGroupSlider :> data",a.datalist),a.collectionList=[],a.collectionItem=[],a.currentIndex=0,a.currentCollection=[],a.groupby=5,a.template=o.template,a.visibility=!0,o.groupby&&(a.groupby=o.groupby),a.noSpace=function(e){var a=e.replace(/\s/g,"-");return a},o.$observe("datalist",function(e,t){if(null!=e)try{a.collectionList=[],a.collectionItem=[],a.groupby=o.groupby,console.log("scope.groupby",a.groupby),a.datalist=JSON.parse(e),console.log("datalist Watched..",a.datalist),angular.forEach(a.datalist,function(e,t){a.collectionItem.length==a.groupby?(a.collectionList.push(a.collectionItem),a.collectionItem=[],console.log("group push")):(a.collectionItem.push(e),console.log("single push"))}),a.collectionItem.length>0&&(a.collectionList.push(a.collectionItem),a.collectionItem=[],console.log("last group push")),a.currentCollection=a.collectionList[0],console.log("current collection",a.currentCollection),console.log("collectionList",a.collectionList)}catch(n){}}),a.next=function(){a.visibility=!1,a.currentIndex<a.collectionList.length-1?a.currentIndex=a.currentIndex+1:a.currentIndex=0,e(function(){a.visibility=!0},500),a.currentCollection=a.collectionList[a.currentIndex]},a.prev=function(){a.visibility=!1,a.currentIndex>0?a.currentIndex=a.currentIndex-1:a.currentIndex=a.collectionList.length-1,e(function(){a.visibility=!0},500),a.currentCollection=a.collectionList[a.currentIndex]}}}}]),app.directive("uiSimilarBrands",["$timeout","$scService",function(e,a){return{scope:!0,restrict:"C",templateUrl:"/_partials/socialcommerce/merchant-similar-brands",link:function(e,a,t){console.log("uiGroupSlider"),console.log("uiGroupSlider :> data",e.datalist),e.collectionList=[],e.collectionItem=[],e.currentIndex=0,e.currentCollection=[],e.groupby=5,e.template=t.template,e.visibility=!0,t.groupby&&(e.groupby=t.groupby),t.$observe("datalist",function(a,o){if(null!=a)try{e.collectionList=[],e.collectionItem=[],e.groupby=t.groupby,console.log("scope.groupby",e.groupby),e.datalist=JSON.parse(a),console.log("datalist Watched..",e.datalist),angular.forEach(e.datalist,function(a,t){e.collectionItem.length==e.groupby?(e.collectionList.push(e.collectionItem),e.collectionItem=[],console.log("group push")):(e.collectionItem.push(a),console.log("single push"))}),e.collectionItem.length>0&&(e.collectionList.push(e.collectionItem),e.collectionItem=[],console.log("last group push")),e.currentCollection=e.collectionList[0],console.log("current collection",e.currentCollection),console.log("collectionList",e.collectionList)}catch(n){}})}}}]),app.directive("uiGroupSlider",[function(){return{scope:{datalist:"@datalist",groupby:"@groupby"},restrict:"C",link:function(e,a,t){e.navigation=!1,console.log("uiGroupSlider"),console.log("uiGroupSlider :> data",e.datalist),e.collectionList=[],e.collectionItem=[],e.currentIndex=0,e.myCollection=[1,2,3,4],e.init=function(){e.collectionList=[],e.collectionItem=[],angular.forEach(e.datalist,function(a,t){e.collectionItem.length==e.groupby?(e.collectionList.push(e.collectionItem),e.collectionItem=[]):e.collectionItem.push(a)}),e.collectionItem.length>0&&(e.collectionList.push(e.collectionItem),e.collectionItem=[]),console.log("collection list",e.collectionList),e.myCollection=e.collectionList[0],console.log("scope.collection",e.myCollection)},e.$watch("datalist",function(){if(null!=e.datalist)try{e.datalist=JSON.parse(e.datalist),console.log("datalist Watched..",e.datalist),e.init()}catch(a){}}),e.next=function(){e.currentIndex<=e.collectionList.length-1?e.currentIndex=e.currentIndex+1:e.currentIndex=0},e.prev=function(){e.currentIndex>=0?e.currentIndex=e.currentIndex-1:e.currentIndex=e.collectionList.length-1}}}}]),app.directive("uiProductCollectionList",["$apiSocialCommerce","$rootScope",function(e,a){return{restrict:"C",link:function(a,t,o){a.collectionlist_ready=!1;var n={collection_ids:o.collections,limit:o.limit||12};e.listMultiCollections(n,function(e,t){var o=n.collection_ids.split(","),i=0;console.log("collection_ids ",o),angular.forEach(t.collections,function(e,a){var t=[],o={products:[],visible:!1},n=1;angular.forEach(e.products,function(e,a){o.products.push(e),n+=1,0==t.length&&(o.visible=!0),n>6&&(t.push(o),o={products:[],visible:!1},n=1)}),0!=o.products.length&&t.push(o),e.groupCollection=t}),angular.forEach(o,function(e,a){angular.forEach(t.collections,function(a,t){console.log(e+" ? checking for... "+a.collection.product_collection_id),a.collection.product_collection_id==e&&(i+=1,a.index=i)})}),t.collections=_.sortBy(t.collections,"index"),a.collectionlist_ready=!0,a.collectionList=t}),console.log("collectionList",a.collectionList)}}}]),app.directive("uiCollectionIsolated",[function(){return{restrict:"C",scope:{collection:"@"},link:function(e,a,t){console.log("uiCollectionIsolated",e.collection)}}}]),app.directive("uiRandomLink",["$apiSocialCommerce","$location",function(e,a){return{restrict:"C",link:function(t,o,n){t.goToRandomProductLink=function(){e.getRandomProduct({},function(e,t){if(t.status&&t.status.success){var o="/shopping/product/"+t.productResponse.productArticle.product.title_language.replace(/ /g,"-")+"_"+t.productResponse.productArticle.product.product_id;a.path(o)}})}}}}]),app.directive("uiContEditProfile",["$apiSocialCommerce","$store","$rootScope","$location",function(e,a,t,o){return{restrict:"C",link:function(e,n,i){e.continueEditProfile=function(){if(e.emailValidator(e.tempUser.emailAddress)&&e.tempUser.id==e.per_invoice.user.id){var n=angular.copy(e.tempUser);a.setValue("tempUser",""),a.setToken(a.getTempToken()),a.setTempToken(""),t.currentUser=n,e.tempUser="",t.authToken=a.getTempToken(),o.path("/shopping/user/"+n.shortcut+"/info?edit=1&noload=1"),a.setValue("currentUser",n)}}}}}]),app.directive("uiCardExpiration",[function(){return{require:"ngModel",restrict:"C",link:function(e,a,t,o){e.$watch("[nibssData.card_exp_month,nibssData.card_exp_year]",function(a){return o.$setValidity("invalid",!0),e.nibssData.card_exp_year==e.year&&e.nibssData.card_exp_month<=e.cmonth&&o.$setValidity("invalid",!1),a},!0)}}}]),app.directive("uiPageTitle",["$rootScope","$state","$apiSocialCommerce",function(e,a,t){return{restrict:"C",link:function(o,n,i){o.$on("$stateChangeSuccess",function(n,i,r,s,c){if(console.log("$state.current "+a.current.name+" payemnt : "+(a.current.name.indexOf("payments")>-1)),a.current.name.indexOf("sc_user")>-1){var l="";"sc_user.ordercart"==a.current.name&&e.i18n["socialcommerce.page.title.mycart"]?l=e.i18n["socialcommerce.page.title.mycart"]:"sc_user.orderhistory"==a.current.name&&e.i18n["socialcommerce.page.title.myorders"]?l=e.i18n["socialcommerce.page.title.myorders"]:"sc_user.info"==a.current.name&&e.i18n["socialcommerce.page.title.myinfo"]&&(l=e.i18n["socialcommerce.page.title.myinfo"]),0==l.length&&o.currentUser&&(l=o.currentUser.first_name),e.$broadcast("CURRENT_PAGE_TITLE",{newval:l})}else if(0==a.current.name.indexOf("productList")){var d=window.location.pathname,u=window.location.hostname,m={};if(d.indexOf("/shopping/category")>-1&&d.split("/").length>3){
var p=d.split("/")[d.split("/").length-1];t.getCategory(p,u,function(t,o){o.status&&o.status.success&&o.category&&o.category.metadataObj&&Object.keys(o.category.metadataObj).length?m.newval=o.category.metadataObj.seo_title:m.newval=a.params.category,e.$broadcast("CURRENT_PAGE_TITLE",m)})}else m.newval=a.params.category,e.$broadcast("CURRENT_PAGE_TITLE",m)}else if("collectionList"===a.current.name){var g=a.params.collectid.substr(0,a.params.collectid.lastIndexOf("_")).replace(/-/g," ");e.$broadcast("CURRENT_PAGE_TITLE",{newval:g})}else if("shoppingSearch"==a.current.name){if(console.log("$rootScope.searchValue "+e.searchValue),void 0==e.searchValue&&(e.searchValue=a.params.query),void 0!=e.searchValue){var f="";e.i18n["socialcommerce.page.title.search"]&&(f=e.i18n["socialcommerce.page.title.search"]),e.$broadcast("CURRENT_PAGE_TITLE",{newval:f+" "+e.searchValue})}}else if(a.current.name.indexOf("payments")>-1){console.log("Payement state  ");var l="";e.i18n["socialcommerce.page.title.mypayment"]&&(l=e.i18n["socialcommerce.page.title.mypayment"]),0==l.length&&o.currentUser&&(l=o.currentUser.first_name),e.$broadcast("CURRENT_PAGE_TITLE",{newval:l})}else"home_shopping"==a.current.name&&e.$watch("config",function(){e.config&&e.config.site_name&&e.$broadcast("CURRENT_PAGE_TITLE",{newval:e.config.site_name})})}),o.$on("CURRENT_PAGE_TITLE",function(a,t){e.pageTitleText=t.newval,console.log("CURRENT_PAGE_TITLE",t.newval)})}}}]),app.directive("uiPromocodeBox",["$apiSocialCommerce",function(e){return{restrict:"C",link:function(a,t,o){a.email_promo_code="",a.isSending=!1,a.error_sending_promocode_msg="",a.sending_promocode_isDone=!1,a.sendCodeToEmail=function(){a.email_promo_code&&!a.isSending&&(a.isSending=!0,a.error_sending_promocode_msg="",e.sendGameCodeToEmail(a.email_promo_code,function(e,t){a.isSending=!1,t.status&&t.status.success?(a.sending_promocode_isDone=!0,a.email_promo_code=""):t.status&&t.status.err?a.error_sending_promocode_msg=t.status.err:a.error_sending_promocode_msg=$("#general-error-message:first").text()}))}}}}]),app.directive("uiNumericOnly",[function(){return{require:"ngModel",link:function(e,a,t,o){o.$parsers.push(function(e){var a=e.replace(/[^\d.-]/g,"");return a!=e&&(o.$setViewValue(a),o.$render()),a})}}}]),app.directive("uiQtyMin",[function(){return{restrict:"C",link:function(e,a,t){e.$watch("product_selected.qty",function(a){console.log("qty min watch  : "+a),(null==a||void 0==a||1>a)&&(e.product_selected.qty=1)})}}}]),app.directive("fbTrackingPixel",["$rootScope",function(e){return{restrict:"C",link:function(a,t,o){a.addFBTrackPixel=function(a,t){if(console.log("addFBTrackPixel ................."+e.config.fb_tracking_pixel.fb_pixel_enable),e.config.fb_tracking_pixel&&"1"==e.config.fb_tracking_pixel.fb_pixel_enable){var o=e.config.currency.code;!function(){var e=window._fbq||(window._fbq=[]);if(!e.loaded){var a=document.createElement("script");a.async=!0,a.src="//connect.facebook.net/en_US/fbds.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(a,t),e.loaded=!0}}(),console.log("addFBTrackPixel ................."+a+" fbvalue - "+t),window._fbq=window._fbq||[],window._fbq.push(["track",a,{value:t,currency:o}])}}}}}]),app.directive("uiGameHud",["$filter","$timeout","$rootScope",function(e,a,t){return{restrict:"C",link:function(o,n,i){o.gameShow=!1,o.init=function(){var e=0;i.deduct&&(e=i.deduct),oHeight=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-e,$(n).css("height",oHeight);var a=100;$(n).find(".hud").css("height",a),$(n).find(".game-wrapper").css("height",oHeight-a),$(n).find(".game-wrapper .game-iframe").css("height",oHeight-a)},o.init(),o.currentGameParams={},o.gameProgress={},o.$on("SHOW_GAME_MODAL",function(e,n){console.log("SHOW_GAME_MODAL",n.scope),o.gameProgress.percent_score=0,o.currentGameScope=n.scope,o.currentGameParams={game_id:o.currentGameScope.product_game.game.game_id,product_listing_id:o.currentGameScope.productArticle.productListing.product_listing_id,score_complete:o.currentGameScope.product_game.score};var i=JSON.stringify(o.currentGameParams);o.$broadcast("PRODUCT_GAME_START_EVENT",i),o.gameShow=!0,(1!=o.currentGameScope.product_game.game.compatibility_type||1==o.currentGameScope.product_game.game.compatibility_type&&"mobile"!=t.fix_device_type)&&$(".ui-game-hud .game-iframe").attr("src",o.currentGameScope.product_game.game.game_path),$(".commerce-canvas").hide(),a(function(){var e=$(".ui-game-hud .game-iframe")[0];e.contentWindow.focus()},800)}),o.closeGame=function(){o.currentGameParams={},o.gameProgress={},o.gameShow=!1,$(".ui-game-hud .game-iframe").attr("src",""),$(".commerce-canvas").show(),$(".reveal-modal-bg").css("display:none")},o.resetGame=function(){a(function(){o.gameProgress={},o.currentGameParams.played_score=0,o.gameProgress.percent_score=0})},o.$on("PRODUCT_GAME_RESET",function(e,a){o.resetGame()}),o.$on("HIDE_GAME_MODAL",function(e,a){o.closeGame()}),o.$on("resizestop",function(){o.init()}),o.$on("PRODUCT_GAME_UPDATE_EVENT",function(t,n){console.log("PRODUCT_GAME_UPDATE_EVENT",n);var i=JSON.parse(n);if(o.currentGameParams.score_complete&&i&&i.score){o.currentGameParams.played_score=i.score;var r=i.score/o.currentGameParams.score_complete*100;if(a(function(){o.gameProgress.percent_score=e("number")(r,2)}),i.score<o.currentGameParams.score_complete)return}var s=JSON.stringify(o.currentGameParams);o.$broadcast("PRODUCT_GAME_FINISH_EVENT",s)})}}}]),app.directive("uiTagsMultiSelect",["$timeout","$apiSocialCommerce",function(e,a){return{restrict:"C",templateUrl:"/_partials/socialcommerce/common/tags-multiselect",replace:!0,scope:{hashTags:"=",predefinedTagList:"=",tagsI18n:"=",isDisabled:"="},link:function(a,t,o){a.search_tags="",a.show_autocompletebox=!1,a.loopcount=0;var n=5;a.$watch("hashTags",function(){a.hashTags&&(a.loopcount=a.hashTags.length>n?Math.ceil(a.hashTags.length/n):1)}),a.getHashtag=function(e){return e||(e=1),a.hashTags?a.hashTags.slice(e*n-n,e*n):!1},a.addTag=function(e){e&&(null==a.hashTags&&(a.hashTags=[]),a.hashTags.indexOf(e)>-1||a.hashTags.push(e))},a.removeTag=function(e,t){if(e){var o=a.hashTags.indexOf(e);-1!=o&&(a.hashTags.splice(o,1),t&&(t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0))}},a.hideAutoCompleteTag=function(){e(function(){a.show_autocompletebox=!1},200)},a.tagIsNotInUse=function(e){return!a.hashTags||a.hashTags.indexOf(e)<0},a.focusTag=function(){e(function(){t.find("input").focus()},10)}}}}]),app.directive("uiMerchantSearch",["$rootScope","$state",function(e,a){return{restrict:"C",link:function(e,t,o){e.textSearch="",console.log("MerchantSearch",a.params.searchtext),e.textSearch=a.params.searchtext,e.searchnow=function(){console.log("searchnow",e.textSearch),a.go("merchant-list",{searchtext:e.textSearch})}}}}]),app.directive("uiMerchantSignUp",["$rootScope","$state",function(e,a){return{restrict:"C",link:function(e,t,o){e.textSearch="",console.log("uiMerchantSignUp",a.params.searchtext),e.signupNow=function(){console.log("merchant-signup",e.txtMerchant),a.go("merchant-signup",{merchantname:e.txtMerchant})}}}}]),app.directive("uiReturnCond",[function(){return{restrict:"C",link:function(e,a,t){console.log("uiReturnCond ",t);var o="#"+t.modalid;a.find("a").on("click",function(e){$(o).foundation("reveal","open")}),e.closemodal=function(){$(o).foundation("reveal","close")}}}}]),app.directive("ngEnter",["$rootScope",function(e){return{restrict:"C",link:function(e,a,t){a.bind("keydown keypress",function(a){13===a.which&&(e.$apply(function(){e.$eval(t.ngEnter)}),a.preventDefault())})}}}]),app.directive("uiRedeemListReady",["$timeout",function(e){return{restrict:"A",link:function(a,t,o){a.$watch("scratchCardListReady",function(t){t&&e(function(){a.mySwiper=new Swiper("#redeemswiper",{slidesPerView:a.displaySlideNum,slidesPerViewFit:!0,autoResize:!0}),console.log("mySwiper..."+a.mySwiper)},1)})}}}]),app.directive("uiPromotedBusinesses",["$q","$apiSocialCommerce",function(e,a){return{restrict:"A",replace:!0,scope:!0,templateUrl:"/_partials/socialcommerce/common/ui-promoted-businesses",link:function(e,t,o){var n={title:null,limit:6},i=e.$eval(o.uiPromotedBusinesses)||{};i=angular.extend(n,i),e.loaded=!1,e.title=i.title,a.listPopularMerchants({page:1,count:i.limit}).then(function(a){e.merchants=a,e.loaded=!0})}}}]),app.directive("uiTopServiceCategories",["$q","$apiSocialCommerce",function(e,a){return{restrict:"A",replace:!0,scope:!0,templateUrl:"/_partials/socialcommerce/common/ui-top-service-categories",link:function(e,t,o){var n={title:null,limit:6,tags:[],tagCondition:"and"},i=e.$eval(o.uiTopServiceCategories)||{};return i=angular.extend(n,i),i.tags.length?i.tagCondition&&-1!==["and","or"].indexOf(i.tagCondition)?(console.log("[uiTopServiceCategories] Loading widget with the following options",i),e.loaded=!1,e.title=i.title,void a.listPopularCategories({page:1,count:i.limit,tags:i.tags,inclusive_condition:i.tagCondition}).then(function(a){e.categories=a,e.loaded=!0})):void console.error("[uiTopServiceCategories] Invalid options. `tagCondition` should `and` or `or`"):void console.error("[uiTopServiceCategories] Invalid options. `tags` should not be empty")}}}]),define("directive.social.commerce",function(){}),function(){"use strict";function e(e){e.fn.swiper=function(t){var o;return e(this).each(function(){var e=new a(this,t);o||(o=e)}),o}}var a=function(e,o){function n(){return"horizontal"===h.params.direction}function i(){h.autoplayTimeoutId=setTimeout(function(){h.params.loop?(h.fixLoop(),h._slideNext()):h.isEnd?o.autoplayStopOnLast?h.stopAutoplay():h._slideTo(0):h._slideNext()},h.params.autoplay)}function r(e,a){var t=_(e.target);if(!t.is(a))if("string"==typeof a)t=t.parents(a);else if(a.nodeType){var o;return t.parents().each(function(e,t){t===a&&(o=a)}),o?a:void 0}if(0!==t.length)return t[0]}function s(e,a){a=a||{};var t=window.MutationObserver||window.WebkitMutationObserver,o=new t(function(e){e.forEach(function(e){h.onResize(!0),h.emit("onObserverUpdate",h,e)})});o.observe(e,{attributes:"undefined"==typeof a.attributes?!0:a.attributes,childList:"undefined"==typeof a.childList?!0:a.childList,characterData:"undefined"==typeof a.characterData?!0:a.characterData}),h.observers.push(o)}function c(e){e.originalEvent&&(e=e.originalEvent);var a=e.keyCode||e.charCode;if(!h.params.allowSwipeToNext&&(n()&&39===a||!n()&&40===a))return!1;if(!h.params.allowSwipeToPrev&&(n()&&37===a||!n()&&38===a))return!1;if(!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey||document.activeElement&&document.activeElement.nodeName&&("input"===document.activeElement.nodeName.toLowerCase()||"textarea"===document.activeElement.nodeName.toLowerCase()))){if(37===a||39===a||38===a||40===a){var t=!1;if(h.container.parents(".swiper-slide").length>0&&0===h.container.parents(".swiper-slide-active").length)return;var o={left:window.pageXOffset,top:window.pageYOffset},i=window.innerWidth,r=window.innerHeight,s=h.container.offset();h.rtl&&(s.left=s.left-h.container[0].scrollLeft);for(var c=[[s.left,s.top],[s.left+h.width,s.top],[s.left,s.top+h.height],[s.left+h.width,s.top+h.height]],l=0;l<c.length;l++){var d=c[l];d[0]>=o.left&&d[0]<=o.left+i&&d[1]>=o.top&&d[1]<=o.top+r&&(t=!0)}if(!t)return}n()?(37!==a&&39!==a||(e.preventDefault?e.preventDefault():e.returnValue=!1),(39===a&&!h.rtl||37===a&&h.rtl)&&h.slideNext(),(37===a&&!h.rtl||39===a&&h.rtl)&&h.slidePrev()):(38!==a&&40!==a||(e.preventDefault?e.preventDefault():e.returnValue=!1),40===a&&h.slideNext(),38===a&&h.slidePrev())}}function l(e){e.originalEvent&&(e=e.originalEvent);var a=h.mousewheel.event,t=0;if(e.detail)t=-e.detail;else if("mousewheel"===a)if(h.params.mousewheelForceToAxis)if(n()){if(!(Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY)))return;t=e.wheelDeltaX}else{if(!(Math.abs(e.wheelDeltaY)>Math.abs(e.wheelDeltaX)))return;t=e.wheelDeltaY}else t=e.wheelDelta;else if("DOMMouseScroll"===a)t=-e.detail;else if("wheel"===a)if(h.params.mousewheelForceToAxis)if(n()){if(!(Math.abs(e.deltaX)>Math.abs(e.deltaY)))return;t=-e.deltaX}else{if(!(Math.abs(e.deltaY)>Math.abs(e.deltaX)))return;t=-e.deltaY}else t=Math.abs(e.deltaX)>Math.abs(e.deltaY)?-e.deltaX:-e.deltaY;if(h.params.mousewheelInvert&&(t=-t),h.params.freeMode){var o=h.getWrapperTranslate()+t;if(o>0&&(o=0),o<h.maxTranslate()&&(o=h.maxTranslate()),h.setWrapperTransition(0),h.setWrapperTranslate(o),h.updateProgress(),h.updateActiveIndex(),h.params.freeModeSticky&&(clearTimeout(h.mousewheel.timeout),h.mousewheel.timeout=setTimeout(function(){h.slideReset()},300)),0===o||o===h.maxTranslate())return}else{if((new window.Date).getTime()-h.mousewheel.lastScrollTime>60)if(0>t)if(h.isEnd){if(h.params.mousewheelReleaseOnEdges)return!0}else h.slideNext();else if(h.isBeginning){if(h.params.mousewheelReleaseOnEdges)return!0}else h.slidePrev();h.mousewheel.lastScrollTime=(new window.Date).getTime()}return h.params.autoplay&&h.stopAutoplay(),e.preventDefault?e.preventDefault():e.returnValue=!1,!1}function d(e,a){e=_(e);var t,o,i;t=e.attr("data-swiper-parallax")||"0",o=e.attr("data-swiper-parallax-x"),i=e.attr("data-swiper-parallax-y"),o||i?(o=o||"0",i=i||"0"):n()?(o=t,i="0"):(i=t,o="0"),o=o.indexOf("%")>=0?parseInt(o,10)*a+"%":o*a+"px",i=i.indexOf("%")>=0?parseInt(i,10)*a+"%":i*a+"px",e.transform("translate3d("+o+", "+i+",0px)")}function u(e){return 0!==e.indexOf("on")&&(e=e[0]!==e[0].toUpperCase()?"on"+e[0].toUpperCase()+e.substring(1):"on"+e),e}if(!(this instanceof a))return new a(e,o);var m={direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,autoplay:!1,autoplayDisableOnInteraction:!0,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeSticky:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",coverflow:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},cube:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94},fade:{crossFade:!1},parallax:!1,scrollbar:null,scrollbarHide:!0,keyboardControl:!1,mousewheelControl:!1,mousewheelReleaseOnEdges:!1,mousewheelInvert:!1,mousewheelForceToAxis:!1,hashnav:!1,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,centeredSlides:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,onlyExternal:!1,threshold:0,touchMoveStopPropagation:!0,pagination:null,paginationClickable:!1,paginationHide:!1,paginationBulletRender:null,resistance:!0,resistanceRatio:.85,nextButton:null,prevButton:null,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,lazyLoading:!1,lazyLoadingInPrevNext:!1,lazyLoadingOnTransitionStart:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,control:void 0,controlInverse:!1,allowSwipeToPrev:!0,allowSwipeToNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",buttonDisabledClass:"swiper-button-disabled",paginationHiddenClass:"swiper-pagination-hidden",observer:!1,observeParents:!1,a11y:!1,prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",runCallbacksOnInit:!0},p=o&&o.virtualTranslate;o=o||{};for(var g in m)if("undefined"==typeof o[g])o[g]=m[g];else if("object"==typeof o[g])for(var f in m[g])"undefined"==typeof o[g][f]&&(o[g][f]=m[g][f]);var h=this;h.version="3.0.8",h.params=o,h.classNames=[];var _;if(_="undefined"==typeof t?window.Dom7||window.Zepto||window.jQuery:t,_&&(h.$=_,h.container=_(e),0!==h.container.length)){if(h.container.length>1)return void h.container.each(function(){new a(this,o)});h.container[0].swiper=h,h.container.data("swiper",h),h.classNames.push("swiper-container-"+h.params.direction),h.params.freeMode&&h.classNames.push("swiper-container-free-mode"),h.support.flexbox||(h.classNames.push("swiper-container-no-flexbox"),h.params.slidesPerColumn=1),(h.params.parallax||h.params.watchSlidesVisibility)&&(h.params.watchSlidesProgress=!0),["cube","coverflow"].indexOf(h.params.effect)>=0&&(h.support.transforms3d?(h.params.watchSlidesProgress=!0,h.classNames.push("swiper-container-3d")):h.params.effect="slide"),"slide"!==h.params.effect&&h.classNames.push("swiper-container-"+h.params.effect),"cube"===h.params.effect&&(h.params.resistanceRatio=0,h.params.slidesPerView=1,h.params.slidesPerColumn=1,h.params.slidesPerGroup=1,h.params.centeredSlides=!1,h.params.spaceBetween=0,h.params.virtualTranslate=!0,h.params.setWrapperSize=!1),"fade"===h.params.effect&&(h.params.slidesPerView=1,h.params.slidesPerColumn=1,h.params.slidesPerGroup=1,h.params.watchSlidesProgress=!0,h.params.spaceBetween=0,"undefined"==typeof p&&(h.params.virtualTranslate=!0)),h.params.grabCursor&&h.support.touch&&(h.params.grabCursor=!1),h.wrapper=h.container.children("."+h.params.wrapperClass),h.params.pagination&&(h.paginationContainer=_(h.params.pagination),h.params.paginationClickable&&h.paginationContainer.addClass("swiper-pagination-clickable")),h.rtl=n()&&("rtl"===h.container[0].dir.toLowerCase()||"rtl"===h.container.css("direction")),h.rtl&&h.classNames.push("swiper-container-rtl"),h.rtl&&(h.wrongRTL="-webkit-box"===h.wrapper.css("display")),h.params.slidesPerColumn>1&&h.classNames.push("swiper-container-multirow"),h.device.android&&h.classNames.push("swiper-container-android"),h.container.addClass(h.classNames.join(" ")),h.translate=0,h.progress=0,h.velocity=0,h.lockSwipeToNext=function(){h.params.allowSwipeToNext=!1},h.lockSwipeToPrev=function(){h.params.allowSwipeToPrev=!1},h.lockSwipes=function(){h.params.allowSwipeToNext=h.params.allowSwipeToPrev=!1},h.unlockSwipeToNext=function(){h.params.allowSwipeToNext=!0},h.unlockSwipeToPrev=function(){h.params.allowSwipeToPrev=!0},h.unlockSwipes=function(){h.params.allowSwipeToNext=h.params.allowSwipeToPrev=!0},h.params.grabCursor&&(h.container[0].style.cursor="move",h.container[0].style.cursor="-webkit-grab",h.container[0].style.cursor="-moz-grab",h.container[0].style.cursor="grab"),h.imagesToLoad=[],h.imagesLoaded=0,h.loadImage=function(e,a,t,o){function n(){o&&o()}var i;e.complete&&t?n():a?(i=new window.Image,i.onload=n,i.onerror=n,i.src=a):n()},h.preloadImages=function(){function e(){"undefined"!=typeof h&&null!==h&&(void 0!==h.imagesLoaded&&h.imagesLoaded++,h.imagesLoaded===h.imagesToLoad.length&&(h.params.updateOnImagesReady&&h.update(),h.emit("onImagesReady",h)))}h.imagesToLoad=h.container.find("img");for(var a=0;a<h.imagesToLoad.length;a++)h.loadImage(h.imagesToLoad[a],h.imagesToLoad[a].currentSrc||h.imagesToLoad[a].getAttribute("src"),!0,e)},h.autoplayTimeoutId=void 0,h.autoplaying=!1,h.autoplayPaused=!1,h.startAutoplay=function(){return"undefined"!=typeof h.autoplayTimeoutId?!1:h.params.autoplay?h.autoplaying?!1:(h.autoplaying=!0,h.emit("onAutoplayStart",h),void i()):!1},h.stopAutoplay=function(e){h.autoplayTimeoutId&&(h.autoplayTimeoutId&&clearTimeout(h.autoplayTimeoutId),h.autoplaying=!1,h.autoplayTimeoutId=void 0,h.emit("onAutoplayStop",h))},h.pauseAutoplay=function(e){h.autoplayPaused||(h.autoplayTimeoutId&&clearTimeout(h.autoplayTimeoutId),h.autoplayPaused=!0,0===e?(h.autoplayPaused=!1,i()):h.wrapper.transitionEnd(function(){h&&(h.autoplayPaused=!1,h.autoplaying?i():h.stopAutoplay())}))},h.minTranslate=function(){return-h.snapGrid[0]},h.maxTranslate=function(){return-h.snapGrid[h.snapGrid.length-1]},h.updateContainerSize=function(){var e,a;e="undefined"!=typeof h.params.width?h.params.width:h.container[0].clientWidth,a="undefined"!=typeof h.params.height?h.params.height:h.container[0].clientHeight,0===e&&n()||0===a&&!n()||(h.width=e,h.height=a,h.size=n()?h.width:h.height)},h.updateSlidesSize=function(){h.slides=h.wrapper.children("."+h.params.slideClass),h.snapGrid=[],h.slidesGrid=[],h.slidesSizesGrid=[];var e,a=h.params.spaceBetween,t=0,o=0,i=0;"string"==typeof a&&a.indexOf("%")>=0&&(a=parseFloat(a.replace("%",""))/100*h.size),h.virtualSize=-a,h.rtl?h.slides.css({marginLeft:"",marginTop:""}):h.slides.css({marginRight:"",marginBottom:""});var r;h.params.slidesPerColumn>1&&(r=Math.floor(h.slides.length/h.params.slidesPerColumn)===h.slides.length/h.params.slidesPerColumn?h.slides.length:Math.ceil(h.slides.length/h.params.slidesPerColumn)*h.params.slidesPerColumn);var s,c=h.params.slidesPerColumn,l=r/c,d=l-(h.params.slidesPerColumn*l-h.slides.length);for(e=0;e<h.slides.length;e++){s=0;var u=h.slides.eq(e);if(h.params.slidesPerColumn>1){var m,p,g;"column"===h.params.slidesPerColumnFill?(p=Math.floor(e/c),g=e-p*c,(p>d||p===d&&g===c-1)&&++g>=c&&(g=0,p++),m=p+g*r/c,u.css({"-webkit-box-ordinal-group":m,"-moz-box-ordinal-group":m,"-ms-flex-order":m,"-webkit-order":m,order:m})):(g=Math.floor(e/l),p=e-g*l),u.css({"margin-top":0!==g&&h.params.spaceBetween&&h.params.spaceBetween+"px"}).attr("data-swiper-column",p).attr("data-swiper-row",g)}"none"!==u.css("display")&&("auto"===h.params.slidesPerView?s=n()?u.outerWidth(!0):u.outerHeight(!0):(s=(h.size-(h.params.slidesPerView-1)*a)/h.params.slidesPerView,n()?h.slides[e].style.width=s+"px":h.slides[e].style.height=s+"px"),h.slides[e].swiperSlideSize=s,h.slidesSizesGrid.push(s),h.params.centeredSlides?(t=t+s/2+o/2+a,0===e&&(t=t-h.size/2-a),Math.abs(t)<.001&&(t=0),i%h.params.slidesPerGroup===0&&h.snapGrid.push(t),h.slidesGrid.push(t)):(i%h.params.slidesPerGroup===0&&h.snapGrid.push(t),h.slidesGrid.push(t),t=t+s+a),h.virtualSize+=s+a,o=s,i++)}h.virtualSize=Math.max(h.virtualSize,h.size);var f;if(h.rtl&&h.wrongRTL&&("slide"===h.params.effect||"coverflow"===h.params.effect)&&h.wrapper.css({width:h.virtualSize+h.params.spaceBetween+"px"}),h.support.flexbox&&!h.params.setWrapperSize||(n()?h.wrapper.css({width:h.virtualSize+h.params.spaceBetween+"px"}):h.wrapper.css({height:h.virtualSize+h.params.spaceBetween+"px"})),h.params.slidesPerColumn>1&&(h.virtualSize=(s+h.params.spaceBetween)*r,h.virtualSize=Math.ceil(h.virtualSize/h.params.slidesPerColumn)-h.params.spaceBetween,h.wrapper.css({width:h.virtualSize+h.params.spaceBetween+"px"}),h.params.centeredSlides)){for(f=[],e=0;e<h.snapGrid.length;e++)h.snapGrid[e]<h.virtualSize+h.snapGrid[0]&&f.push(h.snapGrid[e]);h.snapGrid=f}if(!h.params.centeredSlides){for(f=[],e=0;e<h.snapGrid.length;e++)h.snapGrid[e]<=h.virtualSize-h.size&&f.push(h.snapGrid[e]);h.snapGrid=f,Math.floor(h.virtualSize-h.size)>Math.floor(h.snapGrid[h.snapGrid.length-1])&&h.snapGrid.push(h.virtualSize-h.size)}0===h.snapGrid.length&&(h.snapGrid=[0]),0!==h.params.spaceBetween&&(n()?h.rtl?h.slides.css({marginLeft:a+"px"}):h.slides.css({marginRight:a+"px"}):h.slides.css({marginBottom:a+"px"})),h.params.watchSlidesProgress&&h.updateSlidesOffset()},h.updateSlidesOffset=function(){for(var e=0;e<h.slides.length;e++)h.slides[e].swiperSlideOffset=n()?h.slides[e].offsetLeft:h.slides[e].offsetTop},h.updateSlidesProgress=function(e){if("undefined"==typeof e&&(e=h.translate||0),0!==h.slides.length){"undefined"==typeof h.slides[0].swiperSlideOffset&&h.updateSlidesOffset();var a=h.params.centeredSlides?-e+h.size/2:-e;h.rtl&&(a=h.params.centeredSlides?e-h.size/2:e);h.container[0].getBoundingClientRect(),n()?"left":"top",n()?"right":"bottom";h.slides.removeClass(h.params.slideVisibleClass);for(var t=0;t<h.slides.length;t++){var o=h.slides[t],i=h.params.centeredSlides===!0?o.swiperSlideSize/2:0,r=(a-o.swiperSlideOffset-i)/(o.swiperSlideSize+h.params.spaceBetween);if(h.params.watchSlidesVisibility){var s=-(a-o.swiperSlideOffset-i),c=s+h.slidesSizesGrid[t],l=s>=0&&s<h.size||c>0&&c<=h.size||0>=s&&c>=h.size;l&&h.slides.eq(t).addClass(h.params.slideVisibleClass)}o.progress=h.rtl?-r:r}}},h.updateProgress=function(e){"undefined"==typeof e&&(e=h.translate||0);var a=h.maxTranslate()-h.minTranslate();0===a?(h.progress=0,h.isBeginning=h.isEnd=!0):(h.progress=(e-h.minTranslate())/a,h.isBeginning=h.progress<=0,h.isEnd=h.progress>=1),h.isBeginning&&h.emit("onReachBeginning",h),h.isEnd&&h.emit("onReachEnd",h),h.params.watchSlidesProgress&&h.updateSlidesProgress(e),h.emit("onProgress",h,h.progress)},h.updateActiveIndex=function(){var e,a,t,o=h.rtl?h.translate:-h.translate;for(a=0;a<h.slidesGrid.length;a++)"undefined"!=typeof h.slidesGrid[a+1]?o>=h.slidesGrid[a]&&o<h.slidesGrid[a+1]-(h.slidesGrid[a+1]-h.slidesGrid[a])/2?e=a:o>=h.slidesGrid[a]&&o<h.slidesGrid[a+1]&&(e=a+1):o>=h.slidesGrid[a]&&(e=a);(0>e||"undefined"==typeof e)&&(e=0),t=Math.floor(e/h.params.slidesPerGroup),t>=h.snapGrid.length&&(t=h.snapGrid.length-1),e!==h.activeIndex&&(h.snapIndex=t,h.previousIndex=h.activeIndex,h.activeIndex=e,h.updateClasses())},h.updateClasses=function(){h.slides.removeClass(h.params.slideActiveClass+" "+h.params.slideNextClass+" "+h.params.slidePrevClass);var e=h.slides.eq(h.activeIndex);if(e.addClass(h.params.slideActiveClass),e.next("."+h.params.slideClass).addClass(h.params.slideNextClass),e.prev("."+h.params.slideClass).addClass(h.params.slidePrevClass),h.bullets&&h.bullets.length>0){h.bullets.removeClass(h.params.bulletActiveClass);var a;h.params.loop?(a=Math.ceil(h.activeIndex-h.loopedSlides)/h.params.slidesPerGroup,a>h.slides.length-1-2*h.loopedSlides&&(a-=h.slides.length-2*h.loopedSlides),a>h.bullets.length-1&&(a-=h.bullets.length)):a="undefined"!=typeof h.snapIndex?h.snapIndex:h.activeIndex||0,h.paginationContainer.length>1?h.bullets.each(function(){_(this).index()===a&&_(this).addClass(h.params.bulletActiveClass)}):h.bullets.eq(a).addClass(h.params.bulletActiveClass)}h.params.loop||(h.params.prevButton&&(h.isBeginning?(_(h.params.prevButton).addClass(h.params.buttonDisabledClass),h.params.a11y&&h.a11y&&h.a11y.disable(_(h.params.prevButton))):(_(h.params.prevButton).removeClass(h.params.buttonDisabledClass),h.params.a11y&&h.a11y&&h.a11y.enable(_(h.params.prevButton)))),h.params.nextButton&&(h.isEnd?(_(h.params.nextButton).addClass(h.params.buttonDisabledClass),h.params.a11y&&h.a11y&&h.a11y.disable(_(h.params.nextButton))):(_(h.params.nextButton).removeClass(h.params.buttonDisabledClass),h.params.a11y&&h.a11y&&h.a11y.enable(_(h.params.nextButton)))))},h.updatePagination=function(){if(h.params.pagination&&h.paginationContainer&&h.paginationContainer.length>0){for(var e="",a=h.params.loop?Math.ceil((h.slides.length-2*h.loopedSlides)/h.params.slidesPerGroup):h.snapGrid.length,t=0;a>t;t++)e+=h.params.paginationBulletRender?h.params.paginationBulletRender(t,h.params.bulletClass):'<span class="'+h.params.bulletClass+'"></span>';h.paginationContainer.html(e),h.bullets=h.paginationContainer.find("."+h.params.bulletClass)}},h.update=function(e){function a(){o=Math.min(Math.max(h.translate,h.maxTranslate()),h.minTranslate()),h.setWrapperTranslate(o),h.updateActiveIndex(),h.updateClasses()}if(h.updateContainerSize(),h.updateSlidesSize(),h.updateProgress(),h.updatePagination(),h.updateClasses(),h.params.scrollbar&&h.scrollbar&&h.scrollbar.set(),e){var t,o;h.params.freeMode?a():(t="auto"===h.params.slidesPerView&&h.isEnd&&!h.params.centeredSlides?h.slideTo(h.slides.length-1,0,!1,!0):h.slideTo(h.activeIndex,0,!1,!0),t||a())}},h.onResize=function(e){if(h.updateContainerSize(),h.updateSlidesSize(),h.updateProgress(),("auto"===h.params.slidesPerView||h.params.freeMode||e)&&h.updatePagination(),h.params.scrollbar&&h.scrollbar&&h.scrollbar.set(),h.params.freeMode){var a=Math.min(Math.max(h.translate,h.maxTranslate()),h.minTranslate());h.setWrapperTranslate(a),h.updateActiveIndex(),h.updateClasses()}else h.updateClasses(),"auto"===h.params.slidesPerView&&h.isEnd&&!h.params.centeredSlides?h.slideTo(h.slides.length-1,0,!1,!0):h.slideTo(h.activeIndex,0,!1,!0)};var v=["mousedown","mousemove","mouseup"];window.navigator.pointerEnabled?v=["pointerdown","pointermove","pointerup"]:window.navigator.msPointerEnabled&&(v=["MSPointerDown","MSPointerMove","MSPointerUp"]),h.touchEvents={start:h.support.touch||!h.params.simulateTouch?"touchstart":v[0],move:h.support.touch||!h.params.simulateTouch?"touchmove":v[1],end:h.support.touch||!h.params.simulateTouch?"touchend":v[2]},(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&("container"===h.params.touchEventsTarget?h.container:h.wrapper).addClass("swiper-wp8-"+h.params.direction),h.initEvents=function(e){var a=e?"off":"on",t=e?"removeEventListener":"addEventListener",n="container"===h.params.touchEventsTarget?h.container[0]:h.wrapper[0],i=h.support.touch?n:document,r=!!h.params.nested;h.browser.ie?(n[t](h.touchEvents.start,h.onTouchStart,!1),i[t](h.touchEvents.move,h.onTouchMove,r),i[t](h.touchEvents.end,h.onTouchEnd,!1)):(h.support.touch&&(n[t](h.touchEvents.start,h.onTouchStart,!1),n[t](h.touchEvents.move,h.onTouchMove,r),n[t](h.touchEvents.end,h.onTouchEnd,!1)),!o.simulateTouch||h.device.ios||h.device.android||(n[t]("mousedown",h.onTouchStart,!1),document[t]("mousemove",h.onTouchMove,r),document[t]("mouseup",h.onTouchEnd,!1))),window[t]("resize",h.onResize),h.params.nextButton&&(_(h.params.nextButton)[a]("click",h.onClickNext),h.params.a11y&&h.a11y&&_(h.params.nextButton)[a]("keydown",h.a11y.onEnterKey)),h.params.prevButton&&(_(h.params.prevButton)[a]("click",h.onClickPrev),h.params.a11y&&h.a11y&&_(h.params.prevButton)[a]("keydown",h.a11y.onEnterKey)),h.params.pagination&&h.params.paginationClickable&&_(h.paginationContainer)[a]("click","."+h.params.bulletClass,h.onClickIndex),(h.params.preventClicks||h.params.preventClicksPropagation)&&n[t]("click",h.preventClicks,!0)},h.attachEvents=function(e){h.initEvents()},h.detachEvents=function(){h.initEvents(!0)},h.allowClick=!0,h.preventClicks=function(e){h.allowClick||(h.params.preventClicks&&e.preventDefault(),h.params.preventClicksPropagation&&h.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))},h.onClickNext=function(e){e.preventDefault(),h.slideNext()},h.onClickPrev=function(e){e.preventDefault(),h.slidePrev()},h.onClickIndex=function(e){e.preventDefault();var a=_(this).index()*h.params.slidesPerGroup;h.params.loop&&(a+=h.loopedSlides),h.slideTo(a)},h.updateClickedSlide=function(e){var a=r(e,"."+h.params.slideClass),t=!1;if(a)for(var o=0;o<h.slides.length;o++)h.slides[o]===a&&(t=!0);if(!a||!t)return h.clickedSlide=void 0,void(h.clickedIndex=void 0);if(h.clickedSlide=a,h.clickedIndex=_(a).index(),h.params.slideToClickedSlide&&void 0!==h.clickedIndex&&h.clickedIndex!==h.activeIndex){var n,i=h.clickedIndex;if(h.params.loop)if(n=_(h.clickedSlide).attr("data-swiper-slide-index"),i>h.slides.length-h.params.slidesPerView)h.fixLoop(),i=h.wrapper.children("."+h.params.slideClass+'[data-swiper-slide-index="'+n+'"]').eq(0).index(),setTimeout(function(){h.slideTo(i)},0);else if(i<h.params.slidesPerView-1){h.fixLoop();var s=h.wrapper.children("."+h.params.slideClass+'[data-swiper-slide-index="'+n+'"]');i=s.eq(s.length-1).index(),setTimeout(function(){h.slideTo(i)},0)}else h.slideTo(i);else h.slideTo(i)}};var y,w,k,b,S,A,C,T,x,M="input, select, textarea, button",N=Date.now(),O=[];h.animating=!1,h.touches={startX:0,startY:0,currentX:0,currentY:0,diff:0};var D,I;if(h.onTouchStart=function(e){if(e.originalEvent&&(e=e.originalEvent),D="touchstart"===e.type,D||!("which"in e)||3!==e.which){if(h.params.noSwiping&&r(e,"."+h.params.noSwipingClass))return void(h.allowClick=!0);if(!h.params.swipeHandler||r(e,h.params.swipeHandler)){if(y=!0,w=!1,b=void 0,I=void 0,h.touches.startX=h.touches.currentX="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,h.touches.startY=h.touches.currentY="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,k=Date.now(),h.allowClick=!0,h.updateContainerSize(),h.swipeDirection=void 0,h.params.threshold>0&&(C=!1),"touchstart"!==e.type){var a=!0;_(e.target).is(M)&&(a=!1),document.activeElement&&_(document.activeElement).is(M)&&document.activeElement.blur(),a&&e.preventDefault()}h.emit("onTouchStart",h,e)}}},h.onTouchMove=function(e){
if(e.originalEvent&&(e=e.originalEvent),!(D&&"mousemove"===e.type||e.preventedByNestedSwiper)){if(h.params.onlyExternal)return w=!0,void(h.allowClick=!1);if(D&&document.activeElement&&e.target===document.activeElement&&_(e.target).is(M))return w=!0,void(h.allowClick=!1);if(h.emit("onTouchMove",h,e),!(e.targetTouches&&e.targetTouches.length>1)){if(h.touches.currentX="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,h.touches.currentY="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,"undefined"==typeof b){var a=180*Math.atan2(Math.abs(h.touches.currentY-h.touches.startY),Math.abs(h.touches.currentX-h.touches.startX))/Math.PI;b=n()?a>h.params.touchAngle:90-a>h.params.touchAngle}if(b&&h.emit("onTouchMoveOpposite",h,e),"undefined"==typeof I&&h.browser.ieTouch&&(h.touches.currentX===h.touches.startX&&h.touches.currentY===h.touches.startY||(I=!0)),y){if(b)return void(y=!1);if(I||!h.browser.ieTouch){h.allowClick=!1,h.emit("onSliderMove",h,e),e.preventDefault(),h.params.touchMoveStopPropagation&&!h.params.nested&&e.stopPropagation(),w||(o.loop&&h.fixLoop(),A=h.getWrapperTranslate(),h.setWrapperTransition(0),h.animating&&h.wrapper.trigger("webkitTransitionEnd transitionend oTransitionEnd MSTransitionEnd msTransitionEnd"),h.params.autoplay&&h.autoplaying&&(h.params.autoplayDisableOnInteraction?h.stopAutoplay():h.pauseAutoplay()),x=!1,h.params.grabCursor&&(h.container[0].style.cursor="move",h.container[0].style.cursor="-webkit-grabbing",h.container[0].style.cursor="-moz-grabbin",h.container[0].style.cursor="grabbing")),w=!0;var t=h.touches.diff=n()?h.touches.currentX-h.touches.startX:h.touches.currentY-h.touches.startY;t*=h.params.touchRatio,h.rtl&&(t=-t),h.swipeDirection=t>0?"prev":"next",S=t+A;var i=!0;if(t>0&&S>h.minTranslate()?(i=!1,h.params.resistance&&(S=h.minTranslate()-1+Math.pow(-h.minTranslate()+A+t,h.params.resistanceRatio))):0>t&&S<h.maxTranslate()&&(i=!1,h.params.resistance&&(S=h.maxTranslate()+1-Math.pow(h.maxTranslate()-A-t,h.params.resistanceRatio))),i&&(e.preventedByNestedSwiper=!0),!h.params.allowSwipeToNext&&"next"===h.swipeDirection&&A>S&&(S=A),!h.params.allowSwipeToPrev&&"prev"===h.swipeDirection&&S>A&&(S=A),h.params.followFinger){if(h.params.threshold>0){if(!(Math.abs(t)>h.params.threshold||C))return void(S=A);if(!C)return C=!0,h.touches.startX=h.touches.currentX,h.touches.startY=h.touches.currentY,S=A,void(h.touches.diff=n()?h.touches.currentX-h.touches.startX:h.touches.currentY-h.touches.startY)}(h.params.freeMode||h.params.watchSlidesProgress)&&h.updateActiveIndex(),h.params.freeMode&&(0===O.length&&O.push({position:h.touches[n()?"startX":"startY"],time:k}),O.push({position:h.touches[n()?"currentX":"currentY"],time:(new window.Date).getTime()})),h.updateProgress(S),h.setWrapperTranslate(S)}}}}}},h.onTouchEnd=function(e){if(e.originalEvent&&(e=e.originalEvent),h.emit("onTouchEnd",h,e),y){h.params.grabCursor&&w&&y&&(h.container[0].style.cursor="move",h.container[0].style.cursor="-webkit-grab",h.container[0].style.cursor="-moz-grab",h.container[0].style.cursor="grab");var a=Date.now(),t=a-k;if(h.allowClick&&(h.updateClickedSlide(e),h.emit("onTap",h,e),300>t&&a-N>300&&(T&&clearTimeout(T),T=setTimeout(function(){h&&(h.params.paginationHide&&h.paginationContainer.length>0&&!_(e.target).hasClass(h.params.bulletClass)&&h.paginationContainer.toggleClass(h.params.paginationHiddenClass),h.emit("onClick",h,e))},300)),300>t&&300>a-N&&(T&&clearTimeout(T),h.emit("onDoubleTap",h,e))),N=Date.now(),setTimeout(function(){h&&(h.allowClick=!0)},0),!y||!w||!h.swipeDirection||0===h.touches.diff||S===A)return void(y=w=!1);y=w=!1;var o;if(o=h.params.followFinger?h.rtl?h.translate:-h.translate:-S,h.params.freeMode){if(o<-h.minTranslate())return void h.slideTo(h.activeIndex);if(o>-h.maxTranslate())return void(h.slides.length<h.snapGrid.length?h.slideTo(h.snapGrid.length-1):h.slideTo(h.slides.length-1));if(h.params.freeModeMomentum){if(O.length>1){var n=O.pop(),i=O.pop(),r=n.position-i.position,s=n.time-i.time;h.velocity=r/s,h.velocity=h.velocity/2,Math.abs(h.velocity)<.02&&(h.velocity=0),(s>150||(new window.Date).getTime()-n.time>300)&&(h.velocity=0)}else h.velocity=0;O.length=0;var c=1e3*h.params.freeModeMomentumRatio,l=h.velocity*c,d=h.translate+l;h.rtl&&(d=-d);var u,m=!1,p=20*Math.abs(h.velocity)*h.params.freeModeMomentumBounceRatio;if(d<h.maxTranslate())h.params.freeModeMomentumBounce?(d+h.maxTranslate()<-p&&(d=h.maxTranslate()-p),u=h.maxTranslate(),m=!0,x=!0):d=h.maxTranslate();else if(d>h.minTranslate())h.params.freeModeMomentumBounce?(d-h.minTranslate()>p&&(d=h.minTranslate()+p),u=h.minTranslate(),m=!0,x=!0):d=h.minTranslate();else if(h.params.freeModeSticky){var g,f=0;for(f=0;f<h.snapGrid.length;f+=1)if(h.snapGrid[f]>-d){g=f;break}d=Math.abs(h.snapGrid[g]-d)<Math.abs(h.snapGrid[g-1]-d)||"next"===h.swipeDirection?h.snapGrid[g]:h.snapGrid[g-1],h.rtl||(d=-d)}if(0!==h.velocity)c=h.rtl?Math.abs((-d-h.translate)/h.velocity):Math.abs((d-h.translate)/h.velocity);else if(h.params.freeModeSticky)return void h.slideReset();h.params.freeModeMomentumBounce&&m?(h.updateProgress(u),h.setWrapperTransition(c),h.setWrapperTranslate(d),h.onTransitionStart(),h.animating=!0,h.wrapper.transitionEnd(function(){h&&x&&(h.emit("onMomentumBounce",h),h.setWrapperTransition(h.params.speed),h.setWrapperTranslate(u),h.wrapper.transitionEnd(function(){h&&h.onTransitionEnd()}))})):h.velocity?(h.updateProgress(d),h.setWrapperTransition(c),h.setWrapperTranslate(d),h.onTransitionStart(),h.animating||(h.animating=!0,h.wrapper.transitionEnd(function(){h&&h.onTransitionEnd()}))):h.updateProgress(d),h.updateActiveIndex()}return void((!h.params.freeModeMomentum||t>=h.params.longSwipesMs)&&(h.updateProgress(),h.updateActiveIndex()))}var v,b=0,C=h.slidesSizesGrid[0];for(v=0;v<h.slidesGrid.length;v+=h.params.slidesPerGroup)"undefined"!=typeof h.slidesGrid[v+h.params.slidesPerGroup]?o>=h.slidesGrid[v]&&o<h.slidesGrid[v+h.params.slidesPerGroup]&&(b=v,C=h.slidesGrid[v+h.params.slidesPerGroup]-h.slidesGrid[v]):o>=h.slidesGrid[v]&&(b=v,C=h.slidesGrid[h.slidesGrid.length-1]-h.slidesGrid[h.slidesGrid.length-2]);var M=(o-h.slidesGrid[b])/C;if(t>h.params.longSwipesMs){if(!h.params.longSwipes)return void h.slideTo(h.activeIndex);"next"===h.swipeDirection&&(M>=h.params.longSwipesRatio?h.slideTo(b+h.params.slidesPerGroup):h.slideTo(b)),"prev"===h.swipeDirection&&(M>1-h.params.longSwipesRatio?h.slideTo(b+h.params.slidesPerGroup):h.slideTo(b))}else{if(!h.params.shortSwipes)return void h.slideTo(h.activeIndex);"next"===h.swipeDirection&&h.slideTo(b+h.params.slidesPerGroup),"prev"===h.swipeDirection&&h.slideTo(b)}}},h._slideTo=function(e,a){return h.slideTo(e,a,!0,!0)},h.slideTo=function(e,a,t,o){"undefined"==typeof t&&(t=!0),"undefined"==typeof e&&(e=0),0>e&&(e=0),h.snapIndex=Math.floor(e/h.params.slidesPerGroup),h.snapIndex>=h.snapGrid.length&&(h.snapIndex=h.snapGrid.length-1);var i=-h.snapGrid[h.snapIndex];if(!h.params.allowSwipeToNext&&i<h.translate&&i<h.minTranslate())return!1;if(!h.params.allowSwipeToPrev&&i>h.translate&&i>h.maxTranslate())return!1;h.params.autoplay&&h.autoplaying&&(o||!h.params.autoplayDisableOnInteraction?h.pauseAutoplay(a):h.stopAutoplay()),h.updateProgress(i);for(var r=0;r<h.slidesGrid.length;r++)-i>=h.slidesGrid[r]&&(e=r);if("undefined"==typeof a&&(a=h.params.speed),h.previousIndex=h.activeIndex||0,h.activeIndex=e,i===h.translate)return h.updateClasses(),!1;h.updateClasses(),h.onTransitionStart(t);n()?i:0,n()?0:i;return 0===a?(h.setWrapperTransition(0),h.setWrapperTranslate(i),h.onTransitionEnd(t)):(h.setWrapperTransition(a),h.setWrapperTranslate(i),h.animating||(h.animating=!0,h.wrapper.transitionEnd(function(){h&&h.onTransitionEnd(t)}))),!0},h.onTransitionStart=function(e){"undefined"==typeof e&&(e=!0),h.lazy&&h.lazy.onTransitionStart(),e&&(h.emit("onTransitionStart",h),h.activeIndex!==h.previousIndex&&h.emit("onSlideChangeStart",h))},h.onTransitionEnd=function(e){h.animating=!1,h.setWrapperTransition(0),"undefined"==typeof e&&(e=!0),h.lazy&&h.lazy.onTransitionEnd(),e&&(h.emit("onTransitionEnd",h),h.activeIndex!==h.previousIndex&&h.emit("onSlideChangeEnd",h)),h.params.hashnav&&h.hashnav&&h.hashnav.setHash()},h.slideNext=function(e,a,t){if(h.params.loop){if(h.animating)return!1;h.fixLoop();h.container[0].clientLeft;return h.slideTo(h.activeIndex+h.params.slidesPerGroup,a,e,t)}return h.slideTo(h.activeIndex+h.params.slidesPerGroup,a,e,t)},h._slideNext=function(e){return h.slideNext(!0,e,!0)},h.slidePrev=function(e,a,t){if(h.params.loop){if(h.animating)return!1;h.fixLoop();h.container[0].clientLeft;return h.slideTo(h.activeIndex-1,a,e,t)}return h.slideTo(h.activeIndex-1,a,e,t)},h._slidePrev=function(e){return h.slidePrev(!0,e,!0)},h.slideReset=function(e,a,t){return h.slideTo(h.activeIndex,a,e)},h.setWrapperTransition=function(e,a){h.wrapper.transition(e),"slide"!==h.params.effect&&h.effects[h.params.effect]&&h.effects[h.params.effect].setTransition(e),h.params.parallax&&h.parallax&&h.parallax.setTransition(e),h.params.scrollbar&&h.scrollbar&&h.scrollbar.setTransition(e),h.params.control&&h.controller&&h.controller.setTransition(e,a),h.emit("onSetTransition",h,e)},h.setWrapperTranslate=function(e,a,t){var o=0,i=0,r=0;n()?o=h.rtl?-e:e:i=e,h.params.virtualTranslate||(h.support.transforms3d?h.wrapper.transform("translate3d("+o+"px, "+i+"px, "+r+"px)"):h.wrapper.transform("translate("+o+"px, "+i+"px)")),h.translate=n()?o:i,a&&h.updateActiveIndex(),"slide"!==h.params.effect&&h.effects[h.params.effect]&&h.effects[h.params.effect].setTranslate(h.translate),h.params.parallax&&h.parallax&&h.parallax.setTranslate(h.translate),h.params.scrollbar&&h.scrollbar&&h.scrollbar.setTranslate(h.translate),h.params.control&&h.controller&&h.controller.setTranslate(h.translate,t),h.emit("onSetTranslate",h,h.translate)},h.getTranslate=function(e,a){var t,o,n,i;return"undefined"==typeof a&&(a="x"),h.params.virtualTranslate?h.rtl?-h.translate:h.translate:(n=window.getComputedStyle(e,null),window.WebKitCSSMatrix?i=new window.WebKitCSSMatrix("none"===n.webkitTransform?"":n.webkitTransform):(i=n.MozTransform||n.OTransform||n.MsTransform||n.msTransform||n.transform||n.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),t=i.toString().split(",")),"x"===a&&(o=window.WebKitCSSMatrix?i.m41:16===t.length?parseFloat(t[12]):parseFloat(t[4])),"y"===a&&(o=window.WebKitCSSMatrix?i.m42:16===t.length?parseFloat(t[13]):parseFloat(t[5])),h.rtl&&o&&(o=-o),o||0)},h.getWrapperTranslate=function(e){return"undefined"==typeof e&&(e=n()?"x":"y"),h.getTranslate(h.wrapper[0],e)},h.observers=[],h.initObservers=function(){if(h.params.observeParents)for(var e=h.container.parents(),a=0;a<e.length;a++)s(e[a]);s(h.container[0],{childList:!1}),s(h.wrapper[0],{attributes:!1})},h.disconnectObservers=function(){for(var e=0;e<h.observers.length;e++)h.observers[e].disconnect();h.observers=[]},h.createLoop=function(){h.wrapper.children("."+h.params.slideClass+"."+h.params.slideDuplicateClass).remove();var e=h.wrapper.children("."+h.params.slideClass);h.loopedSlides=parseInt(h.params.loopedSlides||h.params.slidesPerView,10),h.loopedSlides=h.loopedSlides+h.params.loopAdditionalSlides,h.loopedSlides>e.length&&(h.loopedSlides=e.length);var a,t=[],o=[];for(e.each(function(a,n){var i=_(this);a<h.loopedSlides&&o.push(n),a<e.length&&a>=e.length-h.loopedSlides&&t.push(n),i.attr("data-swiper-slide-index",a)}),a=0;a<o.length;a++)h.wrapper.append(_(o[a].cloneNode(!0)).addClass(h.params.slideDuplicateClass));for(a=t.length-1;a>=0;a--)h.wrapper.prepend(_(t[a].cloneNode(!0)).addClass(h.params.slideDuplicateClass))},h.destroyLoop=function(){h.wrapper.children("."+h.params.slideClass+"."+h.params.slideDuplicateClass).remove(),h.slides.removeAttr("data-swiper-slide-index")},h.fixLoop=function(){var e;h.activeIndex<h.loopedSlides?(e=h.slides.length-3*h.loopedSlides+h.activeIndex,e+=h.loopedSlides,h.slideTo(e,0,!1,!0)):("auto"===h.params.slidesPerView&&h.activeIndex>=2*h.loopedSlides||h.activeIndex>h.slides.length-2*h.params.slidesPerView)&&(e=-h.slides.length+h.activeIndex+h.loopedSlides,e+=h.loopedSlides,h.slideTo(e,0,!1,!0))},h.appendSlide=function(e){if(h.params.loop&&h.destroyLoop(),"object"==typeof e&&e.length)for(var a=0;a<e.length;a++)e[a]&&h.wrapper.append(e[a]);else h.wrapper.append(e);h.params.loop&&h.createLoop(),h.params.observer&&h.support.observer||h.update(!0)},h.prependSlide=function(e){h.params.loop&&h.destroyLoop();var a=h.activeIndex+1;if("object"==typeof e&&e.length){for(var t=0;t<e.length;t++)e[t]&&h.wrapper.prepend(e[t]);a=h.activeIndex+e.length}else h.wrapper.prepend(e);h.params.loop&&h.createLoop(),h.params.observer&&h.support.observer||h.update(!0),h.slideTo(a,0,!1)},h.removeSlide=function(e){h.params.loop&&(h.destroyLoop(),h.slides=h.wrapper.children("."+h.params.slideClass));var a,t=h.activeIndex;if("object"==typeof e&&e.length){for(var o=0;o<e.length;o++)a=e[o],h.slides[a]&&h.slides.eq(a).remove(),t>a&&t--;t=Math.max(t,0)}else a=e,h.slides[a]&&h.slides.eq(a).remove(),t>a&&t--,t=Math.max(t,0);h.params.loop&&h.createLoop(),h.params.observer&&h.support.observer||h.update(!0),h.params.loop?h.slideTo(t+h.loopedSlides,0,!1):h.slideTo(t,0,!1)},h.removeAllSlides=function(){for(var e=[],a=0;a<h.slides.length;a++)e.push(a);h.removeSlide(e)},h.effects={fade:{setTranslate:function(){for(var e=0;e<h.slides.length;e++){var a=h.slides.eq(e),t=a[0].swiperSlideOffset,o=-t;h.params.virtualTranslate||(o-=h.translate);var i=0;n()||(i=o,o=0);var r=h.params.fade.crossFade?Math.max(1-Math.abs(a[0].progress),0):1+Math.min(Math.max(a[0].progress,-1),0);a.css({opacity:r}).transform("translate3d("+o+"px, "+i+"px, 0px)")}},setTransition:function(e){if(h.slides.transition(e),h.params.virtualTranslate&&0!==e){var a=!1;h.slides.transitionEnd(function(){if(!a&&h){a=!0,h.animating=!1;for(var e=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],t=0;t<e.length;t++)h.wrapper.trigger(e[t])}})}}},cube:{setTranslate:function(){var e,a=0;h.params.cube.shadow&&(n()?(e=h.wrapper.find(".swiper-cube-shadow"),0===e.length&&(e=_('<div class="swiper-cube-shadow"></div>'),h.wrapper.append(e)),e.css({height:h.width+"px"})):(e=h.container.find(".swiper-cube-shadow"),0===e.length&&(e=_('<div class="swiper-cube-shadow"></div>'),h.container.append(e))));for(var t=0;t<h.slides.length;t++){var o=h.slides.eq(t),i=90*t,r=Math.floor(i/360);h.rtl&&(i=-i,r=Math.floor(-i/360));var s=Math.max(Math.min(o[0].progress,1),-1),c=0,l=0,d=0;t%4===0?(c=4*-r*h.size,d=0):(t-1)%4===0?(c=0,d=4*-r*h.size):(t-2)%4===0?(c=h.size+4*r*h.size,d=h.size):(t-3)%4===0&&(c=-h.size,d=3*h.size+4*h.size*r),h.rtl&&(c=-c),n()||(l=c,c=0);var u="rotateX("+(n()?0:-i)+"deg) rotateY("+(n()?i:0)+"deg) translate3d("+c+"px, "+l+"px, "+d+"px)";if(1>=s&&s>-1&&(a=90*t+90*s,h.rtl&&(a=90*-t-90*s)),o.transform(u),h.params.cube.slideShadows){var m=n()?o.find(".swiper-slide-shadow-left"):o.find(".swiper-slide-shadow-top"),p=n()?o.find(".swiper-slide-shadow-right"):o.find(".swiper-slide-shadow-bottom");0===m.length&&(m=_('<div class="swiper-slide-shadow-'+(n()?"left":"top")+'"></div>'),o.append(m)),0===p.length&&(p=_('<div class="swiper-slide-shadow-'+(n()?"right":"bottom")+'"></div>'),o.append(p));o[0].progress;m.length&&(m[0].style.opacity=-o[0].progress),p.length&&(p[0].style.opacity=o[0].progress)}}if(h.wrapper.css({"-webkit-transform-origin":"50% 50% -"+h.size/2+"px","-moz-transform-origin":"50% 50% -"+h.size/2+"px","-ms-transform-origin":"50% 50% -"+h.size/2+"px","transform-origin":"50% 50% -"+h.size/2+"px"}),h.params.cube.shadow)if(n())e.transform("translate3d(0px, "+(h.width/2+h.params.cube.shadowOffset)+"px, "+-h.width/2+"px) rotateX(90deg) rotateZ(0deg) scale("+h.params.cube.shadowScale+")");else{var g=Math.abs(a)-90*Math.floor(Math.abs(a)/90),f=1.5-(Math.sin(2*g*Math.PI/360)/2+Math.cos(2*g*Math.PI/360)/2),v=h.params.cube.shadowScale,y=h.params.cube.shadowScale/f,w=h.params.cube.shadowOffset;e.transform("scale3d("+v+", 1, "+y+") translate3d(0px, "+(h.height/2+w)+"px, "+-h.height/2/y+"px) rotateX(-90deg)")}var k=h.isSafari||h.isUiWebView?-h.size/2:0;h.wrapper.transform("translate3d(0px,0,"+k+"px) rotateX("+(n()?0:a)+"deg) rotateY("+(n()?-a:0)+"deg)")},setTransition:function(e){h.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),h.params.cube.shadow&&!n()&&h.container.find(".swiper-cube-shadow").transition(e)}},coverflow:{setTranslate:function(){for(var e=h.translate,a=n()?-e+h.width/2:-e+h.height/2,t=n()?h.params.coverflow.rotate:-h.params.coverflow.rotate,o=h.params.coverflow.depth,i=0,r=h.slides.length;r>i;i++){var s=h.slides.eq(i),c=h.slidesSizesGrid[i],l=s[0].swiperSlideOffset,d=(a-l-c/2)/c*h.params.coverflow.modifier,u=n()?t*d:0,m=n()?0:t*d,p=-o*Math.abs(d),g=n()?0:h.params.coverflow.stretch*d,f=n()?h.params.coverflow.stretch*d:0;Math.abs(f)<.001&&(f=0),Math.abs(g)<.001&&(g=0),Math.abs(p)<.001&&(p=0),Math.abs(u)<.001&&(u=0),Math.abs(m)<.001&&(m=0);var v="translate3d("+f+"px,"+g+"px,"+p+"px)  rotateX("+m+"deg) rotateY("+u+"deg)";if(s.transform(v),s[0].style.zIndex=-Math.abs(Math.round(d))+1,h.params.coverflow.slideShadows){var y=n()?s.find(".swiper-slide-shadow-left"):s.find(".swiper-slide-shadow-top"),w=n()?s.find(".swiper-slide-shadow-right"):s.find(".swiper-slide-shadow-bottom");0===y.length&&(y=_('<div class="swiper-slide-shadow-'+(n()?"left":"top")+'"></div>'),s.append(y)),0===w.length&&(w=_('<div class="swiper-slide-shadow-'+(n()?"right":"bottom")+'"></div>'),s.append(w)),y.length&&(y[0].style.opacity=d>0?d:0),w.length&&(w[0].style.opacity=-d>0?-d:0)}}if(h.browser.ie){var k=h.wrapper[0].style;k.perspectiveOrigin=a+"px 50%"}},setTransition:function(e){h.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}}},h.lazy={initialImageLoaded:!1,loadImageInSlide:function(e,a){if("undefined"!=typeof e&&("undefined"==typeof a&&(a=!0),0!==h.slides.length)){var t=h.slides.eq(e),o=t.find(".swiper-lazy:not(.swiper-lazy-loaded):not(.swiper-lazy-loading)");!t.hasClass("swiper-lazy")||t.hasClass("swiper-lazy-loaded")||t.hasClass("swiper-lazy-loading")||o.add(t[0]),0!==o.length&&o.each(function(){var e=_(this);e.addClass("swiper-lazy-loading");var o=e.attr("data-background"),n=e.attr("data-src");h.loadImage(e[0],n||o,!1,function(){if(o?(e.css("background-image","url("+o+")"),e.removeAttr("data-background")):(e.attr("src",n),e.removeAttr("data-src")),e.addClass("swiper-lazy-loaded").removeClass("swiper-lazy-loading"),t.find(".swiper-lazy-preloader, .preloader").remove(),h.params.loop&&a){var i=t.attr("data-swiper-slide-index");if(t.hasClass(h.params.slideDuplicateClass)){var r=h.wrapper.children('[data-swiper-slide-index="'+i+'"]:not(.'+h.params.slideDuplicateClass+")");h.lazy.loadImageInSlide(r.index(),!1)}else{var s=h.wrapper.children("."+h.params.slideDuplicateClass+'[data-swiper-slide-index="'+i+'"]');h.lazy.loadImageInSlide(s.index(),!1)}}h.emit("onLazyImageReady",h,t[0],e[0])}),h.emit("onLazyImageLoad",h,t[0],e[0])})}},load:function(){var e;if(h.params.watchSlidesVisibility)h.wrapper.children("."+h.params.slideVisibleClass).each(function(){h.lazy.loadImageInSlide(_(this).index())});else if(h.params.slidesPerView>1)for(e=h.activeIndex;e<h.activeIndex+h.params.slidesPerView;e++)h.slides[e]&&h.lazy.loadImageInSlide(e);else h.lazy.loadImageInSlide(h.activeIndex);if(h.params.lazyLoadingInPrevNext)if(h.params.slidesPerView>1){for(e=h.activeIndex+h.params.slidesPerView;e<h.activeIndex+h.params.slidesPerView+h.params.slidesPerView;e++)h.slides[e]&&h.lazy.loadImageInSlide(e);for(e=h.activeIndex-h.params.slidesPerView;e<h.activeIndex;e++)h.slides[e]&&h.lazy.loadImageInSlide(e)}else{var a=h.wrapper.children("."+h.params.slideNextClass);a.length>0&&h.lazy.loadImageInSlide(a.index());var t=h.wrapper.children("."+h.params.slidePrevClass);t.length>0&&h.lazy.loadImageInSlide(t.index())}},onTransitionStart:function(){h.params.lazyLoading&&(h.params.lazyLoadingOnTransitionStart||!h.params.lazyLoadingOnTransitionStart&&!h.lazy.initialImageLoaded)&&h.lazy.load()},onTransitionEnd:function(){h.params.lazyLoading&&!h.params.lazyLoadingOnTransitionStart&&h.lazy.load()}},h.scrollbar={set:function(){if(h.params.scrollbar){var e=h.scrollbar;e.track=_(h.params.scrollbar),e.drag=e.track.find(".swiper-scrollbar-drag"),0===e.drag.length&&(e.drag=_('<div class="swiper-scrollbar-drag"></div>'),e.track.append(e.drag)),e.drag[0].style.width="",e.drag[0].style.height="",e.trackSize=n()?e.track[0].offsetWidth:e.track[0].offsetHeight,e.divider=h.size/h.virtualSize,e.moveDivider=e.divider*(e.trackSize/h.size),e.dragSize=e.trackSize*e.divider,n()?e.drag[0].style.width=e.dragSize+"px":e.drag[0].style.height=e.dragSize+"px",e.divider>=1?e.track[0].style.display="none":e.track[0].style.display="",h.params.scrollbarHide&&(e.track[0].style.opacity=0)}},setTranslate:function(){if(h.params.scrollbar){var e,a=h.scrollbar,t=(h.translate||0,a.dragSize);e=(a.trackSize-a.dragSize)*h.progress,h.rtl&&n()?(e=-e,e>0?(t=a.dragSize-e,e=0):-e+a.dragSize>a.trackSize&&(t=a.trackSize+e)):0>e?(t=a.dragSize+e,e=0):e+a.dragSize>a.trackSize&&(t=a.trackSize-e),n()?(h.support.transforms3d?a.drag.transform("translate3d("+e+"px, 0, 0)"):a.drag.transform("translateX("+e+"px)"),a.drag[0].style.width=t+"px"):(h.support.transforms3d?a.drag.transform("translate3d(0px, "+e+"px, 0)"):a.drag.transform("translateY("+e+"px)"),a.drag[0].style.height=t+"px"),h.params.scrollbarHide&&(clearTimeout(a.timeout),a.track[0].style.opacity=1,a.timeout=setTimeout(function(){a.track[0].style.opacity=0,a.track.transition(400)},1e3))}},setTransition:function(e){h.params.scrollbar&&h.scrollbar.drag.transition(e)}},h.controller={setTranslate:function(e,t){function o(a){e=a.rtl&&"horizontal"===a.params.direction?-h.translate:h.translate,n=(a.maxTranslate()-a.minTranslate())/(h.maxTranslate()-h.minTranslate()),i=(e-h.minTranslate())*n+a.minTranslate(),h.params.controlInverse&&(i=a.maxTranslate()-i),a.updateProgress(i),a.setWrapperTranslate(i,!1,h),a.updateActiveIndex()}var n,i,r=h.params.control;if(h.isArray(r))for(var s=0;s<r.length;s++)r[s]!==t&&r[s]instanceof a&&o(r[s]);else r instanceof a&&t!==r&&o(r)},setTransition:function(e,t){function o(a){a.setWrapperTransition(e,h),0!==e&&(a.onTransitionStart(),a.wrapper.transitionEnd(function(){i&&a.onTransitionEnd()}))}var n,i=h.params.control;if(h.isArray(i))for(n=0;n<i.length;n++)i[n]!==t&&i[n]instanceof a&&o(i[n]);else i instanceof a&&t!==i&&o(i)}},h.hashnav={init:function(){if(h.params.hashnav){h.hashnav.initialized=!0;var e=document.location.hash.replace("#","");if(e)for(var a=0,t=0,o=h.slides.length;o>t;t++){var n=h.slides.eq(t),i=n.attr("data-hash");if(i===e&&!n.hasClass(h.params.slideDuplicateClass)){var r=n.index();h.slideTo(r,a,h.params.runCallbacksOnInit,!0)}}}},setHash:function(){h.hashnav.initialized&&h.params.hashnav&&(document.location.hash=h.slides.eq(h.activeIndex).attr("data-hash")||"")}},h.disableKeyboardControl=function(){_(document).off("keydown",c)},h.enableKeyboardControl=function(){_(document).on("keydown",c)},h.mousewheel={event:!1,lastScrollTime:(new window.Date).getTime()},h.params.mousewheelControl){if(void 0!==document.onmousewheel&&(h.mousewheel.event="mousewheel"),!h.mousewheel.event)try{new window.WheelEvent("wheel"),h.mousewheel.event="wheel"}catch(P){}h.mousewheel.event||(h.mousewheel.event="DOMMouseScroll")}h.disableMousewheelControl=function(){return h.mousewheel.event?(h.container.off(h.mousewheel.event,l),!0):!1},h.enableMousewheelControl=function(){return h.mousewheel.event?(h.container.on(h.mousewheel.event,l),!0):!1},h.parallax={setTranslate:function(){h.container.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){d(this,h.progress)}),h.slides.each(function(){var e=_(this);e.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){var a=Math.min(Math.max(e[0].progress,-1),1);d(this,a)})})},setTransition:function(e){"undefined"==typeof e&&(e=h.params.speed),h.container.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){var a=_(this),t=parseInt(a.attr("data-swiper-parallax-duration"),10)||e;0===e&&(t=0),a.transition(t)})}},h._plugins=[];for(var E in h.plugins){var $=h.plugins[E](h,h.params[E]);$&&h._plugins.push($)}return h.callPlugins=function(e){for(var a=0;a<h._plugins.length;a++)e in h._plugins[a]&&h._plugins[a][e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},h.emitterEventListeners={},h.emit=function(e){h.params[e]&&h.params[e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);var a;if(h.emitterEventListeners[e])for(a=0;a<h.emitterEventListeners[e].length;a++)h.emitterEventListeners[e][a](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);h.callPlugins&&h.callPlugins(e,arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},h.on=function(e,a){return e=u(e),h.emitterEventListeners[e]||(h.emitterEventListeners[e]=[]),h.emitterEventListeners[e].push(a),h},h.off=function(e,a){var t;if(e=u(e),"undefined"==typeof a)return h.emitterEventListeners[e]=[],h;if(h.emitterEventListeners[e]&&0!==h.emitterEventListeners[e].length){for(t=0;t<h.emitterEventListeners[e].length;t++)h.emitterEventListeners[e][t]===a&&h.emitterEventListeners[e].splice(t,1);return h}},h.once=function(e,a){e=u(e);var t=function(){a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),h.off(e,t)};return h.on(e,t),h},h.a11y={makeFocusable:function(e){return e[0].tabIndex="0",e},addRole:function(e,a){return e.attr("role",a),e},addLabel:function(e,a){return e.attr("aria-label",a),e},disable:function(e){return e.attr("aria-disabled",!0),e},enable:function(e){return e.attr("aria-disabled",!1),e},onEnterKey:function(e){13===e.keyCode&&(_(e.target).is(h.params.nextButton)?(h.onClickNext(e),h.isEnd?h.a11y.notify(h.params.lastSlideMsg):h.a11y.notify(h.params.nextSlideMsg)):_(e.target).is(h.params.prevButton)&&(h.onClickPrev(e),h.isBeginning?h.a11y.notify(h.params.firstSlideMsg):h.a11y.notify(h.params.prevSlideMsg)))},liveRegion:_('<span class="swiper-notification" aria-live="assertive" aria-atomic="true"></span>'),notify:function(e){var a=h.a11y.liveRegion;0!==a.length&&(a.html(""),a.html(e))},init:function(){if(h.params.nextButton){var e=_(h.params.nextButton);h.a11y.makeFocusable(e),h.a11y.addRole(e,"button"),h.a11y.addLabel(e,h.params.nextSlideMsg)}if(h.params.prevButton){var a=_(h.params.prevButton);h.a11y.makeFocusable(a),h.a11y.addRole(a,"button"),h.a11y.addLabel(a,h.params.prevSlideMsg)}_(h.container).append(h.a11y.liveRegion)},destroy:function(){h.a11y.liveRegion&&h.a11y.liveRegion.length>0&&h.a11y.liveRegion.remove()}},h.init=function(){h.params.loop&&h.createLoop(),h.updateContainerSize(),h.updateSlidesSize(),h.updatePagination(),h.params.scrollbar&&h.scrollbar&&h.scrollbar.set(),"slide"!==h.params.effect&&h.effects[h.params.effect]&&(h.params.loop||h.updateProgress(),h.effects[h.params.effect].setTranslate()),h.params.loop?h.slideTo(h.params.initialSlide+h.loopedSlides,0,h.params.runCallbacksOnInit):(h.slideTo(h.params.initialSlide,0,h.params.runCallbacksOnInit),0===h.params.initialSlide&&(h.parallax&&h.params.parallax&&h.parallax.setTranslate(),h.lazy&&h.params.lazyLoading&&(h.lazy.load(),h.lazy.initialImageLoaded=!0))),h.attachEvents(),h.params.observer&&h.support.observer&&h.initObservers(),h.params.preloadImages&&!h.params.lazyLoading&&h.preloadImages(),h.params.autoplay&&h.startAutoplay(),h.params.keyboardControl&&h.enableKeyboardControl&&h.enableKeyboardControl(),h.params.mousewheelControl&&h.enableMousewheelControl&&h.enableMousewheelControl(),h.params.hashnav&&h.hashnav&&h.hashnav.init(),h.params.a11y&&h.a11y&&h.a11y.init(),h.emit("onInit",h)},h.cleanupStyles=function(){h.container.removeClass(h.classNames.join(" ")).removeAttr("style"),h.wrapper.removeAttr("style"),h.slides&&h.slides.length&&h.slides.removeClass([h.params.slideVisibleClass,h.params.slideActiveClass,h.params.slideNextClass,h.params.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-column").removeAttr("data-swiper-row"),h.paginationContainer&&h.paginationContainer.length&&h.paginationContainer.removeClass(h.params.paginationHiddenClass),h.bullets&&h.bullets.length&&h.bullets.removeClass(h.params.bulletActiveClass),h.params.prevButton&&_(h.params.prevButton).removeClass(h.params.buttonDisabledClass),h.params.nextButton&&_(h.params.nextButton).removeClass(h.params.buttonDisabledClass),h.params.scrollbar&&h.scrollbar&&(h.scrollbar.track&&h.scrollbar.track.length&&h.scrollbar.track.removeAttr("style"),h.scrollbar.drag&&h.scrollbar.drag.length&&h.scrollbar.drag.removeAttr("style"))},h.destroy=function(e,a){h.detachEvents(),h.stopAutoplay(),h.params.loop&&h.destroyLoop(),a&&h.cleanupStyles(),h.disconnectObservers(),h.params.keyboardControl&&h.disableKeyboardControl&&h.disableKeyboardControl(),h.params.mousewheelControl&&h.disableMousewheelControl&&h.disableMousewheelControl(),h.params.a11y&&h.a11y&&h.a11y.destroy(),h.emit("onDestroy"),e!==!1&&(h=null)},h.init(),h}};a.prototype={isSafari:function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0}(),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},browser:{ie:window.navigator.pointerEnabled||window.navigator.msPointerEnabled,ieTouch:window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>1||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>1},device:function(){var e=navigator.userAgent,a=e.match(/(Android);?[\s\/]+([\d.]+)?/),t=e.match(/(iPad).*OS\s([\d_]+)/),o=(e.match(/(iPod)(.*OS\s([\d_]+))?/),!t&&e.match(/(iPhone\sOS)\s([\d_]+)/));return{ios:t||o||t,android:a}}(),support:{touch:window.Modernizr&&Modernizr.touch===!0||function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}(),transforms3d:window.Modernizr&&Modernizr.csstransforms3d===!0||function(){var e=document.createElement("div").style;return"webkitPerspective"in e||"MozPerspective"in e||"OPerspective"in e||"MsPerspective"in e||"perspective"in e}(),flexbox:function(){for(var e=document.createElement("div").style,a="alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient".split(" "),t=0;t<a.length;t++)if(a[t]in e)return!0}(),observer:function(){return"MutationObserver"in window||"WebkitMutationObserver"in window}()},plugins:{}};for(var t=(function(){var e=function(e){var a=this,t=0;for(t=0;t<e.length;t++)a[t]=e[t];return a.length=e.length,this},a=function(a,t){var o=[],n=0;if(a&&!t&&a instanceof e)return a;if(a)if("string"==typeof a){var i,r,s=a.trim();if(s.indexOf("<")>=0&&s.indexOf(">")>=0){var c="div";for(0===s.indexOf("<li")&&(c="ul"),0===s.indexOf("<tr")&&(c="tbody"),0!==s.indexOf("<td")&&0!==s.indexOf("<th")||(c="tr"),0===s.indexOf("<tbody")&&(c="table"),0===s.indexOf("<option")&&(c="select"),r=document.createElement(c),r.innerHTML=a,n=0;n<r.childNodes.length;n++)o.push(r.childNodes[n])}else for(i=t||"#"!==a[0]||a.match(/[ .<>:~]/)?(t||document).querySelectorAll(a):[document.getElementById(a.split("#")[1])],n=0;n<i.length;n++)i[n]&&o.push(i[n])}else if(a.nodeType||a===window||a===document)o.push(a);else if(a.length>0&&a[0].nodeType)for(n=0;n<a.length;n++)o.push(a[n]);return new e(o)};return e.prototype={addClass:function(e){if("undefined"==typeof e)return this;for(var a=e.split(" "),t=0;t<a.length;t++)for(var o=0;o<this.length;o++)this[o].classList.add(a[t]);return this},removeClass:function(e){for(var a=e.split(" "),t=0;t<a.length;t++)for(var o=0;o<this.length;o++)this[o].classList.remove(a[t]);return this},hasClass:function(e){return this[0]?this[0].classList.contains(e):!1;
},toggleClass:function(e){for(var a=e.split(" "),t=0;t<a.length;t++)for(var o=0;o<this.length;o++)this[o].classList.toggle(a[t]);return this},attr:function(e,a){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var t=0;t<this.length;t++)if(2===arguments.length)this[t].setAttribute(e,a);else for(var o in e)this[t][o]=e[o],this[t].setAttribute(o,e[o]);return this},removeAttr:function(e){for(var a=0;a<this.length;a++)this[a].removeAttribute(e);return this},data:function(e,a){if("undefined"!=typeof a){for(var t=0;t<this.length;t++){var o=this[t];o.dom7ElementDataStorage||(o.dom7ElementDataStorage={}),o.dom7ElementDataStorage[e]=a}return this}if(this[0]){var n=this[0].getAttribute("data-"+e);return n?n:this[0].dom7ElementDataStorage&&e in this[0].dom7ElementDataStorage?this[0].dom7ElementDataStorage[e]:void 0}},transform:function(e){for(var a=0;a<this.length;a++){var t=this[a].style;t.webkitTransform=t.MsTransform=t.msTransform=t.MozTransform=t.OTransform=t.transform=e}return this},transition:function(e){"string"!=typeof e&&(e+="ms");for(var a=0;a<this.length;a++){var t=this[a].style;t.webkitTransitionDuration=t.MsTransitionDuration=t.msTransitionDuration=t.MozTransitionDuration=t.OTransitionDuration=t.transitionDuration=e}return this},on:function(e,t,o,n){function i(e){var n=e.target;if(a(n).is(t))o.call(n,e);else for(var i=a(n).parents(),r=0;r<i.length;r++)a(i[r]).is(t)&&o.call(i[r],e)}var r,s,c=e.split(" ");for(r=0;r<this.length;r++)if("function"==typeof t||t===!1)for("function"==typeof t&&(o=arguments[1],n=arguments[2]||!1),s=0;s<c.length;s++)this[r].addEventListener(c[s],o,n);else for(s=0;s<c.length;s++)this[r].dom7LiveListeners||(this[r].dom7LiveListeners=[]),this[r].dom7LiveListeners.push({listener:o,liveListener:i}),this[r].addEventListener(c[s],i,n);return this},off:function(e,a,t,o){for(var n=e.split(" "),i=0;i<n.length;i++)for(var r=0;r<this.length;r++)if("function"==typeof a||a===!1)"function"==typeof a&&(t=arguments[1],o=arguments[2]||!1),this[r].removeEventListener(n[i],t,o);else if(this[r].dom7LiveListeners)for(var s=0;s<this[r].dom7LiveListeners.length;s++)this[r].dom7LiveListeners[s].listener===t&&this[r].removeEventListener(n[i],this[r].dom7LiveListeners[s].liveListener,o);return this},once:function(e,a,t,o){function n(r){t(r),i.off(e,a,n,o)}var i=this;"function"==typeof a&&(a=!1,t=arguments[1],o=arguments[2]),i.on(e,a,n,o)},trigger:function(e,a){for(var t=0;t<this.length;t++){var o;try{o=new window.CustomEvent(e,{detail:a,bubbles:!0,cancelable:!0})}catch(n){o=document.createEvent("Event"),o.initEvent(e,!0,!0),o.detail=a}this[t].dispatchEvent(o)}return this},transitionEnd:function(e){function a(i){if(i.target===this)for(e.call(this,i),t=0;t<o.length;t++)n.off(o[t],a)}var t,o=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],n=this;if(e)for(t=0;t<o.length;t++)n.on(o[t],a);return this},width:function(){return this[0]===window?window.innerWidth:this.length>0?parseFloat(this.css("width")):null},outerWidth:function(e){return this.length>0?e?this[0].offsetWidth+parseFloat(this.css("margin-right"))+parseFloat(this.css("margin-left")):this[0].offsetWidth:null},height:function(){return this[0]===window?window.innerHeight:this.length>0?parseFloat(this.css("height")):null},outerHeight:function(e){return this.length>0?e?this[0].offsetHeight+parseFloat(this.css("margin-top"))+parseFloat(this.css("margin-bottom")):this[0].offsetHeight:null},offset:function(){if(this.length>0){var e=this[0],a=e.getBoundingClientRect(),t=document.body,o=e.clientTop||t.clientTop||0,n=e.clientLeft||t.clientLeft||0,i=window.pageYOffset||e.scrollTop,r=window.pageXOffset||e.scrollLeft;return{top:a.top+i-o,left:a.left+r-n}}return null},css:function(e,a){var t;if(1===arguments.length){if("string"!=typeof e){for(t=0;t<this.length;t++)for(var o in e)this[t].style[o]=e[o];return this}if(this[0])return window.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(t=0;t<this.length;t++)this[t].style[e]=a;return this}return this},each:function(e){for(var a=0;a<this.length;a++)e.call(this[a],a,this[a]);return this},html:function(e){if("undefined"==typeof e)return this[0]?this[0].innerHTML:void 0;for(var a=0;a<this.length;a++)this[a].innerHTML=e;return this},is:function(t){if(!this[0])return!1;var o,n;if("string"==typeof t){var i=this[0];if(i===document)return t===document;if(i===window)return t===window;if(i.matches)return i.matches(t);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(t);if(i.mozMatchesSelector)return i.mozMatchesSelector(t);if(i.msMatchesSelector)return i.msMatchesSelector(t);for(o=a(t),n=0;n<o.length;n++)if(o[n]===this[0])return!0;return!1}if(t===document)return this[0]===document;if(t===window)return this[0]===window;if(t.nodeType||t instanceof e){for(o=t.nodeType?[t]:t,n=0;n<o.length;n++)if(o[n]===this[0])return!0;return!1}return!1},index:function(){if(this[0]){for(var e=this[0],a=0;null!==(e=e.previousSibling);)1===e.nodeType&&a++;return a}},eq:function(a){if("undefined"==typeof a)return this;var t,o=this.length;return a>o-1?new e([]):0>a?(t=o+a,new e(0>t?[]:[this[t]])):new e([this[a]])},append:function(a){var t,o;for(t=0;t<this.length;t++)if("string"==typeof a){var n=document.createElement("div");for(n.innerHTML=a;n.firstChild;)this[t].appendChild(n.firstChild)}else if(a instanceof e)for(o=0;o<a.length;o++)this[t].appendChild(a[o]);else this[t].appendChild(a);return this},prepend:function(a){var t,o;for(t=0;t<this.length;t++)if("string"==typeof a){var n=document.createElement("div");for(n.innerHTML=a,o=n.childNodes.length-1;o>=0;o--)this[t].insertBefore(n.childNodes[o],this[t].childNodes[0])}else if(a instanceof e)for(o=0;o<a.length;o++)this[t].insertBefore(a[o],this[t].childNodes[0]);else this[t].insertBefore(a,this[t].childNodes[0]);return this},insertBefore:function(e){for(var t=a(e),o=0;o<this.length;o++)if(1===t.length)t[0].parentNode.insertBefore(this[o],t[0]);else if(t.length>1)for(var n=0;n<t.length;n++)t[n].parentNode.insertBefore(this[o].cloneNode(!0),t[n])},insertAfter:function(e){for(var t=a(e),o=0;o<this.length;o++)if(1===t.length)t[0].parentNode.insertBefore(this[o],t[0].nextSibling);else if(t.length>1)for(var n=0;n<t.length;n++)t[n].parentNode.insertBefore(this[o].cloneNode(!0),t[n].nextSibling)},next:function(t){return new e(this.length>0?t?this[0].nextElementSibling&&a(this[0].nextElementSibling).is(t)?[this[0].nextElementSibling]:[]:this[0].nextElementSibling?[this[0].nextElementSibling]:[]:[])},nextAll:function(t){var o=[],n=this[0];if(!n)return new e([]);for(;n.nextElementSibling;){var i=n.nextElementSibling;t?a(i).is(t)&&o.push(i):o.push(i),n=i}return new e(o)},prev:function(t){return new e(this.length>0?t?this[0].previousElementSibling&&a(this[0].previousElementSibling).is(t)?[this[0].previousElementSibling]:[]:this[0].previousElementSibling?[this[0].previousElementSibling]:[]:[])},prevAll:function(t){var o=[],n=this[0];if(!n)return new e([]);for(;n.previousElementSibling;){var i=n.previousElementSibling;t?a(i).is(t)&&o.push(i):o.push(i),n=i}return new e(o)},parent:function(e){for(var t=[],o=0;o<this.length;o++)e?a(this[o].parentNode).is(e)&&t.push(this[o].parentNode):t.push(this[o].parentNode);return a(a.unique(t))},parents:function(e){for(var t=[],o=0;o<this.length;o++)for(var n=this[o].parentNode;n;)e?a(n).is(e)&&t.push(n):t.push(n),n=n.parentNode;return a(a.unique(t))},find:function(a){for(var t=[],o=0;o<this.length;o++)for(var n=this[o].querySelectorAll(a),i=0;i<n.length;i++)t.push(n[i]);return new e(t)},children:function(t){for(var o=[],n=0;n<this.length;n++)for(var i=this[n].childNodes,r=0;r<i.length;r++)t?1===i[r].nodeType&&a(i[r]).is(t)&&o.push(i[r]):1===i[r].nodeType&&o.push(i[r]);return new e(a.unique(o))},remove:function(){for(var e=0;e<this.length;e++)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this},add:function(){var e,t,o=this;for(e=0;e<arguments.length;e++){var n=a(arguments[e]);for(t=0;t<n.length;t++)o[o.length]=n[t],o.length++}return o}},a.fn=e.prototype,a.unique=function(e){for(var a=[],t=0;t<e.length;t++)-1===a.indexOf(e[t])&&a.push(e[t]);return a},a}()),o=["jQuery","Zepto","Dom7"],n=0;n<o.length;n++)window[o[n]]&&e(window[o[n]]);var i;i="undefined"==typeof t?window.Dom7||window.Zepto||window.jQuery:t,i&&("transitionEnd"in i.fn||(i.fn.transitionEnd=function(e){function a(i){if(i.target===this)for(e.call(this,i),t=0;t<o.length;t++)n.off(o[t],a)}var t,o=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],n=this;if(e)for(t=0;t<o.length;t++)n.on(o[t],a);return this}),"transform"in i.fn||(i.fn.transform=function(e){for(var a=0;a<this.length;a++){var t=this[a].style;t.webkitTransform=t.MsTransform=t.msTransform=t.MozTransform=t.OTransform=t.transform=e}return this}),"transition"in i.fn||(i.fn.transition=function(e){"string"!=typeof e&&(e+="ms");for(var a=0;a<this.length;a++){var t=this[a].style;t.webkitTransitionDuration=t.MsTransitionDuration=t.msTransitionDuration=t.MozTransitionDuration=t.OTransitionDuration=t.transitionDuration=e}return this})),window.Swiper=a}(),"undefined"!=typeof module?module.exports=window.Swiper:"function"==typeof define&&define.amd&&define("idangerous.swiper2",[],function(){"use strict";return window.Swiper}),app.directive("uiDropGame",[function(){return{restrict:"C",link:function(e,a,t){e.basket=[{correct:!1},{correct:!1},{correct:!1}],console.log("uiDropGame..."),e.is_signup_game_done=!1,e.$on("SIGNUP_GAME_DONE",function(a,t){console.log("SIGNUP_GAME_DONE",t),e.is_signup_game_done=!0,e.signupItem.cover&&e.signupItem.cover.link&&(e.link_after_signup.link=e.signupItem.cover.link)}),e.$on("SIGNUP_GAME_ERROR",function(a,t){console.log("SIGNUP_GAME_ERROR",t),"ALREADY_COMPLETED_GAME"==t.status.err&&(e.is_signup_game_done=!0)}),e.signupItem.game.game_details.privateData&&e.signupItem.game.game_details.privateData.isCompleted&&(e.is_signup_game_done=!0),e.onFinishGame=function(a,t){console.log("finish");var o={game_id:e.signupItem.game.game_details.game_id};e.$emit("SIGNUP_GAME_START_FINISH_EVENT",o)},e.onDragMove=function(){console.log("moving....")},e.onMove=function(){console.log("onMove")},e.onMoveEnd=function(){console.log("onMoveEnd")},e.onDragComplete=function(e,a){console.log("drag success, data:",a)},e.onDropComplete=function(a,t,o){console.log("drop success, type:",t),console.log("drop success, data:",o),t==o.ball&&(e.basket[t].correct=!0),e.basket[0].correct&&e.basket[1].correct&&e.basket[2].correct&&e.onFinishGame()}}}}]),app.directive("uiGameOfferBox",["$apiSocialCommerce","$rootScope","$timeout",function(e,a,t){return{restrict:"C",scope:{},templateUrl:"/_partials/socialcommerce/gameoffer/game-box",link:function(t,o,n){t.gameOffer={},t.config||(t.config={}),a.$watch("config.cdn_url",function(e,o){e&&(t.config.cdn_url=a.config.cdn_url)}),n.$observe("gameOfferId",function(o){console.log("gameofferID "+o),o&&e.fetchGameOffer(o,function(e,o){if(o.status&&o.status.success&&(3==o.gameOffer.availability_type&&a.currentUser&&a.currentUser.id||2==o.gameOffer.availability_type&&(!a.currentUser||!a.currentUser.id)||1==o.gameOffer.availability_type)&&(t.gameOffer=o.gameOffer,console.log("scope.gameOffer "+JSON.stringify(t.gameOffer.privateData)),o.gameOffer.game_conditions&&"consecutive"==o.gameOffer.game_conditions.type&&t.gameOffer.privateData&&!t.gameOffer.privateData.playIn&&t.gameOffer.privateData.totalConsecutiveDaysPlayed)){var n=new Date,i=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1);console.log("recurringIn--",i.getTime()),t.gameOffer.privateData||(t.gameOffer.privateData={}),t.gameOffer.privateData.recurringIn=i.getTime()/1e3,t.gameOffer.privateData.canPlay=!1}})})}}}]),app.directive("uiUnixNow",[function(){return{restrict:"C",link:function(e,a,t){e.now_unix=Math.floor(Date.now()/1e3)}}}]),app.directive("uiGameOfferCommand",["$rootScope","$analytics","$apiSocialCommerce","$apiService","$store","$location",function(e,a,t,o,n,i){return{scope:!0,restrict:"C",link:function(r,s,c){if(console.log("uiGameOfferHud"),r.now_unix=Math.floor(Date.now()/1e3),c.$observe("gameOfferId",function(a){a&&t.fetchGameOffer(a,function(a,t){if(t.status&&t.status.success&&(3==t.gameOffer.availability_type&&e.currentUser&&e.currentUser.id||2==t.gameOffer.availability_type&&(!e.currentUser||!e.currentUser.id)||1==t.gameOffer.availability_type)&&(r.gameOffer=t.gameOffer,t.gameOffer.game_conditions&&"consecutive"==t.gameOffer.game_conditions.type&&r.gameOffer.privateData&&!r.gameOffer.privateData.playIn&&r.gameOffer.privateData.totalConsecutiveDaysPlayed)){var o=new Date,n=new Date(o.getFullYear(),o.getMonth(),o.getDate()+1);console.log("recurringIn--",n.getTime()),r.gameOffer.privateData||(r.gameOffer.privateData={}),r.gameOffer.privateData.recurringIn=n.getTime()/1e3,r.gameOffer.privateData.canPlay=!1}})}),r.gameOffer&&r.gameOffer.game_conditions&&"consecutive"==r.gameOffer.game_conditions.type&&r.gameOffer.privateData&&!r.gameOffer.privateData.playIn&&r.gameOffer.privateData.totalConsecutiveDaysPlayed){var l=new Date,d=new Date(l.getFullYear(),l.getMonth(),l.getDate()+1);console.log("recurringIn--",d.getTime()),r.gameOffer.privateData||(r.gameOffer.privateData={}),r.gameOffer.privateData.recurringIn=d.getTime()/1e3,r.gameOffer.privateData.canPlay=!1}r.$on("FINISH_GAME_OFFER_BOX",function(a,i){if(console.log(r.gameOffer,"-----",i),r.gameOffer&&r.gameOffer.game_offer_id&&r.gameOffer.game_offer_id==i.gameOffer.game_offer_id){if(i&&(i.blackOutEndTime||i.totalConsecutiveDaysPlayed)){if(console.log("FINISH_GAME_OFFER_BOX"),r.gameOffer.privateData||(r.gameOffer.privateData={}),i.blackOutEndTime)r.gameOffer.privateData.playIn=i.blackOutEndTime,r.gameOffer.privateData.canPlay=!1;else if(i.totalConsecutiveDaysPlayed){r.gameOffer.privateData.totalConsecutiveDaysPlayed=i.totalConsecutiveDaysPlayed;var s=new Date,c=new Date(s.getFullYear(),s.getMonth(),s.getDate()+1);r.gameOffer.privateData.recurringIn=c.getTime()/1e3,r.gameOffer.privateData.canPlay=!1}i.coupon&&i.coupon.code&&(r.gameOffer.privateData.lastCouponReceived||(r.gameOffer.privateData.lastCouponReceived={}),r.gameOffer.privateData.lastCouponReceived.code=i.coupon.code)}else console.log("### FINISH_GAME_OFFER_BOX ... "+r.gameOffer.game_offer_id),t.fetchGameOffer(r.gameOffer.game_offer_id,function(a,t){t.status&&t.status.success&&(3==t.gameOffer.availability_type&&e.currentUser&&e.currentUser.id||2==t.gameOffer.availability_type&&(!e.currentUser||!e.currentUser.id)||1==t.gameOffer.availability_type)&&(r.gameOffer=t.gameOffer,r.productArticle&&r.productArticle.product&&angular.forEach(r.productArticle.product.gameOffers,function(e,a){e.game_offer_id==r.gameOffer.game_offer_id&&(e.privateData.lastCouponReceived=r.gameOffer.privateData.lastCouponReceived)}))});e.currentUser&&o.user.profile(e.currentUser.shortcut,function(a,t){e.viewed_user_profile=t.user,n.setValue("currentUser",t.user),e.currentUser=t.user,console.log("REFRESH_CURRENCY FINISH_GAME_OFFER_BOX updated profile..")})}}),r.openModalGame=function(){if(console.log("open modal.."),r.gameOffer.game){var t=r.gameOffer.game.title_language.replace(/_/g,"-");a.eventTrack("Game Clicked",{category:"game-click",label:r.gameOffer.game.game_id+"_"+t+"_"+r.gameOffer.game_offer_id+"_"+r.gameOffer.reward_type,value:1}),a.eventTrack("Game Clicked",{category:"game-offer-csci",label:r.gameOffer.game_offer_id,value:1});var o=i.protocol()+"://"+i.host()+i.path()+"/gameoffer/"+r.gameOffer.game_offer_id+"/clicked";console.log("event_url",o),a.eventTrack("page:send",{url:o}),console.log("openModalGame",r.gameOffer),e.$broadcast("SHOW_GAME_OFFER_MODAL",{gameOffer:r.gameOffer})}}}}}]),app.directive("uiGameOfferHud",["$rootScope","$apiSocialCommerce","$timeout","$filter","$analytics","$location",function(e,a,t,o,n,i){return{restrict:"C",link:function(r,s,c){console.log("uiGameOfferHud"),r.currentGameOffer={},r.gameProgress={},r.gameOfferShow=!1;var l={1:"everyone",2:"public",3:"loggedin"};r.gameOfferBoxInit=function(){var e=0;c.deduct&&(e=c.deduct);var a=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-e;$(s).css("height",a);var t=100;$(s).find(".hud:first").css("height",t),$(s).find(".game-wrapper:first").css("height",a-t),$(s).find(".game-wrapper .game-offer-iframe").css("height",a-t)},r.gameOfferBoxInit(),e.$on("resizestop",function(){r.gameOfferBoxInit()}),r.$on("SHOW_GAME_OFFER_MODAL",function(a,o){console.log("SHOW_GAME_OFFER_MODAL",o),r.gameProgress.percent_score=0,r.currentGameOffer=o.gameOffer;var n={game_id:r.currentGameOffer.game.game_id,game_title:r.currentGameOffer.game.title_language,reward_type:r.currentGameOffer.reward_type,availability_type:r.currentGameOffer.availability_type,game_offer_id:r.currentGameOffer.game_offer_id};e.$broadcast("GAME_OFFER_START_EVENT",n),r.gameOfferShow=!0,r.currentUser&&r.currentUser.emailAddress&&(r.gameProgress.email_game_offer=angular.copy(r.currentUser.emailAddress)),(1!=r.currentGameOffer.game.compatibility_type||1==r.currentGameOffer.game.compatibility_type&&"mobile"!=e.fix_device_type)&&$(".ui-game-offer-hud .game-offer-iframe").attr("src","/client/"+r.currentGameOffer.game.game_path),$(".commerce-canvas").hide(),t(function(){var e=$(".ui-game-offer-hud .game-offer-iframe")[0];e.contentWindow.focus()},800)}),r.closeGameOffer=function(a){if(a){var o=r.gameProgress.played_score?r.gameProgress.played_score:0,s=r.currentUser&&r.currentUser.id?r.currentUser.id:r.tempUser.id,c=r.currentGameOffer.game.title_language.replace(/_/g,"-");console.log("Game Closed..");var d={game_id:r.currentGameOffer.game.game_id,game_offer_id:r.currentGameOffer.game_offer_id,score:o};e.$broadcast("GAME_OFFER_UPDATE_SCORE_EVENT",d),n.eventTrack("Game Closed",{category:"game-close",label:r.currentGameOffer.game.game_id+"_"+c+"_"+r.currentGameOffer.game_offer_id+"_"+r.currentGameOffer.reward_type+"_"+l[r.currentGameOffer.availability_type]+"_"+s,value:1}),n.eventTrack("Game Closed",{category:"game-offer-csci",label:r.currentGameOffer.game_offer_id,value:1});var u=i.protocol()+"://"+i.host()+i.path()+"/gameoffer/"+r.currentGameOffer.game_offer_id+"/closed";console.log("event_url",u),n.eventTrack("page:send",{url:u})}console.log("closeGameOffer"),r.currentGameOffer={},r.gameProgress={},r.gameOfferShow=!1,$(".ui-game-offer-hud .game-offer-iframe").attr("src",""),$(".commerce-canvas").show(),$(".reveal-modal-bg").css("display:none"),t(function(){e.$broadcast("IMAGEFILL_INIT")},600)},r.resetGame=function(){t(function(){r.gameProgress={},r.gameProgress.played_score=0,r.gameProgress.percent_score=0})},r.sendGameOfferToEmail=function(){if(r.gameProgress.error_sending_game_offer_msg="",r.gameProgress.isEmailGameOfferSendingDone=!1,!r.gameProgress.isEmailGameOfferSending){if(!r.gameProgress.email_game_offer||!r.emailValidator(r.gameProgress.email_game_offer))return void(r.gameProgress.error_sending_game_offer_msg=$("#gameoffer_email_error:first").text());var e={email:r.gameProgress.email_game_offer,url:i.protocol()+"://"+i.host()+"/gaming/"+r.currentGameOffer.game_offer_id};r.gameProgress.isEmailGameOfferSending=!0,a.sendGameOfferToEmail(e,function(e,a){r.gameProgress.isEmailGameOfferSending=!1,a.status&&a.status.success?(r.gameProgress.isEmailGameOfferSendingDone=!0,r.gameProgress.email_game_offer=""):a.status&&a.status.err?r.gameProgress.error_sending_game_offer_msg=a.status.err:r.gameProgress.error_sending_game_offer_msg=$("#general-error-message:first").text()})}},r.$on("GAME_OFFER_RESET",function(a,t){r.resetGame(),console.log("Game Started..");var o=r.currentUser&&r.currentUser.id?r.currentUser.id:r.tempUser.id,s=r.currentGameOffer.game.title_language.replace(/_/g,"-");n.eventTrack("Game Started",{category:"game-start",label:r.currentGameOffer.game.game_id+"_"+s+"_"+r.currentGameOffer.game_offer_id+"_"+r.currentGameOffer.reward_type+"_"+l[r.currentGameOffer.availability_type]+"_"+o,value:1}),n.eventTrack("Game Started",{category:"game-offer-csci",label:r.currentGameOffer.game_offer_id,value:1});var c=i.protocol()+"://"+i.host()+i.path()+"/gameoffer/"+r.currentGameOffer.game_offer_id+"/started";if(console.log("event_url",c),n.eventTrack("page:send",{url:c}),"1"==e.config.fb_tracking_pixel.fb_pixel_enable){var d=e.config.fb_tracking_pixel.game_start_id,u=e.config.currency.code,m="0.00";!function(){var e=window._fbq||(window._fbq=[]);if(!e.loaded){var a=document.createElement("script");a.async=!0,a.src="//connect.facebook.net/en_US/fbds.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(a,t),e.loaded=!0}console.log("fb pixel start called")}(),window._fbq=window._fbq||[],window._fbq.push(["track",d,{value:m,currency:u}])}}),r.gameOver=function(a){console.log("Game Over..");var t=r.gameProgress.played_score?r.gameProgress.played_score:0,o=r.currentUser&&r.currentUser.id?r.currentUser.id:r.tempUser.id,s=r.currentGameOffer.game.title_language.replace(/_/g,"-"),a={game_id:r.currentGameOffer.game.game_id,game_offer_id:r.currentGameOffer.game_offer_id,score:t};e.$broadcast("GAME_OFFER_UPDATE_SCORE_EVENT",a),n.eventTrack("Game Uncompleted",{category:"game-incomplete",label:r.currentGameOffer.game.game_id+"_"+s+"_"+r.currentGameOffer.game_offer_id+"_"+r.currentGameOffer.reward_type+"_"+l[r.currentGameOffer.availability_type]+"_"+o,value:1}),n.eventTrack("Game Uncompleted",{category:"game-offer-csci",label:r.currentGameOffer.game_offer_id,value:1});var c=i.protocol()+"://"+i.host()+i.path()+"/gameoffer/"+r.currentGameOffer.game_offer_id+"/incomplete";console.log("event_url",c),n.eventTrack("page:send",{url:c})},r.$on("HIDE_GAME_OFFER_MODAL",function(e,a){console.log("HIDE_GAME_OFFER_MODAL",a),r.closeGameOffer()}),r.$on("GAME_OFFER_UPDATE_EVENT",function(a,n){if(console.log("GAME_OFFER_UPDATE_EVENT",n),r.currentGameOffer.score&&n&&n.score){r.gameProgress.played_score=n.score;var i=n.score/r.currentGameOffer.score*100;if(t(function(){r.gameProgress.percent_score=o("number")(i,2)}),!n.isGameOver&&n.score<r.currentGameOffer.score)return}var s={game_id:r.currentGameOffer.game.game_id,game_offer_id:r.currentGameOffer.game_offer_id,game_title:r.currentGameOffer.game.title_language,score:n.score};console.log("game_params",s,n),n.isGameOver?(!n.score||n.score<r.currentGameOffer.score)&&r.gameOver(s):e.$broadcast("GAME_OFFER_FINISH_EVENT",s)})}}}]),app.directive("uiGameOfferDonePopup",["$rootScope","$timeout","$filter","$apiSocialCommerce","$store",function(e,a,t,o,n){return{restrict:"C",link:function(t,i,r){console.log("uiGameOfferDonePopup"),t.game_offer_data={},t.$on("SHOW_GAME_OFFER_DONE_MODAL",function(a,o){o&&o.status&&o.status.success&&(console.log("SHOW_GAME_OFFER_DONE_MODAL",o),e.$broadcast("HIDE_GAME_OFFER_MODAL",{}),t.game_offer_data=o,t.game_offer_data.email_offer_code="",t.game_offer_data.game_days_left=0,o.gameOffer.game_conditions&&"consecutive"==o.gameOffer.game_conditions.type&&(t.game_offer_data.game_days_left=o.gameOffer.game_conditions.consecutive_days-o.totalConsecutiveDaysPlayed),t.currentUser&&t.currentUser.emailAddress&&(t.game_offer_data.email_offer_code=angular.copy(t.currentUser.emailAddress)),$(".ui-game-offer-done-popup").data("reveal-init",{close_on_background_click:!1,close_on_esc:!1,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",bg:$(".reveal-modal-bg")}),$(".ui-game-offer-done-popup").foundation("reveal","open"),e.$broadcast("FINISH_GAME_OFFER_BOX",o))}),t.game_offer_data.email_offer_code="",t.isSending=!1,t.error_sending_promocode_msg="",t.sending_promocode_isDone=!1,t.sendOfferCode=function(){if(!t.isSending){if(t.sending_promocode_isDone=!1,t.error_sending_promocode_msg="",!t.game_offer_data.email_offer_code||!t.emailValidator(t.game_offer_data.email_offer_code))return void(t.error_sending_promocode_msg=$("#promo_code_email_error:first").text());t.isSending=!0;var e={couponCode:t.game_offer_data.coupon.code,emailAddress:t.game_offer_data.email_offer_code};o.sendCoupon(e,function(e,a){t.isSending=!1,a.status&&a.status.success?(t.sending_promocode_isDone=!0,t.game_offer_data.email_offer_code=""):a.status&&a.status.err?t.error_sending_promocode_msg=a.status.err:t.error_sending_promocode_msg=$("#general-error-message:first").text()})}},t.useOfferNow=function(){if(t.game_offer_data.coupon&&t.game_offer_data.coupon.couponDefinition){var e={shoppingCartMetadata:{}};e.shoppingCartMetadata.coupon={},e.shoppingCartMetadata.coupon.code=angular.copy(t.game_offer_data.coupon.code),e.shoppingCartMetadata.coupon.couponDefinition=angular.copy(t.game_offer_data.coupon.couponDefinition),delete e.shoppingCartMetadata.coupon.couponDefinition.product,delete e.shoppingCartMetadata.coupon.couponDefinition.merchant,e.shoppingCartMetadata=JSON.stringify(e.shoppingCartMetadata),console.log("passing data with metadata.couponDefinition into cart",e),o.listShoppingCart(e,function(e,a){!e&&a.status.success}),a(function(){var e=n.getValue("currentUser"),a=e;a&&a.id||(a=n.getValue("tempUser"));var o="/shopping";1==t.game_offer_data.coupon.couponDefinition.type?o+="/product/"+t.game_offer_data.coupon.couponDefinition.product.title_language+"_"+t.game_offer_data.coupon.couponDefinition.product.product_id:2==t.game_offer_data.coupon.couponDefinition.type?o+="/merchant/"+t.game_offer_data.coupon.couponDefinition.merchant.title+"_"+t.game_offer_data.coupon.couponDefinition.merchant.merchant_id:3==t.game_offer_data.coupon.couponDefinition.type&&(o+="/user/"+a.shortcut+"/cart"),window.location=o},1e3)}},t.closePopup=function(){t.game_offer_data={},t.error_sending_promocode_msg="",t.sending_promocode_isDone=!1,e.$broadcast("HIDE_GAME_OFFER_MODAL",{}),$(".ui-game-offer-done-popup").foundation("reveal","close"),$(".reveal-modal-bg").css("display:none"),$(".reveal-modal-bg").hide()}}}}]),define("directive.social.games",function(){}),app.service("$scService",["$rootScope",function(e){return{headerNavCat:{},listShoppingCartItems:[],listShoppingCartItemsCount:0,findKeyObject_ret_obj:{},createActivity:function(a){e.currentActiveRequest||(e.currentActiveRequest=[]);var t={};t.name=a,e.currentActiveRequest.push(t)},noSpace:function(e){var a="";if(e&&e.length>0){var t=e.split(" ");angular.forEach(t,function(e,t){""==a?a+=e:a=a+"-"+e})}return a},removeActivity:function(a){for(k in e.currentActiveRequest)if(e.currentActiveRequest[k].name===a)return void e.currentActiveRequest.slice(k,1)},masonArray:function(e,a){var t=[],o=[];for(i=1;i<=a;i++){var n=[];t.push(n),o.push(i)}return angular.forEach(e,function(e,n){var i=n+1;angular.forEach(o,function(n,r){i==n&&(t[r].push(e),o[r]=n+a)})}),t},getFindKeyObject:function(e,a,t,o,n){if(!o){var i=new Date,n=Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds());this.findKeyObject_ret_obj[n]={}}for(var r in e){if(this.findKeyObject_ret_obj[n].obj)break;if(null!=e[r]&&e[r].hasOwnProperty(a)){if(e[r][a].toLowerCase()==t.toLowerCase()){this.findKeyObject_ret_obj[n].obj=e[r];break}"object"==typeof e[r].children&&this.getFindKeyObject(e[r].children,a,t,!0,n)}}if(this.findKeyObject_ret_obj[n].obj&&!o){var s=angular.copy(this.findKeyObject_ret_obj[n].obj);return delete this.findKeyObject_ret_obj[n],s}return o?void 0:void delete this.findKeyObject_ret_obj[n]},getMatchObject:function(e,a,t){var o={},n=function(e,a,t){for(var i in e)null!=e[i]&&e[i].hasOwnProperty(a)?e[i][a].toLowerCase()==t.toLowerCase()&&(o=e[i]):null!=e[i]&&"object"==typeof e[i]&&n(e[i],a,t)};return n(e,a,t),console.log("obj "+JSON.stringify(o)),o},getFindCatList:function(e,a,t,o){var n={delim:"|",getlabel:function(e){var a=e.split(this.delim);return a.length>0&&a.length>0?a[0]:""},getshort:function(e){var a=e.split(this.delim);return a.length>0&&a.length>1?a[1]:""},crkey:function(e,a){return e.toLowerCase()+this.delim+a.toLowerCase()}},i=function(e,a,t){var o=[];for(var i in e)for(var r in e[i])"string"==typeof e[i][r]&&r.toLowerCase()==a.toLowerCase()&&o.push(e[i][r].toLowerCase()+n.delim+e[i][t].toLowerCase());return o},r=function(e,a,t){for(var o in e)if(null!=e[o]&&e[o].hasOwnProperty(a)){if(e[o][a].toLowerCase()==t.toLowerCase())return e[o];"object"==typeof e[o]&&r(e[o],a,t)}},s=function(e,a){var t=e.split(n.delim);return t.length>0&&t.length>a?t[a]:""};for(var l in e)if(null!=e[l]&&e[l].hasOwnProperty(a)){r(e[l],a,t);if("string"==typeof e[l][a]&&e[l][a].toLowerCase()==t.toLowerCase()){var d=t.toLowerCase()+n.delim+e[l][o].toLowerCase(),u=i(e[l].children,a,o);n[d]={};for(c in u){var m=u[c],p=r(e[l].children,a,s(u[c],0));void 0==n[d][m]&&(n[d][m]=[]),n[d][m]=i(p.children,a,o)}}}return console.log("List::: "+JSON.stringify(n)),n},scrollTop:function(){$("html, body").animate({scrollTop:0},800)},getCountryName:function(e,a){var t=country_list_english;a&&(t=country_list_chinese);var o=_.find(t,function(a){return a.code==e});return o?o.display:""},getStateName:function(e,a){var t=[];if(state_list_english&&state_list_english[e]){t=state_list_english[e];var o=_.find(t,function(e){return e.code==a});if(o)return o.name}return""}}}]),app.service("$apiSocialCommerce",["$dataService","$analytics","$rootScope","$q","$store",function(e,a,t,o,n){return{domainName:location.host,generateSlug:function(e){if(e){var a=/[!#\*\?();"']/gi,t=/([^a-zA-Z0-9_]+)/gi;e=jQuery.trim(e).toLowerCase().replace(a,"");var o=e.replace(t,"-");return o}},getRelatedProducts:function(a,t){e.get("/api/socialcommerce/getRelatedProducts/"+a,function(e,a){return t(!1,a)})},getCategory:function(a,t,o){e.get("/api/socialcommerce/getCategory/"+a+"?target=1&domainName="+t,function(e,a){return o(!1,a)})},getHeaderNavCat:function(a){e.get("/api/socialcommerce/getcategories",function(e,t){return a(!1,t)})},getMerchantCategories:function(a){e.get("/api/socialcommerce/getmerchantcategories",function(e,t){return a(!1,t)})},getTagsList:function(a){e.get("/api/socialcommerce/gettags",function(e,t){return a(!1,t)})},getLandingConfig:function(a){e.get("/api/socialcommerce/getlandingcategory",function(e,t){return a(!1,t)})},getProductInfo:function(a,t){a.page||(a.page=1),a.count||(a.count=10);var o="?page="+a.page+"&count="+a.count;a.collection_id&&(o+="&collection_id="+a.collection_id),o=o+"&domainName="+this.domainName,e.get("/api/socialcommerce/listProductsByIdAndListingNew/"+a.product_id+o,function(e,a){return t(!1,a)})},getInvoicesList:function(a,t){a.page||(a.page=1),a.count||(a.count=10);var o="?page="+a.page+"&count="+a.count;a.includeCount&&(o+="&includeCount="+a.includeCount),e.get("/api/socialcommerce/listInvoices/"+o,function(e,a){return t(!1,a)})},getInvoicesDetails:function(a,t){var o="1",n="";a.uuid||(a.uuid=""),null!=a.retMess&&void 0!=a.retMess&&0==a.retMess&&(o="0"),a.txid&&(n="&txid="+a.txid),e.get("/api/socialcommerce/getInvoiceDetails/"+a.uuid+"?retMess="+o+n,function(e,a){return t(!1,a)})},sendMyInvoice:function(a,t){console.log("API: sendMyInvoice: ",a),e.post("/api/socialcommerce/invoiceEmail/"+a,{},function(e,a){console.log("sendMyInvoice: result=>",a)})},addToCart:function(o,n){o.domain_name=this.domainName,e.post("/api/socialcommerce/addToShoppingCart",o,function(e,o){if(o&&o.status&&o.status.success){var i="";o.shoppingCartItem.metadata&&o.shoppingCartItem.metadata.network_shortcut&&(i=o.shoppingCartItem.metadata.network_shortcut);var r="",s="";o.shoppingCartItem.product.hashTags&&(s=o.shoppingCartItem.product.hashTags.join("_")),o.shoppingCartItem.variants&&(r=_.values(o.shoppingCartItem.variants).join("_")),a.eventTrack("ecommerce:addToCart",{id:o.shoppingCartItem.shopping_cart_item_id,name:o.shoppingCartItem.product.title_language,sku:o.shoppingCartItem.product.sku_reference_id,category:s,price:o.shoppingCartItem.final_price,quantity:o.shoppingCartItem.quantity,currency:t.config.currency.code,variant:r,refnetwork:i})}return n(!1,o)})},removeFromShoppingCart:function(a,t){a.domain_name=this.domainName,e.post("/api/socialcommerce/removeFromShoppingCart",a,function(e,a){return t(!1,a)})},listShoppingCart:function(a,t){var o="",n="",i="";a.page&&(n="page="+a.page),
a.count&&(i="&count="+a.count),(n||i)&&(o="?"+n+i);var r={};a.address&&(r.address=a.address),a.shoppingCartMetadata&&(r.shoppingCartMetadata=a.shoppingCartMetadata),o=o+"&domainName="+this.domainName,e.post("/api/socialcommerce/listShoppingCart"+o,r,function(e,a){return t(!1,a)})},checkout:function(a,t){var o="",n="",i="";a.courierChange&&(n="courierChange="+a.courierChange,delete a.courierChange),a.userCountry&&(i="&userCountry="+a.userCountry,delete a.userCountry),o="?"+n+i,e.post("/api/socialcommerce/checkout"+o,a,function(e,a){return t(!1,a)})},updateShippingDetails:function(a,t,o){e.post("/api/socialcommerce/updateShippingDetails/"+t,a,function(e,a){return o(!1,a)})},updateShoppingCartItem:function(a,t,o){e.post("/api/socialcommerce/updateShoppingCartItem/"+t,a,function(e,a){return o(!1,a)})},makeYuupayPayment:function(a,t){e.post("/api/socialcommerce/makeYuupayPayment/"+a,{},function(e,a){return t(!1,a)})},makeYuuwalletPayment:function(a,t){e.post("/api/socialcommerce/makeYuuwalletPayment/"+a,{},function(e,a){return t(!1,a)})},makePaypalPayment:function(a,t,o){e.post("/api/socialcommerce/makePayPalPayment/"+a,t,function(e,a){return o(!1,a)})},makeAliPayPayment:function(a,t,o){e.post("/api/socialcommerce/makeAlipayPayment/"+a,t,function(e,a){return o(!1,a)})},makeYuupayNibssPayment:function(a,t,o){var n={request:t};e.post("/api/socialcommerce/makeNibssPayment/"+a,n,function(e,a){return o(!1,a)})},makeCentralPayPayment:function(a,t,o){var n={request:t};e.post("/api/socialcommerce/makeCentralPayPayment/"+a,n,function(e,a){return o(!1,a)})},makePayMandatePayment:function(a,t,o){var n={request:t};e.post("/api/socialcommerce/makePayMandatePayment/"+a,n,function(e,a){return o(!1,a)})},makeCashOnDelivery:function(a,t){var o={};e.post("/api/socialcommerce/makeCashOnDelivery/"+a,o,function(e,a){return t(!1,a)})},requeryYuupay:function(a,t){var o={invoice_uuid:a};e.post("/api/socialcommerce/requeryYuupay",o,function(e,a){return t(!1,a)})},makeNetPlusPayment:function(a,t,o){var n={request:t};e.post("/api/socialcommerce/makeNetPlusPayment/"+a,n,function(e,a){return o(!1,a)})},makeCCAvenuePayment:function(a,t,o){e.post("/api/socialcommerce/makeCCAvenuePayment/"+a,t,function(e,a){return e&&!e.success?o(e.err):o(!1,a)})},makeBankTransfer:function(a,t){e.post("/api/socialcommerce/makeBankTransfer/"+a,{},function(e,a){return e&&!e.success?t(e.err):t(!1,a)})},search:function(a,t,o,n,i){t||(t=1),o="all"==o?"":o,o=encodeURIComponent(o),o=o&&o.length>0?"&filter="+o:"";var r="";n.sort?r="&sort="+n.sort:(r="",delete n.sort);var s="?query="+a+"&page="+t+"&count=7"+o+r;e.get("/api/socialcommerce/search"+s,function(e,a){return i(!1,a)})},searchWithInCategory:function(a,t,o,n,i,r){var s="?category_slug="+a+"&q="+t;e.get("/api/search/ecommerceWithInCategorySuggestions"+s,function(e,a){return r(!1,a)})},getListProducts:function(a,t){var o="and",n=void 0,i={userCountry:n,page:1,count:1,inclusive_tags:"",exclusive_tags:"",inclusive_tags_condition:o,exclusive_tags_condition:o,collection_id:"",filter:"",sort:"",priceRange:"",country:"",state:"",category_id:0,city:""};a=_.extend(i,a);var r,s=["userCountry","filter","sort","priceRange","country","state","city"];r=_.reduce(a,function(e,a,t){if(-1!==s.indexOf(t)){if(!a)return e;e.push(t+"="+a)}else e.push(t+"="+a);return e},[]).join("&"),console.log("[socialcommerce.service] Invoking API listProducts with params: ",a),e.get("/api/socialcommerce/listProducts?"+r,function(e,a){return t(!1,a)})},getMerchantBySlug:function(a,t){e.get("/api/socialcommerce/getMerchantBySlug/"+a,function(e,a){return e&&!e.success?t(e.err):void t(null,a.merchant)})},getMerchantListProducts:function(a,t,o){var n="",i="",r="",s="",c="",l="";t.page||(t.page=1),t.count||(t.count=1),t.sort?i="&sort="+t.sort:(i="",delete t.sort),t.filter?n="&filter="+t.filter:(n="",delete t.filter),t.priceRange?r="&priceRange="+t.priceRange:(r="",delete t.priceRange),t.country?s="&country="+t.country:(s="",delete t.country),t.state?c="&state="+t.state:(c="",delete t.state),l="&relMerchantsLimit=20";var d="?page="+t.page+"&count="+t.count+n+i+r+s+c+l;e.get("/api/socialcommerce/listProductsByMerchant/"+a+d,function(e,a){return o(!1,a)})},getMerchantPopularTag:function(a){e.get("/api/socialcommerce/listPopTagByMerchant",function(e,t){return a(!1,t)})},getMerchantsByCategorySlug:function(a){var t=o.defer(),n=a.categorySlug;delete a.categorySlug;var i=_.map(a||{},function(e,a){return e?a+"="+e:void 0}).filter(function(e){return!!e}).join("&");return e.get("/api/socialcommerce/getMerchantsByCategorySlug/"+n+"?"+i,function(e,a){return e&&!e.success?t.reject(e):void t.resolve(a.category_details)}),t.promise},listPopularMerchants:function(a){var t=o.defer(),n=_.map(a||{},function(e,a){return e?a+"="+e:void 0}).filter(function(e){return!!e}).join("&");return e.get("/api/socialcommerce/listPopularMerchants?"+n,function(e,a){return e&&!e.success?t.reject(e):void t.resolve(a.merchants)}),t.promise},listPopularCategories:function(a){var t=o.defer();return e.post("/api/socialcommerce/listPopularCategories",a,function(e,a){return e&&!e.success?t.reject(e):void t.resolve(a.categories)}),t.promise},createReview:function(a,t){e.post("/api/socialcommerce/reviewOnProduct/"+a.product_id,a,function(e,a){return t(!1,a)})},productAction:function(a,t){var o={action:a.action};e.post("/api/socialcommerce/productAction/"+a.product_id,o,function(e,a){return t(!1,a)})},commentAction:function(a,t){var o={action:a.action};e.post("/api/socialcommerce/comment/action/"+a.product_id+"/"+a.comment_id,o,function(e,a){return t(!1,a)})},requestGameToken:function(a,t){e.post("/api/socialcommerce/requestGameToken",a,function(e,a){return t(!1,a)})},updateGameProgress:function(a,t){e.post("/api/socialcommerce/updateGameProgress",a,function(e,a){return t(!1,a)})},getSignUpGame:function(a,t){e.get("/api/socialcommerce/getSignUpGame",function(e,a){return t(!1,a)})},getLandingPageDetails:function(a,t){e.get("/api/socialcommerce/getLandingPageDetails",function(e,a){return t(!1,a)})},fetchInvoiceComments:function(a,t){a.page||(a.page=1),a.count||(a.count=10);var o="?page="+a.page+"&count="+a.count;e.get("/api/socialcommerce/fetchInvoiceComments/"+a.article_id+o,function(e,a){return t(!1,a)})},invoiceReply:function(a,t){e.post("/api/socialcommerce/invoiceReply",a,function(e,a){return t(!1,a)})},getRandomProduct:function(a,t){e.get("/api/socialcommerce/getRandomProduct",function(e,a){return t(!1,a)})},listAllMerchants:function(a,t){a.page||(a.page=1),a.count||(a.count=10);var o="?page="+a.page+"&count="+a.count+"&includeCount=1";e.get("/api/socialcommerce/listAllMerchants"+o,function(e,a){return t(!1,a)})},listMerchantFilters:function(a,t){e.get("/api/socialcommerce/listMerchantFilters",function(e,a){return t(!1,a)})},listMerchantByTags:function(a,t){var o="",n="",i="",r="",s="",c="",l="";a.page||(a.page=1),a.count||(a.count=10),a.character?i="&character="+a.character:(i="",delete a.character),a.country?r="&country="+a.country:(r="",delete a.country),a.state?s="&state="+a.state:(s="",delete a.state),a.city?c="&city="+a.city:(c="",delete a.city),a.search?l="&search="+a.search:(l="",delete a.search),a.inclusive_tags?o="&inclusive_tags="+a.inclusive_tags:(o="",delete a.inclusive_tags),a.exclusive_tags?n="&exclusive_tags="+a.exclusive_tags:(n="",delete a.exclusive_tags);var d="?page="+a.page+"&count="+a.count+i+r+s+c+l+o+n;e.get("/api/socialcommerce/listMerchantByTags"+d,function(e,a){return t(!1,a)})},sendGameCodeToEmail:function(a,t){e.post("/api/socialcommerce/sendGameCodeToEmail/"+a,{},function(e,a){return t(!1,a)})},listProductCombinations:function(a,t){e.get("/api/socialcommerce/listProductCombinations/"+a,function(e,a){return t(!1,a)})},listProductCombinationsNew:function(a,t){e.get("/api/socialcommerce/listProductCombinationsNew/"+a,function(e,a){return t(!1,a)})},productListByGame:function(a,t){e.get("/api/socialcommerce/listProductsByGame/"+a,function(e,a){return t(!1,a)})},fetchGameOffer:function(a,t){e.get("/api/socialcommerce/fetchGameOffer/"+a,function(e,a){return t(!1,a)})},listCoupons:function(a,t){e.get("/api/socialcommerce/listCoupons",function(e,a){return t(!1,a)})},listGameOffers:function(a,t){var o="";a.page&&(o="?page="+a.page+(a.count?"&count="+a.count:"")),e.get("/api/socialcommerce/listGameOffers"+o,function(e,a){return t(!1,a)})},sendCoupon:function(a,t){e.post("/api/socialcommerce/sendCoupon",a,function(e,a){return t(!1,a)})},listMultiCollections:function(a,t){a.collection_ids||(a.collection_ids=""),a.limit||(a.limit="");var o="?collection_ids="+a.collection_ids+"&limit="+a.limit;e.get("/api/socialcommerce/listMultiCollections"+o,function(e,a){return t(!1,a)})},updateShoppingCartMetadata:function(a,t){e.post("/api/socialcommerce/updateShoppingCartMetadata",a,function(e,a){return t(!1,a)})},updateShoppingCartItemMetadata:function(a,t){var o={metadata:{memo:a.memo}};e.post("/api/socialcommerce/updateShoppingCartItemMetadata/"+a.item_id,o,function(e,a){return t(!1,a)})},validateMerchantSlug:function(a,t){if(angular.isUndefined(a.slug))throw new Error("Slug is missing");if(angular.isUndefined(a.merchantTitle)&&angular.isUndefined(paramsparams.merchantId))throw new Error("Merchant title and merchantId are both missing");var o={slug:a.slug,"merchant-id":a.merchantId,"merchant-title":a.merchantTitle},n=_.map(o,function(e,a){return angular.isUndefined(e)?void 0:a+"="+e}).filter(function(e){return e&&e.length}).join("&");e.get("/api/socialcommerce/validatemerchantslug?"+n,function(e,a){if(e&&!e.success)return t(e);var o={recommendations:a.recommendations,approved:a.is_slug_approved};return t(!1,o)})},createMerchant:function(a,t){if(a.password){var o=CryptoJS.SHA1(a.password),n=o.toString(CryptoJS.enc.Hex);a.password=n}e.post("/api/socialcommerce/newMerchantRequest",a,function(e,a){return t(!1,a)})},getListBusinessMerchants:function(a,t){a.page||(a.page=1),a.count||(a.count=1),console.log("param: ",a);var o="?page="+a.page+"&count="+a.count;e.get("/api/socialcommerce/listBusinessMerchants"+o,function(e,a){return t(!1,a)})},updateBusinessMerchant:function(a,t,o){a||(a=""),e.post("/api/socialcommerce/updateBusinessMerchant/"+a,t,function(e,a){return o(!1,a)})},getMerchantDetails:function(a,t){a||(a=""),e.get("/api/socialcommerce/getMerchantDetails/"+a,function(e,a){return t(!1,a)})},sendGameOfferToEmail:function(a,t){e.post("/api/socialcommerce/sendEmail",a,function(e,a){return t(!1,a)})},getListScratchCards:function(a,t){a.page||(a.page=1),a.count||(a.count=1),console.log("param: ",a);var o="?page="+a.page+"&count="+a.count;a.includeCount&&(o+="&includeCount="+a.includeCount),e.get("/api/socialcommerce/listScratchCards"+o,function(e,a){return t(!1,a)})},redeemScratchCard:function(a,t){e.post("/api/socialcommerce/redeemScratchCard",a,function(e,a){return t(!1,a)})},getZooCashTransactionList:function(a,t){a.page||(a.page=1),a.count||(a.count=10);var o="?page="+a.page+"&count="+a.count;a.type&&(o+="&type="+a.type),a.includeCount&&(o+="&includeCount="+a.includeCount),e.get("/api/socialcommerce/listZoocashTransactions/"+o,function(e,a){return t(!1,a)})},getAvailableCategories:function(a,t){var o="",n="";a.page&&!_.isUndefined(a.page)||(o=1),a.count&&!_.isUndefined(a.count)||(n=10);var i="?";console.log("sasadasd,",a.count),null!==a.count&&(i+="page="+o+"&count="+n),a.target&&(i+="&target="+a.target),a.includeCount&&(i+="&includeCount="+a.includeCount),a.domainName&&(i+="&domainName="+a.domainName),e.get("/api/socialcommerce/getAvailableCategories"+i,function(e,a){return t(!1,a)})},charity:{setPreferredCharity:function(e){var a={id:e,timestamp:Date.now()};n.setValue("charity_preferredcharity",a)},getPreferredCharity:function(){var e=n.getValue("charity_preferredcharity"),a=n.getValue("currentUser");return a.charity_updated_on&&(!e||1e3*a.charity_updated_on>e.timestamp)?a.charity_id:e?e.id:null},getCharitiesByUser:function(a,o){e.get("/api/socialcommerce/charity/list",function(e,a){return e&&e.success?void(a.charities&&(_.each(a.charities.charityRepresentations,function(e){e.imageUrl=t.config.cdn_url+e.image_fsref}),o(!1,a.charities.charityRepresentations))):o(e.err)})}}}}]),define("socialcommerce.service",function(){}),app.controller("socialCommerceCtrl",["$scope","$apiSocialCommerce","$store","$state","$timeout","$location","$rootScope","$scService","$interval","$popupService","$analytics",function(e,a,t,o,n,i,r,s,c,l,d){r.screentype="desktop",r.mobilemenu=!1,r.landingPageType="",r.header_ticker="",r.ON_STATE_CHANGED=!1,r.pageTitleText="",r.productFilter=!1,r.navCategoryList=[],r.password_length=8,r.listShoppingCartItems=[],r.currentPageParams={},r.currentCountryCode=current_country_code.replace(/./,"").toUpperCase(),console.log("$rootScope.countryCode  "+r.currentCountryCode),r.slugText=function(e){return e.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")},r.loadNavCategory=function(){var e;e=c(function(){s.headerNavCat.length&&(c.cancel(e),e=void 0,r.navCategoryList=_.sortBy(s.headerNavCat,"children"))},1e3)},r.loadNavCategory(),r.stripText=function(e,a){if("[]"==e)return"";var t="";return t=e.length>a?e.substring(0,a)+"...":e},r.getTs=function(){var e=""+(new Date).getTime();return e},r.latestTs=r.getTs(),r.removeSpace=function(e){var a=e.replace(/\s/g,"-");return a},r.urlEncodedStr=function(e){var a=r.removeSpace(e).replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"").toLowerCase();return a},r.getDecimalValue=function(e){return e&&e.rate&&(2==e.rate.display_type||3==e.rate.display_type)?0:2},e.OnMenuClick=function(){r.$broadcast("ON_MENU_CLICKED")},r.$on("SC_CONFIG_LOADED",function(){console.log("SC_CONFIG_LOADED : "+r.config.title,r.config.site_name),r.pageTitleText=r.config.site_name}),e.$on("CURRENT_CATEGORY",function(e,a){r.currentCategory=a.newval,console.log("CURRENT_CATEGORY",a.newval)}),r.$on("COUPON_USED_CLEAR",function(e,a){console.log("COUPON_USED_CLEAR"),t.setValue("landing_game_coupon","")}),r.$on("USER_ZOOCASH_UPDATE",function(e,a){r.currentUser&&(r.currentUser.zoocash=a.zoocash,r.viewed_user_profile=a.zoocash,t.setValue("currentUser",r.currentUser),console.log("USER_ZOOCASH_UPDATE ... "+r.currentUser.zoocash))}),e.checkScreenType=function(){var e=Math.max(document.documentElement.clientWidth,window.innerWidth||0);640>=e&&(r.screentype="mobile"),e>=641&&(r.screentype="desktop"),console.log("check size...",e),console.log("screenType: ",r.screentype)},e.$on("resizestop",function(a,t){e.checkScreenType()}),e.checkScreenType(),e.$on("$stateChangeSuccess",function(a,t,n,i,s){e.currentSCState=t.name,console.log("stateChangeSuccess : toState",t),console.log("stateChangeSuccess : fromState",i),""!=i.name&&t.name!=i.name&&(r.$broadcast("ON_STATE_CHANGED"),r.ON_STATE_CHANGED=!0),o.params.category?r.currentCategory=o.params.category.toLowerCase():"home_shopping"==t.name&&(r.currentCategory=""),0==o.current.name.indexOf("productList")&&o.reload()}),r.$on("$stateChangeStart",function(a,o){e.tempUser=t.getValue("tempUser")}),e.$on("$stateChangeStart",function(e,a,t,n,r){if(""==a.url){var s=o.get("content_error");return o.go("content_error"),void i.path(s.url).replace()}return"productInfo"==a.name&&t.id.indexOf(" ")>=0?(e.preventDefault(),void i.path(i.path().replace(/\s+/,"-")).replace()):(console.log(" stateChangeStart fromstate :: ",n),void(n.name&&t.noload&&"productList"!=a.name&&"collectionList"!=a.name&&"shoppingSearch"!=a.name&&(console.log("noload"),e.preventDefault())))}),e.temporary_user_auth_token=t.getTempToken(),e.tempUser=t.getValue("tempUser"),e.gameTokens={},e.playProductGame=function(o){if(o&&o.game_id){var n=o.game_id+"_"+o.product_listing_id;a.requestGameToken(o,function(a,o){if(o.status&&o.status.success){console.log(" requestGameToken ",o),o.temporary_user_auth_token&&(t.setValue("tempUser",o.temporary_user),t.setTempToken(o.temporary_user_auth_token),e.temporary_user_auth_token=t.getTempToken(),e.tempUser=t.getValue("tempUser")),e.gameTokens&&e.gameTokens[n]||(e.gameTokens[n]={});var i=Date.now(),r=i+o.token.expire_on;e.gameTokens[n]=o.token,e.gameTokens[n].date_expiry=r,console.log(e.gameTokens)}})}},e.finishProductGame=function(t){if(t&&t.game_id){var o=t.game_id+"_"+t.product_listing_id;if(e.gameTokens[o]){var n={status:1,token_uuid:e.gameTokens[o].token_uuid};e.gameTokens[o].score&&e.gameTokens[o].score>1&&(n.score=t.played_score),a.updateGameProgress(n,function(a,t){t.status&&t.status.success?console.log(" updateGameProgress ",t):a||t.status.err&&e.gameTokens&&e.gameTokens[o]&&delete e.gameTokens[o],e.$broadcast("POPUP_GAME_DONE",t)})}}},e.playGameOffer=function(o){if(o&&o.game_id&&o.game_offer_id){var n="game"+o.game_id+"_offer"+o.game_offer_id;a.requestGameToken(o,function(a,i){if(i.status)if(i.status.success){console.log(" requestGameToken ",i),i.temporary_user_auth_token&&(t.setValue("tempUser",i.temporary_user),t.setTempToken(i.temporary_user_auth_token),e.temporary_user_auth_token=t.getTempToken(),e.tempUser=t.getValue("tempUser"));e.currentUser&&e.currentUser.id?e.currentUser.id:e.tempUser.id,o.game_title.replace(/_/g,"-");e.gameTokens&&e.gameTokens[n]||(e.gameTokens[n]={});var r=Date.now(),s=r+i.token.expire_on;e.gameTokens[n]=i.token,e.gameTokens[n].date_expiry=s,e.gameTokens[n].isCompleted=!1,console.log("gameTokens",e.gameTokens)}else i.status.err&&(l.showAutoMessage(i.status.err),e.$broadcast("HIDE_GAME_OFFER_MODAL",i))})}},e.updateGameOfferScore=function(t){if(t&&t.game_id&&t.game_offer_id){var o="game"+t.game_id+"_offer"+t.game_offer_id;if(console.log("game_key",o),e.gameTokens[o]){var n={status:1,token_uuid:e.gameTokens[o].token_uuid,score:t.score};a.updateGameProgress(n,function(e,a){a.status&&a.status.success})}}},e.finishGameOffer=function(t){if(t&&t.game_id&&t.game_offer_id){var o="game"+t.game_id+"_offer"+t.game_offer_id;if(console.log("game_key",o),e.gameTokens[o]){var n={status:1,token_uuid:e.gameTokens[o].token_uuid};t.score&&(n.score=t.score),e.gameTokens[o].isCompleted||(e.gameTokens[o].isCompleted=!0,a.updateGameProgress(n,function(a,n){if(n.status&&n.status.success){console.log(" updateGameProgress finishGameOffer ",n);var s="",c="",u="",m=t.game_title.replace(/_/g,"-");if(1==n.gameOffer.reward_type)if(n.coupon){var p={1:"p",2:"m",3:"c"};s=n.coupon.coupon_definition_id,c=p[n.coupon.couponDefinition.type],1==n.coupon.couponDefinition.type?u=n.coupon.couponDefinition.product_id:2==n.coupon.couponDefinition.type&&(u=n.coupon.couponDefinition.merchant_id)}else if(!n.gameOffer.game_conditions||"consecutive"!=n.gameOffer.game_conditions.type){e.$broadcast("HIDE_GAME_OFFER_MODAL",n),l.showAutoMessage(r.i18n["socialcommerce.coupon.Sorry, all the coupon are fully redeemed."]),d.eventTrack("Game Completed",{category:"game-complete",label:t.game_id+"_"+m+"_"+t.game_offer_id+"_"+n.gameOffer.reward_type+"_0",value:1}),d.eventTrack("Game Completed",{category:"game-offer-csci",label:t.game_offer_id,value:1});var g=i.protocol()+"://"+i.host()+i.path()+"/gameoffer/"+t.game_offer_id+"/complete";if(console.log("event_url",g),d.eventTrack("page:send",{url:g}),r.$broadcast("FINISH_GAME_OFFER_BOX",n),"1"==r.config.fb_tracking_pixel.fb_pixel_enable){var f=r.config.fb_tracking_pixel.game_completed_id,h=r.config.currency.code,_="0.00";!function(){var e=window._fbq||(window._fbq=[]);if(!e.loaded){var a=document.createElement("script");a.async=!0,a.src="//connect.facebook.net/en_US/fbds.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(a,t),e.loaded=!0}}(),window._fbq=window._fbq||[],window._fbq.push(["track",f,{value:_,currency:h}])}return}if(!n.coupon&&n.gameOffer.game_conditions&&"consecutive"==n.gameOffer.game_conditions.type)return console.log("recurring games"),d.eventTrack("Game In Progress",{category:"game-offer-csci",label:t.game_offer_id+"_"+n.totalConsecutiveDaysPlayed,value:1}),void e.$broadcast("SHOW_GAME_OFFER_DONE_MODAL",n);console.log("Game Completed.."),d.eventTrack("Game Completed",{category:"game-complete",label:t.game_id+"_"+m+"_"+t.game_offer_id+"_"+n.gameOffer.reward_type+"_"+s+"_"+c+"_"+u,value:1}),d.eventTrack("Game Completed",{category:"game-offer-csci",label:t.game_offer_id,value:1});var g=i.protocol()+"://"+i.host()+i.path()+"/gameoffer/"+t.game_offer_id+"/complete";if(console.log("event_url",g),d.eventTrack("page:send",{url:g}),"1"==r.config.fb_tracking_pixel.fb_pixel_enable){var f=r.config.fb_tracking_pixel.game_completed_id,h=r.config.currency.code,_="0.00";!function(){var e=window._fbq||(window._fbq=[]);if(!e.loaded){var a=document.createElement("script");a.async=!0,a.src="//connect.facebook.net/en_US/fbds.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(a,t),e.loaded=!0}}(),window._fbq=window._fbq||[],window._fbq.push(["track",f,{value:_,currency:h}])}}else e.gameTokens[o].isCompleted=!1,a||n.status.err&&e.gameTokens&&e.gameTokens[o]&&delete e.gameTokens[o];e.$broadcast("SHOW_GAME_OFFER_DONE_MODAL",n)}))}}},e.gamesignuptoken={},e.coupon_details=t.getValue("landing_game_coupon"),e.finished_signup_game_id=t.getValue("finished_signup_game_id"),e.playSignupGame=function(o){if(o&&o.game_id){var n=o.game_id;({game_id:o.game_id,landingPageSignUpGame:!0});a.requestGameToken(o,function(a,o){if(o.status&&o.status.success){console.log(" requestGameToken signup",o),o.temporary_user_auth_token&&(t.setValue("tempUser",o.temporary_user),t.setTempToken(o.temporary_user_auth_token),e.temporary_user_auth_token=t.getTempToken(),e.tempUser=t.getValue("tempUser")),e.gamesignuptoken&&e.gamesignuptoken[n]||(e.gamesignuptoken[n]={});var i=Date.now(),r=i+o.token.expire_on;e.gamesignuptoken[n]=o.token,e.gamesignuptoken[n].date_expiry=r,console.log(e.gamesignuptoken)}})}},e.finishSignupGame=function(t){if(t&&t.game_id){var o=t.game_id;if(e.gamesignuptoken[o]){var n={status:1,token_uuid:e.gamesignuptoken[o].token_uuid};e.gamesignuptoken[o].score&&e.gamesignuptoken[o].score>1&&(n.score=t.played_score),a.updateGameProgress(n,function(a,t){t.status&&t.status.success?console.log(" updateGameProgress signup",t):a||t.status.err&&e.gamesignuptoken&&e.gamesignuptoken[o]&&delete e.gamesignuptoken[o],e.$broadcast("SIGNUP_GAME_DONE",t)})}}},e.playAndFinishSignupGame=function(o){if(o&&o.game_id){var i=o.game_id,s={game_id:o.game_id,landingPageSignUpGame:!0};a.requestGameToken(s,function(s,c){if(c.status&&c.status.success){console.log(" requestGameToken signup",c),c.temporary_user_auth_token&&(t.setValue("tempUser",c.temporary_user),t.setTempToken(c.temporary_user_auth_token),e.temporary_user_auth_token=t.getTempToken(),e.tempUser=t.getValue("tempUser")),e.gamesignuptoken&&e.gamesignuptoken[i]||(e.gamesignuptoken[i]={});var l=Date.now(),d=l+c.token.expire_on;e.gamesignuptoken[i]=c.token,e.gamesignuptoken[i].date_expiry=d,console.log(e.gamesignuptoken);var u={status:1,token_uuid:e.gamesignuptoken[i].token_uuid,score:o.played_score?o.played_score:e.gamesignuptoken[i].score};e.gamesignuptoken[i].score&&e.gamesignuptoken[i].score>1&&(u.score=o.played_score?o.played_score:e.gamesignuptoken[i].score),a.updateGameProgress(u,function(a,s){if(s.status&&s.status.success){console.log(" updateGameProgress signup",s);var c={};r.config.temporary_timeout_session&&(c.expires=r.config.temporary_timeout_session),s.discount_expire_on&&(c.expires=s.discount_expire_on),e.coupon_details=s.coupon,t.setValue("finished_signup_game_id",o.game_id,c),t.setValue("landing_game_coupon",s.coupon),e.$broadcast("SIGNUP_GAME_DONE",s),$(".social-commerce.ui-signup-box-window").is(":visible")?n(function(){e.finished_signup_game_id=t.getValue("finished_signup_game_id")},2e3):e.finished_signup_game_id=t.getValue("finished_signup_game_id")}else a||s.status.err&&(e.gamesignuptoken&&e.gamesignuptoken[i]&&delete e.gamesignuptoken[i],e.$broadcast("SIGNUP_GAME_ERROR",s))})}else c.status.err&&e.$broadcast("SIGNUP_GAME_ERROR",c)})}},e.$on("PRODUCT_GAME_START_EVENT",function(a,t){console.log("PRODUCT_GAME_START_EVENT",t);var o=JSON.parse(t);e.playProductGame(o)}),e.$on("PRODUCT_GAME_FINISH_EVENT",function(a,t){console.log("PRODUCT_GAME_FINISH_EVENT",t);var o=JSON.parse(t);e.finishProductGame(o)}),e.$on("SIGNUP_GAME_START_FINISH_EVENT",function(a,t){console.log("SIGNUP_GAME_START_FINISH_EVENT",t);var o=t;e.playAndFinishSignupGame(o)}),e.$on("GAME_OFFER_START_EVENT",function(a,t){console.log("GAME_OFFER_START_EVENT",t),e.playGameOffer(t)}),e.$on("GAME_OFFER_FINISH_EVENT",function(a,t){console.log("GAME_OFFER_FINISH_EVENT",t),e.finishGameOffer(t)}),e.$on("GAME_OFFER_UPDATE_SCORE_EVENT",function(a,t){console.log("GAME_OFFER_UPDATE_SCORE_EVENT",t),e.updateGameOfferScore(t)}),e.signup_popup_game={},a.getLandingConfig(function(e,a){a&&(r.landingPageConfig=a,console.log("landingPageConfig",r.landingPageConfig))}),r.landingPageDetails=[],a.getLandingPageDetails({},function(e,a){console.log("getLandingPageDetails",a),a.status&&a.status.success&&(r.header_ticker=a.headerType,r.landingPageType=a.landingPageType,r.landingPageDetails=a.landingPageDetails)}),e.link_after_signup={},e.signupItem={},e.has_played_signup_game=!1,e.finished_signup_game_id&&(e.has_played_signup_game=!0),e.scShowSignUp=function(a){return a||(e.link_after_signup={}),e.finished_signup_game_id&&(e.has_played_signup_game=!0),e.currentUser&&e.currentUser.id?void 0:(n(function(){angular.element("#signupheaderbtn").triggerHandler("click")}),!0)},e.$watch("link_after_signup.link",function(a){if(void 0!==a){var o=18e5;a?(r.config.temporary_timeout_session&&(o=r.config.temporary_timeout_session),t.setValue("link_after_signup",a,{expires:o})):(t.setValue("link_after_signup","",{expires:1}),e.link_after_signup={})}}),e.splitStr=function(e,a){if(Array.isArray(e))return e;var t=[];return void 0===e||null===e?t:(void 0!==a&&null!==a||(a=","),t=e.split(a))},e.checkRelativeUrl=function(e){return"/"==e.charAt(0)},e.emailValidator=function(e){var a=/^[a-zA-Z0-9._\+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;return a.test(e)},e.phoneValidator=function(e){var a=/^\+([0-9]{2})?((-|\s)?[0-9]+)+$/;return a.test(e)},e.openGetStarted=function(a){e.$emit("OPENGETSTARTED")},e.getCountryName=function(e){return s.getCountryName(e)}}]),app.controller("scRedeemCodeCtrl",["$scope","$apiSocialCommerce","$apiService","$rootScope","$state","$store",function(e,a,t,o,n,i){console.log("scRedeemCodeCtrl"),e.invalidCode=!1,e.showRedeemMsg=!1;var r="";r=!e.currentUser||e.currentUser.shortcut!=n.params.username&&n.params.username?n.params.username:e.currentUser.shortcut,e.redeemcode=function(n){if(!n||""==n)return void(e.invalidCode=!0);e.invalidCode=!1;var s={scratchCardCode:n};console.log("redeemcode scratchCardData =>",s),a.redeemScratchCard(s,function(a,n){n.status&&n.status.success?(console.log("redeemScratchCard success"+n),t.user.profile(r,function(a,t){t.status&&t.status.success&&(o.viewed_user_profile=t.user,i.setValue("currentUser",t.user),o.currentUser=t.user,e.showRedeemMsg=!0)})):e.invalidCode=!0})},e.showInput=function(){e.showRedeemMsg=!1}}]),app.controller("scRedeemHistoryCtrl",["$scope","$apiSocialCommerce","$state","$location",function(e,a,t,o){console.log("scRedeemHistoryCtrl"),e.scratchCardList=[],e.params={page:1,count:10},e.pagecount=e.params.count,e.mySwiper={},e.currentpage=1,e.displaySlideNum=10,e.totalscratchCards=0,e.scratchCardListReady=!1,e.isSCList=!1,t.params.page&&!isNaN(t.params.page)&&(e.params.page=t.params.page),t.params.count&&!isNaN(t.params.count)&&(e.params.count=t.params.count);var n=function(){e.params.includeCount=1,a.getListScratchCards(e.params,function(a,t){!a&&t.status.success&&(console.log(t),e.scratchCardList=t.scratchCardRepresentations,e.totalscratchCards=t.totalScratchCards,e.scratchCardListReady=!0,e.isSCList=!0,delete e.params.includeCount)})};n(),e.calcPage=function(){if(e.totalscratchCards%e.pagecount!=0){var a=e.totalscratchCards%e.pagecount;return(e.totalscratchCards-a)/e.pagecount+1}return e.totalscratchCards/e.pagecount},e.jumpList=function(t){console.log("jumpList : "+t+" currentpage : "+e.currentpage+" $scope.mySwiper ",e.mySwiper),e.currentpage>t?e.mySwiper.slidePrev():e.mySwiper.slideNext(),t>=e.mySwiper.activeSlide+1&&t<=e.mySwiper.activeSlide+1+e.displaySlideNum||e.mySwiper.slideTo(t-1),e.params.page=t,e.currentpage=t,a.getListScratchCards(e.params,function(a,n){n.status&&n.status.success&&(e.scratchCardList=n.scratchCardRepresentations,e.scratchCardListReady=!0,console.log("getListScratchCards : "+e.scratchCardList.length),o.search({page:t,count:e.params.count}))})}}]),app.controller("scProductListCtrl",["$scope","$state","$scService","$apiSocialCommerce","$interval","$timeout","$location","$rootScope","$window",function(e,a,t,o,n,i,r,s,c){console.log("scProductListCtrl params:",a.params),e.cat_arr=[],e.subCat=[];var l="category";e.params={},e.mySwiper,e.displaySlideNum=10,e.initialized=!1,e.product_path="",e.pageLoading=!1,e.pageSwiper={},e.bannerSwiper={},e.filter_enable=!1;var d;e.productswiper={},e.productswiper.swiper={},e.onReadySwiper=function(a){e.bannerSwiper=a,console.log("banner Ready..",e.bannerSwiper),e.moveNext=function(){i(function(){console.log("next slide"),e.bannerSwiper.slideNext(),e.moveNext()},4e3)},e.bannerList&&e.bannerList.length&&e.moveNext()},e.ready=!1,d=n(function(){if(t.headerNavCat.length){if(n.cancel(d),d=void 0,e.params.count=20,e.params.page=1,a.params.noload?(s.currentPageParams.page?e.params.page=s.currentPageParams.page:a.params.page&&!isNaN(a.params.page)&&(e.params.page=a.params.page),s.currentPageParams.count?e.params.count=s.currentPageParams.count:a.params.count&&!isNaN(a.params.count)&&(e.params.count=a.params.count),s.currentPageParams.sort?e.params.sort=s.currentPageParams.sort:a.params.sort&&(e.params.sort=a.params.sort)):s.currentPageParams={},e.currentpage=e.params.page,console.log("$state.params.category  "+a.params.category+" - "+a.params.path+" - "+a.current.name,e.params),0==a.current.name.indexOf("productList")){var o={},i=t.getFindKeyObject(t.headerNavCat,"shortcut",a.params.category);o.cat_obj=i,e.subCat=t.getFindCatList(t.headerNavCat,"label",o.cat_obj.label,"shortcut"),o.subCat=e.subCat,l+="/"+a.params.category,o.cat_link=l,e.cat_arr.push(o);var r=e.subCat.crkey(o.cat_obj.label,o.cat_obj.shortcut);if(a.params.path){var c=a.params.path.split("/");angular.forEach(c,function(a,o){var n={};n.subCat={},n.cat_obj=t.getMatchObject(i,"shortcut",a),i=n.cat_obj;var o=e.subCat.crkey(n.cat_obj.label,n.cat_obj.shortcut);n.subCat[o]={},n.subCat[o]=e.subCat[r][o],l+="/"+a,n.cat_link=l,e.cat_arr.push(n)}),s.$broadcast("CURRENT_CATEGORY",{newval:c[0]})}console.log("$scope.cat_arr[$scope.cat_arr.length - 1].cat_obj : "+JSON.stringify(e.cat_arr[e.cat_arr.length-1].cat_obj)),e.params.category_id=e.cat_arr[e.cat_arr.length-1].cat_obj.id,e.params.exclusive_tags=e.cat_arr[e.cat_arr.length-1].cat_obj.exclude_tags?e.cat_arr[e.cat_arr.length-1].cat_obj.exclude_tags.join():"",e.params.inclusive_tags=e.cat_arr[e.cat_arr.length-1].cat_obj.include_tags?e.cat_arr[e.cat_arr.length-1].cat_obj.include_tags.join():"",e.params.inclusive_tags_condition=e.cat_arr[e.cat_arr.length-1].cat_obj.inclusive_tags_condition?e.cat_arr[e.cat_arr.length-1].cat_obj.inclusive_tags_condition:"",e.params.exclusive_tags_condition=e.cat_arr[e.cat_arr.length-1].cat_obj.exclusive_tags_condition?e.cat_arr[e.cat_arr.length-1].cat_obj.exclusive_tags_condition:""}if("collectionList"===a.current.name){var u=a.params.collectid;u.indexOf("_")>-1?e.params.collection_id=u.substr(u.lastIndexOf("_")+1,u.length):u.indexOf("-")>-1?e.params.collection_id=u.substr(u.lastIndexOf("-")+1,u.length):e.params.collection_id=a.params.collectid}e.getProductList()}},1e3),e.collectionBreadCrumb=function(){if("collectionList"===a.current.name){if(console.log("collectionBreadCrumb $state.params : "+JSON.stringify(a.params)),a.params.skey&&a.params.spage&&a.params.sfilter){var t={};t.cat_link="search/"+a.params.skey+"/"+a.params.sfilter+"?page="+a.params.spage,t.label=_.find(s.i18n,function(e,a){return a.indexOf("header.Search")>-1}),_.include(_.map(e.cat_arr,_.property("cat_link")),t.cat_link)||e.cat_arr.push(t)}var t={};t.cat_link="collection/"+(s.urlEncodedStr(e.productCollectionDetail.productCollection.shortcut)+"-"+e.productCollectionDetail.productCollection.product_collection_id),
t.label=e.productCollectionDetail.productCollection.title_language,_.include(_.map(e.cat_arr,_.property("cat_link")),t.cat_link)||e.cat_arr.push(t),console.log("collectionBreadCrumb ",e.cat_arr)}},e.getProductList=function(){o.getListProducts(e.params,function(a,t){e.initialized=!0,e.animate=!1,e.collection_not_found=!1,t.status.success||"PRODUCT_COLLECTION_NOT_FOUND"!=t.status.code||(e.collection_not_found=!0),t.status&&t.status.success&&(e.productList=t.products,e.bannerList=t.bannerList,e.totalProducts=t.totalProducts,e.productCollections=t.productCollections,t.productCollectionDetail&&(e.productCollectionDetail=t.productCollectionDetail),e.collectionBreadCrumb(),e.pagecount=e.params.count,e.params.page>t.totalProducts/e.params.count&&(e.currentpage=Math.ceil(t.totalProducts/e.params.count)+1),console.log("calling PRODUCTLIST_LOADED"),s.$broadcast("PRODUCTLIST_LOADED"),e.ready=!0,e.imgResize=function(e,a){var t=$("img.product").eq(e),o=new Image;o.src=t.attr("src");var n=o.naturalHeight-o.naturalWidth;return 50>n?$("img.product").eq(e).css({width:"100%",margin:"auto 0"}):$("img.product").eq(e).css({width:"auto",height:"100%",margin:"0 auto"}),!0})})},e.selected_price="",e.selected_country="",e.selected_state="",e.selected_city="",e.country_list=country_list_english,(!e.currentUser||!e.currentUser.display_language||"zh-CN"!=e.currentUser.display_language&&"zh"!=e.currentUser.display_language&&"zh-TW"!=e.currentUser.display_language)&&(e.currentUser&&e.currentUser.display_language||!e.config||!e.config.browserDefaultLang||"zh-CN"!=e.config.browserDefaultLang&&"zh"!=e.config.browserDefaultLang&&"zh-TW"!=e.config.browserDefaultLang)||(e.country_list=country_list_chinese),e.selected_country_states=[],e.$watch("selected_country",function(a){e.filter_enable&&""==e.selected_state&&""==e.selected_city&&e.get_product_filter(),e.selected_state="",state_list_english&&state_list_english[a]?e.selected_country_states=state_list_english[a]:e.selected_country_states=[]}),e.selected_state_cities=[],e.$watch("selected_state",function(a){e.selected_city="",cityConfig&&cityConfig[e.selected_country]&&cityConfig[e.selected_country][a]?e.selected_state_cities=cityConfig[e.selected_country][a]:e.selected_state_cities=[]}),e.$watch("selected_city",function(a){e.filter_enable&&e.get_product_filter()}),e.$watch("selected_price_low + selected_price_up",function(a){e.filter_enable&&e.get_product_filter()}),e.$watch("selected_state",function(a){e.filter_enable&&e.get_product_filter()}),e.selectFilter=function(){e.filter_enable?(e.selected_country="",e.selected_state="",e.selected_city="",e.selected_price_low=1,e.selected_price_up=1e4,e.filter_enable=!1,e.get_product_filter()):e.filter_enable=!0},e.get_product_filter=_.debounce(function(){$.isEmptyObject(e.selected_price_low)&&(e.selected_price_low=1),$.isEmptyObject(e.selected_price_up)&&(e.selected_price_up=1e4);var a=e.selected_price_low,t=e.selected_price_up,o=a+"-"+t;e.params.priceRange=o,e.params.country=angular.copy(e.selected_country),e.params.state=angular.copy(e.selected_state),e.params.city=angular.copy(e.selected_city),e.params.page=1,e.getProductList()},1e3),e.jumpList=function(t){e.params.page=t,e.currentpage=t,e.animate=!1,console.log("page productList",t),o.getListProducts(e.params,function(o,n){if(e.ready=!0,e.initialized=!0,n.status&&n.status.success){if(e.productswiper.swiper.slideTo(t-1,500),s.$broadcast("PRODUCTLIST_LOADED"),e.productList=n.products,"productList"===a.current.name&&(r.path("/shopping/"+l).search({noload:1}),s.currentPageParams.page=t,s.currentPageParams.count=e.params.count,s.currentPageParams.sort=e.params.sort,s.currentPageParams.noload=1),"collectionList"===a.current.name){var i={};console.log("params :jumpList  "),i=a.params.skey&&a.params.spage&&a.params.sfilter?{page:t,count:e.params.count,sort:e.params.sort,noload:1,skey:a.params.skey,sfilter:a.params.sfilter,spage:a.params.spage}:{page:t,count:e.params.count,sort:e.params.sort,noload:1},s.currentPageParams=i,console.log("params :jumpList  "+JSON.stringify(i)),r.path("/shopping/collection/"+a.params.collectid).search({noload:1})}e.pageLoading=!1}})},e.sortBy=function(t){console.log("sortname_order",t),e.currentpage=1,e.params.page=1,e.ready=!1,e.animate=!1,e.params.sort=t,o.getListProducts(e.params,function(o,n){if(e.ready=!0,e.initialized=!0,n.status&&n.status.success&&(s.$broadcast("PRODUCTLIST_LOADED"),e.productList=n.products,"productList"===a.current.name&&(r.path("/shopping/"+l).search({noload:1}),s.currentPageParams.page=page,s.currentPageParams.count=e.params.count,s.currentPageParams.sort=e.params.sort,s.currentPageParams.noload=1),"collectionList"===a.current.name)){var i={};i=a.params.skey&&a.params.spage&&a.params.sfilter?{page:e.params.page,count:e.params.count,sort:t,noload:1,skey:a.params.skey,sfilter:a.params.sfilter,spage:a.params.spage}:{page:e.params.page,count:e.params.count,sort:t,noload:1},s.currentPageParams=i,r.path("/shopping/collection/"+a.params.collectid).search({noload:1})}})},e.isObj=function(a){return!e.isArray(a)&&!e.isEmpty(a)},e.isArray=function(e){var a=c.Array.isArray||c.angular.isArray;return a(e)},e.isEmpty=function(e){if(null==e||0===e.length)return!0;if(e.length>0)return!1;for(var a in e)if(hasOwnProperty.call(e,a))return!1;return!0}}]),app.controller("scCategoryListCtrl",["$scope","$state","$scService","$interval","$utility",function(e,a,t,o,n){console.log("scCategoryListCtrl :"),e.cat_list_obj={};var i,r="category";e.ready=!1,i=o(function(){if(t.headerNavCat.length){o.cancel(i),i=void 0;var a=_.sortBy(t.headerNavCat,"children"),n=[],s=[];_.find(a,function(e){null==e.children||void 0==e.children||0==e.children.length?n.push(e):s.push(e)});for(var c=[],l=[],d=0;d<s.length;d++){var u={},m=t.getFindCatList(s,"label",s[d].label,"shortcut");l.push(m),u.cat_link=r+"/"+s[d].shortcut,u.cat_key=m.crkey(s[d].label,s[d].shortcut),c.push(u)}e.cat_list_obj.subCat=l,e.cat_list_obj.cat_obj=c;for(var p=[],d=0;d<n.length;d++){var g={};g.label=n[d].label,g.shortcut=n[d].shortcut,g.cat_link=r+"/"+n[d].shortcut,p.push(g)}e.cat_list_obj.no_cat=p,e.ready=!0}},1e3),e.noChildren=function(e){return n.isEmpty(e)?!0:!(!n.isArray(e)||0!=e.length)},e.getCatLen=function(e,a){for(var t=new Array(e),o=0;e>o;o++)t[o]=a+o;return t}}]),app.controller("scProductGroupCollectionCtrl",["$scope","$store","$state","$scService","$apiSocialCommerce",function(e,a,t,o,n){e.getData=function(e,a){var t={page:1,count:20,collection_id:e.id};o.createActivity("collectionId-"+e.id),n.getListProducts(t,function(t,n){a(n),console.log("$apiSocialCommerce getListProducts..",n),o.removeActivity("collectionId-"+e.id)})}}]),app.controller("scProductInfoCtrl",["$scope","$state","$apiSocialCommerce","$scService","$rootScope","$location","$timeout",function(e,a,t,o,n,i,r){function s(e,a){var t,o;return e.localized&&e.localized.original_price?(t=Number(e.localized.original_price),o=Number(e.localized.final_price)):e.original_price&&(t=Number(e.original_price),o=Number(e.finalPrice)),a?a.priceChangeType===T?{originalPrice:t+a.priceChangeValue,finalPrice:o+a.priceChangeValue}:a.priceChangeType===x?{originalPrice:t*(1+a.priceChangeValue),finalPrice:o*(1+a.priceChangeValue)}:void 0:{originalPrice:t,finalPrice:o}}console.log("scProductInfoCtrl"),e.product_selected={},e.brlinks=[],e.isGreyButton=!0,e.currentIndex=0,e.totalImg=-1,e.attach_images=[],e.qty={max:0,min:1},e.notEnoughStock=!1;var c=i.absUrl().split("/");if(e.shareURL="http://"+c[2]+"/"+c[3]+"/"+c[4]+"/",a.params.id){var l="",d="",u="",m="",p=a.params.id,g=p.split(/[_\-]/);d=g.pop(),l=g.join(" "),!a.params.collectid||"collectionPrdInfo"!=a.current.name&&"collectionToPrdInfo"!=a.current.name||(a.params.collectid.indexOf("_")>-1?(m=a.params.collectid.substr(0,a.params.collectid.lastIndexOf("_")).replace(/-/g," "),u=a.params.collectid.substr(a.params.collectid.lastIndexOf("_")+1,a.params.collectid.length)):(m=a.params.collectid.substr(0,a.params.collectid.lastIndexOf("-")).replace(/-/g," "),u=a.params.collectid.substr(a.params.collectid.lastIndexOf("-")+1,a.params.collectid.length)));var f={};e.shareURL=e.shareURL+"-"+d,e.product_otherdata={},e.ready=!1,e.loadmore_ready=!0,console.log("$rootScope.currentPageParams ",n.currentPageParams);var h=void 0!=n.currentPageParams.skey?n.currentPageParams.skey:void 0!=a.params.skey?a.params.skey:i.search().skey,v=void 0!=n.currentPageParams.spage?n.currentPageParams.spage:void 0!=a.params.spage?a.params.spage:i.search().spage,y=void 0!=n.currentPageParams.sfilter?n.currentPageParams.sfilter:void 0!=a.params.sfilter?a.params.sfilter:i.search().sfilter,w=void 0!=n.currentPageParams.page?n.currentPageParams.page:void 0!=a.params.page?a.params.page:i.search().page,k=!!(a.params.page&&a.params.count&&a.params.noload),b=void 0!=n.currentPageParams.count?n.currentPageParams.count:void 0!=a.params.count?a.params.count:i.search().count,S=void 0!=n.currentPageParams.noload?n.currentPageParams.noload:void 0!=a.params.noload?a.params.noload:i.search().noload,A=!!(a.params.skey&&a.params.spage&&a.params.sfilter),C=void 0!=a.params.referrernetwork?a.params.referrernetwork:i.search().referrernetwork;e.buildBreadCrumbs=function(){if(console.log(" params  : "+h+v+y+b+w+S+" $state.current.name "+a.current.name),console.log(" isPagging "+k+w+b+S),A||h&&v&&y){var t={};t.cat_link="search/"+h+"/"+y,t.label=_.find(n.i18n,function(e,a){return a.indexOf("header.Search")>-1}),e.brlinks.push(t),"collectionPrdInfo"!=a.current.name&&"collectionToPrdInfo"!=a.current.name&&(t={},t.cat_link="product/"+a.params.id,t.label=l,e.brlinks.push(t),console.log(" brlinks  :  "+JSON.stringify(e.brlinks)))}if("collectionPrdInfo"==a.current.name||"collectionToPrdInfo"==a.current.name){var t={};if(a.params.collectid.indexOf("_")>0&&u.length>0||"collectionToPrdInfo"==a.current.name)t.cat_link="collection/"+a.params.collectid,A&&(t.cat_link+="?skey="+h+"&sfilter="+y+"&spage="+v),k&&(t.cat_link+=(A?"&":"?")+"page="+w+"&onload="+S+"&count="+b),console.log(" isCollectionPagging "+t.cat_link),t.label=e.productCollectionDetails.title_language,e.brlinks.push(t);else{var i=o.getFindKeyObject(o.headerNavCat,"shortcut",a.params.collectid);t.cat_link="category/"+a.params.collectid,t.label=i&&i.label?i.label:a.params.collectid,e.brlinks.push(t),n.$broadcast("CURRENT_CATEGORY",{newval:a.params.collectid})}t={},t.cat_link="product/"+a.params.collectid+"/"+a.params.id,t.label=l,e.brlinks.push(t),console.log(a.current.name+" breadcrumbs..."+e.brlinks)}else if("categoryPrdInfo"==a.current.name){if(console.log(a.current.name+" = "+a.params.path),a.params.path){var r=a.params.path.split("/"),i=o.getFindKeyObject(o.headerNavCat,"shortcut",r[0]),t={};angular.forEach(r,function(n,r){t={},t.cat_link="category/"+a.params.path.substr(0,a.params.path.indexOf(n)+n.length),k&&(t.cat_link+=(A?"&":"?")+"page="+w+"&onload="+S+"&count="+b);var s=o.getMatchObject(i,"shortcut",n);t.label=s.label?s.label:n,e.brlinks.push(t)}),n.$broadcast("CURRENT_CATEGORY",{newval:r[0]}),t={},t.cat_link="product/"+a.params.path+"/"+a.params.id,t.label=l,e.brlinks.push(t)}console.log(a.current.name+" breadcrumbs..."+e.brlinks)}},e.loadMoreComments=function(){if(e.loadmore_ready){if(f.product_id=d,f.page?f.page+=1:f.page=1,e.loadmore_ready=!1,u&&u.length>0)try{isNaN(parseInt(u))?u="":f.collection_id=u}catch(a){u="",console.log(a)}t.getProductInfo(f,function(a,t){if(e.loadmore_ready=!0,!a&&t.status.success){if(e.productArticle?(e.productArticle.comments=_.union(e.productArticle.comments,t.productResponse.productArticle.comments),e.$broadcast("MASONRY_INIT")):(e.productArticle=t.productResponse.productArticle,e.productOriginalPrice=t.productResponse.productArticle.productListing.original_price,e.productFinalPrice=t.productResponse.productArticle.productListing.final_price,e.productArticle.product.variants_language=t.productResponse.productArticle.product.variants_regular_language,n.productClass=o.noSpace(e.productArticle.product.title_language)+"-"+e.productArticle.product.product_id,console.debug("product class :",n.productClass),e.combination_group=e.productArticle.product.variants_language,e.getVariants()),t.productCollectionDetails&&(e.productCollectionDetails=t.productCollectionDetails),0==e.brlinks.length&&e.buildBreadCrumbs(),e.productArticle.product.image_attachments_language&&e.productArticle.product.image_attachments_language.length>0){e.attach_images.push({title:"",thumbnail:e.productArticle.product.product_image_language,type:"image",metadata:{},link_url:e.productArticle.product.product_image_language});for(var i=0;i<e.productArticle.product.image_attachments_language.length;i++)e.attach_images.push(e.productArticle.product.image_attachments_language[i]);e.totalImg=e.attach_images.length}console.log("=========== product have "+e.totalImg+" == images =="),1==f.page&&(e.ready=!0),e.sticker={},t.stickers&&(e.sticker={like:t.stickers[1],dislike:t.stickers[2]}),console.log("productinfo  : ",e.productArticle),console.log("sticker : ",e.sticker),null!=e.productArticle.product.long_description_language&&""!=e.productArticle.product.long_description_language||n.$broadcast("SELECT_TAB","2"),e.qty.max=e.productArticle.product.availableStock,n.$broadcast("CURRENT_PAGE_TITLE",{newval:e.productArticle.product.title_language})}else a||t.status.success||"NO_ITEMS_FOUND"!=t.status.code&&"PRODUCT_NOT_ACTIVE"!=t.status.code?f.page-=1:e.hideLoadMoreComments=!0}),t.getRelatedProducts(d,function(a,t){e.relatedProducts=t.products,console.log("related products",e.relatedProducts)})}},e.loadMoreComments(),e.productAction=function(a){var o={product_id:d,action:a};t.productAction(o,function(t,o){!t&&o.status.success&&("like"==a?e.productArticle.privateData.isLiked=!0:e.productArticle.privateData.isDisliked=!0)})},e.combination_group={},e.getVariants=function(){t.listProductCombinationsNew(d,function(a,t){if(!a&&t.status.success){if(e.productArticle.product.combinations=t.combinations,e.combination_group={},e.productArticle.product.variants_language&&_.each(Object.keys(e.productArticle.product.variants_language),function(a,o){e.combination_group[a]=_.map(_.uniq(t.combinations,!1,function(e){return e.combinationList[o]}),function(e){return{value:e.combinationList[o],hidden:!1}})}),t.combinations){var o=_.find(t.combinations,function(e){return e.is_default});e.defaultCombination=o;var n;if(o){n=Object.keys(e.productArticle.product.variants_language);for(var i=0;i<n.length;i++)e.selectedVariants[n[i]]=o.combinationMap_2[n[i]],e.getShowVariants(i)}}}else if(a)return void e.getVariants()})},e.showVariants=[],e.selectedVariants={},e.getShowVariants=function(a){e.addToCartObj.errorAddCartMsg="",console.log("index",a);var t=_.toArray(e.selectedVariants);if(e.showVariants[a]=!0,angular.forEach(e.productArticle.product.variants_language,function(t,o){if(o>a+1)e.showVariants[o]=!1,e.selectedVariants[t.code]="";else if(o>a)if(e.selectedVariants[e.productArticle.product.variants_language[a].code]){e.showVariants[o]=!0;var n=t.options.split(",")[0];e.selectedVariants[t.code]=n;var i=_.toArray(e.selectedVariants).slice(0,a+1).join(","),r=e.productArticle.product.combinations;_.each(e.combination_group[t.code],function(e){_.find(r,function(a){return 0===a.combination.indexOf(i+","+e.value)})?e.hidden=!1:e.hidden=!0})}else e.showVariants[o]=!1,e.selectedVariants[t.code]=""}),Object.keys(e.productArticle.product.variants_language).length===Object.keys(e.selectedVariants).length){var o=_.values(e.selectedVariants).join(","),n=_.find(e.productArticle.product.combinations,function(e){return e.combination===o});if(n){var i=s(e.productArticle.productListing,n);e.productFinalPrice=i.finalPrice,e.productOriginalPrice=i.originalPrice}}t=t.slice(0,a+1);var r=_.filter(e.productArticle.product.combinations,function(e){var o=e.combinationList.slice(0,a+1);return _.isEqual(o,t)});r=_.map(r,function(e,t){return e.combinationList[a+1]});var c=!1;e.isGreyButton=!1,angular.forEach(e.selectedVariants,function(e,a){!c&&_.isEmpty(e)&&(c=!0)}),c&&(e.isGreyButton=!0);var l=_.find(e.productArticle.product.combinations,function(e,a){return e.combination.indexOf(t)>-1});void 0!=l&&(e.qty.max=l.availableStock)};var T=1,x=2;e.addToCartFromProductInfo=function(){var a=_.values(e.selectedVariants),t=[];angular.forEach(a,function(e){t.push(e.trim())});var o=t.join(","),i=!o.length;n.cartLoading=!1;var r="",s=[];if(e.selectedVariants&&o){_.find(e.productArticle.product.combinations,function(a){var t=[];angular.forEach(e.selectedVariants,function(e,o){t.push(a.combinationMap_2[o].trim())}),t.push(a.product_variant_combination_id),s.push(_.values(t).join(","))}),_.find(s,function(e){var a=e.split(","),t=a.pop(),n=a.join(",");return n===o?(r=t,e):void 0})}var c=_.find(n.listShoppingCartItems,function(e,a){return console.log("theKeyVal.product.product_id "+e.product.product_id),e.combination?e.combination.product_variant_combination_id==r&&e.product.product_id==d:e.product.product_id==d});if(void 0!=c)if(c.combination){if(r==c.combination.product_variant_combination_id&&c.combination.availableStock<c.quantity+e.product_selected.qty)return void(e.notEnoughStock=!0);e.notEnoughStock=!1}else{if(c.quantity+e.product_selected.qty>e.qty.max)return void(e.notEnoughStock=!0);e.notEnoughStock=!1}else e.notEnoughStock=!1;var l=!1;if(angular.forEach(e.combination_group,function(e){_.values(e).join(",")&&(l=!0)}),!(!e.product_selected.qty||l&&e.combination_group&&Object.keys(e.combination_group).length&&i||n.cartLoading)){n.cartLoading=!0,e.addFBTrackPixel(n.config.fb_tracking_pixel.add_to_cart_id,e.productArticle.productListing.final_price);var u={};C&&(u.referrernetwork=C),e.addToCartPress(d,e.productArticle.productListing.product_listing_id,e.product_selected.qty,e.selectedVariants,r,u)}},e.addProductQuantity=function(){e.product_selected.qty+1<=e.qty.max&&(e.product_selected.qty=e.product_selected.qty+1)},e.deductProductQuantity=function(){e.product_selected.qty-1>0&&(e.product_selected.qty=e.product_selected.qty-1)}}}]),app.controller("scProductReviewCtrl",["$scope",function(e){console.log("scProductReviewCtrl")}]),app.controller("scArticleCtrl",["$scope",function(e){console.log("scArticleCtrl")}]),app.controller("scHeaderNavCtrl",["$scope","$apiSocialCommerce","$state","$scService","$rootScope",function(e,a,t,o,n){console.log("socialCommerceHeaderNavCtrl"),e.sugestSearchData=[],e.categoryLen=6,e.getCategory=function(){a.getHeaderNavCat(function(a,i){o.headerNavCat=i,n.categoryList=i,i.length<6&&(e.categoryLen=i.length),e.headerNavCat=o.headerNavCat,n.$broadcast("CATEGORY_FETCHED",i),void 0!==t.params.query&&(e.scQueryValue=t.params.query);var r=_.sortBy(e.headerNavCat,function(e){return e.sequence});e.headerNavCat=r,angular.forEach(e.headerNavCat,function(e,a){if(e.children){angular.forEach(e.children,function(e,a){if(e.children){var t=_.sortBy(e.children,function(e){return e.sequence});e.children=t}});var t=_.sortBy(e.children,function(e){return e.sequence});e.children=t}}),console.log("CATEGORY_FETCHED",e.headerNavCat)})},e.initArray=function(e,a){return null!=e&&e.length>0?o.masonArray(e,a):void 0}}]),app.controller("scSearchGroupCollectionCtrl",["$scope","$apiSocialCommerce","$state","$scService","$location","$timeout","$rootScope",function(e,a,t,o,n,i,r){console.log("=============== scSearchGroupCollectionCtrl...."),e.view_page_name="search";var s,c=10,l=t.params.query,d=n.$$path.split("/")[4];if(e.searchValue=l,e.currentpage=!1,e.pageLoading=!1,e.filter=t.params.filter,t.params.nolaod||(r.currentPageParams={}),r.currentPageParams.page)e.currentpage=r.currentPageParams.page;else try{e.currentpage=window.location.toString().split("?")[1].split("=")[1]}catch(u){e.currentpage="1"}e.getSearchItemFriendlyUrl=function(e,a){return r.urlEncodedStr(e)+"-"+a},console.log("$state.params.filter  :"+t.params.filter),e.other_params={},e.getSearchList=function(){angular.isDefined(t.params.category)&&angular.isDefined(t.params.query)?a.searchWithInCategory(t.params.category,t.params.query,e.currentpage,e.filter,e.other_params,function(a,t){e.totalProducts=t.totalProducts,e.productList=t.products,e.pagecount=t.totalProducts/7,e.pagecount<=1&&(e.pagecount=1)}):a.search(t.params.query,e.currentpage,e.filter,e.other_params,function(a,t){console.log("data.....",t),e.productList=t.searchResults,e.totalProducts=t.total,console.log("=============== and the total products i have is...."),console.log(e.totalProducts),console.log("=============== and the total products i have is...."),e.pagecount=t.total/7,e.pagecount<=1&&(e.pagecount=1),i(function(){s=new Swiper(".product-list-canvas .swiper-container",{slidesPerView:c,slidesPerViewFit:!0,autoResize:!0})},1)})},e.getSearchList(),e.jumpList=function(t){console.log("page",t),e.currentpage>t?s.slidePrev():s.slideNext(),t>=s.activeSlide+1&&t<=s.activeSlide+1+c||s.slideTo(t-1),e.currentpage=t,e.ready=!1,a.search(l,e.currentpage,e.filter,e.other_params,function(a,t){e.productList=t.searchResults,e.totalProducts=t.total,e.pagecount=t.total/7,e.pagecount<=1&&(e.pagecount=1),r.currentPageParams.page=e.currentpage,e.pageLoading=!1})},e.sortBy=function(o){console.log("sortname_order",o),e.currentpage=1,e.ready=!1,e.other_params.sort=o,a.search(l,e.currentpage,e.filter,e.other_params,function(a,o){e.productList=o.searchResults,e.totalProducts=o.total,e.pagecount=o.total/7,e.pagecount<=1&&(e.pagecount=1),n.path("/shopping/search/"+t.params.query+"/"+d).search({noload:1}),r.currentPageParams.page=e.currentpage})},e.imgResize=function(e,a){var t=$("img.product").eq(e),o=new Image;o.src=t.attr("src");var n=o.naturalHeight-o.naturalWidth;return 50>n?$("img.product").eq(e).css({width:"100%",margin:"auto 0"}):$("img.product").eq(e).css({width:"auto",height:"100%",margin:"0 auto"}),!0}}]),app.controller("scUserCtrl",["$scope","$state","$apiService","$location","$rootScope",function(e,a,t,o,n){console.log("scUserCtrl");var i="";return i=!e.currentUser||e.currentUser.shortcut!=a.params.username&&a.params.username?a.params.username:e.currentUser.shortcut,e.currentUser&&e.currentUser.shortcut==i||"sc_user.ordercart"==a.current.name||"payments-message"==a.$current.parent.self.name||"sc_user.orderdetails"==a.current.name?(t.user.profile(i,function(e,a){a.status&&a.status.success&&(n.viewed_user_profile=a.user,n.charities=a.charities)}),e.usertab="usertab_1",void(e.tabTo=function(a){e.usertab=a})):(console.log("can't be access if not the owner"),void o.path("/").search({}))}]),app.controller("scOrderHistoryCtrl",["$scope","$state","$apiSocialCommerce","$rootScope","$location","$apiService","$timeout",function(e,a,t,o,n,i,r){if(console.log("scOrderHistoryCtrl"),e.sentEmailInvoiceFlag=!1,e.invoices=[],e.invoiceReady=!1,e.hasInvoiceDetail=!1,e.isInvList=!0,e.currentpage=1,e.init=!1,e.total_invoice=0,e.currentUser=o.currentUser,e.per_invoice={},e.displaySlideNum=10,e.mySwiper={},e.statuskey="user.transaction.Invoice_status.",e.paymentkey="user.transaction.Payment_type.",e.params={page:1,count:10,includeCount:1},e.mode=a.params.mode?a.params.mode:"u",e.txid=a.params.txid?a.params.txid:"",e.isRequeryProcess=!1,console.log("state params :: "+JSON.stringify(a.params)+" state name : "+a.current.name),"sc_user.orderdetails"===a.current.name||"invoice"===a.current.name){e.isInvList=!1;var s={uuid:a.params.id};e.txid.length>0&&(s.txid=e.txid);t.getInvoicesDetails(s,function(a,t){t.status&&t.status.success&&(console.log("getInvoicesDetails :  "+t.invoice.invoice_id),e.showDetails(t),null!=t.invoice.coupon&&o.$broadcast("COUPON_USED_CLEAR",{newval:t.invoice.coupon.code}))})}else e.params.page=null!=a.params.page?a.params.page:1,t.getInvoicesList(e.params,function(a,t){t.status&&t.status.success&&(e.invoices=t.invoices,e.per_invoice=t.invoices.length>0?t.invoices[0]:{},e.total_invoice=t.totalInvoices,e.currentpage=e.params.page,console.log(" Success data :  "+e.invoiceReady+" total - "+e.total_invoice),e.pagecount=e.params.count=10,console.log("list of invoice",e.invoices),e.invoiceReady=!0,e.init=!0,e.params.page>e.total_invoice/e.pagecount&&(e.currentpage=Math.ceil(e.total_invoice/e.params.count)+1))});e.sendMyInvoice=function(a){console.log("sendMyInvoice..."),e.sentEmailInvoiceFlag=!0,t.sendMyInvoice(a),r(function(){e.sentEmailInvoiceFlag=!1},5e3)},e.calcPage=function(){if(e.total_invoice%e.pagecount!=0){var a=e.total_invoice%e.pagecount;return(e.total_invoice-a)/e.pagecount+1}return e.total_invoice/e.pagecount},e.jumpList=function(a){console.log("jumpList : "+a+" currentpage : "+e.currentpage),e.currentpage>a?e.mySwiper.slidePrev():e.mySwiper.slideNext(),a>=e.mySwiper.activeSlide+1&&a<=e.mySwiper.activeSlide+1+e.displaySlideNum||e.mySwiper.slideTo(a-1),e.params.page=a,e.currentpage=a,t.getInvoicesList(e.params,function(t,o){o.status&&o.status.success&&(e.invoices=o.invoices,e.per_invoice=o.invoices.length>0?o.invoices[0]:{},console.log("jumpList : "+e.params.page+" currentpage : "+e.currentpage),n.search({page:a,count:e.params.count}))})},e.gotoProduct=function(e){a.go("productInfo"),n.path("shopping/product/"+o.urlEncodedStr(e))},e.showDetails=function(a){e.per_invoice=a.invoice,e.hasInvoiceDetail=!0,e.per_invoice_messages=a.messages},e.get18nValBaseOnKey=function(e,a){if(console.log("get18nValBaseOnKey: "+e+" + "+a),null==a||void 0==a||!a)return"";var t=e+a+".",n=_.find(o.i18n,function(e,a){return a.indexOf(t)>-1});return n?n:""},e.merchant_message_comment={},e.merchant_message_comment.isLoadmoreLoading=!1,e.merchant_message_comment.hasLoadmore=!1;var c={};e.loadMoreInquiries=function(){e.merchant_message_comment.isLoadmoreLoading||(c.article_id!=e.merchant_message.article_id&&(c={},e.merchant_message_comment={},e.merchant_message_comment.isLoadmoreLoading=!1,e.merchant_message_comment.hasLoadmore=!1),c.article_id=angular.copy(e.merchant_message.article_id),c.page?c.page+=1:(c.page=1,e.merchant_message.comments=[]),e.merchant_message_comment.isLoadmoreLoading=!0,t.fetchInvoiceComments(c,function(a,t){e.merchant_message_comment.isLoadmoreLoading=!1,e.merchant_message_comment.hasLoadmore=!0,!a&&t.status.success?t.post.comments.length?e.merchant_message.comments.length?e.merchant_message.comments=_.union(e.merchant_message.comments,t.post.comments):e.merchant_message.comments=t.post.comments:e.merchant_message_comment.hasLoadmore=!1:a||t.status.success||"NO_ITEMS_FOUND"!=t.status.code&&"INVOICE_NOT_FOUND"!=t.status.code?c.page-=1:e.merchant_message_comment.hasLoadmore=!1}))},e.openInvoiceMessage=function(a){$(document).foundation(),$("#invoicemessage").foundation("reveal","open",{}),e.merchant_message=_.find(e.per_invoice_messages,function(e){return e.merchant_id==a}),c={},e.loadMoreInquiries()},e.inquiry_ready=!0,e.inquiry={},e.inquiry.uploaded_images=[],e.createInquiry=function(){if(("undefined"!=typeof e.inquiry.text&&""!==e.inquiry.text||e.inquiry.uploaded_images.length)&&e.inquiry_ready){e.inquiry_ready=!1,e.inquiry.attachments=[];var a="";if(e.inquiry.uploaded_images.length?a=e.inquiry.uploaded_images[0]:e.inquiry.preview_links&&e.inquiry.preview_links.length&&(a=e.inquiry.preview_links[0].link_url),a)i.articles.articleUrlCache(a,function(a,t){t.info&&e.inquiry.attachments.push(t.info),"undefined"!=typeof e.inquiry.text&&""!==e.inquiry.text||(e.inquiry.text=" "),e.sendInquiry()});else{e.inquiry.text=e.inquiry.text?e.inquiry.text:"";var t=o.extractLink(e.inquiry.text),n=[],r=0;t.length?angular.forEach(t,function(a,o){i.articles.articleUrlCache(a,function(a,o){if(o.info&&o.info.thumbnail&&n.push(o.info),r+=1,r==t.length){if(n.length){var i=_.sortBy(n,function(e){return"video"!=e.type});e.inquiry.attachments.push(i[0])}"undefined"!=typeof e.inquiry.text&&""!==e.inquiry.text||(e.inquiry.text=" "),e.sendInquiry()}})}):e.sendInquiry()}}},e.evaluate_link=function(a){if(e.inquiry.share_fileupload_error=!1,e.inquiry.share_fileupload_size_error=!1,!e.inquiry.uploaded_images.length){var t=o.extractLink(a),n=[];t.length||(e.inquiry.preview_links=[]);var r=0;angular.forEach(t,function(a,o){i.articles.articleUrlCache(a,function(a,o){if(o.info&&o.info.thumbnail&&n.push(o.info),r+=1,r==t.length&&(e.inquiry.preview_links=[],n.length)){var i=_.sortBy(n,function(e){return"video"!=e.type});e.inquiry.preview_links.push(i[0]),e.$broadcast("IMAGEFILL_INIT")}})})}},e.sendInquiry=function(){var a={};a.article_id=angular.copy(e.merchant_message.article_id),a.reply_body=angular.copy(e.inquiry.text),a.attachments=e.inquiry.attachments,t.invoiceReply(a,function(t,o){if(e.inquiry_ready=!0,!t&&o.status.success){if(a.article_id!=e.merchant_message.article_id)return;var n=o.reply;if(!n)return;e.merchant_message.comments||(e.merchant_message.comments=[]);var i=_.find(e.merchant_message.comments,function(e){return e.comment_id==n.comment_id});i||(e.merchant_message.comment_count+=1,e.merchant_message.comments.unshift(n)),e.$emit("ON_NEW_COMMENT"),a={},e.inquiry.text="",e.inquiry.attachments="",e.inquiry.uploaded_images=[],e.inquiry.preview_links=[]}})},e.addInvoicePhotoUploadOptions={url:"/api/media/upload",maxFileSize:5e6,singleFileUploads:!0,maxNumberOfFiles:1,autoUpload:!0,formData:{resize:[200,400,800]},pasteZone:null,add:function(a,t){e.inquiry.share_fileupload_error=!1,e.inquiry.share_fileupload_size_error=!1,t.originalFiles[0]&&t.originalFiles[0].size&&t.originalFiles[0].size>5e6?e.inquiry.share_fileupload_size_error=!0:t.submit(),e.$apply()},start:function(e){},stop:function(e){},done:function(a,t){e.inquiry.uploaded_images[0]=o.config.cdn_url+t._response.result.fsRef,e.inquiry.upload_preview_loading=!1,e.$apply(),e.$broadcast("IMAGEFILL_INIT")},fail:function(a,t){e.inquiry.share_fileupload_error=!0,e.inquiry.upload_preview_loading=!1,e.$apply()},change:function(e,a){},progress:function(a,t){e.inquiry.upload_preview_loading=!0,e.$apply()}},e.uploadfile_invoicelink=function(){$("#invoiceaddphoto").click(),"mobile"==o.device&&r(function(){$("#invoiceaddphoto").click()},1)},e.removeInquiryUpload=function(a){e.inquiry.uploaded_images.splice(a,1),e.evaluate_link(e.inquiry.text?e.inquiry.text:""),$(".f-dropdown").removeClass("open").css("left","-99999px")},e.requeryInvoice=function(){e.isRequeryProcess||(e.isRequeryProcess=!0,t.requeryYuupay(e.per_invoice.invoice_uuid,function(a,t){t.status&&t.status.success&&(e.per_invoice=t.invoice),r(function(){e.isRequeryProcess=!1},3e4)}))}}]),app.controller("scUserInfoCtrl",["$scope","$apiService","$state","$store","$location","$popupService","$rootScope","$timeout","$http",function(e,a,t,o,n,i,r,s,c){if(console.log("scUserInfoCtrl",t.params),e.isEditMode=!1,e.isAddressEditMode=!1,e.userinfo={},e.$watch("viewed_user_profile.id",function(a){return console.log("watch viewed_user_profile",a),void 0!==a&&a?(e.userinfo=angular.copy(e.viewed_user_profile),t.params.edit&&"1"==t.params.edit&&e.currentUser&&e.currentUser.shortcut==t.params.username&&e.editProfile(),null!=e.userinfo.country&&void 0!=e.userinfo.country&&""!=e.userinfo.country||(e.userinfo.country=r.currentCountryCode),void(null!=e.userinfo.shipping_addresses.country_code&&void 0!=e.userinfo.shipping_addresses.country_code&&""!=e.userinfo.shipping_addresses.country_code||(e.userinfo.shipping_addresses.country_code=r.currentCountryCode))):!1}),e.currentUser&&e.currentUser.id){a.user.getThemes(function(a,t){!a&&t.status.success&&(e.user_themes=t.themes)}),r.config.assets.is_virtual_domain?c.get("/client/virtual/"+location.host+"/country/country-list.json").success(function(a){e.country_list=a}).error(function(a,t,o,n){e.country_list=country_list_english}):c.get("/client/country-list.json").success(function(a){console.log(a),e.country_list=a}).error(function(a,t,o,n){e.country_list=country_list_english}),(e.currentUser.display_language&&("zh-CN"==e.currentUser.display_language||"zh"==e.currentUser.display_language||"zh-TW"==e.currentUser.display_language)||!e.currentUser.display_language&&e.config&&e.config.browserDefaultLang&&("zh-CN"==e.config.browserDefaultLang||"zh"==e.config.browserDefaultLang||"zh-TW"==e.config.browserDefaultLang))&&(e.country_list=country_list_chinese);var l=new Date;e.dobYears=_.range(l.getFullYear()-80,l.getFullYear()),
e.dobDays=_.range(1,32)}e.getUserCountryObj=function(a){var t=_.find(e.country_list,function(e){return e.code==a});return t},e.editProfile=function(){console.log("editProfile"),e.reset_userinfo(),e.isEditMode=!0},e.update_userinfo=function(){if(e.currentUser.id){var t=new Date(e.userinfo.dob_year,e.userinfo.dob_month,0).getDate();if(e.userinfo.dob_day>t)return void(e.userinfo.dob_day="");if(e.shortcut_isinvalid=!1,e.userinfo.shortcut&&""!==e.userinfo.shortcut&&e.userinfo.first_name&&""!==e.userinfo.first_name&&e.userinfo.emailAddress&&""!==e.userinfo.emailAddress&&!(e.userinfo.shortcut.length<0||e.userinfo.shortcut>15)){var n=new RegExp("^[a-zA-Z0-9-_]*$");if(!n.test(e.userinfo.shortcut))return void(e.shortcut_isinvalid=!0);e.userinfo.shortcut=e.userinfo.shortcut.toLowerCase(),a.user.updateProfile(e.currentUser.shortcut,e.userinfo,function(a,t){var n="";if(!a&&t.status.success){var s=e.currentUser.display_language;if(e.userinfo=t.user,r.viewed_user_profile=t.user,o.setValue("currentUser",t.user),r.currentUser=t.user,t.user.display_language!=s)return document.cookie="display_language="+t.user.display_language+"; path=/;",void window.location.reload();e.isEditMode=!1,n=$("#info-saved-successful-message:first").text()}else a?n=$("#general-error-message:first").text():t.status.err&&(n=t.status.err);i.showAutoMessage(n)})}}},e.reset_userinfo=function(){e.userinfo={},angular.copy(e.viewed_user_profile,e.userinfo),e.error_password=!1,e.error_confirmpassword=!1,e.isEditMode=!1,e.isAddressEditMode=!1,null!=e.userinfo.country&&void 0!=e.userinfo.country&&""!=e.userinfo.country||(e.userinfo.country=r.currentCountryCode)},e.editAddress=function(){console.log("editAddress"),e.reset_userinfo(),e.isAddressEditMode=!0;var a=e.userinfo.shipping_addresses.length;a||(e.userinfo.shipping_addresses=[{country_code:r.currentCountryCode}]),angular.forEach(e.userinfo.shipping_addresses,function(a,t){e.getCountryStates(a,angular.copy(a)),e.getStateCities(a,angular.copy(a))})},e.getCountryStates=function(e,a){var t=[];t=state_list_english&&state_list_english[e.country_code]?state_list_english[e.country_code]:[],s(function(){e.country_states=t,a||(e.state_code="",e.state_cities=[],e.city_code="")},1)},e.getStateCities=function(e,a){var t=[];t=cityConfig&&cityConfig[e.country_code]&&cityConfig[e.country_code][e.state_code]?cityConfig[e.country_code][e.state_code]:[],s(function(){e.state_cities=t,a&&a.city_code||(e.city_code="",t.length&&(e.city=""))},1)},e.getCityInfo=function(e){var a=_.find(e.state_cities,function(a){return a.code==e.city_code});a&&a.name&&s(function(){e.city=a.name},1)},e.addMoreAddress=function(a){e.userinfo.shipping_addresses.length<3&&e.userinfo.shipping_addresses.push({country_code:r.currentCountryCode,country_states:a.country_states})},e.profilephoto={},e.onOpenChangeProfilePicWindow=function(){console.log("onOpenChangeProfilePicWindow"),$(".changeprofilepic-window").data("reveal-init",{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!1,close_on_esc:!1,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",bg:$(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}}),$(".changeprofilepic-window").foundation("reveal","open")},e.changepassword={},e.onOpenChangePasswordWindow=function(e){console.log("onOpenChangePasswordWindow"),$(".changepassword-window").data("reveal-init",{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!1,close_on_esc:!1,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",bg:$(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}}),$(".changepassword-window").foundation("reveal","open")},e.onCloseChangePasswordWindow=function(a){console.log("onCloseChangePasswordWindow"),e.changepassword={},$(".changepassword-window").foundation("reveal","close")},e.error_passwordstrong=!1,e.validatePasswordStrength=function(){e.error_passwordstrong=!1;var a=e.changepassword.newpassword;_.isEmpty(a)||(a<r.password_length||!r.hasUpperCase(a)||!r.hasSpecialCharacters(a))&&(e.error_passwordstrong=!0)},e.update_password=function(){if(r.currentUser.id){if(!e.changepassword.currentpassword)return void(e.error_password=!0);if(e.error_password=!1,$.isEmptyObject(e.changepassword.newpassword))return void(e.error_newpassword=!0);if(e.validatePasswordStrength(),e.error_confirmpassword=!1,e.error_passwordlength=!1,e.error_newpassword=!1,e.changepassword.newpassword!=e.changepassword.confirmpassword)return void(e.error_confirmpassword=!0);(""!==e.changepassword.newpassword&&e.changepassword.newpassword.length<r.password_length||""!==e.changepassword.confirmpassword&&e.changepassword.confirmpassword.length<r.password_length)&&(e.error_passwordlength=!0),e.error_password||e.error_confirmpassword||e.error_passwordlength||e.error_passwordstrong||(e.changepassword.shortcut=r.currentUser.shortcut,e.changepassword.id=r.currentUser.id,e.changepassword_loading=!0,a.user.updateProfilePassword(e.changepassword,function(a,t){e.changepassword_loading=!1;var o="";!a&&t.status.success?(e.changepassword={},o=$("#info-changepassword-successful-message:first").text(),i.showAutoMessage(o,2e3)):t&&t.status&&(o=t.status.err+".","CURRENT_PASSWORD_NOT_MATCH"==t.status.code&&(e.error_password=!0),i.showAutoMessage(o,2e3),s(function(){$(".changepassword-window").foundation("reveal","open")},2e3))}))}},e.removeAddress=function(a){e.userinfo.shipping_addresses.length>1&&e.userinfo.shipping_addresses.splice(a,1)},e.update_address=function(){if(r.currentUser.id){if(e.error_address=!1,!e.userinfo.shipping_addresses)return void(e.error_address=!0);angular.forEach(e.userinfo.shipping_addresses,function(a,t){if(!(a.full_name&&a.contact_number&&a.address_line_1&&a.city&&a.country_code&&(a.pincode||void 0!=r.config.feature_locks.zipcode_mandatory&&1!=r.config.feature_locks.zipcode_mandatory)))return void(e.error_address=!0);var o=_.find(e.country_list,function(e){return e.code==a.country_code});o&&o.display&&(a.country=o.display);var n=_.find(a.country_states,function(e){return e.code==a.state_code}),i=_.find(a.state_cities,function(e){return e.code==a.city_code});n&&n.name?(a.state=n.name,i&&i.name&&(a.city=i.name)):(a.state="",a.state_code="",a.city_code=""),delete a.country_states,delete a.state_cities}),e.error_address||a.user.updateProfile(e.currentUser.shortcut,e.userinfo,function(a,t){var n="";!a&&t.status.success?(e.userinfo=t.user,r.viewed_user_profile=t.user,o.setValue("currentUser",t.user),r.currentUser=t.user,e.isAddressEditMode=!1,n=$("#info-saved-successful-message:first").text()):a?n=$("#general-error-message:first").text():t.status.err&&(n=t.status.err),i.showAutoMessage(n)})}},e.resend_user_email_activation_error_err="",e.is_user_emailconfirmation_loading=!1,e.resendEmailActivationCode=function(){r.currentUser&&r.currentUser.id&&r.currentUser.emailAddress&&(e.resend_user_email_activation_error_err=!1,e.is_user_emailconfirmation_loading=!0,a.user.resendConfirmEmail(r.currentUser.emailAddress,function(a,t){!a&&t.status.success?e.resend_user_email_activation_success=!0:t.status&&t.status.err&&(e.resend_user_email_activation_error_err=t.status.err),e.is_user_emailconfirmation_loading=!1}))},e.changemobile={},e.onOpenChangeMobileWindow=function(e){console.log("onOpenChangeMobileWindow"),$(".changemobile-window").data("reveal-init",{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!1,close_on_esc:!1,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",bg:$(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}}),$(".changemobile-window").foundation("reveal","open")},e.onCloseChangeMobileWindow=function(a){console.log("onCloseChangeMobileWindow"),e.changemobile={},$(".changemobile-window").foundation("reveal","close")},e.update_mobile=function(){if(r.currentUser.id&&!e.changemobile_loading){if(e.error_mobile=!1,!r.phone_validator(e.changemobile.mobile_number))return void(e.error_mobile=!0);e.changemobile.mobile_number=e.changemobile.mobile_number.replace(/(\-|\s)+/g,""),e.changemobile.shortcut=r.currentUser.shortcut,e.changemobile.id=r.currentUser.id,e.changemobile_loading=!0,a.user.updateProfileMobile(e.changemobile,function(a,t){e.changemobile_loading=!1;var o="";!a&&t.status.success?e.changemobile.showVerification=!0:t&&t.status&&(o=t.status.err+".",i.showAutoMessage(o,2e3),s(function(){$(".changemobile-window").foundation("reveal","open")},2e3))})}},e.verifyMobile=function(){e.changemobile_loading||(e.changemobile_loading=!0,a.user.verifysms(e.changemobile.phoneverificationcode,function(a,t){e.changemobile_loading=!1;var n="";!a&&t.status.success?(e.userinfo.mobile_number=t.user.mobile_number,e.$parent.$parent.viewed_user_profile=t.user,o.setValue("currentUser",t.user),r.currentUser=t.user,e.changemobile={},n=$("#info-changemobile-successful-message:first").text(),i.showAutoMessage(n,2e3)):t&&t.status&&(n=t.status.err+".",i.showAutoMessage(n,2e3),s(function(){$(".changemobile-window").foundation("reveal","open")},2e3))}))}}]),app.controller("ctrAliPayDetail",["$scope","$location","$apiSocialCommerce","$rootScope","$timeout","$popupService","$state","$interval","$store",function(e,a,t,o,n,i,r,s,c){console.log("ctrAliPayDetail"),e.isError=!1,e.isSucess=!1,e.isPending=!1;var l;e.checkApi=function(){t.getInvoicesDetails({uuid:r.params.invoice_id},function(a,t){console.log(" ctrAliPayDetail invoice status :"+JSON.stringify(t)),"1"==t.invoice.status?(console.log(" invoice 1 :"),e.isSucess=!0,e.isPending=!1,e.invoice_details=t.invoice,null!=t.invoice.coupon&&o.$broadcast("COUPON_USED_CLEAR",{newval:t.invoice.coupon.code}),o.$broadcast("USER_ZOOCASH_UPDATE",{zoocash:t.invoice.user.zoocash}),e.addFBTrackPixel(o.config.fb_tracking_pixel.sale_confirm_id,t.invoice.totalPrice)):"2"==t.invoice.status?(console.log(" invoice 2 :"),e.isPending=!0,l=s(function(){return e.isPending?void e.checkApi():(s.cancel(l),void(l=void 0))},3e3)):(console.log(" invoice error/other :"),e.isError=!0,e.isPending=!1)})},e.checkApi()}]),app.controller("scOrderCartCtrl",["$scope","$apiSocialCommerce","$rootScope","$store","$apiService","$popupService","$timeout","$state","$location","$http",function(e,a,t,o,n,i,r,s,c,l){console.log("scOrderCartCtrl"),e.waitOnFirstLoad=!0;var d=o.getValue("currentUser"),u=d;if(u&&u.id||(u=o.getValue("tempUser")),e.coupon_data={code:""},e.isInvalidCode=!1,e.clickedPaymentOption="",e.applied_coupon_code="",e.zoocashData={},e.isInvalidMemo={},e.charity={},e.hasSelectedCharity=!1,e.current_state=s.current.name,e.inVoice={},"sc_bank-transfer_done"==e.current_state){var m={uuid:s.params.uuid};a.getInvoicesDetails(m,function(a,t){!a&&t.status.success&&(e.inVoice=t.invoice)})}e.$on("totalPrices",function(a,t){e.cartdata.finalTotalPrice=t.totalPrice,e.cartdata.localized.final_price=t.localized_final_price});var p=function(){e.charity.loading=!0,a.charity.getCharitiesByUser({},function(t,o){e.charity.list=_.map(o,function(e){return e.expanded=!1,e}),e.charity.loading=!1;var n=a.charity.getPreferredCharity();n?(e.charity.selectedCharity=_.find(o,function(e){return e.id===n}),e.charity.selectedCharity&&(e.charity.selectedIndex=o.indexOf(e.charity.selectedCharity),e.hasSelectedCharity=!0)):(e.charity.selectedIndex=-1,e.hasSelectedCharity=!1)})};e.removeExistingCharity=function(){e.charity.selectedIndex=void 0,e.hasSelectedCharity=!1,a.charity.setPreferredCharity(void 0)},e.setSelectedCharity=function(t){return t===e.charity.selectedIndex?(e.charity.selectedIndex=void 0,e.charity.selectedCharity=void 0,e.hasSelectedCharity=!1,void a.charity.setPreferredCharity(void 0)):(e.charity.selectedIndex=t,e.charity.selectedCharity=e.charity.list[t],e.currentUser.charity_id=e.charity.list[t].id,void a.charity.setPreferredCharity(e.charity.selectedCharity.id))},e.charityReadMore=function(e,a){e.preventDefault(),e.stopPropagation(),a.expanded=!0},t.config&&t.config.feature_locks.enable_charity&&p(),e.callCheckOut=function(n){if(n&&(e.clickedPaymentOption=n),!e.cartdata.price_loading&&!e.cartdata.payment_processing){var l={};if(l=e.currentUser&&e.currentUser.id?angular.copy(e.currentUser):angular.copy(e.tempUser),!l||!l.shipping_addresses.length||!e.emailValidator(l.emailAddress)||e.selected_address.index<0&&e.selected_address.index>3)return e.selected_address.address_item=e.selected_address.current_address,e.selected_address.index="new",void e.openChangeAddressWindow();"undefined"==typeof l.shipping_addresses[e.selected_address.index]&&(e.selected_address.index=l.shipping_addresses.length-1,e.selected_address.current_address=angular.copy(l.shipping_addresses[e.selected_address.index]));var d={};angular.forEach(t.listShoppingCartItems,function(e,a){d[e.shopping_cart_item_id]=e.shippoProviderDetails}),"new"==e.selected_address.index&&(e.selected_address.index=l.shipping_addresses.length-1);var u={};u.shipping_data={},u.shipping_data.selected_address_index=e.selected_address.index,l.isTemporaryUser&&delete u.shipping_data.selected_address_index,u.shipping_data.email_address=l.emailAddress,u.itemShippings=d,e.cartdata.shoppingCartMetadata&&e.cartdata.shoppingCartMetadata.coupon&&(u.coupon||(u.coupon={}),u.coupon=e.cartdata.shoppingCartMetadata.coupon,e.applied_coupon_code=e.cartdata.shoppingCartMetadata.coupon.code),e.applied_coupon_code&&(u.coupon||(u.coupon={}),u.coupon.code=e.applied_coupon_code),e.cartdata.shoppingCartMetadata&&e.cartdata.shoppingCartMetadata.promoDet&&(u.promoDet=e.cartdata.shoppingCartMetadata.promoDet),$("#chekoutmodal").foundation("reveal","close");var m={};m={shipping_address:JSON.stringify(l.shipping_addresses[e.selected_address.index]),email_address:l.emailAddress,selectedShippoOptions:d,shoppingCartMetadata:JSON.stringify(u),charityId:a.charity.getPreferredCharity()},e.applied_coupon_code&&(8==e.applied_coupon_code.length?m.couponCode=e.applied_coupon_code:e.applied_coupon_code.length<=5&&(m.promoCode=e.applied_coupon_code));var p=[];console.log("recomputeForCheckOut  ...4"),angular.forEach(e.zoocashData,function(e,a){e.enable&&p.push(e.item_id)}),console.log("recomputeForCheckOut  ...zoocashcontent ",p),p.length>0&&(m.shoppingCartZoocashRedeemProducts=JSON.stringify(p)),e.cartdata.payment_processing=!0,console.log(e.selected_address.index+" checkoutParams : "+JSON.stringify(m)),a.checkout(m,function(n,l){var d="";if(!n&&l.status.success){angular.extend(t.listShoppingCartItems,l.invoice.items),e.cartdata=l.invoice,e.cartdata.finalTotalPrice=l.invoice.total_amount,e.cartdata.localized=l.localized,e.cartdata.totalZoocash=l.totalZoocash,e.cartdata.shoppingCartMetadata||(e.cartdata.shoppingCartMetadata={}),l.promoDet?e.cartdata.shoppingCartMetadata.promoDet=l.promoDet:delete e.cartdata.shoppingCartMetadata.promoDet;var u=angular.copy(e.clickedPaymentOption);e.clickedPaymentOption="";var m=l.invoice.invoice_uuid;if("free"==u)console.log("FREE ::  invoice status : "+l.invoice.status),c.path("/shopping/payments/success/"+m);else if("cashondelivery"==u)console.log("cash on delivery ::  invoice status : "+l.invoice.status),a.makeCashOnDelivery(m,function(a,t){!a&&t.status.success?(e.listShoppingCartWidget(),c.path("/shopping/payments/success/"+m)):(a?d=$("#general-error-message:first").text():paypal_data.status.err&&(d=t.status.err),i.showAutoMessage(d))});else if("paypal"==u){var p=o.getToken(),g=0;e.currentUser&&e.currentUser.id||(p=o.getTempToken(),g=1);var f={redirect_url:t.config.assets.base_url+t.config.payment_settings.paypal.redirect_url+m,cancel_url:t.config.assets.base_url+t.config.payment_settings.paypal.cancel_url+m+"?authtoken="+p};a.makePaypalPayment(m,f,function(a,t){r(function(){e.cartdata.payment_processing=!1},5e3),!a&&t.status.success?window.location.href=t.paypal.redirect_url:(a?d=$("#general-error-message:first").text():t.status.err&&(d=t.status.err),i.showAutoMessage(d))})}else if("yuupay"==u)a.makeYuupayPayment(m,function(a,n){if(r(function(){e.cartdata.payment_processing=!1},5e3),!a&&n.status.success){var s=o.getToken(),c=0;e.currentUser&&e.currentUser.id||(s=o.getTempToken(),c=1),window.location.href=(1==t.config.assets.enabled_ssl&&""!=t.config.assets.base_url?"https:"+t.config.assets.base_url:"/")+"shopping/yuupay-payments/"+n.token.token+"/"+n.token.invoice.invoice_uuid+(1==t.config.assets.enabled_ssl&&""!=t.config.assets.base_url?"?t="+s+"&temp="+c:"")}else a?d=$("#general-error-message:first").text():n.status.err&&(d=n.status.err),i.showAutoMessage(d)});else if("yuuwallet"==u)a.makeYuuwalletPayment(m,function(a,t){if(r(function(){e.cartdata.payment_processing=!1},5e3),!a&&t.status.success){var n=o.getToken(),s=0;e.currentUser&&e.currentUser.id||(n=o.getTempToken(),s=1),window.location.href=t.token.redirectUrl}else a?d=$("#general-error-message:first").text():t.status.err&&(d=t.status.err),i.showAutoMessage(d)});else if("yuupay_nibss"==u){var p=o.getToken(),g=0;e.currentUser&&e.currentUser.id||(p=o.getTempToken(),g=1),e.cartdata.payment_processing=!1,window.location.href=(1==t.config.assets.enabled_ssl&&""!=t.config.assets.base_url?"https:"+t.config.assets.base_url:"/")+"shopping/yuupay-payments-2/"+m+(1==t.config.assets.enabled_ssl&&""!=t.config.assets.base_url?"?t="+p+"&temp="+g:"")}else if("yuupay_nibss_centralpay"==u)e.cartdata.payment_processing=!0,t.$broadcast("callmakeCentralPayPayment",l.invoice);else if("yuupay_nibss_mandatepay"==u){var p=o.getToken(),g=0;e.currentUser&&e.currentUser.id||(p=o.getTempToken(),g=1),e.cartdata.payment_processing=!1,window.location.href=(1==t.config.assets.enabled_ssl&&""!=t.config.assets.base_url?"https:"+t.config.assets.base_url:"/")+"shopping/nibss-mandate-payments/"+m+(1==t.config.assets.enabled_ssl&&""!=t.config.assets.base_url?"?t="+p+"&temp="+g:"")}else if("alipay"==u){var h={redirect_url:t.config.assets.base_url+"shopping/payments"+t.config.payment_settings.alipay.redirect_url,notify_url:t.config.assets.base_url+t.config.payment_settings.alipay.notify_url,error_notify_url:t.config.assets.base_url+t.config.payment_settings.alipay.error_notify_url};a.makeAliPayPayment(m,h,function(a,t){r(function(){e.cartdata.payment_processing=!1},5e3),!a&&t.status.success?$("#alipaycontainer").html(t.response.htmlForm):(a?d=$("#general-error-message:first").text():t.status.err&&(d=t.status.err),i.showAutoMessage(d))})}else if("netplus"==u)e.cartdata.payment_processing=!0,t.$broadcast("callmakeNetplusPayment",{data:l.invoice});else if("ccavenue"===u){var _=t.config.payment_settings.ccavenue;if(!_)return d=$("#general-error-message:first").text(),void i.showAutoMessage(d);if(-1===_.supported_currencies.indexOf(t.config.currency.code))return d=$("#general-error-message:first").text(),void i.showAutoMessage(d);e.cartdata.payment_processing=!0;var v=l.invoice,h={request:{redirect_url:c.protocol()+"://"+c.host()+"/"+_.redirect_url+v.invoice_uuid,cancel_url:c.protocol()+"://"+c.host()+"/"+_.redirect_url+v.invoice_uuid,order_id:v.invoice_id,currency:t.config.currency.code,amount:v.total_amount}};a.makeCCAvenuePayment(m,h,function(a,t){if(r(function(){e.cartdata.payment_processing=!1},5e3),a)d=$("#general-error-message:first").text(),i.showAutoMessage(d);else{var o=t.cc_avenue,n=o.query_string.split("&").map(function(e){var a=e.split("=");return{property:a[0],value:a[1]}}),s=$('<form action="'+o.post_url+'" method="POST" style="display:none">');angular.forEach(n,function(e){s.append($('<input name="'+e.property+'" value="'+e.value+'">'))}),s.appendTo(document.body),s.submit()}})}else"bank_transfer"==u&&a.makeBankTransfer(m,function(a,o){!a&&o.status.success&&(t.listShoppingCartItems=0,e.listShoppingCartWidget(),s.go("sc_bank-transfer_done",{uuid:m}))})}else e.cartdata.payment_processing=!1,n?d=$("#general-error-message:first").text():l.status.err&&(d=l.status.err),e.listShoppingCartWidget(),i.showAutoMessage(d)})}},e.selectAdvancedShippo=function(a,o){console.log(" selectAdvancedShippo ",a,o),_.find(t.listShoppingCartItems,function(t){var n=!1;return t.shopping_cart_item_id==a&&(_.find(t.shippingTemplateOptions,function(a){var n=!1;return a.courier.code==o&&(t.selectedShippingTemplateDetails=a,console.log("itemlist.selectedShippingTemplateDetails: ",t.selectedShippingTemplateDetails),n=!0,e.recomputeForCheckOut()),n}),n=!0),n})},e.selectShippo=function(a,o){console.log(" selectShippo ",a,o),_.find(t.listShoppingCartItems,function(t){var n=!1;return t.shopping_cart_item_id==a&&(_.find(t.shippoProviderList,function(a){var n=!1;return a.provider==o&&(t.shippingCost=a.amount_local,t.shippoProvider=a.provider,t.shippoProviderDetails=a,n=!0,e.recomputeForCheckOut()),n}),n=!0),n})},e.openItemMemo=function(e){_.find(t.listShoppingCartItems,function(a){return a.shopping_cart_item_id==e?(a.metadata||(a.metadata={memo:""}),a.temp_memo=angular.copy(a.metadata.memo),a.isOpenMemo=!0,!0):!1})},e.additional_shipping_openItemMemo=function(e,a){_.find(t.merchant_item_details,function(t){e==t.merchant_id&&_.find(t.items,function(e){return e.shopping_cart_item_id==a?(e.metadata||(e.metadata={memo:""}),e.temp_memo=angular.copy(e.metadata.memo),e.isOpenMemo=!0,!0):!1})})},e.updateItemMemo=function(o,n,i){return console.log(" addItemMemo ",o,n),e.cartdata.price_loading||"add"==i&&$.isEmptyObject(n)?void(e.isInvalidMemo[o]=!0):(e.cartdata.price_loading=!0,e.isInvalidMemo[o]=!1,void a.updateShoppingCartItemMetadata({item_id:o,memo:n},function(a,i){!a&&i.status.success&&(_.find(t.listShoppingCartItems,function(e){return e.metadata||(e.metadata={memo:""}),e.shopping_cart_item_id==o?(e.metadata.memo=n,!0):!1}),e.closeMemo(o)),e.cartdata.price_loading=!1}))},e.additional_shipping_updateItemMemo=function(o,n,i,r){return e.cartdata.price_loading||"add"==r&&$.isEmptyObject(i)?void(e.isInvalidMemo[n]=!0):(e.cartdata.price_loading=!0,e.isInvalidMemo[n]=!1,void a.updateShoppingCartItemMetadata({item_id:n,memo:i},function(a,r){!a&&r.status.success&&_.find(t.merchant_item_details,function(a){o==a.merchant_id&&(_.find(a.items,function(e){return e.metadata||(e.metadata={memo:""}),e.shopping_cart_item_id==n?(e.metadata.memo=i,!0):!1}),e.additional_shipping_closeMemo(o,n))}),e.cartdata.price_loading=!1}))},e.removeItemMemo=function(a){e.updateItemMemo(a,"","remove")},e.additional_shipping_removeItemMemo=function(a,t){e.additional_shipping_updateItemMemo(a,t,"","remove")},e.closeMemo=function(a){_.find(t.listShoppingCartItems,function(t){return t.shopping_cart_item_id==a?(t.metadata||(t.metadata={memo:""}),e.isInvalidMemo[a]=!1,t.temp_memo=t.metadata.memo,t.isOpenMemo=!1,!0):!1})},e.additional_shipping_closeMemo=function(a,o){_.find(t.merchant_item_details,function(t){a==t.merchant_id&&_.find(t.items,function(a){return a.shopping_cart_item_id==o?(a.metadata||(a.metadata={memo:""}),e.isInvalidMemo[o]=!1,a.temp_memo=a.metadata.memo,a.isOpenMemo=!1,!0):!1})})},e.applyCouponCode=function(){console.log(" coupon_data.code ",e.coupon_data.code),8==e.coupon_data.code.length?(e.isInvalidCode=!1,e.applied_coupon_code=angular.copy(e.coupon_data.code),e.recomputeForCheckOut()):e.isInvalidCode=!0},e.removeCouponCode=function(){e.applied_coupon_code="",e.coupon_data.code="",e.isInvalidCode=!1,e.cartdata.shoppingCartMetadata.coupon&&delete e.cartdata.shoppingCartMetadata.coupon,e.cartdata.shoppingCartMetadata.promoDet&&delete e.cartdata.shoppingCartMetadata.promoDet,e.recomputeForCheckOut()},e.applyZoocash=function(a,t){e.zoocashData[t].enable=a,e.recomputeForCheckOut()},e.recomputeForCheckOut=function(){console.log("recomputeForCheckOut  $scope.appliedCoupon "+e.applied_coupon_code+"--- "+(e.cartdata.price_loading||e.cartdata.payment_processing)),console.log("recomputeForCheckOut  : $scope.zoocashData :: ",e.zoocashData),console.log("recomputeForCheckOut  ...1");var o={};if(o=e.currentUser&&e.currentUser.id?angular.copy(e.currentUser):angular.copy(e.tempUser),!o||!o.shipping_addresses.length||!e.emailValidator(o.emailAddress)||e.selected_address.index<0&&e.selected_address.index>3)return e.selected_address.address_item=e.selected_address.current_address,e.selected_address.index="new",void Pace.once("done",function(){e.openChangeAddressWindow()});console.log("recomputeForCheckOut  ...2"),"undefined"==typeof o.shipping_addresses[e.selected_address.index]&&(e.selected_address.index=o.shipping_addresses.length-1,e.selected_address.current_address=angular.copy(o.shipping_addresses[e.selected_address.index]));var n={};angular.forEach(t.listShoppingCartItems,function(e,a){n[e.shopping_cart_item_id]=e.shippoProviderDetails});var r={};angular.forEach(t.listShoppingCartItems,function(e,a){e.selectedShippingTemplateDetails&&(r[e.shopping_cart_item_id]=e.selectedShippingTemplateDetails.shipping_template_option_id)});var s={};s.shipping_data={},s.shipping_data.selected_address_index=e.selected_address.index,o.isTemporaryUser&&delete s.shipping_data.selected_address_index,s.shipping_data.email_address=o.emailAddress,s.itemShippings=n,e.cartdata.shoppingCartMetadata&&e.cartdata.shoppingCartMetadata.coupon&&(s.coupon||(s.coupon={}),s.coupon=e.cartdata.shoppingCartMetadata.coupon,e.applied_coupon_code=e.cartdata.shoppingCartMetadata.coupon.code),e.applied_coupon_code&&(s.coupon||(s.coupon={}),s.coupon.code=e.applied_coupon_code),e.cartdata.shoppingCartMetadata&&e.cartdata.shoppingCartMetadata.promoDet&&(s.promoDet=e.cartdata.shoppingCartMetadata.promoDet),console.log("recomputeForCheckOut  ...3");var c={};c={shipping_address:JSON.stringify(o.shipping_addresses[e.selected_address.index]),email_address:o.emailAddress,selectedShippoOptions:n,courierChange:1,selectedShippingTemplateOptions:r,shoppingCartMetadata:JSON.stringify(s),charityId:a.charity.getPreferredCharity()},e.applied_coupon_code&&(8==e.applied_coupon_code.length?(console.log("$scope.applied_coupon_code.length ",e.applied_coupon_code.length),c.couponCode=e.applied_coupon_code):e.applied_coupon_code.length<=5&&(console.log("$scope.applied_coupon_code.length ",e.applied_coupon_code.length),c.promoCode=e.applied_coupon_code));var l=[];console.log("recomputeForCheckOut  ...4"),angular.forEach(e.zoocashData,function(e,a){e.enable&&l.push(e.item_id)}),console.log("recomputeForCheckOut  ...zoocashcontent ",l),l.length>0&&(c.shoppingCartZoocashRedeemProducts=JSON.stringify(l)),console.log("recomputeForCheckOut2"),e.cartdata.payment_processing=!0,console.log(e.selected_address.index+" checkoutParams : "+JSON.stringify(c)),a.checkout(c,function(o,n){e.waitOnFirstLoad=!1;var r=angular.copy(e.coupon_data.code);if(e.coupon_data.code="",e.checkout_data=n,t.merchant_item_details=n.merchant_item_details,console.log("recomputed data: + address "),e.merchant_item_toal_price=function(e){var a=0;return angular.forEach(t.merchant_item_details,function(t,o){t.merchant_id==e&&angular.forEach(t.items,function(e,t){a+=null!=e.localized?Number(e.localized.final_price):e.final_price})}),Number(a)},e.merchant_item_currency=function(){var a="";return a=null!=e.checkout_data.localized?e.checkout_data.localized.rate.currency_symbol:t.config.currency.sign},e.merchant_item_shipping_cost=function(e){var a=0;return angular.forEach(t.merchant_item_details,function(t,o){t.merchant_id==e&&(angular.forEach(t.items,function(e,t){a+=null!=e.localized?Number(e.localized.shipping_cost):e.shippingCost}),a+=null!=t.localized?Number(t.localized.threshold_cost):t.threshold_cost)}),a},e.toggle_merchant=function(e){$("#merchant_"+e).toggle(),$("#custom_merchant_"+e).toggle()},e.cartdata.payment_processing=!1,!o&&n.status.success)angular.forEach(t.listShoppingCartItems,function(e,a){var t=e.shippoProviderList;_.find(n.items,function(a){return a.shopping_cart_item_id==e.shopping_cart_item_id?(a.shippoProviderList=t,a.selectedShippingTemplateOption&&a.selectedShippingTemplateOption.courier&&(a.selected_shipping_template_code=a.selectedShippingTemplateOption.courier.code,e.selectedShippingTemplateOption=a.selectedShippingTemplateOption),!0):!1})}),e.cartdata.hasProductNotAvailable=!1,angular.forEach(n.items,function(a,t){"shipping_option_not_available"!=a.errorCode&&"product_not_available"!=a.errorCode||(e.cartdata.hasProductNotAvailable=!0)}),angular.extend(t.listShoppingCartItems,n.items),e.cartdata=_.extend(e.cartdata,n),e.cartdata.finalTotalPrice=n.totalPrice,e.cartdata.localized=n.localized,e.cartdata.totalZoocash=n.totalZoocash,console.log("recomputed data.invoice.coupon_code:  "+n.coupon_code),n.coupon&&n.coupon.code||n.promoDet||(e.applied_coupon_code=""),e.cartdata.shoppingCartMetadata=s,n.promoDet?e.cartdata.shoppingCartMetadata.promoDet=n.promoDet:delete e.cartdata.shoppingCartMetadata.promoDet;else{if(o)response_message=$("#general-error-message:first").text();else if(n.status.err&&(e.appliedCoupon=!1,e.applyingCoupon=!1,console.log("recomputeForCheckOut err code:  "+n.status.code+e.appliedCoupon+","+e.applyingCoupon),r&&(e.applied_coupon_code="",delete c.couponCode,delete c.promoCode,delete e.cartdata.shoppingCartMetadata.promoDet,a.updateShoppingCartMetadata(c,function(e,a){console.log("coupon error")})),response_message=n.status.err,"COUPON_NOT_MATCH_MIN_PURCHASE_AMOUNT"==n.status.code&&n.couponMinPurchaseAmount)){var l=t.i18n["socialcommerce.coupon.minpurchase_amount_before"]||"Minimum cart value should be",d=t.i18n["socialcommerce.coupon.minpurchase_amount_after"]||"for the applied coupon";response_message=l+" "+t.config.currency.sign+n.couponMinPurchaseAmount+" "+d}i.showAutoMessage(response_message)}})},e.$watch("cartdata.grossTotalPrice",function(a,o){if(console.log("watch cartdata.grossTotalPrice",a,o,e.cartdata),t.listShoppingCartItems&&t.listShoppingCartItems.length){var n={};if(n=e.currentUser&&e.currentUser.id?angular.copy(e.currentUser):angular.copy(e.tempUser),console.log(" $scope.cartdata.shoppingCartMetadata",e.cartdata.shoppingCartMetadata),e.cartdata.shoppingCartMetadata&&e.cartdata.shoppingCartMetadata.shipping_data&&e.cartdata.shoppingCartMetadata.shipping_data.selected_address_index>=0&&(console.log(" $scope.cartdata.shoppingCartMetadata2",e.cartdata.shoppingCartMetadata),e.selected_address.index=e.cartdata.shoppingCartMetadata.shipping_data.selected_address_index,e.selected_address.current_address=angular.copy(n.shipping_addresses[e.selected_address.index])),e.cartdata.shoppingCartMetadata&&e.cartdata.shoppingCartMetadata.shipping_data&&e.cartdata.shoppingCartMetadata.shipping_data.email_address&&(e.selected_address.emailAddress=e.cartdata.shoppingCartMetadata.shipping_data.email_address),e.cartdata.shoppingCartMetadata&&e.cartdata.shoppingCartMetadata.coupon&&e.cartdata.shoppingCartMetadata.coupon.code&&(e.applied_coupon_code=e.cartdata.shoppingCartMetadata.coupon.code),console.log(" $scope.cartdata.hasProductNotAvailable",e.cartdata.hasProductNotAvailable),!t.config.feature_locks.enable_additional_shipping&&e.cartdata.hasProductNotAvailable)return;e.recomputeForCheckOut()}t.listShoppingCartItems.length||t.config.feature_locks.enable_additional_shipping&&(t.merchant_item_details=[])}),t.config&&t.config.assets.is_virtual_domain?l.get("/client/virtual/"+location.host+"/country/country-list.json").success(function(a){e.country_list=a}).error(function(a,t,o,n){e.country_list=country_list_english}):l.get("/client/country-list.json").success(function(a){e.country_list=a}).error(function(a,t,o,n){e.country_list=country_list_english}),(!e.currentUser||!e.currentUser.display_language||"zh-CN"!=e.currentUser.display_language&&"zh"!=e.currentUser.display_language&&"zh-TW"!=e.currentUser.display_language)&&(e.currentUser&&e.currentUser.display_language||!e.config||!e.config.browserDefaultLang||"zh-CN"!=e.config.browserDefaultLang&&"zh"!=e.config.browserDefaultLang&&"zh-TW"!=e.config.browserDefaultLang)||(e.country_list=country_list_chinese),e.selected_address={},e.selected_address.address_item={country_code:t.currentCountryCode},e.selected_address.current_address={},e.selected_address.index="new",d&&d.shipping_addresses&&d.shipping_addresses.length?(e.selected_address.index=d.shipping_addresses.length-1,
e.selected_address.current_address=angular.copy(d.shipping_addresses[e.selected_address.index]),e.selected_address.emailAddress=angular.copy(d.emailAddress)):d&&d.id||!u||!u.id||(e.selected_address.index=u.shipping_addresses.length-1,e.selected_address.current_address=angular.copy(u.shipping_addresses[e.selected_address.index]),u.emailAddress&&(e.selected_address.emailAddress=angular.copy(u.emailAddress))),console.log(" $scope.selected_address, ",e.selected_address),e.country_states=[],e.$watch("selected_address.address_item.country_code",function(a,t){"undefined"==typeof e.selected_address.current_address&&e.currentUser&&(e.selected_address.current_address=angular.copy(e.currentUser.shipping_addresses[e.currentUser.shipping_addresses.length-1])),t&&(e.selected_address.address_item.state_code=""),e.selected_address.current_address&&e.selected_address.current_address.country_code==a&&(e.selected_address.address_item.state_code=e.selected_address.current_address.state_code),state_list_english&&state_list_english[a]?e.country_states=state_list_english[a]:e.country_states=[]}),e.state_cities=[],e.$watch("selected_address.address_item.state_code",function(a,t){cityConfig&&e.selected_address.address_item&&cityConfig[e.selected_address.address_item.country_code]&&cityConfig[e.selected_address.address_item.country_code][a]?e.state_cities=cityConfig[e.selected_address.address_item.country_code][a]:e.state_cities=[];var o=_.find(e.state_cities,function(e){return e.code==a});console.log("city_obj",o),o&&o.name||(t&&(e.selected_address.address_item.city_code=""),e.state_cities.length&&(e.selected_address.address_item.city=""))}),e.selected_address.current_address&&e.selected_address.current_address.full_name||(e.selected_address.index="new"),e.listShoppingCartWidget(),console.log(e.selected_address.index+" userinfo.shipping_addresses : "+JSON.stringify(e.selected_address)),e.openPaymentSummary=function(){e.recomputeForCheckOut(),$("#chekoutmodal").foundation("reveal","open")},e.openChangeAddressWindow=function(a){console.log("openChangeAddressWindow",a),e.selected_address.new_index=angular.copy(e.selected_address.index),a&&(e.clickedPaymentOption="",e.currentUser&&e.currentUser.id||(e.selected_address.emailAddress=angular.copy(e.tempUser.emailAddress),console.log("$scope.selected_address.current_address ",e.selected_address.current_address),e.selected_address.address_item=angular.copy(e.selected_address.current_address),e.selected_address.new_index="new",console.log("$scope.selected_address.address_item ",e.selected_address.address_item))),console.log("address_item",angular.copy(e.selected_address.address_item)),e.currentUser&&e.currentUser.id&&(e.selected_address.emailAddress=angular.copy(e.currentUser.emailAddress)),console.log("onOpenChangeAddressWindow"),$(".changeaddress-window").data("reveal-init",{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!1,close_on_esc:!1,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",bg:$(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}}),r(function(){$(".changeaddress-window").foundation("reveal","open")})},e.closeChangeAddressWindow=function(){e.error_address=!1,console.log("oncloseChangeAddressWindow"),$(".changeaddress-window").foundation("reveal","close"),$(".reveal-modal-bg").hide()},e.selectItem=function(a){console.log("selectItem : "+a),e.selected_address.new_index=a,e.changeAddress()},e.checkInvalidFields=function(a){return a&&a.full_name&&a.contact_number&&a.address_line_1&&(a.city||a.city_code||1!=t.config.merchant_city_code)&&(a.pincode||void 0!=t.config.feature_locks.zipcode_mandatory&&1!=t.config.feature_locks.zipcode_mandatory)&&a.country_code?!1:(e.error_address=!0,!0)},u.shipping_addresses&&u.shipping_addresses.length&&!e.checkInvalidFields(e.selected_address.current_address)?e.waitOnFirstLoad=!1:e.openChangeAddressWindow(),e.changeAddress=function(){e.error_address=!1;var a={};if(a=e.currentUser&&e.currentUser.id?angular.copy(e.currentUser):angular.copy(e.tempUser),!e.emailValidator(e.selected_address.emailAddress))return void(e.error_address=!0);if(console.log(e.selected_address.index+"=="+e.selected_address.new_index),"new"!=e.selected_address.new_index)e.selected_address.index=angular.copy(e.selected_address.new_index),e.selected_address.current_address=angular.copy(e.currentUser.shipping_addresses[e.selected_address.index]),e.recomputeForCheckOut(),e.closeChangeAddressWindow();else{if(console.log("$scope.selected_address.address_item",e.selected_address.address_item),e.checkInvalidFields(e.selected_address.address_item))return;var r=_.find(e.country_list,function(a){return a.code==e.selected_address.address_item.country_code});r&&r.display&&(e.selected_address.address_item.country=r.display);var s=_.find(e.country_states,function(a){return a.code==e.selected_address.address_item.state_code}),c=_.find(e.state_cities,function(a){return a.code==e.selected_address.address_item.city_code});if(s&&s.name?(e.selected_address.address_item.state=s.name,c&&c.name&&(e.selected_address.address_item.city=c.name)):(e.selected_address.address_item.state="",e.selected_address.address_item.state_code="",e.selected_address.address_item.city_code=""),e.error_address)return;a.shipping_addresses?a.shipping_addresses.length>2&&a.shipping_addresses.shift():a.shipping_addresses=[{}],a.shipping_addresses.push(e.selected_address.address_item),a.isTemporaryUser&&(a.shipping_addresses=[],a.shipping_addresses.push(e.selected_address.address_item)),e.currentUser&&e.currentUser.id||delete a.emailAddress,n.user.updateProfile(a.shortcut,a,function(a,n){var r="";e.waitOnFirstLoad=!1,!a&&n.status.success?(e.emailValidator(e.selected_address.emailAddress)&&n.user.emailAddress!=e.selected_address.emailAddress&&(n.user.emailAddress=angular.copy(e.selected_address.emailAddress)),e.currentUser&&e.currentUser.id?(e.userinfo=n.user,t.viewed_user_profile=n.user,o.setValue("currentUser",n.user),t.currentUser=n.user):(o.setValue("tempUser",n.user),e.tempUser=n.user),e.selected_address.index=n.user.shipping_addresses.length-1,console.log(JSON.stringify(n.user.shipping_addresses[e.selected_address.index])),e.selected_address.current_address=n.user.shipping_addresses[e.selected_address.index],console.log(JSON.stringify(e.selected_address.current_address)),e.selected_address.address_item={},e.closeChangeAddressWindow(),e.clickedPaymentOption?e.callCheckOut():(e.listShoppingCartWidget(),e.recomputeForCheckOut())):(a?r=$("#general-error-message:first").text():n.status.err&&(r=n.status.err),i.showAutoMessage(r))})}}}]),app.controller("scMerchantProductListCtrl",["$scope","$state","$apiSocialCommerce","$timeout","$location","$rootScope","$window","$scService",function(e,a,t,o,n,i,r,s){e.view_page_name="merchant_product_list",e.params={},e.mySwiper={},e.displaySlideNum=10,e.initialized=!1,e.pageLoading=!1,e.location="",e.params.count=20,e.params.page=1,e.isMerchantProductList=!0,e.productswiper={swiper:{}},i.currentPageParams.page&&(e.params.page=i.currentPageParams.page),i.currentPageParams.count&&(e.params.count=i.currentPageParams.count),i.currentPageParams.sort&&(e.params.sort=i.currentPageParams.sort),e.currentpage=e.params.page;var c=(e.merchantTitle,e.merchantId);e.ready=!1,e.getStateName=function(e,a){return s.getStateName(e,a)},e.getMerchantCountry=function(e){return s.getCountryName(e)},e.getMerchantProductList=function(){t.getMerchantListProducts(c,e.params,function(a,t){e.initialized=!0,e.animate=!1,t.status&&t.status.success&&(e.productList=t.products,e.totalProducts=t.totalProducts,e.merchant=t.merchant,e.relMerchants=t.relMerchants,e.merchant.totalProducts=t.totalProducts,e.pagecount=e.params.count,e.params.page>t.totalProducts/e.params.count&&(e.currentpage=Math.ceil(t.totalProducts/e.params.count)+1),e.location=e.merchant.addressObj.address_line_1+", "+e.merchant.addressObj.city+", "+e.getCountryName(e.merchant.country)+" "+e.merchant.addressObj.pincode,console.log("location:=> ",e.location),i.$broadcast("PRODUCTLIST_LOADED"),e.ready=!0)})},e.selected_price="",e.selected_country="",e.selected_state="",e.country_list=country_list_english,(!e.currentUser||!e.currentUser.display_language||"zh-CN"!=e.currentUser.display_language&&"zh"!=e.currentUser.display_language&&"zh-TW"!=e.currentUser.display_language)&&(e.currentUser&&e.currentUser.display_language||!e.config||!e.config.browserDefaultLang||"zh-CN"!=e.config.browserDefaultLang&&"zh"!=e.config.browserDefaultLang&&"zh-TW"!=e.config.browserDefaultLang)||(e.country_list=country_list_chinese),e.selected_country_states=[],e.$watch("selected_country",function(a){e.filter_enable&&e.get_product_filter(),e.selected_state="",state_list_english&&state_list_english[a]?e.selected_country_states=state_list_english[a]:e.selected_country_states=[]}),e.$watch("selected_price",function(a){e.filter_enable&&e.get_product_filter()}),e.$watch("selected_state",function(a){e.get_product_filter()}),e.selectFilter=function(){e.filter_enable=!e.filter_enable,e.filter_enable||(e.selected_price="",e.selected_country="",e.selected_state="",e.get_product_filter())},e.get_product_filter=function(){e.params.priceRange=angular.copy(e.selected_price),e.params.country=angular.copy(e.selected_country),e.params.state=angular.copy(e.selected_state),e.params.page=1,e.getMerchantProductList()},e.jumpList=function(a){e.params.page=a,e.currentpage=a,e.ready=!1,e.animate=!1,console.log("page getMerchantProductList new",a,e.totalProducts,e.pagecount),t.getMerchantListProducts(c,e.params,function(t,o){e.ready=!0,e.initialized=!0,e.pageLoading=!1,o.status&&o.status.success&&(i.$broadcast("PRODUCTLIST_LOADED"),e.productList=o.products,i.currentPageParams=e.params,i.currentPageParams.page=a,e.productswiper.swiper.slideTo(a-1,500))})},e.sortBy=function(a){console.log("sortname_order",a),e.currentpage=1,e.params.page=1,e.ready=!1,e.animate=!1,e.params.sort=a,t.getMerchantListProducts(c,e.params,function(t,o){if(e.ready=!0,e.initialized=!0,o.status&&o.status.success){i.$broadcast("PRODUCTLIST_LOADED"),e.productList=o.products;var r=o.merchant.slug_2||o.merchant.slug_1;n.path("/merchant/"+r),i.currentPageParams.page=e.params.page,i.currentPageParams.count=e.params.count,i.currentPageParams.sort=a,i.currentPageParams.noload=1}})},e.imgResize=function(e,a){var t=$("img.product").eq(e),o=new Image;o.src=t.attr("src");var n=o.naturalHeight-o.naturalWidth;return 50>n?$("img.product").eq(e).css({width:"100%",margin:"auto 0"}):$("img.product").eq(e).css({width:"auto",height:"100%",margin:"0 auto"}),!0}}]),app.controller("scMerchantListCtrl",["$scope","$state","$apiSocialCommerce","$timeout","$location","$rootScope","$anchorScroll","$interval","$scService",function(e,a,t,o,n,r,s,c,l){console.log("scMerchantListCtrl params:",a.params),e.category_clicked="",e.current_category={},e.selected_country=r.currentCountryCode,e.selected_state="",e.selected_city="",e.selected_category="",e.selected_letter="",e.params={},e.mySwiper,e.displaySlideNum=10,e.initialized=!1,e.filter_enable=!1,e.params.count=20,e.params.page=1,e.merchantCategoryList=[],a.params.searchtext&&(e.params.search=a.params.searchtext,r.$broadcast("RESET_MERCHANT_SEARCH",{newval:a.params.searchtext})),r.currentPageParams.page&&(e.params.page=r.currentPageParams.page),r.currentPageParams.count&&(e.params.count=r.currentPageParams.count),r.currentPageParams.sort&&(e.params.sort=r.currentPageParams.sort),e.currentpage=e.params.page,e.ready=!1,e.showLoadMore=!0,e.$on("MERCHANT_SEARCH",function(a,t){console.log("MERCHANT_SEARCH! =>",t);var o={};o.search=t.searchitem,o.count=20,o.page=1,e.search_merchants(o)}),t.getMerchantCategories(function(t,o){console.log("getMerchantCategories ..",o),e.merchantCategoryList=o;var n=[];angular.forEach(o,function(e,a){var t="/"+e.label,o={label:e.label,shortcut:e.shortcut,level:1,slug:t,exclude_tags:e.exclude_tags,include_tags:e.include_tags};n.push(o),angular.forEach(e.children,function(e,a){var o=t+"/"+e.label,i={label:e.label,shortcut:e.shortcut,level:2,slug:o,exclude_tags:e.exclude_tags,include_tags:e.include_tags};n.push(i),angular.forEach(e.children,function(e,a){var t=o+"/"+e.label,i={label:e.label,shortcut:e.shortcut,level:3,slug:t,exclude_tags:e.exclude_tags,include_tags:e.include_tags};n.push(i)})})}),console.log("flatten",n),e.flattenMerchantCategory=n;var i;if(a.params.searchcatshortcut)if(i=_.find(e.flattenMerchantCategory,function(e){return e.shortcut&&e.shortcut.toUpperCase()==a.params.searchcatshortcut.toUpperCase()})){if(e.current_category=i,i){if(e.selected_category=i.shortcut,i.include_tags){var r=i.include_tags.join();e.params.inclusive_tags=r}if(i.exclude_tags){var s=i.exclude_tags.join();e.params.exclusive_tags=s}}e.search_merchants()}else e.searchMerchantByCategoryShortcode(a.params.searchcatshortcut)}),e.prependHtmlTab=function(e,a){var t="";if(a)for(i=0;i<a;i++)t+="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";return t+e},e.filters=[],t.listMerchantFilters({},function(a,t){t.status&&t.status.success&&(e.filters=t.filters)}),e.selectLetter=function(a){if(a.count){var t=angular.copy(e.params);t.character=a.label,e.search_merchants(t)}},e.resetFilter=function(){var a=angular.copy(e.params);a.count=20,a.page=1,a.search="",a.country="",a.state="",a.city="",a.inclusive_tags="",a.exclusive_tags="",a.character="",e.selected_category="",e.current_category={},e.selected_country="",e.config&&e.config.nationwide_shipping_enabled&&(a.country=e.config.nationwide_shipping_country,e.selected_country=e.config.nationwide_shipping_country,e.selected_state=""),e.search_merchants(a)},e.hasGroupLetter=function(a){return!(!e.merchants_group[a]||!e.merchants_group[a].length)},e.country_list=country_list_english,(!e.currentUser||!e.currentUser.display_language||"zh-CN"!=e.currentUser.display_language&&"zh"!=e.currentUser.display_language&&"zh-TW"!=e.currentUser.display_language)&&(e.currentUser&&e.currentUser.display_language||!e.config||!e.config.browserDefaultLang||"zh-CN"!=e.config.browserDefaultLang&&"zh"!=e.config.browserDefaultLang&&"zh-TW"!=e.config.browserDefaultLang)||(e.country_list=country_list_chinese),e.$watch("config.nationwide_shipping_enabled",function(a){e.config&&e.config.nationwide_shipping_enabled&&(e.nationwide_shipping_country_obj=_.find(e.country_list,function(a){return a.code==e.config.nationwide_shipping_country}),e.nationwide_shipping_country_obj&&(e.selected_country=e.config.nationwide_shipping_country,e.params.country=e.config.nationwide_shipping_country))}),e.merchants_group=[],console.log(current_country_code+" selected_country -  "+e.selected_country),e.search_merchants=function(a){return console.log("search params",e.params,a),_.isEqual(angular.copy(e.params),a)?void console.log("same search"):(a&&(e.params=a,e.selected_letter="",""!=a.character&&(e.selected_letter=a.character)),e.merchantlist_isLoading=!0,void t.listMerchantByTags(e.params,function(t,o){e.merchantlist_isLoading=!1,e.initialized=!0,e.animate=!1,o.status&&o.status.success&&(a&&a.page&&a.page>1?e.merchants=e.merchants.concat(o.merchants):e.merchants=o.merchants,o.merchants.length<e.params.count?e.showLoadMore=!1:e.showLoadMore=!0,e.totalMerchants=o.totalMerchants,r.$broadcast("PRODUCTLIST_LOADED"),e.ready=!0)}))},e.searchMerchantByCategoryShortcode=function(a){var o={categorySlug:a};t.getMerchantsByCategorySlug(o).then(function(a){var t=a.category;if(!t)return void(e.merchantlist_isLoading=!1);e.current_category=t;var o=angular.copy(e.params);if(delete o.inclusive_tags,delete o.exclusive_tags,t&&t.include_tags){var n=t.include_tags.join();o.inclusive_tags=n}if(t&&t.exclude_tags){var i=t.exclude_tags.join();o.exclusive_tags=i}o.page=1,e.search_merchants(o)})},e.selected_country_states=[],e.old_selected_country="",e.$watch("selected_country",function(a,t){if(e.old_selected_country=t,e.selected_state="",console.log("selected_country newval == oldval",a==t,a,t),a!=t||!e.config||e.config.nationwide_shipping_enabled){state_list_english&&state_list_english[a]?e.selected_country_states=state_list_english[a]:e.selected_country_states=[];var o=angular.copy(e.params);o.country=a,o.state="",o.city="",o.page=1,e.search_merchants(o)}}),e.selected_state_cities=[],e.$watch("selected_state",function(a,t){if(e.selected_city="",console.log("selected_state newval == oldval",a==t,a,t),a!=t&&""!=e.selected_country){cityConfig&&cityConfig[e.selected_country]&&cityConfig[e.selected_country][a]?e.selected_state_cities=cityConfig[e.selected_country][a]:e.selected_state_cities=[];var o=angular.copy(e.params);o.state=a,o.city="",o.page=1,e.search_merchants(o)}}),e.$watch("selected_city",function(a,t){if(console.log("selected_city newval == oldval",a==t,a,t),a!=t&&""!=e.selected_state){var o=angular.copy(e.params);o.city=a,o.page=1,e.search_merchants(o)}}),e.$watch("selected_category",function(a,t){if(console.log("selected_category newval == oldval",a==t,a,t,"==",e.old_selected_country,e.selected_country),a!=t){var o=_.find(e.flattenMerchantCategory,function(e){return e.shortcut==a});e.current_category=o;var n=angular.copy(e.params);if(delete n.inclusive_tags,delete n.exclusive_tags,o&&o.include_tags){var i=o.include_tags.join();n.inclusive_tags=i}if(o&&o.exclude_tags){var r=o.exclude_tags.join();n.exclusive_tags=r}n.page=1,e.search_merchants(n)}}),e.search_merchant_in_categories=function(a,t){console.log("search_merchant_in_categories",a,t);var o=angular.copy(e.params);if(e.selected_country="",e.selected_state="",o.count=20,o.page=1,o.country="",o.state="",o.city="",o.character="",e.config&&e.config.nationwide_shipping_enabled&&(o.country=e.config.nationwide_shipping_country,e.selected_country=e.config.nationwide_shipping_country),r.$broadcast("RESET_MERCHANT_SEARCH",{newval:""}),t)e.params.search="",e.params.character="",e.selected_category=t;else{if(a.include_tags){var n=a.include_tags.join();o.inclusive_tags=n}if(a.exclude_tags){var i=a.exclude_tags.join();o.exclusive_tags=i}var s=_.find(e.flattenMerchantCategory,function(e){return e.shortcut==t});e.current_category=s,e.search_merchants(o)}},e.loadmore=function(){var a=angular.copy(e.params);a.page++,e.search_merchants(a)},e.jumpList=function(a){e.params.page=a,e.currentpage>a?e.mySwiper.slidePrev():e.mySwiper.slideNext(),a>=e.mySwiper.activeSlide+1&&a<=e.mySwiper.activeSlide+1+displaySlideNum||e.mySwiper.slideTo(a-1),e.currentpage=a,e.ready=!1,e.animate=!1,t.listAllMerchants(e.params,function(t,o){e.ready=!0,e.initialized=!0,o.status&&o.status.success&&(r.$broadcast("PRODUCTLIST_LOADED"),e.merchants=o.merchants,n.path("/shopping/merchant-list"),r.currentPageParams={page:a,count:e.params.count,noload:1})})}}]),app.controller("scYuuPayPayment2",["$scope","$state","$apiSocialCommerce","$timeout","$location","$rootScope","$window","$sce",function(e,a,t,o,n,i,r,s){console.log("central pay scYuuPayPayment2:",a.params),e.formSubmit=!1,e.showLoading=!1;var c=a.params.invoice_uuid;e.months=["January","Febuary","March","April","May","June","July","August","September","October","November","December"],e.year=(new Date).getFullYear(),e.cmonth=(new Date).getMonth()+1,e.nibssData={amount_shipping:"0.00",amount_coupon:"0.00",amount_tax:"0.00",item_quantity:[],item_name:[],item_no:[],item_desc:[],item_amount_unit:[]},e.invoiceDetail={},e.nibssData.timestamp=parseInt(parseInt($.now())/1e3),e.nibssData.sid=i.config.payment_settings.yuupay_nibss_centralpay.id,t.getInvoicesDetails({uuid:c},function(t,o){if(console.log("getInvoicesDetails",t,o),!t&&o.status.success){2!=o.invoice.status&&a.go("sc_user.orderdetails",{id:o.invoice.invoice_uuid}),e.invoiceDetail=o.invoice,e.nibssData.item_quantity=1,e.nibssData.item_name=e.invoiceDetail.invoice_uuid,e.nibssData.item_desc=e.invoiceDetail.invoice_uuid,e.nibssData.item_no=e.invoiceDetail.invoice_id,e.nibssData.item_amount_unit=e.invoiceDetail.total_amount,e.nibssData.rcode=i.config.payment_settings.yuupay_nibss_centralpay.rcode;var n=e.nibssData.sid+""+e.nibssData.timestamp+String(e.invoiceDetail.total_amount.toFixed(2))+e.nibssData.currency+i.config.payment_settings.yuupay_nibss_centralpay.rcode;e.nibssData.hash=CryptoJS.MD5(n).toString(CryptoJS.enc.Hex),null!=o.invoice.coupon&&i.$broadcast("COUPON_USED_CLEAR",{newval:o.invoice.coupon.code}),i.currentUser&&(console.log("data.user zoocash ... "+i.currentUser.zoocash),i.currentUser.zoocash=o.invoice.user.zoocash),i.viewed_user_profile=o.invoice.user.zoocash,i.$broadcast("USER_ZOOCASH_UPDATE",{zoocash:o.invoice.user.zoocash})}}),e.nibssData.tid=c,e.nibssData.tx_action=i.config.payment_settings.yuupay_nibss_centralpay.tx_action,e.nibssData.currency=i.config.currency.code,e.nibssData.redirect_url=s.trustAsResourceUrl((1==i.config.assets.enabled_ssl&&""!=i.config.assets.base_url?"http:":"")+i.config.assets.base_url+"shopping"+i.config.payment_settings.yuupay_nibss_centralpay.redirect_url+c),e.nibssData.postback_url=s.trustAsResourceUrl((1==i.config.assets.enabled_ssl&&""!=i.config.assets.base_url?"http:":"")+i.config.assets.base_url+i.config.payment_settings.yuupay_nibss_centralpay.postback_url+c),e.makePayment=function(){console.log("makePayment ..."+(e.formSubmit&&e.yuupayForm.$valid)),console.log("nibs",e.nibssData),e.formSubmit&&e.yuupayForm.$valid?t.makeYuupayNibssPayment(c,e.nibssData,function(e,a){a.status&&a.status.success&&(console.log("makeYuupayNibssPayment success"+$("#yuupayForm")),document.getElementById("yuupayForm").submit())}):e.showLoading=!1}}]),app.controller("ctrYuuPayNibssResponse",["$scope","$location","$apiSocialCommerce","$rootScope","$timeout","$popupService","$state","$interval","$store",function(e,a,t,o,n,i,r,s,c){console.log("ctrYuuPayNibssResponse"),e.isError=!1,e.isSucess=!1,console.log("$state.params : "+a.path()),e.invoice_details={},t.getInvoicesDetails({uuid:r.params.invoice_id},function(a,t){console.log(" ctrYuuPayNibssResponse invoice status :"+JSON.stringify(t)),e.invoice_details=t.invoice,2!=t.invoice.status&&r.go("sc_user.orderdetails",{id:t.invoice.invoice_uuid}),"1"==t.invoice.status?(console.log(" invoice 1 :"),e.isSucess=!0,null!=t.invoice.coupon&&o.$broadcast("COUPON_USED_CLEAR",{newval:t.invoice.coupon.code}),o.$broadcast("USER_ZOOCASH_UPDATE",{zoocash:t.invoice.user.zoocash}),e.addFBTrackPixel(o.config.fb_tracking_pixel.sale_confirm_id,t.invoice.totalPrice)):(console.log(" invoice error/other :"),e.isError=!0)})}]),app.controller("ctrGameOfferList",["$scope","$apiSocialCommerce","$rootScope",function(e,a,t){console.log("ctrGameOfferList"),e.params={page:1,count:10},e.hideLoadMoreGames=!1,e.loadingMoreGames=!1,e.totalGames=0,e.fetchGamestotal=10,e.gameOfferCollection={},e.gameOffers=[],e.fetchGameOffers=function(){a.listGameOffers(e.params,function(a,t){console.log("ctrGameOfferList DATA",t),t.status.success||(e.hideLoadMoreGames=!0),e.totalGames=t.total;var o=0,n=[],i=[];angular.forEach(t.gameOffers,function(e,a){console.log("current index",o),e.privateData||(e.privateData={canPlay:!0}),o+=1,i.push(e),o>=5&&(o=0,n.push(i),i=[])}),o>0&&n.push(i),e.gameOfferCollection[e.params.page]=n,e.gameOffers.length>0?e.gameOffers=e.gameOffers.concat(t.gameOffers):e.gameOffers=t.gameOffers,console.log(" $scope.gameOfferCollection = "+e.gameOfferCollection),e.totalGames<=e.fetchGamestotal&&(e.hideLoadMoreGames=!0),e.loadingMoreGames=!1})},e.loadMoreGames=function(){e.loadingMoreGames=!0,console.log("loadMoreGames : "+e.totalGames+" > "+e.fetchGamestotal),e.totalGames>e.params.count&&(e.params.page=e.params.page+1,e.fetchGameOffers(),e.fetchGamestotal=e.fetchGamestotal+e.params.count)},e.fetchGameOffers()}]),app.controller("ctrGameOfferInfo",["$scope","$state","$rootScope",function(e,a,t){console.log("ctrGameOfferInfo"),e.gameOfferId=a.params.id}]),app.controller("scMerchantSignupCtrl",["$scope","$state","$rootScope","$q","$apiSocialCommerce","$apiService",function(e,a,t,o,n,i){console.log("scMerchantSignupCtrl"),e.profilephoto_type="merchant",e.formSubmit=!1,e.isError=!1,e.isSucess=!1,e.isMerchantSubmit=!1,e.merchantData={title:"",address:{city:""},country:t.currentCountryCode,email_address:"",hashTags:[]},e.merchantPhoto={},e.isUserEmail=!1,e.isSubscriberEmail=!1,e.merchatTypes=[],e.merchatTypesDetails={},e.predefinedTagList=[],e.tagsi18n={},e.captchaInvalid=!1,e.agreementname="merchant",e.isTocAccepted=!1,e.error_register_toc=!0,e.autoSlugGeneratingEnabled=!0,e.onMerchantTitleChanged=function(){e.autoSlugGeneratingEnabled&&(e.merchantData.slug=generateSlug(e.merchantData.title))},e.emailValidator=function(e){var a=/^[a-zA-Z0-9._\+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;return a.test(e)},e.checkEmailAlreadyExist=function(){e.getStartedData.isValidEmail=e.emailValidator(e.merchantData.email_address),e.getStartedData.isValidEmail?i.user.profileByEmail(e.merchantData.email_address,function(a,t){!a&&t.status.success&&t.user?(e.isExistingUser=!0,e.merchantSignupForm.email_address.$setValidity("email_address",!1)):(e.isExistingUser=!1,e.merchantSignupForm.email_address.$setValidity("email_address",!0))}):e.isExistingUser=!1},e.onMerchantSlugChanged=function(){console.warn("[scMerchantSignupCtrl] Slug has been updated manually. Auto slug generation will now be disabled."),e.autoSlugGeneratingEnabled=!1},console.log("signup params",a.params),a.params.merchantname&&(e.merchantData.title=a.params.merchantname,console.log("merchantname",e.merchantData)),e.openTocbox=function(a){e.agreementname=a,$("#tocMbox").data("reveal-init",{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,close_on_esc:!0,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",bg:$(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}}),$("#tocMbox").foundation("reveal","open")},n.getTagsList(function(a,t){e.predefinedTagList=t}),t.currentUser&&t.currentUser.id&&(console.log("$rootScope.currentUser : ",t.currentUser),e.isUserEmail=t.currentUser.emailAddress&&""!==t.currentUser.emailAddress,e.merchantData.email_address=t.currentUser.emailAddress,e.merchantData.contact_no=t.currentUser.contact_number),angular.forEach(t.i18n,function(a,t){if(t.indexOf("socialcommerce.merchant.type")>-1)if(t.indexOf("socialcommerce.merchant.type.desc")>-1){var o=t.substring("socialcommerce.merchant.type.desc.".length);o.toLowerCase().indexOf("store")>-1?e.merchatTypesDetails[o]={desc:a,type:1,val:""}:e.merchatTypesDetails[o]={desc:a,type:2,val:""}}else e.merchatTypes.push(a);else if(t.indexOf("socialcommerce.merchant.tags.")>-1){var o=t.substring("socialcommerce.merchant.tags.".length);e.tagsi18n[o.toLowerCase()]=a}}),console.log("mechantdetials : ",e.merchatTypesDetails),e.merchant_type=1,e.country_list=country_list_english,(!e.currentUser||!e.currentUser.display_language||"zh-CN"!=e.currentUser.display_language&&"zh"!=e.currentUser.display_language&&"zh-TW"!=e.currentUser.display_language)&&(e.currentUser&&e.currentUser.display_language||!e.config||!e.config.browserDefaultLang||"zh-CN"!=e.config.browserDefaultLang&&"zh"!=e.config.browserDefaultLang&&"zh-TW"!=e.config.browserDefaultLang)||(e.country_list=country_list_chinese),e.country_states=[],e.cityList=[],e.$watch("merchantData.country",function(a,t){t&&(e.merchantData.state=""),state_list_english&&state_list_english[a]?e.country_states=state_list_english[a]:e.country_states=[]}),e.profilephoto={},e.onOpenChangeProfilePicWindow=function(){console.log("onOpenChangeProfilePicWindow"),$(".changeprofilepic-window").data("reveal-init",{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!1,close_on_esc:!1,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",bg:$(".reveal-modal-bg"),css:{open:{opacity:1,visibility:"visible",display:"block"},close:{opacity:0,visibility:"hidden",display:"none"}}}),$(".changeprofilepic-window").foundation("reveal","open")},e.clearCityList=function(){e.cityList=null,e.cityList=[],e.merchantData.address.city="",e.merchantData.city=""},e.loadCityList=function(a,t){cityConfig&&cityConfig[a]&&cityConfig[a][t]&&(e.cityList=cityConfig[a][t])},e.isPasswordStrong=!0,e.validateMerchantSignupPasswordStrength=function(){e.isPasswordStrong=!0;var a=e.merchantData.password;_.isEmpty(a)||(a<t.password_length||!t.hasUpperCase(a)||!t.hasSpecialCharacters(a))&&(e.isPasswordStrong=!1)},e.createMerchant=function(){if(e.validateMerchantSignupPasswordStrength(),e.captchaInvalid=!1,e.isPasswordStrong){var a,r,s;if(t.config.feature_locks.enable_captcha&&e.captcha&&e.captcha.getCaptchaData().valid){var c=e.captcha.getCaptchaData(),l={frontendData:c};c.name===e.captcha.imageFieldName()?l.type="image":l.type="audio",a=o.defer(),i.visualcaptcha["try"](l,function(t,o){console.log("response",o),200===o.response?a.resolve(!0):(e.captchaInvalid=!0,e.captcha.refresh(),a.resolve(!1))})}e.formSubmit&&e.merchantSignupForm.$valid&&e.isTocAccepted&&(r=o.defer(),e.merchantData.email_address&&!e.isUserEmail?i.user.profileByEmail(e.merchantData.email_address,function(a,t){return!a&&t.status.success?(e.isSubscriberEmail=!0,e.showLoading=!1,void r.resolve(!1)):(e.isSubscriberEmail=!1,void r.resolve(!0))}):r.resolve(!0)),e.merchantData.slug&&e.merchantData.slug.length&&(s=o.defer(),n.validateMerchantSlug({slug:e.merchantData.slug,merchantTitle:e.merchantData.title},function(e,a){return e?s.resolve(!1):(s.resolve(a.approved),void(a.approved||console.log(a.recommendations)))}));var d={};a&&(d.validateCaptcha=a.promise),r&&(d.validateEmail=r.promise),s&&(d.validateSlug=s.promise),e.showLoading=!0,o.all(d).then(function(a){if(e.showLoading=!1,!a.validateCaptcha&&t.config.feature_locks.enable_captcha)e.captchaInvalid=!0;else if(a.validateEmail&&a.validateSlug)return e.captchaInvalid=!1,void e.newMerchant();e.merchantSignupForm.slug.$setValidity("duplicated",a.validateSlug)})}},e.newMerchant=function(){if(e.cityList&&e.cityList.length>0){var a=JSON.parse(e.merchantData.city);e.merchantData.address.city=a.name,e.merchantData.city=a.code,console.log("is citylist --"+JSON.stringify(e.merchantData))}else console.log("no citylist --"+e.merchantData.city),e.merchantData.address.city=e.merchantData.city,e.merchantData.city="";e.merchantData.type=e.merchant_type,e.merchantData.address=JSON.stringify(e.merchantData.address),console.log(" scope.merchantPhoto "+JSON.stringify(e.merchantPhoto)),e.merchantPhoto.fsRef&&(e.merchantData.preview_image_fsref=e.merchantPhoto.fsRef),n.createMerchant(e.merchantData,function(a,t){t.status&&t.status.success?(console.log("createMerchant success"+t),e.isSucess=!0):e.isError=!0,e.isMerchantSubmit=!0,e.merchantData={}})},e.reload=function(){a.go("merchant-signup",null,{reload:!0})}}]),app.controller("scNibssMandateCtrl",["$scope","$state","$apiSocialCommerce","$timeout","$location","$rootScope","$window","$sce",function(e,a,t,o,n,i,r,s){console.log("scNibssMandateCtrl:",a.params),e.formSubmit=!1,e.showLoading=!1;var c=a.params.invoice_uuid;e.apiErrorMessage=a.params.err,console.log("$scope.apiErrorMessage "+e.apiErrorMessage),e.nibssData={amount_shipping:"0.00",amount_coupon:"0.00",amount_tax:"0.00",item_quantity:[],item_name:[],item_no:[],item_desc:[],item_amount_unit:[]},e.invoiceDetail={},e.nibssData.timestamp=parseInt(parseInt($.now())/1e3),e.nibssData.sid=i.config.payment_settings.yuupay_nibss_mandatepay.id,e.nibssData.card_type=i.config.payment_settings.yuupay_nibss_mandatepay.card_type,console.log("$rootScope.config.payment_settings.yuupay_nibss_mandatepay.bank_options[0].code "+i.config.payment_settings.yuupay_nibss_mandatepay.bank_options[0].code),e.nibssData.bank_name=i.config.payment_settings.yuupay_nibss_mandatepay.bank_options[0].code,t.getInvoicesDetails({uuid:c,retMess:0},function(t,o){if(console.log("getInvoicesDetails",t,o),!t&&o.status.success){2==o.invoice.status||null!=o.invoice.paymentDetails&&"01"==o.invoice.paymentDetails.code||a.go("sc_user.orderdetails",{id:o.invoice.invoice_uuid}),e.invoiceDetail=o.invoice,e.nibssData.item_quantity=1,e.nibssData.item_name=e.invoiceDetail.invoice_uuid,e.nibssData.item_desc=e.invoiceDetail.invoice_uuid,
e.nibssData.item_no=e.invoiceDetail.invoice_id,e.nibssData.item_amount_unit=e.invoiceDetail.total_amount,e.nibssData.rcode=i.config.payment_settings.yuupay_nibss_mandatepay.rcode,e.nibssData.email=o.invoice.user.emailAddress||o.invoice.user.guest_email_address;var n=e.nibssData.sid+""+e.nibssData.timestamp+String(e.invoiceDetail.total_amount.toFixed(2))+e.nibssData.currency+i.config.payment_settings.yuupay_nibss_mandatepay.rcode;e.nibssData.hash=CryptoJS.MD5(n).toString(CryptoJS.enc.Hex),i.$broadcast("USER_ZOOCASH_UPDATE",{zoocash:o.invoice.user.zoocash}),null!=o.invoice.coupon&&i.$broadcast("COUPON_USED_CLEAR",{newval:o.invoice.coupon.code})}}),e.nibssData.tid=c,e.nibssData.tx_action=i.config.payment_settings.yuupay_nibss_mandatepay.tx_action,e.nibssData.currency=i.config.currency.code,e.nibssData.redirect_url=s.trustAsResourceUrl((1==i.config.assets.enabled_ssl&&""!=i.config.assets.base_url?"http:":"")+i.config.assets.base_url+"shopping"+i.config.payment_settings.yuupay_nibss_mandatepay.redirect_url+c),e.nibssData.postback_url=s.trustAsResourceUrl((1==i.config.assets.enabled_ssl&&""!=i.config.assets.base_url?"http:":"")+i.config.assets.base_url+i.config.payment_settings.yuupay_nibss_mandatepay.postback_url+c),e.makePayment=function(){console.log("makePayment ..."+(e.formSubmit&&e.yuupayForm.$valid)),e.formSubmit&&e.yuupayForm.$valid?t.makePayMandatePayment(c,e.nibssData,function(e,a){a.status&&a.status.success&&(console.log("makePayMandatePayment success"+$("#yuupayForm")),document.getElementById("yuupayForm").submit())}):e.showLoading=!1}}]),app.controller("scUserMerchantBusinessCtrl",["$scope","$state","$rootScope","$apiSocialCommerce","$apiService","$scService","$popupService",function(e,a,t,o,n,i,r){console.log("scUserMerchantBusinessCtrl"),e.photo_types=["merchant","merchant_attach"],e.profilephoto_type=e.photo_types[0],e.isEditMode=!1,e.isMerchantDetail=!1,e.merchantListReady=!1,e.merchantList=[],e.totalMerchants=0,e.params={page:1,count:10},e.formSubmit=!1,e.showLoading=!1,e.isMerchantUpdateError=!1,e.mySwiper={},e.currentpage=1,e.displaySlideNum=10,e.merchantTypes=[],e.merchant_id=a.params.id?a.params.id:"",e.merchantDetails={},e.merchantData={},e.country_list=country_list_english,e.country_states=[],e.cityList=[],e.predefinedTagList=[],e.tagsi18n={},e.merchantPhoto={},e.merchantAttachPhoto={},e.slugLocked=!0,e.resetMerchantData=function(){e.merchantData={}},(!e.currentUser||!e.currentUser.display_language||"zh-CN"!=e.currentUser.display_language&&"zh"!=e.currentUser.display_language&&"zh-TW"!=e.currentUser.display_language)&&(e.currentUser&&e.currentUser.display_language||!e.config||!e.config.browserDefaultLang||"zh-CN"!=e.config.browserDefaultLang&&"zh"!=e.config.browserDefaultLang&&"zh-TW"!=e.config.browserDefaultLang)||(e.country_list=country_list_chinese),e.fecthMerchant=function(){o.getMerchantDetails(e.merchant_id,function(a,t){!a&&t.status.success&&(e.merchantDetails=t.merchant,e.merchantDetails.slug=t.merchant.slug_2||t.merchant.slug_1,e.merchantDetails.address=JSON.parse(t.merchant.address),e.resetMerchantData(),e.isMerchantDetail=!0,state_list_english&&state_list_english[e.merchantDetails.country]&&(e.country_states=state_list_english[e.merchantDetails.country]),e.loadCityList(e.merchantDetails.country,e.merchantDetails.state))})},"sc_user.business-listing"==a.current.name?o.getListBusinessMerchants(e.params,function(a,t){!a&&t.status.success&&(e.merchantList=t.merchants,e.totalMerchants=e.totalMerchants,e.merchantListReady=!0,e.pagecount=e.params.count,e.params.page>e.total_invoice/e.pagecount&&(e.currentpage=Math.ceil(e.total_invoice/e.params.count)+1))}):"sc_user.business-details"==a.current.name&&(o.getTagsList(function(a,t){console.log("taglist : ",t),e.predefinedTagList=t}),e.fecthMerchant()),e.calcPage=function(){if(e.totalMerchants%e.pagecount!=0){var a=e.totalMerchants%e.pagecount;return(e.totalMerchants-a)/e.pagecount+1}return e.totalMerchants/e.pagecount},e.jumpList=function(a){console.log("jumpList : "+a+" currentpage : "+e.currentpage),e.currentpage>a?e.mySwiper.slidePrev():e.mySwiper.slideNext(),a>=e.mySwiper.activeSlide+1&&a<=e.mySwiper.activeSlide+1+e.displaySlideNum||e.mySwiper.slideTo(a-1),e.params.page=a,e.currentpage=a,o.getListBusinessMerchants(e.params,function(t,o){o.status&&o.status.success&&(e.merchantList=o.merchants,console.log("jumpList : "+e.params.page+" currentpage : "+e.currentpage),$location.search({page:a,count:e.params.count}))})},e.collectMerchantType=function(){angular.forEach(t.i18n,function(a,t){if(t.indexOf("socialcommerce.merchant.type")>-1&&-1==t.indexOf("socialcommerce.merchant.type.desc")){var o=t.substring("socialcommerce.merchant.type.".length);o.toLowerCase().indexOf("store")>-1?e.merchantTypes.push({val:a,type:1}):o.toLowerCase().indexOf("directory")>-1?e.merchantTypes.push({val:a,type:2}):o.toLowerCase().indexOf("vinculum")>-1&&e.merchantTypes.push({val:a,type:3})}})},e.getMerchantType=function(a){var t="";return angular.forEach(e.merchantTypes,function(e,o){e.type==a&&(t=e.val)}),t},e.editMerchant=function(){e.merchantData=angular.copy(e.merchantDetails),e.slugLocked=!e.merchantData.can_edit_slug,console.log("edit merchantData : ",e.merchantData),e.isEditMode=!0},e.cancelMerchant=function(){e.resetMerchantData(),e.isEditMode=!1},e.$watch("merchantData.country",function(a,t){t&&(e.merchantData.state=""),state_list_english&&state_list_english[a]?e.country_states=state_list_english[a]:e.country_states=[]}),e.$watch("merchantAttachPhoto",function(a,t){e.merchantData.image_attachments||(e.merchantData.image_attachments=[]),t!=a&&(e.merchantData.image_attachments.push(e.merchantAttachPhoto.url),console.log("merchantAttachPhoto : ",e.merchantData.image_attachments))}),e.profilephoto={},e.removeAttachPhoto=function(a){if(e.merchantData.image_attachments&&e.merchantData.image_attachments.length>0){var t=e.merchantData.image_attachments.indexOf(a);t>-1&&e.merchantData.image_attachments.splice(t,1)}},e.onOpenChangeProfilePicWindow=function(a){console.log("onOpenChangeProfilePicWindow"+a),a&&(e.profilephoto_type=e.photo_types[a]),$(".changeprofilepic-window").data("reveal-init",{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!1,close_on_esc:!1,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",bg:$(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}}),$(".changeprofilepic-window").foundation("reveal","open")},e.onMerchantSlugChanged=function(a){console.warn("[scUserMerchantBusinessCtrl.onMerchantSlugChanged] ."),e.merchantUpdateForm.slug.$setValidity("duplicated",!0)},e.clearCityList=function(){e.cityList=null,e.cityList=[],e.merchantData.address.city="",e.merchantData.city=""},e.loadCityList=function(a,t){cityConfig&&cityConfig[a]&&cityConfig[a][t]&&(e.cityList=cityConfig[a][t])},e.getMerchantCountry=function(e){return i.getCountryName(e)},e.getMerchantState=function(e,a){return i.getStateName(e,a)},e.updateMerchant=function(){function a(e){return result=angular.copy(e),result.merchant_id&&delete result.merchant_id,result.addressObj&&delete result.addressObj,result.code&&delete result.code,result.email_address&&delete result.email_address,result.type&&delete result.type,result.isFirstCharacterLetter&&delete e.isFirstCharacterLetter,result.firstLetter&&delete result.firstLetter,result.previewImageUrl&&delete result.previewImageUrl,result.image_attachments_url&&delete result.image_attachments_url,result.metadata&&(result.metadata=JSON.stringify(result.metadata)),result.is_worldwide_shipping&&(result.supportWorldWideShipping=result.is_worldwide_shipping,delete result.is_worldwide_shipping),result.isCertified&&(result.certified=result.isCertified,delete $result.isCertified),result}if(e.formSubmit=!0,e.formSubmit&&e.merchantUpdateForm.$valid){if(e.showLoading=!0,e.cityList&&e.cityList.length>0){var t={name:"",code:""};try{t=JSON.parse(e.merchantData.city),console.log("before cityData : ",t),"object"!=typeof t&&(t=_.find(e.cityList,function(a){return a.code==e.merchantData.city}))}catch(n){}console.log("after cityData ",t),e.merchantData.address.city=t.name,e.merchantData.city=t.code}else console.log("no citylist --"+e.merchantData.city),e.merchantData.address.city=e.merchantData.city;e.merchantData.address=JSON.stringify(e.merchantData.address),e.merchantData.nationWideShipping&&(e.merchantData.nationWideShipping=JSON.stringify(e.merchantData.nationWideShipping)),console.log(" scope.merchantPhoto "+JSON.stringify(e.merchantPhoto)),e.merchantPhoto.fsRef&&(e.merchantData.preview_image_fsref=e.merchantPhoto.fsRef);var i=a(e.merchantData);o.updateBusinessMerchant(e.merchant_id,i,function(a,t){var o="";t.status&&t.status.success?(console.log("createMerchant success"+t),e.isEditMode=!1,e.merchantDetails=t.merchant,e.merchantDetails.slug=t.merchant.slug_2||t.merchant.slug_1,e.merchantDetails.address=JSON.parse(t.merchant.address),e.isMerchantDetail=!0,e.resetMerchantData(),o=$("#info-saved-successful-message:first").text(),console.log("createMerchant success response_message"+o)):(a?o=$("#general-error-message:first").text():t.status.err&&(o=t.status.err,e.merchantUpdateForm.slug.$setValidity("duplicated","MERCHANT_SLUG_EXISTS"!==t.status.err)),console.log("createMerchant error response_message"+o)),e.showLoading=!1,r.showAutoMessage(o)})}},e.collectMerchantType()}]),app.controller("scMerchantLandingPage",["$scope","$apiSocialCommerce",function(e,a){console.log("merchant-landing-page controller"),e.merchants=[],e.popTags=[],e.category=[],e.topCategory=[];var t={inclusive_tags:"hot"};a.listMerchantByTags(t,function(a,t){t.status&&t.status.success&&(e.merchants=t.merchants,console.log("MERCHANT",e.merchants))}),a.getMerchantPopularTag(function(t,o){e.popTags=o.tags,a.getMerchantCategories(function(a,t){e.category=t,console.log("popular Tags :>",e.popTags),console.log("Category :>",e.category),e.topCategory=_.filter(e.category,function(a){return _.intersection(a.include_tags,e.popTags).length>0}),console.log("popularCategoriesANYMatch",e.topCategory)})}),e.swipermerchants={swiper:{}},e.merchants_next=function(){e.swipermerchants.swiper.slideNext()},e.merchants_prev=function(){e.swipermerchants.swiper.slidePrev()},e.swipercategory={swiper:{}},e.category_next=function(){e.swipercategory.swiper.slideNext()},e.category_prev=function(){e.swipercategory.swiper.slidePrev()}}]),app.controller("scUserZoocashCtrl",["$scope","$apiSocialCommerce","$rootScope","$location","$state",function(e,a,t,o,n){console.log("scUserZoocashCtrl..."),e.transactionListReady=!1,e.isTranList=!1,e.transactionList=[],e.totalTransaction=0,e.statuskey="socialcommerce.zoocash.status.",e.params={page:1,count:10},e.pagecount=e.params.count,e.mySwiper={},e.currentpage=1,e.displaySlideNum=10,n.params.page&&!isNaN(n.params.page)&&(e.params.page=n.params.page),n.params.count&&!isNaN(n.params.count)&&(e.params.count=n.params.count);var i=function(){e.params.includeCount=1,a.getZooCashTransactionList(e.params,function(a,t){t.status&&t.status.success&&(e.transactionList=t.transactionItems,e.totalTransaction=t.totalTransactions,e.transactionListReady=!0,e.isTranList=!0)})};i(),e.get18nValBaseOnKey=function(e,a){if(null==a||void 0==a||!a)return"";var o=e+a+".",n=_.find(t.i18n,function(e,a){return a.indexOf(o)>-1});return n?n:""},e.calcPage=function(){if(e.totalTransaction%e.pagecount!=0){var a=e.totalTransaction%e.pagecount;return(e.totalTransaction-a)/e.pagecount+1}return e.totalTransaction/e.pagecount},e.jumpList=function(t){console.log("jumpList : "+t+" currentpage : "+e.currentpage+" $scope.mySwiper ",e.mySwiper),e.currentpage>t?e.mySwiper.slidePrev():e.mySwiper.slideNext(),t>=e.mySwiper.activeSlide+1&&t<=e.mySwiper.activeSlide+1+e.displaySlideNum||e.mySwiper.slideTo(t-1),e.params.page=t,e.currentpage=t,a.getZooCashTransactionList(e.params,function(a,n){n.status&&n.status.success&&(e.transactionList=n.transactionItems,e.transactionListReady=!0,console.log("getZooCashTransactionList : "+e.transactionList.length),o.search({page:t,count:e.params.count}))})},e.showSixDigit=function(e){var a=5;if(e.length<a){for(var t=e,o=0;o<=a-e.length;o++)t="0"+t;return t}return e}}]),app.controller("ctrMobilePaymentsCallback",["$scope","$state","$apiSocialCommerce","$timeout","$location","$rootScope","$window",function(e,a,t,o,n,i,r){console.log("ctrMobilePaymentsCallback")}]),define("controller.socialcommerce",function(){}),angular.module("yzSocialCommerce",[]).config(["$stateProvider","$httpProvider","$urlRouterProvider",function(e,a,t){"use strict";a.interceptors.push("yzSocialHttpLanguageInterceptor"),"commerce"==landingStartup&&e.state("home",{url:"/?ab",views:{headernav:{templateUrl:"/_partials/socialcommerce/common/header-top-nav"},main:{templateUrl:"/_partials/socialcommerce/index"}}});var o=function(e){var a=e.absUrl().split("/");if(a.length>3){var t=a[a.length-2],o=a[a.length-1],n="";t.indexOf("_")>-1&&(n=t.substr(t.lastIndexOf("_")+1,t.length));try{var i=parseInt(n);if(console.log("c ",i),!isNaN(i))return t=t.replace(/_/g,"-").replace(/\s/g,"-").replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"").toLowerCase(),void(window.location="/shopping/collection/"+t+"/"+o)}catch(r){}}};e.state("home_shopping",{url:"/shopping?ab",views:{headernav:{templateUrl:"/_partials/socialcommerce/common/header-top-nav"},main:{templateUrl:"/_partials/socialcommerce/index"}}}).state("home_games",{url:"/gaming",views:{headernav:{templateUrl:"/_partials/socialcommerce/common/header-gaming"},main:{templateUrl:"/_partials/socialcommerce/gameoffer/game-offer-list",controller:"ctrGameOfferList"}}}).state("zoocash-poster",{url:"/shopping/zoocash",views:{main:{templateUrl:"/client/html/zoocash/zoocash.html"}}}).state("gameoffer_page",{url:"/gaming/:id",views:{headernav:{templateUrl:"/_partials/socialcommerce/common/header-gaming"},main:{templateUrl:"/_partials/socialcommerce/gameoffer/game-offer-info",controller:"ctrGameOfferInfo"}}}).state("invoice",{url:"/shopping/invoice/:id?mode",views:{main:{templateUrl:"/_partials/socialcommerce/user/user-order-details",controller:"scOrderHistoryCtrl"}}}).state("sc_yuupay-nibss-payments",{url:"/shopping/yuupay-nibss-payments/:invoice_id?t&temp",views:{headernav:{templateUrl:"/_partials/socialcommerce/common/header-top-nav"},main:{templateUrl:"/_partials/socialcommerce/payment/yuupay-nibss-response"}},resolve:{authTokenUser:["$stateParams","$store","$apiService","$q","$rootScope",function(e,a,t,o,n){var i;return i=o.defer(),null==e.t?i.resolve():(null==e.temp||null!=e.temp&&0==e.temp?a.setToken(e.t):1==e.temp&&a.setTempToken(e.t),t.user.profileByAuthToken(e.t,function(t,o){return!t&&o&&o.user?(null==e.temp||null!=e.temp&&0==e.temp?a.setValue("currentUser",o.user):1==e.temp&&a.setValue("tempUser",o.user),n.currentUser=o.user,n.authToken=e.t,i.resolve()):i.resolve()}),i.promise)}]}}).state("sc_yuupay-payments",{url:"/shopping/yuupay-payments/:token_id/:invoice_uuid?t&temp",views:{main:{templateUrl:"/_partials/socialcommerce/payment/yuupay-payments"}},resolve:{authTokenUser:["$stateParams","$store","$apiService","$q","$rootScope",function(e,a,t,o,n){var i;return i=o.defer(),null==e.t?i.resolve():(null==e.temp||null!=e.temp&&0==e.temp?a.setToken(e.t):1==e.temp&&a.setTempToken(e.t),t.user.profileByAuthToken(e.t,function(t,o){return!t&&o&&o.user?(null==e.temp||null!=e.temp&&0==e.temp?a.setValue("currentUser",o.user):1==e.temp&&a.setValue("tempUser",o.user),n.currentUser=o.user,n.authToken=e.t,i.resolve()):i.resolve()}),i.promise)}],config:["$q","$rootScope","$timeout",function(e,a,t){a.appMainLoading=!0;var o=e.defer(),n=function(){return console.log("hasConfig"),a.config?(o.resolve(a.config),!0):void t(function(){n()},1)};return n(),o.promise}]}}).state("sc_yuupay-payments2",{url:"/shopping/yuupay-payments-2/:invoice_uuid?t&temp",views:{main:{templateUrl:"/_partials/socialcommerce/payment/yuupay-payments-2"}},resolve:{authTokenUser:["$stateParams","$store","$apiService","$q","$rootScope",function(e,a,t,o,n){var i;return i=o.defer(),null==e.t?i.resolve():(null==e.temp||null!=e.temp&&0==e.temp?a.setToken(e.t):1==e.temp&&a.setTempToken(e.t),t.user.profileByAuthToken(e.t,function(t,o){return!t&&o&&o.user?(null==e.temp||null!=e.temp&&0==e.temp?a.setValue("currentUser",o.user):1==e.temp&&a.setValue("tempUser",o.user),n.currentUser=o.user,n.authToken=e.t,i.resolve()):i.resolve()}),i.promise)}]}}).state("sc_nibss-mandate-payment",{url:"/shopping/nibss-mandate-payments/:invoice_uuid?t&temp&err",views:{main:{templateUrl:"/_partials/socialcommerce/payment/nibss-mandate-payments"}},resolve:{authTokenUser:["$stateParams","$store","$apiService","$q","$rootScope",function(e,a,t,o,n){var i;return i=o.defer(),null==e.t?i.resolve():(null==e.temp||null!=e.temp&&0==e.temp?a.setToken(e.t):1==e.temp&&a.setTempToken(e.t),t.user.profileByAuthToken(e.t,function(t,o){return!t&&o&&o.user?(null==e.temp||null!=e.temp&&0==e.temp?a.setValue("currentUser",o.user):1==e.temp&&a.setValue("tempUser",o.user),n.currentUser=o.user,n.authToken=e.t,i.resolve()):i.resolve()}),i.promise)}],config:["$q","$rootScope","$apiService",function(e,a,t){var o=e.defer();return console.log("resolve  payment page platform ...api "),a.config?(o.resolve(a.config),!0):(t.user.platform(!1,function(e,t){return!e&&t&&(console.log("platform ...api ",t),a.config=t.config,a.config)?(o.resolve(a.config),!0):void 0}),o.promise)}]}}).state("sc_bank-transfer_done",{url:"/shopping/bank-transfer/invoice/:uuid",views:{headernav:{templateUrl:"/_partials/socialcommerce/common/header-top-nav"},main:{templateUrl:"/_partials/socialcommerce/payment/bank-transfer",controller:"scOrderCartCtrl"}}}).state("payments-message",{url:"/shopping/payments",views:{headernav:{templateUrl:"/_partials/socialcommerce/common/header-top-nav"},main:{templateUrl:"/_partials/socialcommerce/user/user-index",controller:"scUserCtrl"}}}).state("payments-message.sc_payment-response",{url:"/response/:invoice_uuid?parent_txid",views:{user_module:{templateUrl:"/_partials/socialcommerce/payment/payments-response"}}}).state("payments-message.sc_alipay-response",{url:"/alipay-payments/:invoice_uuid?t&temp",views:{user_module:{templateUrl:"/_partials/socialcommerce/payment/payments-response"}}}).state("payments-message.sc_payments-successful",{url:"/success/:invoice_uuid?parent_txid",views:{user_module:{templateUrl:"/_partials/socialcommerce/payment/payments-response"}}}).state("payments-message.sc_payments-failure",{url:"/fail/:invoice_uuid?parent_txid",views:{user_module:{templateUrl:"/_partials/socialcommerce/payment/payments-response"}}}).state("payments-message.sc_payments-cancel",{url:"/cancel/:invoice_uuid?parent_txid",views:{user_module:{templateUrl:"/_partials/socialcommerce/payment/payments-response"}}}).state("shoppingIndex",{url:"/shopping",views:{main:{templateUrl:"/_partials/socialcommerce/merchants"}}}).state("shoppingSearch",{url:"/shopping/search/:query/:filter?noload",views:{headernav:{templateUrl:"/_partials/socialcommerce/common/header-top-nav"},main:{templateUrl:"/_partials/socialcommerce/search/index"}}}).state("shoppingCategorySearch",{url:"/shopping/search/:query/category/:category?noload",views:{headernav:{templateUrl:"/_partials/socialcommerce/common/header-top-nav"},main:{templateUrl:"/_partials/socialcommerce/search/index"}}}).state("shopping-cart-page",{url:"/user/shopping-cart",views:{main:{templateUrl:"/_partials/socialcommerce/user/shopping-cart"}}}).state("shopping-checkout-page",{url:"/user/checkout",views:{main:{templateUrl:"/_partials/socialcommerce/user/shopping-checkout-page"}}}).state("shopping-payment-page",{url:"/user/payments",views:{main:{templateUrl:"/_partials/socialcommerce/user/shopping-payment-page"}}}).state("shoptest",{url:"/shopping/test",views:{main:{templateUrl:"/_partials/socialcommerce/test"}}}).state("productInfo",{url:"/shopping/product/:id?skey&spage&sfilter&referrernetwork",views:{headernav:{templateUrl:"/_partials/socialcommerce/common/header-top-nav"},main:{templateUrl:"/_partials/socialcommerce/social-product-info"}}}).state("collectionPrdInfo",{url:"/shopping/product/:collectid/:id",views:{headernav:{templateUrl:"/_partials/socialcommerce/common/header-top-nav"},main:{templateUrl:"/_partials/socialcommerce/social-product-info",resolve:{redirectNewCollectionRoute:["$location",function(e){o(e)}]}}}}).state("collectionToPrdInfo",{url:"/shopping/collection/:collectid/:id",views:{headernav:{templateUrl:"/_partials/socialcommerce/common/header-top-nav"},main:{templateUrl:"/_partials/socialcommerce/social-product-info"}}}).state("collectionPrdInfo.param",{url:"?page&count&noload&skey&spage&sfilter",views:{headernav:{templateUrl:"/_partials/socialcommerce/common/header-top-nav"},main:{templateUrl:"/_partials/socialcommerce/social-product-info"}}}).state("categoryPrdInfo",{url:"/shopping/product/{path:.*}/:id",views:{headernav:{templateUrl:"/_partials/socialcommerce/common/header-top-nav"},main:{templateUrl:"/_partials/socialcommerce/social-product-info"}}}).state("categoryPrdInfo.param",{url:"?page&count&noload&skey&spage&sfilter",views:{headernav:{templateUrl:"/_partials/socialcommerce/common/header-top-nav"},main:{templateUrl:"/_partials/socialcommerce/social-product-info"}}}).state("productList",{url:"/shopping/category/:category?noload",views:{headernav:{templateUrl:"/_partials/socialcommerce/common/header-top-nav"},main:{templateUrl:"/_partials/socialcommerce/social-product-list"}},reloadOnSearch:!0}).state("productList.param",{url:"?page&count&sort",views:{headernav:{templateUrl:"/_partials/socialcommerce/common/header-top-nav"},main:{templateUrl:"/_partials/socialcommerce/social-product-list"}}}).state("merchant-list",{url:"/shopping/merchant-list?page&count&searchtext&searchcatshortcut",views:{headernav:{templateUrl:"/_partials/socialcommerce/common/header-top-nav"},subheadernav:{templateUrl:"/_partials/socialcommerce/common/header-merchant-search"},main:{templateUrl:"/_partials/socialcommerce/social-merchant-list"}}}).state("merchant-signup",{url:"/shopping/merchant-signup?merchantname",views:{headernav:{templateUrl:"/_partials/socialcommerce/common/header-top-nav"},main:{templateUrl:"/_partials/socialcommerce/social-merchant-signup"}}}).state("merchant-productlist",{url:"/merchant/:name_id/products",views:{headernav:{templateUrl:"/_partials/socialcommerce/common/header-top-nav"},subheadernav:{templateUrl:"/_partials/socialcommerce/common/header-merchant-search"},main:{templateUrl:"/_partials/socialcommerce/social-merchant-product-list"}},resolve:{merchant:["$rootScope","$stateParams","$apiSocialCommerce","$q",function(e,a,t,o){var n=o.defer(),i=a.name_id;return t.getMerchantBySlug(i,function(a,t){return a?n.reject(a):(e.merchantId=t.merchant_id,e.merchantTitle=t.title,void n.resolve(t))}),n.promise}]}}).state("merchant-info",{url:"/merchant/:name_id",views:{headernav:{templateUrl:"/_partials/socialcommerce/common/header-top-nav"},subheadernav:{templateUrl:"/_partials/socialcommerce/common/header-merchant-search"},main:{templateUrl:"/_partials/socialcommerce/social-merchant-info"}},resolve:{merchant:["$rootScope","$stateParams","$apiSocialCommerce","$q",function(e,a,t,o){var n=o.defer(),i=a.name_id;return t.getMerchantBySlug(i,function(a,t){e.merchantId=t.merchant_id,e.merchantTitle=t.title,n.resolve(t)}),n.promise}]}}).state("merchant-landing",{url:"/shopping/merchants",views:{headernav:{templateUrl:"/_partials/socialcommerce/common/header-top-nav"},subheadernav:{templateUrl:"/_partials/socialcommerce/common/header-merchant-search"},main:{templateUrl:"/_partials/socialcommerce/social-merchant-landingpage"}}}).state("categoryList",{url:"/shopping/category",views:{headernav:{templateUrl:"/_partials/socialcommerce/common/header-top-nav"},main:{templateUrl:"/_partials/socialcommerce/social-category-list"}}}).state("collectionList",{url:"/shopping/collection/:collectid?page&count&noload&skey&spage&sfilter",views:{headernav:{templateUrl:"/_partials/socialcommerce/common/header-top-nav"},main:{templateUrl:"_partials/socialcommerce/social-collection-list"}}}).state("productList.list_path",{url:"/{path:.*}",views:{main:{templateUrl:"/_partials/socialcommerce/social-product-list"}}}).state("sc_user",{url:"/shopping/user/:username",views:{headernav:{templateUrl:"/_partials/socialcommerce/common/header-top-nav"},main:{templateUrl:"/_partials/socialcommerce/user/user-index",controller:"scUserCtrl"}}}).state("sc_user.info",{url:"/info?edit",views:{user_module:{templateUrl:"/_partials/socialcommerce/user/user-info"}}}).state("sc_user.ordercart",{url:"/cart",views:{user_module:{templateUrl:"/_partials/socialcommerce/user/user-ordercart"}}}).state("sc_user.redeemcode",{url:"/redeem",views:{user_module:{templateUrl:"/_partials/socialcommerce/user/user-redeem",controller:"scRedeemCodeCtrl"}}}).state("sc_user.redeemhistory",{url:"/redeemhistory",views:{user_module:{templateUrl:"/_partials/socialcommerce/user/user-redeemhistory",controller:"scRedeemHistoryCtrl"}}}).state("sc_user.business-listing",{url:"/business-listing?page&count",views:{user_module:{templateUrl:"/_partials/socialcommerce/user/user-business-listing"}}}).state("sc_user.business-details",{url:"/business-listing/:id?edit",views:{user_module:{templateUrl:"/_partials/socialcommerce/user/user-business-details"}}}).state("sc_user.orderhistory",{url:"/orderhistory?page&count&txid",views:{user_module:{templateUrl:"/_partials/socialcommerce/user/user-orderhistory"}}}).state("sc_user.zoocash",{url:"/zoocash",views:{user_module:{templateUrl:"/_partials/socialcommerce/user/user-zoocash"}}}).state("sc_user.wishlist",{url:"/wishlist",views:{user_module:{templateUrl:"/_partials/socialcommerce/user/user-wishlist"}}}).state("shoppingtest",{url:"/shopping/test",views:{main:{templateUrl:"/_partials/socialcommerce/test"}}}).state("content_error",{url:"/shopping/error",views:{headernav:{templateUrl:"/_partials/socialcommerce/common/header-top-nav"},main:{templateUrl:"/_partials/socialcommerce/common/content_error",controller:"socialCommerceCtrl"}}}).state("sc_user.orderdetails",{url:"/orderhistory/:id?txid",views:{user_module:{templateUrl:"/_partials/socialcommerce/user/user-order-details"}}}).state("sc_helpstaticpages",{url:"/shopping/help/*path",views:{headernav:{templateUrl:"/_partials/socialcommerce/common/header-top-nav"},main:{templateUrl:"/_partials/common/staticpage",controller:["$scope","$state",function(e,a){console.log("$state.params.path "+a.params.path),e.staticpageLoadUrl="html/help/"+a.params.path+".html"}]}}}).state("sc_agreementstaticpages",{url:"/shopping/agreement/*path",views:{headernav:{templateUrl:"/_partials/socialcommerce/common/header-top-nav"},main:{templateUrl:"/_partials/common/staticpage",controller:["$scope","$state",function(e,a){console.log("$state.params.path "+a.params.path),e.staticpageLoadUrl="html/agreement/"+a.params.path+".html"}]}}}),t.otherwise(function(e,a){var t=e.get("$state");return t.go("content_error"),a.path()})}]).run(["$http","$rootScope","$scService",function(e,a){e.currentActiveRequest=[]}]),app.directive("topbar",["$timeout",function(e){return{restrict:"A",link:function(e,a,t){console.log("[topbar] Reflowing topbar...")}}}]),app.directive("topbar",["$timeout",function(e){return{restrict:"A",link:function(e,a,t){console.log("[topbar] Reflowing topbar...")}}}]),app.directive("yzSwitchLanguage",["$window","$store",function(e,a){return{restrict:"A",link:function(t,o,n){var i=n.yzSwitchLanguage;i&&o.on("click",function(){a.setValue("userLang",i),document.cookie="display_language="+i+"; path=/;",e.location.reload()})}}}]),app.filter("makeRange",function(){return function(e){for(var a=[+e[1]&&+e[0]||0,+e[1]||+e[0]],t=Math.min(a[0],a[1]),o=Math.max(a[0],a[1]),n=[],i=t;i<=Math.ceil(o);i++)n.push(Math.ceil(i));return a[0]>a[1]&&n.reverse(),n}}),app.filter("customIncrFilter",function(){return function(e,a,t){var o=[];e.length+t<t&&(t=e.length-t);for(var n=0;n<e.length;n+=t)o.push(e[n]);return o}}),app.filter("inAlter",function(){return function(e,a){for(var t=[],o=0;o<e.length;o+=2)t.push(e[o]);return t}}),app.filter("trim",function(){return function(e){return e?e.trim().replace(/[^a-z0-9]+/gi,""):""}}),app.factory("yzSocialHttpLanguageInterceptor",["$q","$rootScope","$store",function(e,a,t){return{request:function(o){var n=t.getValue("userLang")||(a.currentUser||{}).displayLanguage;return n&&(o.headers["x-yz-language"]=n),o||e.when(o)}}}]),app.factory("yzSocialHttpInterceptor",["$q","$rootScope","$store","$injector",function(e,a,t,o){return a.currentActiveRequest=[],a.http=null,a.i=0,{request:function(o){if(0==o.url.indexOf("/api/")){var n=t.get("userLang")||a.currentUser.displayLanguage;o.headers["x-yz-language"]=n}return o||e.when(o)},requestError:function(t){return a.http=a.http||o.get("$http"),a.http.pendingRequests.length<1,canRecover(t)?responseOrNewPromise:e.reject(t)},response:function(t){return a.http=a.http||o.get("$http"),a.http.pendingRequests.length<1,t||e.when(t)},responseError:function(t){return a.http=a.http||o.get("$http"),a.http.pendingRequests.length<1,canRecover(t)?responseOrNewPromise:e.reject(t)}}}]),define("socialcommerce",function(){}),!function(e,a,t){"use strict";function o(){for(var e=[],a="0123456789abcdef",t=0;36>t;t++)e[t]=a.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=a.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var o=e.join("");return o}function n(){return{restrict:"E",transclude:!0,scope:{onReady:"&",slidesPerView:"=",slidesPerColumn:"=",spaceBetween:"=",parallax:"=",parallaxTransition:"@",paginationIsActive:"=",paginationClickable:"=",showNavButtons:"=",showScrollBar:"=",loop:"=",autoplay:"=",initialSlide:"=",containerCls:"@",wrapperCls:"@",paginationCls:"@",slideCls:"@",direction:"@",swiper:"=",overrideParameters:"="},controller:["$scope","$element","$timeout",function(e,t,n){var i=o();e.swiper_uuid=i;var r={slidesPerView:e.slidesPerView||1,slidesPerColumn:e.slidesPerColumn||1,spaceBetween:e.spaceBetween||0,direction:e.direction||"horizontal",loop:e.loop||!1,initialSlide:e.initialSlide||0,showNavButtons:!1};a.isUndefined(e.autoplay)||"number"!=typeof e.autoplay||(r=a.extend({},r,{autoplay:e.autoplay})),e.paginationIsActive===!0&&(r=a.extend({},r,{paginationClickable:e.paginationClickable||!0,pagination:"#paginator-"+e.swiper_uuid})),e.showNavButtons===!0&&(r.nextButton="#nextButton-"+e.swiper_uuid,r.prevButton="#prevButton-"+e.swiper_uuid),e.showScrollBar===!0&&(r.scrollbar="#scrollBar-"+e.swiper_uuid),e.overrideParameters&&(r=a.extend({},r,e.overrideParameters)),n(function(){var o=null;a.isObject(e.swiper)?(e.swiper=new Swiper(t[0].firstChild,r),o=e.swiper):o=new Swiper(t[0].firstChild,r),a.isUndefined(e.onReady)||e.onReady({swiper:o})})}],link:function(e,t){var o=e.swiper_uuid,n="paginator-"+o,i="prevButton-"+o,r="nextButton-"+o,s="scrollBar-"+o,c=t[0];a.element(c.querySelector(".swiper-pagination")).attr("id",n),a.element(c.querySelector(".swiper-button-next")).attr("id",r),a.element(c.querySelector(".swiper-button-prev")).attr("id",i),a.element(t[0].querySelector(".swiper-scrollbar")).attr("id",s)},template:'<div class="swiper-container {{containerCls}}"><div class="parallax-bg" data-swiper-parallax="{{parallaxTransition}}" ng-show="parallax"></div><div class="swiper-wrapper {{wrapperCls}}" ng-transclude></div><div class="swiper-pagination {{paginationCls}}"></div><div class="swiper-button-next" ng-show="showNavButtons"></div><div class="swiper-button-prev" ng-show="showNavButtons"></div><div class="swiper-scrollbar" ng-show="showScrollBar"></div></div>'}}function i(){return{restrict:"E",require:"^ksSwiperContainer",transclude:!0,scope:{sliderCls:"@"},template:'<div class="swiper-slide {{sliderCls}}" ng-transclude></div>',replace:!0}}a.module("ksSwiper",[]).directive("ksSwiperContainer",n).directive("ksSwiperSlide",i)}(window,angular,void 0),define("ks_swiper",["idangerous.swiper2"],function(){}),app.directive("uiSearchPlatform",["$location","$rootScope","$state",function(e,a,t){return{restrict:"C",
link:function(o){function n(){var a=e.$$path.split("/");a.length>1&&"search"==a[1]?$(".txtsearch").val(a[2]):$(".txtsearch").val(""),"search-userprofile"==t.current.name?$(".inline-menu-userprofile").addClass("active-link"):"search-networkprofile"==t.current.name?$(".inline-menu-networkprofile").addClass("active-link"):"search-searchpost"==t.current.name?$(".inline-menu-networkpost").addClass("active-link"):$(".inline-menu-default").addClass("active-link")}console.log("uiSearchPlatform directive"),o.searchNow(),Pace.once("done",function(){window.scrollTo(0,0)}),a.linkifyText=function(e){var a=String(e);return a=a.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1'>$1</a>"),a.replace(/(^|\s)#(\w+)/g,'$1<a href="/search/$2/all">#$2</a>')},n(),$(".main-canvas").scrollTop(function(){console.log("scrolled ------------->>>>>");var e=$(".main-canvas");e.css("overflow-y","hidden"),e.scrollTop(0),e.css("overflow-y","auto"),console.log("scrolled ------------->>>>> androided")})}}}]),app.directive("uiTribeSearchAll",["$log","$timeout","$state","$apiService",function(e,a,t,o){return{restrict:"C",templateUrl:"/_partials/search/_widgets/ui-tribe-search-all",scope:{result:"=",setting:"="},link:function(a){e.info("all search directive"),a.params=t.params,a.redirectTo=function(e){t.go("search-grp",{searchKey:t.params.searchKey,group:e,from:1,size:10})},console.log(t.params.searchKey),a.openNewTab=function(e){window.open(e,"_blank")}}}}]),app.directive("uiTribeSearchUsers",["$log","$timeout",function(e,a){return{restrict:"C",templateUrl:"/_partials/search/_widgets/ui-tribe-search-users",scope:{result:"="},link:function(t){e.info("user search directive"),e.info(t.result),a(function(){console.log("thisz",t.result,"asdsa")},0)}}}]),app.directive("uiTribeSearchTribes",["$log",function(e){return{restrict:"C",templateUrl:"/_partials/search/_widgets/ui-tribe-search-tribes",scope:{result:"="},link:function(a){e.info("tribes search directive"),e.info(a.result),a.isSearchResultsPage=!0}}}]),app.directive("uiTribeSearchEvents",["$log","$timeout","$state","$apiService","$rootScope",function(e,a,t,o,n){return{restrict:"C",templateUrl:"/_partials/search/_widgets/ui-tribe-search-events",scope:{result:"="},link:function(e){e.showMore=!1,e.limitText=function(a){return e.showMore=!1,a?a.length>100?(e.showMore=!0,a.substring(0,100)):a:""},e.pagination={query:t.params.searchKey,from:t.params.from||1,size:t.params.size||10},e.showLoadMoreBox=!0,e.showLoadMoreLoading=!1,e.paginationBusy=!1,e.loadMoreEvents=function(){if(e.showLoadMoreLoading=!0,!e.paginationBusy){e.paginationBusy=!0,e.pagination.from++,e.tempResults={};var a={group:t.params.group,query:t.params.searchKey,page:e.pagination.from,count:t.params.size};o.search.getSearchPlatformGrouped(a,function(a,t){_.isEmpty(t.searchResults)?e.showLoadMoreBox=!1:t.searchResults.events.items.length>0?(e.showLoadMoreBox=!0,e.tempResults=t.searchResults.events,e.result.searchResults.events.items=_.union(e.result.searchResults.events.items,e.tempResults.items)):e.showLoadMoreBox=!1,e.showLoadMoreLoading=!1,e.paginationBusy=!1},function(a){e.showLoadMoreLoading=!1,e.paginationBusy=!1})}}}}}]),app.directive("uiTribeSearchWallposts",["$log","$location","$timeout","$state","$apiService","$rootScope",function(e,a,t,o,n,i){return{restrict:"C",templateUrl:"/_partials/search/_widgets/ui-tribe-search-wallposts",scope:{result:"="},link:function(e){e.showMore=!1,e.limitText=function(a){return e.showMore=!1,a?a.length>150?(e.showMore=!0,a.substring(0,150)):a:""},e.gotoPost=function(e){window.open(e,"_blank")},e.pagination={query:o.params.searchKey,from:o.params.from||1,size:o.params.size||10},e.showLoadMoreBox=!0,e.showLoadMoreLoading=!1,e.paginationBusy=!1,e.lodeMoreArticles=function(){if(e.showLoadMoreLoading=!0,!e.paginationBusy){e.paginationBusy=!0,e.pagination.from++,e.tempResults={};var a={group:"wallposts",query:o.params.searchKey,page:e.pagination.from,count:o.params.size};n.search.getSearchPlatformGrouped(a,function(a,t){_.isEmpty(t.searchResults)?e.showLoadMoreBox=!1:t.searchResults.articles.items.length>0?(e.showLoadMoreBox=!0,e.tempResults=t.searchResults.articles,e.result.searchResults.articles.items=_.union(e.result.searchResults.articles.items,e.tempResults.items)):e.showLoadMoreBox=!1,e.showLoadMoreLoading=!1,e.paginationBusy=!1},function(a){e.showLoadMoreLoading=!1,e.paginationBusy=!1})}},t(function(){console.log("this is tribe search wallposts",e.result,"asdsa")},0)}}}]),app.directive("uiTribeSearchProducts",["$log","$location","$timeout","$state","$apiService","$rootScope",function(e,a,t,o,n,i){return{restrict:"C",templateUrl:"/_partials/search/_widgets/ui-tribe-search-products",scope:{result:"=",autoLoad:"@",searchKey:"@",count:"@"},link:function(e){e.showMore=!1,e.limitText=function(a){return e.showMore=!1,a?a.length>100?(e.showMore=!0,a.substring(0,100)):a:""},e.getDecimalValue=function(e){return e&&e.rate&&(2==e.rate.display_type||3==e.rate.display_type)?0:2},e.viewProductDetails=function(e){window.location=e},e.pagination={query:o.params.searchKey||e.searchKey,from:o.params.from||1,size:o.params.size||10},e.showLoadMoreBox=!0,e.showLoadMoreLoading=!1,e.paginationBusy=!1,e.loadMoreProducts=function(){if(e.showLoadMoreLoading=!0,!e.paginationBusy){e.paginationBusy=!0,e.pagination.from++,e.tempResults={};var a={group:o.params.group||"products",query:o.params.searchKey||e.searchKey,page:e.pagination.from,count:o.params.size||e.count};n.search.getSearchPlatformGrouped(a,function(a,t){_.isEmpty(t.searchResults)?e.showLoadMoreBox=!1:t.searchResults.products.items.length>0?(e.showLoadMoreBox=!0,e.tempResults=t.searchResults.products,e.result.searchResults.products.items=_.union(e.result.searchResults.products.items,e.tempResults.items)):e.showLoadMoreBox=!1,e.showLoadMoreLoading=!1,e.paginationBusy=!1},function(a){e.showLoadMoreLoading=!1,e.paginationBusy=!1})}},"true"==e.autoLoad&&(e.result={searchResults:{products:{items:[]}}},e.loadMoreProducts())}}}]),app.directive("uiTribeSearchMerchants",["$log","$timeout",function(e,a){return{restrict:"C",templateUrl:"/_partials/search/_widgets/ui-tribe-search-merchants",scope:{result:"="},link:function(a){e.info("merchants search directive"),e.info(a.result)}}}]),app.directive("uiTribeSearchNetworks",["$log","$timeout",function(e,a){return{restrict:"C",templateUrl:"/_partials/search/_widgets/ui-tribe-search-tribes",scope:{result:"="},link:function(a){e.info("networks search directive"),e.info(a.result)}}}]),define("directive.search",function(){}),define("releases/socialcommerce_ext",function(){});