define(function(){!function(e){"use strict";e.module("angulartics.yz.analytics",["angulartics"]).config(["$analyticsProvider",function(e){function a(){this.dataLayer=window.dataLayer=window.dataLayer||[]}e.settings.ga={userId:null,trackRelativePath:!0};var t={delimiter:":",enableECommerce:!0,enableDemographics:!0,enableSocial:!0,defaults:{currency:"USD",tax:"1.29"}};e.registerPageTrack(function(a){console.log("Tracking page ....");var t=window.dataLayer=window.dataLayer||[];t.push({event:"content-view","content-name":a,userId:e.settings.ga.userId})}),e.registerSetUsername(function(a){e.settings.ga.userId=a}),a.prototype.addToCart=function(e,a){console.log("adding product to cart"),console.log(e),console.log(a),this.dataLayer.push({event:"addToCart",ecommerce:{currencyCode:e||t.defaults.currency,add:{products:a}}})},a.prototype.removeFromCart=function(e){console.log("remove product from cart"),this.dataLayer.push({event:"removeFromCart",ecommerce:{remove:{products:e}}})},a.prototype.purchase=function(e,a){console.log("purchased products"),this.dataLayer.push({event:"purchase",ecommerce:{purchase:{actionField:e,products:a}}})};var r=new a;e.registerEventTrack(function(a,n){var o,i,c,s=a?a.split(t.delimiter):a,u=window.dataLayer=window.dataLayer||[];if(n=n||{},s)switch(s.length){case 1:i=s[0];break;case 2:o=s[0],i=s[1];break;case 3:c=s[0],o=s[1],i=s[2];break;default:i=s[0]}if(s&&1!==s.length)if("ecommerce"===o&&t.enableECommerce)switch(console.log("tracking eCommerce"),i){case"addToCart":var d={id:n.id,name:n.name,sku:n.sku,category:n.category,price:n.price,quantity:n.quantity,dimension1:n.refnetwork,variant:n.variant};r.addToCart(n.currency,[d]);break;case"removeFromCart":var d={id:n.id,name:n.name,sku:n.sku,category:n.category,price:n.price,quantity:n.quantity,dimension1:n.refnetwork,variant:n.variant};r.removeFromCart([d]);break;case"purchase":var l={id:n.id,affiliation:n.affiliation,revenue:n.revenue,shipping:n.shipping,tax:n.tax};r.purchase(l,n.products);break;default:console.warn("No or wrong eCommerce action type was set")}else"social"===o&&t.enableSocial||"page"===o&&u.push({event:"content-view","content-name":n.url,userId:e.settings.ga.userId});else console.log("tracking custom event"),u.push({event:n.event||"interaction",target:n.category,action:a,"target-properties":n.label,value:n.value||1,"interaction-type":n.noninteraction,userId:e.settings.ga.userId}),n.hitCallback&&"function"==typeof n.hitCallback&&n.hitCallback()})}])}(angular)});